function hO(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}var Cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pO={exports:{}},Bf={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var I3=Object.getOwnPropertySymbols,WG=Object.prototype.hasOwnProperty,XG=Object.prototype.propertyIsEnumerable;function qG(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function YG(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(s){i[s]=s}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var mO=YG()?Object.assign:function(t,e){for(var r,n=qG(t),i,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)WG.call(r,o)&&(n[o]=r[o]);if(I3){i=I3(r);for(var a=0;a<i.length;a++)XG.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n},gO={exports:{}},ke={};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vx=mO,Wu=60103,vO=60106;ke.Fragment=60107;ke.StrictMode=60108;ke.Profiler=60114;var yO=60109,_O=60110,bO=60112;ke.Suspense=60113;var xO=60115,SO=60116;if(typeof Symbol=="function"&&Symbol.for){var $n=Symbol.for;Wu=$n("react.element"),vO=$n("react.portal"),ke.Fragment=$n("react.fragment"),ke.StrictMode=$n("react.strict_mode"),ke.Profiler=$n("react.profiler"),yO=$n("react.provider"),_O=$n("react.context"),bO=$n("react.forward_ref"),ke.Suspense=$n("react.suspense"),xO=$n("react.memo"),SO=$n("react.lazy")}var F3=typeof Symbol=="function"&&Symbol.iterator;function KG(t){return t===null||typeof t!="object"?null:(t=F3&&t[F3]||t["@@iterator"],typeof t=="function"?t:null)}function kf(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var wO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},EO={};function Xu(t,e,r){this.props=t,this.context=e,this.refs=EO,this.updater=r||wO}Xu.prototype.isReactComponent={};Xu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error(kf(85));this.updater.enqueueSetState(this,t,e,"setState")};Xu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CO(){}CO.prototype=Xu.prototype;function yx(t,e,r){this.props=t,this.context=e,this.refs=EO,this.updater=r||wO}var _x=yx.prototype=new CO;_x.constructor=yx;vx(_x,Xu.prototype);_x.isPureReactComponent=!0;var bx={current:null},TO=Object.prototype.hasOwnProperty,AO={key:!0,ref:!0,__self:!0,__source:!0};function PO(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)TO.call(e,n)&&!AO.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Wu,type:t,key:s,ref:o,props:i,_owner:bx.current}}function ZG(t,e){return{$$typeof:Wu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xx(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wu}function QG(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var L3=/\/+/g;function av(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QG(""+t.key):e.toString(36)}function sh(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wu:case vO:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+av(o,0):n,Array.isArray(i)?(r="",t!=null&&(r=t.replace(L3,"$&/")+"/"),sh(i,e,r,"",function(l){return l})):i!=null&&(xx(i)&&(i=ZG(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(L3,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Array.isArray(t))for(var a=0;a<t.length;a++){s=t[a];var u=n+av(s,a);o+=sh(s,e,r,u,i)}else if(u=KG(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=n+av(s,a++),o+=sh(s,e,r,u,i);else if(s==="object")throw e=""+t,Error(kf(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e));return o}function hd(t,e,r){if(t==null)return t;var n=[],i=0;return sh(t,n,"","",function(s){return e.call(r,s,i++)}),n}function JG(t){if(t._status===-1){var e=t._result;e=e(),t._status=0,t._result=e,e.then(function(r){t._status===0&&(r=r.default,t._status=1,t._result=r)},function(r){t._status===0&&(t._status=2,t._result=r)})}if(t._status===1)return t._result;throw t._result}var RO={current:null};function cs(){var t=RO.current;if(t===null)throw Error(kf(321));return t}var ez={ReactCurrentDispatcher:RO,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:bx,IsSomeRendererActing:{current:!1},assign:vx};ke.Children={map:hd,forEach:function(t,e,r){hd(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return hd(t,function(){e++}),e},toArray:function(t){return hd(t,function(e){return e})||[]},only:function(t){if(!xx(t))throw Error(kf(143));return t}};ke.Component=Xu;ke.PureComponent=yx;ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ez;ke.cloneElement=function(t,e,r){if(t==null)throw Error(kf(267,t));var n=vx({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bx.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)TO.call(e,u)&&!AO.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];n.children=a}return{$$typeof:Wu,type:t.type,key:i,ref:s,props:n,_owner:o}};ke.createContext=function(t,e){return e===void 0&&(e=null),t={$$typeof:_O,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider={$$typeof:yO,_context:t},t.Consumer=t};ke.createElement=PO;ke.createFactory=function(t){var e=PO.bind(null,t);return e.type=t,e};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:bO,render:t}};ke.isValidElement=xx;ke.lazy=function(t){return{$$typeof:SO,_payload:{_status:-1,_result:t},_init:JG}};ke.memo=function(t,e){return{$$typeof:xO,type:t,compare:e===void 0?null:e}};ke.useCallback=function(t,e){return cs().useCallback(t,e)};ke.useContext=function(t,e){return cs().useContext(t,e)};ke.useDebugValue=function(){};ke.useEffect=function(t,e){return cs().useEffect(t,e)};ke.useImperativeHandle=function(t,e,r){return cs().useImperativeHandle(t,e,r)};ke.useLayoutEffect=function(t,e){return cs().useLayoutEffect(t,e)};ke.useMemo=function(t,e){return cs().useMemo(t,e)};ke.useReducer=function(t,e,r){return cs().useReducer(t,e,r)};ke.useRef=function(t){return cs().useRef(t)};ke.useState=function(t){return cs().useState(t)};ke.version="17.0.2";gO.exports=ke;var M=gO.exports;const J=Zt(M),_u=hO({__proto__:null,default:J},[M]);/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tz=M,OO=60103;Bf.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var N3=Symbol.for;OO=N3("react.element"),Bf.Fragment=N3("react.fragment")}var rz=tz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nz=Object.prototype.hasOwnProperty,iz={key:!0,ref:!0,__self:!0,__source:!0};function BO(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)nz.call(e,n)&&!iz.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:OO,type:t,key:s,ref:o,props:i,_owner:rz.current}}Bf.jsx=BO;Bf.jsxs=BO;pO.exports=Bf;var kO=pO.exports;const sz=Zt(kO),oz=hO({__proto__:null,default:sz},[kO]);var DO={exports:{}},Fn={},MO={exports:{}},IO={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){var e,r,n,i;if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}if(typeof window>"u"||typeof MessageChannel!="function"){var u=null,l=null,c=function(){if(u!==null)try{var V=t.unstable_now();u(!0,V),u=null}catch(q){throw setTimeout(c,0),q}};e=function(V){u!==null?setTimeout(e,0,V):(u=V,setTimeout(c,0))},r=function(V,q){l=setTimeout(V,q)},n=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},i=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,d=window.clearTimeout;if(typeof console<"u"){var h=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof h!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var p=!1,m=null,g=-1,v=5,y=0;t.unstable_shouldYield=function(){return t.unstable_now()>=y},i=function(){},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):v=0<V?Math.floor(1e3/V):5};var b=new MessageChannel,_=b.port2;b.port1.onmessage=function(){if(m!==null){var V=t.unstable_now();y=V+v;try{m(!0,V)?_.postMessage(null):(p=!1,m=null)}catch(q){throw _.postMessage(null),q}}else p=!1},e=function(V){m=V,p||(p=!0,_.postMessage(null))},r=function(V,q){g=f(function(){V(t.unstable_now())},q)},n=function(){d(g),g=-1}}function x(V,q){var ie=V.length;V.push(q);e:for(;;){var ge=ie-1>>>1,be=V[ge];if(be!==void 0&&0<P(be,q))V[ge]=q,V[ie]=be,ie=ge;else break e}}function S(V){return V=V[0],V===void 0?null:V}function w(V){var q=V[0];if(q!==void 0){var ie=V.pop();if(ie!==q){V[0]=ie;e:for(var ge=0,be=V.length;ge<be;){var ot=2*(ge+1)-1,bt=V[ot],zt=ot+1,xt=V[zt];if(bt!==void 0&&0>P(bt,ie))xt!==void 0&&0>P(xt,bt)?(V[ge]=xt,V[zt]=ie,ge=zt):(V[ge]=bt,V[ot]=ie,ge=ot);else if(xt!==void 0&&0>P(xt,ie))V[ge]=xt,V[zt]=ie,ge=zt;else break e}}return q}return null}function P(V,q){var ie=V.sortIndex-q.sortIndex;return ie!==0?ie:V.id-q.id}var C=[],R=[],F=1,N=null,G=3,j=!1,re=!1,U=!1;function z(V){for(var q=S(R);q!==null;){if(q.callback===null)w(R);else if(q.startTime<=V)w(R),q.sortIndex=q.expirationTime,x(C,q);else break;q=S(R)}}function pe(V){if(U=!1,z(V),!re)if(S(C)!==null)re=!0,e(ae);else{var q=S(R);q!==null&&r(pe,q.startTime-V)}}function ae(V,q){re=!1,U&&(U=!1,n()),j=!0;var ie=G;try{for(z(q),N=S(C);N!==null&&(!(N.expirationTime>q)||V&&!t.unstable_shouldYield());){var ge=N.callback;if(typeof ge=="function"){N.callback=null,G=N.priorityLevel;var be=ge(N.expirationTime<=q);q=t.unstable_now(),typeof be=="function"?N.callback=be:N===S(C)&&w(C),z(q)}else w(C);N=S(C)}if(N!==null)var ot=!0;else{var bt=S(R);bt!==null&&r(pe,bt.startTime-q),ot=!1}return ot}finally{N=null,G=ie,j=!1}}var we=i;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){re||j||(re=!0,e(ae))},t.unstable_getCurrentPriorityLevel=function(){return G},t.unstable_getFirstCallbackNode=function(){return S(C)},t.unstable_next=function(V){switch(G){case 1:case 2:case 3:var q=3;break;default:q=G}var ie=G;G=q;try{return V()}finally{G=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=we,t.unstable_runWithPriority=function(V,q){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var ie=G;G=V;try{return q()}finally{G=ie}},t.unstable_scheduleCallback=function(V,q,ie){var ge=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ge+ie:ge):ie=ge,V){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=ie+be,V={id:F++,callback:q,priorityLevel:V,startTime:ie,expirationTime:be,sortIndex:-1},ie>ge?(V.sortIndex=ie,x(R,V),S(C)===null&&V===S(R)&&(U?n():U=!0,r(pe,ie-ge))):(V.sortIndex=be,x(C,V),re||j||(re=!0,e(ae))),V},t.unstable_wrapCallback=function(V){var q=G;return function(){var ie=G;G=q;try{return V.apply(this,arguments)}finally{G=ie}}}})(IO);MO.exports=IO;var Py=MO.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp=M,st=mO,qt=Py;function Q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Jp)throw Error(Q(227));var FO=new Set,Lc={};function Jo(t,e){bu(t,e),bu(t+"Capture",e)}function bu(t,e){for(Lc[t]=e,t=0;t<e.length;t++)FO.add(e[t])}var Ji=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),az=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U3=Object.prototype.hasOwnProperty,G3={},z3={};function uz(t){return U3.call(z3,t)?!0:U3.call(G3,t)?!1:az.test(t)?z3[t]=!0:(G3[t]=!0,!1)}function lz(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cz(t,e,r,n){if(e===null||typeof e>"u"||lz(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rr(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var or={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){or[t]=new Rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];or[e]=new Rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){or[t]=new Rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){or[t]=new Rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){or[t]=new Rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){or[t]=new Rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){or[t]=new Rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){or[t]=new Rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){or[t]=new Rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sx=/[\-:]([a-z])/g;function wx(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sx,wx);or[e]=new Rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sx,wx);or[e]=new Rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sx,wx);or[e]=new Rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){or[t]=new Rr(t,1,!1,t.toLowerCase(),null,!1,!1)});or.xlinkHref=new Rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){or[t]=new Rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ex(t,e,r,n){var i=or.hasOwnProperty(e)?or[e]:null,s=i!==null?i.type===0:n?!1:!(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N");s||(cz(e,r,i,n)&&(r=null),n||i===null?uz(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var ea=Jp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=60103,Ro=60106,ws=60107,Cx=60108,dc=60114,Tx=60109,Ax=60110,em=60112,hc=60113,Nh=60120,tm=60115,Px=60116,Rx=60121,Ox=60128,LO=60129,Bx=60130,Ry=60131;if(typeof Symbol=="function"&&Symbol.for){var jt=Symbol.for;Ql=jt("react.element"),Ro=jt("react.portal"),ws=jt("react.fragment"),Cx=jt("react.strict_mode"),dc=jt("react.profiler"),Tx=jt("react.provider"),Ax=jt("react.context"),em=jt("react.forward_ref"),hc=jt("react.suspense"),Nh=jt("react.suspense_list"),tm=jt("react.memo"),Px=jt("react.lazy"),Rx=jt("react.block"),jt("react.scope"),Ox=jt("react.opaque.id"),LO=jt("react.debug_trace_mode"),Bx=jt("react.offscreen"),Ry=jt("react.legacy_hidden")}var $3=typeof Symbol=="function"&&Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=$3&&t[$3]||t["@@iterator"],typeof t=="function"?t:null)}var uv;function Jl(t){if(uv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);uv=e&&e[1]||""}return`
`+uv+t}var lv=!1;function pd(t,e){if(!t||lv)return"";lv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a])return`
`+i[o].replace(" at new "," at ");while(1<=o&&0<=a);break}}}finally{lv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Jl(t):""}function fz(t){switch(t.tag){case 5:return Jl(t.type);case 16:return Jl("Lazy");case 13:return Jl("Suspense");case 19:return Jl("SuspenseList");case 0:case 2:case 15:return t=pd(t.type,!1),t;case 11:return t=pd(t.type.render,!1),t;case 22:return t=pd(t.type._render,!1),t;case 1:return t=pd(t.type,!0),t;default:return""}}function qa(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case Ro:return"Portal";case dc:return"Profiler";case Cx:return"StrictMode";case hc:return"Suspense";case Nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ax:return(t.displayName||"Context")+".Consumer";case Tx:return(t._context.displayName||"Context")+".Provider";case em:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case tm:return qa(t.type);case Rx:return qa(t._render);case Px:e=t._payload,t=t._init;try{return qa(t(e))}catch{}}return null}function Ys(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function NO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dz(t){var e=NO(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function md(t){t._valueTracker||(t._valueTracker=dz(t))}function UO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=NO(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Uh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Oy(t,e){var r=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function j3(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Ys(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function GO(t,e){e=e.checked,e!=null&&Ex(t,"checked",e,!1)}function By(t,e){GO(t,e);var r=Ys(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ky(t,e.type,r):e.hasOwnProperty("defaultValue")&&ky(t,e.type,Ys(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H3(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ky(t,e,r){(e!=="number"||Uh(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}function hz(t){var e="";return Jp.Children.forEach(t,function(r){r!=null&&(e+=r)}),e}function Dy(t,e){return t=st({children:void 0},e),(e=hz(e.children))&&(t.children=e),t}function Ya(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Ys(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function My(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Q(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function V3(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Q(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Q(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ys(r)}}function zO(t,e){var r=Ys(e.value),n=Ys(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function W3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}var Iy={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function $O(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fy(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$O(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gd,jO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!==Iy.svg||"innerHTML"in t)t.innerHTML=e;else{for(gd=gd||document.createElement("div"),gd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Nc(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var pc={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pz=["Webkit","ms","Moz","O"];Object.keys(pc).forEach(function(t){pz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),pc[e]=pc[t]})});function HO(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||pc.hasOwnProperty(t)&&pc[t]?(""+e).trim():e+"px"}function VO(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=HO(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var mz=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ly(t,e){if(e){if(mz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Q(60));if(!(typeof e.dangerouslySetInnerHTML=="object"&&"__html"in e.dangerouslySetInnerHTML))throw Error(Q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Q(62))}}function Ny(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kx(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Uy=null,Ka=null,Za=null;function X3(t){if(t=Mf(t)){if(typeof Uy!="function")throw Error(Q(280));var e=t.stateNode;e&&(e=am(e),Uy(t.stateNode,t.type,e))}}function WO(t){Ka?Za?Za.push(t):Za=[t]:Ka=t}function XO(){if(Ka){var t=Ka,e=Za;if(Za=Ka=null,X3(t),e)for(t=0;t<e.length;t++)X3(e[t])}}function Dx(t,e){return t(e)}function qO(t,e,r,n,i){return t(e,r,n,i)}function Mx(){}var YO=Dx,Oo=!1,cv=!1;function Ix(){(Ka!==null||Za!==null)&&(Mx(),XO())}function gz(t,e,r){if(cv)return t(e,r);cv=!0;try{return YO(t,e,r)}finally{cv=!1,Ix()}}function Uc(t,e){var r=t.stateNode;if(r===null)return null;var n=am(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Q(231,e,typeof r));return r}var Gy=!1;if(Ji)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){Gy=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{Gy=!1}function vz(t,e,r,n,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(c){this.onError(c)}}var mc=!1,Gh=null,zh=!1,zy=null,yz={onError:function(t){mc=!0,Gh=t}};function _z(t,e,r,n,i,s,o,a,u){mc=!1,Gh=null,vz.apply(yz,arguments)}function bz(t,e,r,n,i,s,o,a,u){if(_z.apply(this,arguments),mc){if(mc){var l=Gh;mc=!1,Gh=null}else throw Error(Q(198));zh||(zh=!0,zy=l)}}function ta(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&1026&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function KO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q3(t){if(ta(t)!==t)throw Error(Q(188))}function xz(t){var e=t.alternate;if(!e){if(e=ta(t),e===null)throw Error(Q(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return q3(i),t;if(s===n)return q3(i),e;s=s.sibling}throw Error(Q(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(Q(189))}}if(r.alternate!==n)throw Error(Q(190))}if(r.tag!==3)throw Error(Q(188));return r.stateNode.current===r?t:e}function ZO(t){if(t=xz(t),!t)return null;for(var e=t;;){if(e.tag===5||e.tag===6)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function Y3(t,e){for(var r=t.alternate;e!==null;){if(e===t||e===r)return!0;e=e.return}return!1}var QO,Fx,JO,eB,$y=!1,pi=[],Is=null,Fs=null,Ls=null,Gc=new Map,zc=new Map,Al=[],K3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jy(t,e,r,n,i){return{blockedOn:t,domEventName:e,eventSystemFlags:r|16,nativeEvent:i,targetContainers:[n]}}function Z3(t,e){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":Gc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":zc.delete(e.pointerId)}}function Pl(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t=jy(e,r,n,i,s),e!==null&&(e=Mf(e),e!==null&&Fx(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Sz(t,e,r,n,i){switch(e){case"focusin":return Is=Pl(Is,t,e,r,n,i),!0;case"dragenter":return Fs=Pl(Fs,t,e,r,n,i),!0;case"mouseover":return Ls=Pl(Ls,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return Gc.set(s,Pl(Gc.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,zc.set(s,Pl(zc.get(s)||null,t,e,r,n,i)),!0}return!1}function wz(t){var e=Bo(t.target);if(e!==null){var r=ta(e);if(r!==null){if(e=r.tag,e===13){if(e=KO(r),e!==null){t.blockedOn=e,eB(t.lanePriority,function(){qt.unstable_runWithPriority(t.priority,function(){JO(r)})});return}}else if(e===3&&r.stateNode.hydrate){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function oh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Gx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null)return e=Mf(r),e!==null&&Fx(e),t.blockedOn=r,!1;e.shift()}return!0}function Q3(t,e,r){oh(t)&&r.delete(e)}function Ez(){for($y=!1;0<pi.length;){var t=pi[0];if(t.blockedOn!==null){t=Mf(t.blockedOn),t!==null&&QO(t);break}for(var e=t.targetContainers;0<e.length;){var r=Gx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r!==null){t.blockedOn=r;break}e.shift()}t.blockedOn===null&&pi.shift()}Is!==null&&oh(Is)&&(Is=null),Fs!==null&&oh(Fs)&&(Fs=null),Ls!==null&&oh(Ls)&&(Ls=null),Gc.forEach(Q3),zc.forEach(Q3)}function Rl(t,e){t.blockedOn===e&&(t.blockedOn=null,$y||($y=!0,qt.unstable_scheduleCallback(qt.unstable_NormalPriority,Ez)))}function tB(t){function e(i){return Rl(i,t)}if(0<pi.length){Rl(pi[0],t);for(var r=1;r<pi.length;r++){var n=pi[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Is!==null&&Rl(Is,t),Fs!==null&&Rl(Fs,t),Ls!==null&&Rl(Ls,t),Gc.forEach(e),zc.forEach(e),r=0;r<Al.length;r++)n=Al[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Al.length&&(r=Al[0],r.blockedOn===null);)wz(r),r.blockedOn===null&&Al.shift()}function vd(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ia={animationend:vd("Animation","AnimationEnd"),animationiteration:vd("Animation","AnimationIteration"),animationstart:vd("Animation","AnimationStart"),transitionend:vd("Transition","TransitionEnd")},fv={},rB={};Ji&&(rB=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function rm(t){if(fv[t])return fv[t];if(!Ia[t])return t;var e=Ia[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rB)return fv[t]=e[r];return t}var nB=rm("animationend"),iB=rm("animationiteration"),sB=rm("animationstart"),oB=rm("transitionend"),aB=new Map,Lx=new Map,Cz=["abort","abort",nB,"animationEnd",iB,"animationIteration",sB,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",oB,"transitionEnd","waiting","waiting"];function Nx(t,e){for(var r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Lx.set(n,e),aB.set(n,i),Jo(i,[n])}}var Tz=qt.unstable_now;Tz();var Xe=8;function Oa(t){if(1&t)return Xe=15,1;if(2&t)return Xe=14,2;if(4&t)return Xe=13,4;var e=24&t;return e!==0?(Xe=12,e):t&32?(Xe=11,32):(e=192&t,e!==0?(Xe=10,e):t&256?(Xe=9,256):(e=3584&t,e!==0?(Xe=8,e):t&4096?(Xe=7,4096):(e=4186112&t,e!==0?(Xe=6,e):(e=62914560&t,e!==0?(Xe=5,e):t&67108864?(Xe=4,67108864):t&134217728?(Xe=3,134217728):(e=805306368&t,e!==0?(Xe=2,e):1073741824&t?(Xe=1,1073741824):(Xe=8,t))))))}function Az(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Pz(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Q(358,t))}}function $c(t,e){var r=t.pendingLanes;if(r===0)return Xe=0;var n=0,i=0,s=t.expiredLanes,o=t.suspendedLanes,a=t.pingedLanes;if(s!==0)n=s,i=Xe=15;else if(s=r&134217727,s!==0){var u=s&~o;u!==0?(n=Oa(u),i=Xe):(a&=s,a!==0&&(n=Oa(a),i=Xe))}else s=r&~o,s!==0?(n=Oa(s),i=Xe):a!==0&&(n=Oa(a),i=Xe);if(n===0)return 0;if(n=31-Ks(n),n=r&((0>n?0:1<<n)<<1)-1,e!==0&&e!==n&&!(e&o)){if(Oa(e),i<=Xe)return e;Xe=i}if(e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ks(e),i=1<<r,n|=t[r],e&=~i;return n}function uB(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $h(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return t=Ba(24&~e),t===0?$h(10,e):t;case 10:return t=Ba(192&~e),t===0?$h(8,e):t;case 8:return t=Ba(3584&~e),t===0&&(t=Ba(4186112&~e),t===0&&(t=512)),t;case 2:return e=Ba(805306368&~e),e===0&&(e=268435456),e}throw Error(Q(358,t))}function Ba(t){return t&-t}function dv(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function nm(t,e,r){t.pendingLanes|=e;var n=e-1;t.suspendedLanes&=n,t.pingedLanes&=n,t=t.eventTimes,e=31-Ks(e),t[e]=r}var Ks=Math.clz32?Math.clz32:Bz,Rz=Math.log,Oz=Math.LN2;function Bz(t){return t===0?32:31-(Rz(t)/Oz|0)|0}var kz=qt.unstable_UserBlockingPriority,Dz=qt.unstable_runWithPriority,ah=!0;function Mz(t,e,r,n){Oo||Mx();var i=Ux,s=Oo;Oo=!0;try{qO(i,t,e,r,n)}finally{(Oo=s)||Ix()}}function Iz(t,e,r,n){Dz(kz,Ux.bind(null,t,e,r,n))}function Ux(t,e,r,n){if(ah){var i;if((i=(e&4)===0)&&0<pi.length&&-1<K3.indexOf(t))t=jy(null,t,e,r,n),pi.push(t);else{var s=Gx(t,e,r,n);if(s===null)i&&Z3(t,n);else{if(i){if(-1<K3.indexOf(t)){t=jy(s,t,e,r,n),pi.push(t);return}if(Sz(s,t,e,r,n))return;Z3(t,n)}xB(t,e,n,null,r)}}}}function Gx(t,e,r,n){var i=kx(n);if(i=Bo(i),i!==null){var s=ta(i);if(s===null)i=null;else{var o=s.tag;if(o===13){if(i=KO(s),i!==null)return i;i=null}else if(o===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return xB(t,e,n,i,r),null}var Ts=null,zx=null,uh=null;function lB(){if(uh)return uh;var t,e=zx,r=e.length,n,i="value"in Ts?Ts.value:Ts.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return uh=i.slice(t,1<n?1-n:void 0)}function lh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yd(){return!0}function J3(){return!1}function gn(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yd:J3,this.isPropagationStopped=J3,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=yd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=yd)},persist:function(){},isPersistent:yd}),e}var qu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$x=gn(qu),Df=st({},qu,{view:0,detail:0}),Fz=gn(Df),hv,pv,Ol,im=st({},Df,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jx,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ol&&(Ol&&t.type==="mousemove"?(hv=t.screenX-Ol.screenX,pv=t.screenY-Ol.screenY):pv=hv=0,Ol=t),hv)},movementY:function(t){return"movementY"in t?t.movementY:pv}}),eE=gn(im),Lz=st({},im,{dataTransfer:0}),Nz=gn(Lz),Uz=st({},Df,{relatedTarget:0}),mv=gn(Uz),Gz=st({},qu,{animationName:0,elapsedTime:0,pseudoElement:0}),zz=gn(Gz),$z=st({},qu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jz=gn($z),Hz=st({},qu,{data:0}),tE=gn(Hz),Vz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Xz[t])?!!e[t]:!1}function jx(){return qz}var Yz=st({},Df,{key:function(t){if(t.key){var e=Vz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=lh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jx,charCode:function(t){return t.type==="keypress"?lh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?lh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Kz=gn(Yz),Zz=st({},im,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rE=gn(Zz),Qz=st({},Df,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jx}),Jz=gn(Qz),e$=st({},qu,{propertyName:0,elapsedTime:0,pseudoElement:0}),t$=gn(e$),r$=st({},im,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),n$=gn(r$),i$=[9,13,27,32],Hx=Ji&&"CompositionEvent"in window,gc=null;Ji&&"documentMode"in document&&(gc=document.documentMode);var s$=Ji&&"TextEvent"in window&&!gc,cB=Ji&&(!Hx||gc&&8<gc&&11>=gc),nE=String.fromCharCode(32),iE=!1;function fB(t,e){switch(t){case"keyup":return i$.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dB(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function o$(t,e){switch(t){case"compositionend":return dB(e);case"keypress":return e.which!==32?null:(iE=!0,nE);case"textInput":return t=e.data,t===nE&&iE?null:t;default:return null}}function a$(t,e){if(Fa)return t==="compositionend"||!Hx&&fB(t,e)?(t=lB(),uh=zx=Ts=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cB&&e.locale!=="ko"?null:e.data;default:return null}}var u$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function sE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!u$[t.type]:e==="textarea"}function hB(t,e,r,n){WO(n),e=jh(e,"onChange"),0<e.length&&(r=new $x("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var vc=null,jc=null;function l$(t){yB(t,0)}function sm(t){var e=Na(t);if(UO(e))return t}function c$(t,e){if(t==="change")return e}var pB=!1;if(Ji){var gv;if(Ji){var vv="oninput"in document;if(!vv){var oE=document.createElement("div");oE.setAttribute("oninput","return;"),vv=typeof oE.oninput=="function"}gv=vv}else gv=!1;pB=gv&&(!document.documentMode||9<document.documentMode)}function aE(){vc&&(vc.detachEvent("onpropertychange",mB),jc=vc=null)}function mB(t){if(t.propertyName==="value"&&sm(jc)){var e=[];if(hB(e,jc,t,kx(t)),t=l$,Oo)t(e);else{Oo=!0;try{Dx(t,e)}finally{Oo=!1,Ix()}}}}function f$(t,e,r){t==="focusin"?(aE(),vc=e,jc=r,vc.attachEvent("onpropertychange",mB)):t==="focusout"&&aE()}function d$(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sm(jc)}function h$(t,e){if(t==="click")return sm(e)}function p$(t,e){if(t==="input"||t==="change")return sm(e)}function m$(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var An=typeof Object.is=="function"?Object.is:m$,g$=Object.prototype.hasOwnProperty;function Hc(t,e){if(An(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!g$.call(e,r[n])||!An(t[r[n]],e[r[n]]))return!1;return!0}function uE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function lE(t,e){var r=uE(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=uE(r)}}function gB(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?gB(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cE(){for(var t=window,e=Uh();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Uh(t.document)}return e}function Hy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var v$=Ji&&"documentMode"in document&&11>=document.documentMode,La=null,Vy=null,yc=null,Wy=!1;function fE(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Wy||La==null||La!==Uh(n)||(n=La,"selectionStart"in n&&Hy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yc&&Hc(yc,n)||(yc=n,n=jh(Vy,"onSelect"),0<n.length&&(e=new $x("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=La)))}Nx("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Nx("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Nx(Cz,2);for(var dE="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),yv=0;yv<dE.length;yv++)Lx.set(dE[yv],0);bu("onMouseEnter",["mouseout","mouseover"]);bu("onMouseLeave",["mouseout","mouseover"]);bu("onPointerEnter",["pointerout","pointerover"]);bu("onPointerLeave",["pointerout","pointerover"]);Jo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vB=new Set("cancel close invalid load scroll toggle".split(" ").concat(ec));function hE(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,bz(n,e,void 0,t),t.currentTarget=null}function yB(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;hE(i,a,l),s=u}else for(o=0;o<n.length;o++){if(a=n[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;hE(i,a,l),s=u}}}if(zh)throw t=zy,zh=!1,zy=null,t}function Ke(t,e){var r=wB(e),n=t+"__bubble";r.has(n)||(bB(e,t,2,!1),r.add(n))}var pE="_reactListening"+Math.random().toString(36).slice(2);function _B(t){t[pE]||(t[pE]=!0,FO.forEach(function(e){vB.has(e)||mE(e,!1,t,null),mE(e,!0,t,null)}))}function mE(t,e,r,n){var i=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=r;if(t==="selectionchange"&&r.nodeType!==9&&(s=r.ownerDocument),n!==null&&!e&&vB.has(t)){if(t!=="scroll")return;i|=2,s=n}var o=wB(s),a=t+"__"+(e?"capture":"bubble");o.has(a)||(e&&(i|=4),bB(s,t,i,e),o.add(a))}function bB(t,e,r,n){var i=Lx.get(e);switch(i===void 0?2:i){case 0:i=Mz;break;case 1:i=Iz;break;default:i=Ux}r=i.bind(null,e,r,t),i=void 0,!Gy||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function xB(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Bo(a),o===null)return;if(u=o.tag,u===5||u===6){n=s=o;continue e}a=a.parentNode}}n=n.return}gz(function(){var l=s,c=kx(r),f=[];e:{var d=aB.get(t);if(d!==void 0){var h=$x,p=t;switch(t){case"keypress":if(lh(r)===0)break e;case"keydown":case"keyup":h=Kz;break;case"focusin":p="focus",h=mv;break;case"focusout":p="blur",h=mv;break;case"beforeblur":case"afterblur":h=mv;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=eE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Nz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Jz;break;case nB:case iB:case sB:h=zz;break;case oB:h=t$;break;case"scroll":h=Fz;break;case"wheel":h=n$;break;case"copy":case"cut":case"paste":h=jz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rE}var m=(e&4)!==0,g=!m&&t==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var y=l,b;y!==null;){b=y;var _=b.stateNode;if(b.tag===5&&_!==null&&(b=_,v!==null&&(_=Uc(y,v),_!=null&&m.push(Vc(y,_,b)))),g)break;y=y.return}0<m.length&&(d=new h(d,p,null,r,c),f.push({event:d,listeners:m}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&!(e&16)&&(p=r.relatedTarget||r.fromElement)&&(Bo(p)||p[Yu]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=r.relatedTarget||r.toElement,h=l,p=p?Bo(p):null,p!==null&&(g=ta(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=eE,_="onMouseLeave",v="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(m=rE,_="onPointerLeave",v="onPointerEnter",y="pointer"),g=h==null?d:Na(h),b=p==null?d:Na(p),d=new m(_,y+"leave",h,r,c),d.target=g,d.relatedTarget=b,_=null,Bo(c)===l&&(m=new m(v,y+"enter",p,r,c),m.target=b,m.relatedTarget=g,_=m),g=_,h&&p)t:{for(m=h,v=p,y=0,b=m;b;b=pa(b))y++;for(b=0,_=v;_;_=pa(_))b++;for(;0<y-b;)m=pa(m),y--;for(;0<b-y;)v=pa(v),b--;for(;y--;){if(m===v||v!==null&&m===v.alternate)break t;m=pa(m),v=pa(v)}m=null}else m=null;h!==null&&gE(f,d,h,m,!1),p!==null&&g!==null&&gE(f,g,p,m,!0)}}e:{if(d=l?Na(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=c$;else if(sE(d))if(pB)x=p$;else{x=d$;var S=f$}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=h$);if(x&&(x=x(t,l))){hB(f,x,r,c);break e}S&&S(t,d,l),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&ky(d,"number",d.value)}switch(S=l?Na(l):window,t){case"focusin":(sE(S)||S.contentEditable==="true")&&(La=S,Vy=l,yc=null);break;case"focusout":yc=Vy=La=null;break;case"mousedown":Wy=!0;break;case"contextmenu":case"mouseup":case"dragend":Wy=!1,fE(f,r,c);break;case"selectionchange":if(v$)break;case"keydown":case"keyup":fE(f,r,c)}var w;if(Hx)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Fa?fB(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(cB&&r.locale!=="ko"&&(Fa||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fa&&(w=lB()):(Ts=c,zx="value"in Ts?Ts.value:Ts.textContent,Fa=!0)),S=jh(l,P),0<S.length&&(P=new tE(P,t,null,r,c),f.push({event:P,listeners:S}),w?P.data=w:(w=dB(r),w!==null&&(P.data=w)))),(w=s$?o$(t,r):a$(t,r))&&(l=jh(l,"onBeforeInput"),0<l.length&&(c=new tE("onBeforeInput","beforeinput",null,r,c),f.push({event:c,listeners:l}),c.data=w))}yB(f,e)})}function Vc(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jh(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Uc(t,r),s!=null&&n.unshift(Vc(t,s,i)),s=Uc(t,e),s!=null&&n.push(Vc(t,s,i))),t=t.return}return n}function pa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gE(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,u=a.alternate,l=a.stateNode;if(u!==null&&u===n)break;a.tag===5&&l!==null&&(a=l,i?(u=Uc(r,s),u!=null&&o.unshift(Vc(r,u,a))):i||(u=Uc(r,s),u!=null&&o.push(Vc(r,u,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}function Hh(){}var _v=null,bv=null;function SB(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Xy(t,e){return t==="textarea"||t==="option"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vE=typeof setTimeout=="function"?setTimeout:void 0,y$=typeof clearTimeout=="function"?clearTimeout:void 0;function Vx(t){t.nodeType===1?t.textContent="":t.nodeType===9&&(t=t.body,t!=null&&(t.textContent=""))}function Qa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break}return t}function yE(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var xv=0;function _$(t){return{$$typeof:Ox,toString:t,valueOf:t}}var om=Math.random().toString(36).slice(2),As="__reactFiber$"+om,Vh="__reactProps$"+om,Yu="__reactContainer$"+om,_E="__reactEvents$"+om;function Bo(t){var e=t[As];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Yu]||r[As]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=yE(t);t!==null;){if(r=t[As])return r;t=yE(t)}return e}t=r,r=t.parentNode}return null}function Mf(t){return t=t[As]||t[Yu],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Na(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Q(33))}function am(t){return t[Vh]||null}function wB(t){var e=t[_E];return e===void 0&&(e=t[_E]=new Set),e}var qy=[],Ua=-1;function ao(t){return{current:t}}function Qe(t){0>Ua||(t.current=qy[Ua],qy[Ua]=null,Ua--)}function gt(t,e){Ua++,qy[Ua]=t.current,t.current=e}var Zs={},vr=ao(Zs),Ur=ao(!1),$o=Zs;function xu(t,e){var r=t.type.contextTypes;if(!r)return Zs;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Gr(t){return t=t.childContextTypes,t!=null}function Wh(){Qe(Ur),Qe(vr)}function bE(t,e,r){if(vr.current!==Zs)throw Error(Q(168));gt(vr,e),gt(Ur,r)}function EB(t,e,r){var n=t.stateNode;if(t=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(Q(108,qa(e)||"Unknown",i));return st({},r,n)}function ch(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Zs,$o=vr.current,gt(vr,t),gt(Ur,Ur.current),!0}function xE(t,e,r){var n=t.stateNode;if(!n)throw Error(Q(169));r?(t=EB(t,e,$o),n.__reactInternalMemoizedMergedChildContext=t,Qe(Ur),Qe(vr),gt(vr,t)):Qe(Ur),gt(Ur,r)}var Wx=null,Fo=null,b$=qt.unstable_runWithPriority,Xx=qt.unstable_scheduleCallback,Yy=qt.unstable_cancelCallback,x$=qt.unstable_shouldYield,SE=qt.unstable_requestPaint,Ky=qt.unstable_now,S$=qt.unstable_getCurrentPriorityLevel,um=qt.unstable_ImmediatePriority,CB=qt.unstable_UserBlockingPriority,TB=qt.unstable_NormalPriority,AB=qt.unstable_LowPriority,PB=qt.unstable_IdlePriority,Sv={},w$=SE!==void 0?SE:function(){},ji=null,fh=null,wv=!1,wE=Ky(),hr=1e4>wE?Ky:function(){return Ky()-wE};function Su(){switch(S$()){case um:return 99;case CB:return 98;case TB:return 97;case AB:return 96;case PB:return 95;default:throw Error(Q(332))}}function RB(t){switch(t){case 99:return um;case 98:return CB;case 97:return TB;case 96:return AB;case 95:return PB;default:throw Error(Q(332))}}function jo(t,e){return t=RB(t),b$(t,e)}function Wc(t,e,r){return t=RB(t),Xx(t,e,r)}function Ii(){if(fh!==null){var t=fh;fh=null,Yy(t)}OB()}function OB(){if(!wv&&ji!==null){wv=!0;var t=0;try{var e=ji;jo(99,function(){for(;t<e.length;t++){var r=e[t];do r=r(!0);while(r!==null)}}),ji=null}catch(r){throw ji!==null&&(ji=ji.slice(t+1)),Xx(um,Ii),r}finally{wv=!1}}}var E$=ea.ReactCurrentBatchConfig;function Vn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Xh=ao(null),qh=null,Ga=null,Yh=null;function qx(){Yh=Ga=qh=null}function Yx(t){var e=Xh.current;Qe(Xh),t.type._context._currentValue=e}function BB(t,e){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)===e){if(r===null||(r.childLanes&e)===e)break;r.childLanes|=e}else t.childLanes|=e,r!==null&&(r.childLanes|=e);t=t.return}}function Ja(t,e){qh=t,Yh=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xn=!0),t.firstContext=null)}function Mn(t,e){if(Yh!==t&&e!==!1&&e!==0)if((typeof e!="number"||e===1073741823)&&(Yh=t,e=1073741823),e={context:t,observedBits:e,next:null},Ga===null){if(qh===null)throw Error(Q(308));Ga=e,qh.dependencies={lanes:0,firstContext:e,responders:null}}else Ga=Ga.next=e;return t._currentValue}var bs=!1;function Kx(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function kB(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ns(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Us(t,e){if(t=t.updateQueue,t!==null){t=t.shared;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}}function EE(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Xc(t,e,r,n){var i=t.updateQueue;bs=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=t.alternate;if(c!==null){c=c.updateQueue;var f=c.lastBaseUpdate;f!==o&&(f===null?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(s!==null){f=i.baseState,o=0,c=l=u=null;do{a=s.lane;var d=s.eventTime;if((n&a)===a){c!==null&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=t,p=s;switch(a=e,d=r,p.tag){case 1:if(h=p.payload,typeof h=="function"){f=h.call(d,f,a);break e}f=h;break e;case 3:h.flags=h.flags&-4097|64;case 0:if(h=p.payload,a=typeof h=="function"?h.call(d,f,a):h,a==null)break e;f=st({},f,a);break e;case 2:bs=!0}}s.callback!==null&&(t.flags|=32,a=i.effects,a===null?i.effects=[s]:a.push(s))}else d={eventTime:d,lane:a,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(l=c=d,u=f):c=c.next=d,o|=a;if(s=s.next,s===null){if(a=i.shared.pending,a===null)break;s=a.next,a.next=null,i.lastBaseUpdate=a,i.shared.pending=null}}while(1);c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,Ff|=o,t.lanes=o,t.memoizedState=f}}function CE(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(Q(191,i));i.call(n)}}}var DB=new Jp.Component().refs;function Kh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:st({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var lm={isMounted:function(t){return(t=t._reactInternals)?ta(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=an(),i=Gs(t),s=Ns(n,i);s.payload=e,r!=null&&(s.callback=r),Us(t,s),zs(t,i,n)},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=an(),i=Gs(t),s=Ns(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),Us(t,s),zs(t,i,n)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=an(),n=Gs(t),i=Ns(r,n);i.tag=2,e!=null&&(i.callback=e),Us(t,i),zs(t,n,r)}};function TE(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Hc(r,n)||!Hc(i,s):!0}function MB(t,e,r){var n=!1,i=Zs,s=e.contextType;return typeof s=="object"&&s!==null?s=Mn(s):(i=Gr(e)?$o:vr.current,n=e.contextTypes,s=(n=n!=null)?xu(t,i):Zs),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lm,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function AE(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&lm.enqueueReplaceState(e,e.state,null)}function Zy(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=DB,Kx(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Mn(s):(s=Gr(e)?$o:vr.current,i.context=xu(t,s)),Xc(t,r,i,n),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Kh(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&lm.enqueueReplaceState(i,i.state,null),Xc(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4)}var _d=Array.isArray;function Bl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Q(309));var n=r.stateNode}if(!n)throw Error(Q(147,t));var i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var o=n.refs;o===DB&&(o=n.refs={}),s===null?delete o[i]:o[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(Q(284));if(!r._owner)throw Error(Q(290,t))}return t}function bd(t,e){if(t.type!=="textarea")throw Error(Q(31,Object.prototype.toString.call(e)==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function IB(t){function e(g,v){if(t){var y=g.lastEffect;y!==null?(y.nextEffect=v,g.lastEffect=v):g.firstEffect=g.lastEffect=v,v.nextEffect=null,v.flags=8}}function r(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Js(g,v),g.index=0,g.sibling=null,g}function s(g,v,y){return g.index=y,t?(y=g.alternate,y!==null?(y=y.index,y<v?(g.flags=2,v):y):(g.flags=2,v)):v}function o(g){return t&&g.alternate===null&&(g.flags=2),g}function a(g,v,y,b){return v===null||v.tag!==6?(v=Pv(y,g.mode,b),v.return=g,v):(v=i(v,y),v.return=g,v)}function u(g,v,y,b){return v!==null&&v.elementType===y.type?(b=i(v,y.props),b.ref=Bl(g,v,y),b.return=g,b):(b=mh(y.type,y.key,y.props,null,g.mode,b),b.ref=Bl(g,v,y),b.return=g,b)}function l(g,v,y,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==y.containerInfo||v.stateNode.implementation!==y.implementation?(v=Rv(y,g.mode,b),v.return=g,v):(v=i(v,y.children||[]),v.return=g,v)}function c(g,v,y,b,_){return v===null||v.tag!==7?(v=nu(y,g.mode,b,_),v.return=g,v):(v=i(v,y),v.return=g,v)}function f(g,v,y){if(typeof v=="string"||typeof v=="number")return v=Pv(""+v,g.mode,y),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ql:return y=mh(v.type,v.key,v.props,null,g.mode,y),y.ref=Bl(g,null,v),y.return=g,y;case Ro:return v=Rv(v,g.mode,y),v.return=g,v}if(_d(v)||Cl(v))return v=nu(v,g.mode,y,null),v.return=g,v;bd(g,v)}return null}function d(g,v,y,b){var _=v!==null?v.key:null;if(typeof y=="string"||typeof y=="number")return _!==null?null:a(g,v,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ql:return y.key===_?y.type===ws?c(g,v,y.props.children,b,_):u(g,v,y,b):null;case Ro:return y.key===_?l(g,v,y,b):null}if(_d(y)||Cl(y))return _!==null?null:c(g,v,y,b,null);bd(g,y)}return null}function h(g,v,y,b,_){if(typeof b=="string"||typeof b=="number")return g=g.get(y)||null,a(v,g,""+b,_);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ql:return g=g.get(b.key===null?y:b.key)||null,b.type===ws?c(v,g,b.props.children,_,b.key):u(v,g,b,_);case Ro:return g=g.get(b.key===null?y:b.key)||null,l(v,g,b,_)}if(_d(b)||Cl(b))return g=g.get(y)||null,c(v,g,b,_,null);bd(v,b)}return null}function p(g,v,y,b){for(var _=null,x=null,S=v,w=v=0,P=null;S!==null&&w<y.length;w++){S.index>w?(P=S,S=null):P=S.sibling;var C=d(g,S,y[w],b);if(C===null){S===null&&(S=P);break}t&&S&&C.alternate===null&&e(g,S),v=s(C,v,w),x===null?_=C:x.sibling=C,x=C,S=P}if(w===y.length)return r(g,S),_;if(S===null){for(;w<y.length;w++)S=f(g,y[w],b),S!==null&&(v=s(S,v,w),x===null?_=S:x.sibling=S,x=S);return _}for(S=n(g,S);w<y.length;w++)P=h(S,g,w,y[w],b),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?w:P.key),v=s(P,v,w),x===null?_=P:x.sibling=P,x=P);return t&&S.forEach(function(R){return e(g,R)}),_}function m(g,v,y,b){var _=Cl(y);if(typeof _!="function")throw Error(Q(150));if(y=_.call(y),y==null)throw Error(Q(151));for(var x=_=null,S=v,w=v=0,P=null,C=y.next();S!==null&&!C.done;w++,C=y.next()){S.index>w?(P=S,S=null):P=S.sibling;var R=d(g,S,C.value,b);if(R===null){S===null&&(S=P);break}t&&S&&R.alternate===null&&e(g,S),v=s(R,v,w),x===null?_=R:x.sibling=R,x=R,S=P}if(C.done)return r(g,S),_;if(S===null){for(;!C.done;w++,C=y.next())C=f(g,C.value,b),C!==null&&(v=s(C,v,w),x===null?_=C:x.sibling=C,x=C);return _}for(S=n(g,S);!C.done;w++,C=y.next())C=h(S,g,w,C.value,b),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?w:C.key),v=s(C,v,w),x===null?_=C:x.sibling=C,x=C);return t&&S.forEach(function(F){return e(g,F)}),_}return function(g,v,y,b){var _=typeof y=="object"&&y!==null&&y.type===ws&&y.key===null;_&&(y=y.props.children);var x=typeof y=="object"&&y!==null;if(x)switch(y.$$typeof){case Ql:e:{for(x=y.key,_=v;_!==null;){if(_.key===x){switch(_.tag){case 7:if(y.type===ws){r(g,_.sibling),v=i(_,y.props.children),v.return=g,g=v;break e}break;default:if(_.elementType===y.type){r(g,_.sibling),v=i(_,y.props),v.ref=Bl(g,_,y),v.return=g,g=v;break e}}r(g,_);break}else e(g,_);_=_.sibling}y.type===ws?(v=nu(y.props.children,g.mode,b,y.key),v.return=g,g=v):(b=mh(y.type,y.key,y.props,null,g.mode,b),b.ref=Bl(g,v,y),b.return=g,g=b)}return o(g);case Ro:e:{for(_=y.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===y.containerInfo&&v.stateNode.implementation===y.implementation){r(g,v.sibling),v=i(v,y.children||[]),v.return=g,g=v;break e}else{r(g,v);break}else e(g,v);v=v.sibling}v=Rv(y,g.mode,b),v.return=g,g=v}return o(g)}if(typeof y=="string"||typeof y=="number")return y=""+y,v!==null&&v.tag===6?(r(g,v.sibling),v=i(v,y),v.return=g,g=v):(r(g,v),v=Pv(y,g.mode,b),v.return=g,g=v),o(g);if(_d(y))return p(g,v,y,b);if(Cl(y))return m(g,v,y,b);if(x&&bd(g,y),typeof y>"u"&&!_)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Q(152,qa(g.type)||"Component"))}return r(g,v)}}var Zh=IB(!0),FB=IB(!1),If={},_i=ao(If),qc=ao(If),Yc=ao(If);function ko(t){if(t===If)throw Error(Q(174));return t}function Qy(t,e){switch(gt(Yc,e),gt(qc,t),gt(_i,If),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fy(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fy(e,t)}Qe(_i),gt(_i,e)}function wu(){Qe(_i),Qe(qc),Qe(Yc)}function PE(t){ko(Yc.current);var e=ko(_i.current),r=Fy(e,t.type);e!==r&&(gt(qc,t),gt(_i,r))}function Zx(t){qc.current===t&&(Qe(_i),Qe(qc))}var pt=ao(0);function Qh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&64)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xi=null,Ps=null,bi=!1;function LB(t,e){var r=Pn(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=e,r.return=t,r.flags=8,t.lastEffect!==null?(t.lastEffect.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r}function RE(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,!0):!1;case 13:return!1;default:return!1}}function Jy(t){if(bi){var e=Ps;if(e){var r=e;if(!RE(t,e)){if(e=Qa(r.nextSibling),!e||!RE(t,e)){t.flags=t.flags&-1025|2,bi=!1,Xi=t;return}LB(Xi,r)}Xi=t,Ps=Qa(e.firstChild)}else t.flags=t.flags&-1025|2,bi=!1,Xi=t}}function OE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xi=t}function xd(t){if(t!==Xi)return!1;if(!bi)return OE(t),bi=!0,!1;var e=t.type;if(t.tag!==5||e!=="head"&&e!=="body"&&!Xy(e,t.memoizedProps))for(e=Ps;e;)LB(t,e),e=Qa(e.nextSibling);if(OE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ps=Qa(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ps=null}}else Ps=Xi?Qa(t.stateNode.nextSibling):null;return!0}function Ev(){Ps=Xi=null,bi=!1}var eu=[];function Qx(){for(var t=0;t<eu.length;t++)eu[t]._workInProgressVersionPrimary=null;eu.length=0}var _c=ea.ReactCurrentDispatcher,Dn=ea.ReactCurrentBatchConfig,Kc=0,At=null,fr=null,er=null,Jh=!1,bc=!1;function kr(){throw Error(Q(321))}function Jx(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!An(t[r],e[r]))return!1;return!0}function e1(t,e,r,n,i,s){if(Kc=s,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_c.current=t===null||t.memoizedState===null?T$:A$,t=r(n,i),bc){s=0;do{if(bc=!1,!(25>s))throw Error(Q(301));s+=1,er=fr=null,e.updateQueue=null,_c.current=P$,t=r(n,i)}while(bc)}if(_c.current=np,e=fr!==null&&fr.next!==null,Kc=0,er=fr=At=null,Jh=!1,e)throw Error(Q(300));return t}function Do(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?At.memoizedState=er=t:er=er.next=t,er}function ra(){if(fr===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=fr.next;var e=er===null?At.memoizedState:er.next;if(e!==null)er=e,fr=t;else{if(t===null)throw Error(Q(310));fr=t,t={memoizedState:fr.memoizedState,baseState:fr.baseState,baseQueue:fr.baseQueue,queue:fr.queue,next:null},er===null?At.memoizedState=er=t:er=er.next=t}return er}function mi(t,e){return typeof e=="function"?e(t):e}function kl(t){var e=ra(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=fr,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){i=i.next,n=n.baseState;var a=o=s=null,u=i;do{var l=u.lane;if((Kc&l)===l)a!==null&&(a=a.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),n=u.eagerReducer===t?u.eagerState:t(n,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};a===null?(o=a=c,s=n):a=a.next=c,At.lanes|=l,Ff|=l}u=u.next}while(u!==null&&u!==i);a===null?s=n:a.next=o,An(n,e.memoizedState)||(Xn=!0),e.memoizedState=n,e.baseState=s,e.baseQueue=a,r.lastRenderedState=n}return[e.memoizedState,r.dispatch]}function Dl(t){var e=ra(),r=e.queue;if(r===null)throw Error(Q(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);An(s,e.memoizedState)||(Xn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function BE(t,e,r){var n=e._getVersion;n=n(e._source);var i=e._workInProgressVersionPrimary;if(i!==null?t=i===n:(t=t.mutableReadLanes,(t=(Kc&t)===t)&&(e._workInProgressVersionPrimary=n,eu.push(e))),t)return r(e._source);throw eu.push(e),Error(Q(350))}function NB(t,e,r,n){var i=Cr;if(i===null)throw Error(Q(349));var s=e._getVersion,o=s(e._source),a=_c.current,u=a.useState(function(){return BE(i,e,r)}),l=u[1],c=u[0];u=er;var f=t.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=At;return t.memoizedState={refs:d,source:e,subscribe:n},a.useEffect(function(){d.getSnapshot=r,d.setSnapshot=l;var g=s(e._source);if(!An(o,g)){g=r(e._source),An(c,g)||(l(g),g=Gs(m),i.mutableReadLanes|=g&i.pendingLanes),g=i.mutableReadLanes,i.entangledLanes|=g;for(var v=i.entanglements,y=g;0<y;){var b=31-Ks(y),_=1<<b;v[b]|=g,y&=~_}}},[r,e,n]),a.useEffect(function(){return n(e._source,function(){var g=d.getSnapshot,v=d.setSnapshot;try{v(g(e._source));var y=Gs(m);i.mutableReadLanes|=y&i.pendingLanes}catch(b){v(function(){throw b})}})},[e,n]),An(h,r)&&An(p,e)&&An(f,n)||(t={pending:null,dispatch:null,lastRenderedReducer:mi,lastRenderedState:c},t.dispatch=l=n1.bind(null,At,t),u.queue=t,u.baseQueue=null,c=BE(i,e,r),u.memoizedState=u.baseState=c),c}function UB(t,e,r){var n=ra();return NB(n,t,e,r)}function Ml(t){var e=Do();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t=e.queue={pending:null,dispatch:null,lastRenderedReducer:mi,lastRenderedState:t},t=t.dispatch=n1.bind(null,At,t),[e.memoizedState,t]}function ep(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=At.updateQueue,e===null?(e={lastEffect:null},At.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function kE(t){var e=Do();return t={current:t},e.memoizedState=t}function tp(){return ra().memoizedState}function e_(t,e,r,n){var i=Do();At.flags|=t,i.memoizedState=ep(1|e,r,void 0,n===void 0?null:n)}function t1(t,e,r,n){var i=ra();n=n===void 0?null:n;var s=void 0;if(fr!==null){var o=fr.memoizedState;if(s=o.destroy,n!==null&&Jx(n,o.deps)){ep(e,r,s,n);return}}At.flags|=t,i.memoizedState=ep(1|e,r,s,n)}function DE(t,e){return e_(516,4,t,e)}function rp(t,e){return t1(516,4,t,e)}function GB(t,e){return t1(4,2,t,e)}function zB(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $B(t,e,r){return r=r!=null?r.concat([t]):null,t1(4,2,zB.bind(null,e,t),r)}function r1(){}function jB(t,e){var r=ra();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Jx(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function HB(t,e){var r=ra();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Jx(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function C$(t,e){var r=Su();jo(98>r?98:r,function(){t(!0)}),jo(97<r?97:r,function(){var n=Dn.transition;Dn.transition=1;try{t(!1),e()}finally{Dn.transition=n}})}function n1(t,e,r){var n=an(),i=Gs(t),s={lane:i,action:r,eagerReducer:null,eagerState:null,next:null},o=e.pending;if(o===null?s.next=s:(s.next=o.next,o.next=s),e.pending=s,o=t.alternate,t===At||o!==null&&o===At)bc=Jh=!0;else{if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,r);if(s.eagerReducer=o,s.eagerState=u,An(u,a))return}catch{}finally{}zs(t,i,n)}}var np={readContext:Mn,useCallback:kr,useContext:kr,useEffect:kr,useImperativeHandle:kr,useLayoutEffect:kr,useMemo:kr,useReducer:kr,useRef:kr,useState:kr,useDebugValue:kr,useDeferredValue:kr,useTransition:kr,useMutableSource:kr,useOpaqueIdentifier:kr,unstable_isNewReconciler:!1},T$={readContext:Mn,useCallback:function(t,e){return Do().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:DE,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,e_(4,2,zB.bind(null,e,t),r)},useLayoutEffect:function(t,e){return e_(4,2,t,e)},useMemo:function(t,e){var r=Do();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Do();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t=n.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},t=t.dispatch=n1.bind(null,At,t),[n.memoizedState,t]},useRef:kE,useState:Ml,useDebugValue:r1,useDeferredValue:function(t){var e=Ml(t),r=e[0],n=e[1];return DE(function(){var i=Dn.transition;Dn.transition=1;try{n(t)}finally{Dn.transition=i}},[t]),r},useTransition:function(){var t=Ml(!1),e=t[0];return t=C$.bind(null,t[1]),kE(t),[t,e]},useMutableSource:function(t,e,r){var n=Do();return n.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:r},NB(n,t,e,r)},useOpaqueIdentifier:function(){if(bi){var t=!1,e=_$(function(){throw t||(t=!0,r("r:"+(xv++).toString(36))),Error(Q(355))}),r=Ml(e)[1];return!(At.mode&2)&&(At.flags|=516,ep(5,function(){r("r:"+(xv++).toString(36))},void 0,null)),e}return e="r:"+(xv++).toString(36),Ml(e),e},unstable_isNewReconciler:!1},A$={readContext:Mn,useCallback:jB,useContext:Mn,useEffect:rp,useImperativeHandle:$B,useLayoutEffect:GB,useMemo:HB,useReducer:kl,useRef:tp,useState:function(){return kl(mi)},useDebugValue:r1,useDeferredValue:function(t){var e=kl(mi),r=e[0],n=e[1];return rp(function(){var i=Dn.transition;Dn.transition=1;try{n(t)}finally{Dn.transition=i}},[t]),r},useTransition:function(){var t=kl(mi)[0];return[tp().current,t]},useMutableSource:UB,useOpaqueIdentifier:function(){return kl(mi)[0]},unstable_isNewReconciler:!1},P$={readContext:Mn,useCallback:jB,useContext:Mn,useEffect:rp,useImperativeHandle:$B,useLayoutEffect:GB,useMemo:HB,useReducer:Dl,useRef:tp,useState:function(){return Dl(mi)},useDebugValue:r1,useDeferredValue:function(t){var e=Dl(mi),r=e[0],n=e[1];return rp(function(){var i=Dn.transition;Dn.transition=1;try{n(t)}finally{Dn.transition=i}},[t]),r},useTransition:function(){var t=Dl(mi)[0];return[tp().current,t]},useMutableSource:UB,useOpaqueIdentifier:function(){return Dl(mi)[0]},unstable_isNewReconciler:!1},R$=ea.ReactCurrentOwner,Xn=!1;function Fr(t,e,r,n){e.child=t===null?FB(e,null,r,n):Zh(e,t.child,r,n)}function ME(t,e,r,n,i){r=r.render;var s=e.ref;return Ja(e,i),n=e1(t,e,r,n,s,i),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,qi(t,e,i)):(e.flags|=1,Fr(t,e,n,i),e.child)}function IE(t,e,r,n,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!l1(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,VB(t,e,o,n,i,s)):(t=mh(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}return o=t.child,!(i&s)&&(i=o.memoizedProps,r=r.compare,r=r!==null?r:Hc,r(i,n)&&t.ref===e.ref)?qi(t,e,s):(e.flags|=1,t=Js(o,n),t.ref=e.ref,t.return=e,e.child=t)}function VB(t,e,r,n,i,s){if(t!==null&&Hc(t.memoizedProps,n)&&t.ref===e.ref)if(Xn=!1,(s&i)!==0)t.flags&16384&&(Xn=!0);else return e.lanes=t.lanes,qi(t,e,s);return t_(t,e,r,n,s)}function Cv(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding")if(!(e.mode&4))e.memoizedState={baseLanes:0},wd(e,r);else if(r&1073741824)e.memoizedState={baseLanes:0},wd(e,s!==null?s.baseLanes:r);else return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},wd(e,t),null;else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,wd(e,n);return Fr(t,e,i,r),e.child}function WB(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=128)}function t_(t,e,r,n,i){var s=Gr(r)?$o:vr.current;return s=xu(e,s),Ja(e,i),r=e1(t,e,r,n,s,i),t!==null&&!Xn?(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,qi(t,e,i)):(e.flags|=1,Fr(t,e,r,i),e.child)}function FE(t,e,r,n,i){if(Gr(r)){var s=!0;ch(e)}else s=!1;if(Ja(e,i),e.stateNode===null)t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),MB(e,r,n),Zy(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,l=r.contextType;typeof l=="object"&&l!==null?l=Mn(l):(l=Gr(r)?$o:vr.current,l=xu(e,l));var c=r.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||u!==l)&&AE(e,o,n,l),bs=!1;var d=e.memoizedState;o.state=d,Xc(e,n,o,i),u=e.memoizedState,a!==n||d!==u||Ur.current||bs?(typeof c=="function"&&(Kh(e,r,c,n),u=e.memoizedState),(a=bs||TE(e,r,a,n,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4)):(typeof o.componentDidMount=="function"&&(e.flags|=4),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=l,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4),n=!1)}else{o=e.stateNode,kB(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Vn(e.type,a),o.props=l,f=e.pendingProps,d=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Mn(u):(u=Gr(r)?$o:vr.current,u=xu(e,u));var h=r.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&AE(e,o,n,u),bs=!1,d=e.memoizedState,o.state=d,Xc(e,n,o,i);var p=e.memoizedState;a!==f||d!==p||Ur.current||bs?(typeof h=="function"&&(Kh(e,r,h,n),p=e.memoizedState),(l=bs||TE(e,r,l,n,d,p,u))?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=256)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=u,n=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),n=!1)}return r_(t,e,r,n,s,i)}function r_(t,e,r,n,i,s){WB(t,e);var o=(e.flags&64)!==0;if(!n&&!o)return i&&xE(e,r,!1),qi(t,e,s);n=e.stateNode,R$.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Zh(e,t.child,null,s),e.child=Zh(e,null,a,s)):Fr(t,e,a,s),e.memoizedState=n.state,i&&xE(e,r,!0),e.child}function LE(t){var e=t.stateNode;e.pendingContext?bE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bE(t,e.context,!1),Qy(t,e.containerInfo)}var Sd={dehydrated:null,retryLane:0};function NE(t,e,r){var n=e.pendingProps,i=pt.current,s=!1,o;return(o=(e.flags&64)!==0)||(o=t!==null&&t.memoizedState===null?!1:(i&2)!==0),o?(s=!0,e.flags&=-65):t!==null&&t.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(i|=1),gt(pt,i&1),t===null?(n.fallback!==void 0&&Jy(e),t=n.children,i=n.fallback,s?(t=UE(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Sd,t):typeof n.unstable_expectedLoadTime=="number"?(t=UE(e,t,i,r),e.child.memoizedState={baseLanes:r},e.memoizedState=Sd,e.lanes=33554432,t):(r=c1({mode:"visible",children:t},e.mode,r,null),r.return=e,e.child=r)):t.memoizedState!==null?s?(n=zE(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Sd,n):(r=GE(t,e,n.children,r),e.memoizedState=null,r):s?(n=zE(t,e,n.children,n.fallback,r),s=e.child,i=t.child.memoizedState,s.memoizedState=i===null?{baseLanes:r}:{baseLanes:i.baseLanes|r},s.childLanes=t.childLanes&~r,e.memoizedState=Sd,n):(r=GE(t,e,n.children,r),e.memoizedState=null,r)}function UE(t,e,r,n){var i=t.mode,s=t.child;return e={mode:"hidden",children:e},!(i&2)&&s!==null?(s.childLanes=0,s.pendingProps=e):s=c1(e,i,0,null),r=nu(r,i,n,null),s.return=t,r.return=t,s.sibling=r,t.child=s,r}function GE(t,e,r,n){var i=t.child;return t=i.sibling,r=Js(i,{mode:"visible",children:r}),!(e.mode&2)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=r}function zE(t,e,r,n,i){var s=e.mode,o=t.child;t=o.sibling;var a={mode:"hidden",children:r};return!(s&2)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=a,o=r.lastEffect,o!==null?(e.firstEffect=r.firstEffect,e.lastEffect=o,o.nextEffect=null):e.firstEffect=e.lastEffect=null):r=Js(o,a),t!==null?n=Js(t,n):(n=nu(n,s,i,null),n.flags|=2),n.return=e,r.return=e,r.sibling=n,e.child=r,n}function $E(t,e){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),BB(t.return,e)}function Tv(t,e,r,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i,lastEffect:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i,o.lastEffect=s)}function jE(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Fr(t,e,n.children,r),n=pt.current,n&2)n=n&1|2,e.flags|=64;else{if(t!==null&&t.flags&64)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$E(t,r);else if(t.tag===19)$E(t,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(gt(pt,n),!(e.mode&2))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&Qh(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Tv(e,!1,i,r,s,e.lastEffect);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qh(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Tv(e,!0,r,null,s,e.lastEffect);break;case"together":Tv(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function qi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ff|=e.lanes,r&e.childLanes){if(t!==null&&e.child!==t.child)throw Error(Q(153));if(e.child!==null){for(t=e.child,r=Js(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Js(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}return null}var XB,n_,qB,YB;XB=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};n_=function(){};qB=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,ko(_i.current);var s=null;switch(r){case"input":i=Oy(t,i),n=Oy(t,n),s=[];break;case"option":i=Dy(t,i),n=Dy(t,n),s=[];break;case"select":i=st({},i,{value:void 0}),n=st({},n,{value:void 0}),s=[];break;case"textarea":i=My(t,i),n=My(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Hh)}Ly(r,n);var o;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Lc.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in n){var u=n[l];if(a=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(s||(s=[]),s.push(l,r)),r=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Lc.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&Ke("scroll",t),s||a===u||(s=[])):typeof u=="object"&&u!==null&&u.$$typeof===Ox?u.toString():(s=s||[]).push(l,u))}r&&(s=s||[]).push("style",r);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};YB=function(t,e,r,n){r!==n&&(e.flags|=4)};function Il(t,e){if(!bi)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function O$(t,e,r){var n=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Gr(e.type)&&Wh(),null;case 3:return wu(),Qe(Ur),Qe(vr),Qx(),n=e.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(xd(e)?e.flags|=4:n.hydrate||(e.flags|=256)),n_(e),null;case 5:Zx(e);var i=ko(Yc.current);if(r=e.type,t!==null&&e.stateNode!=null)qB(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!n){if(e.stateNode===null)throw Error(Q(166));return null}if(t=ko(_i.current),xd(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[As]=e,n[Vh]=s,r){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(t=0;t<ec.length;t++)Ke(ec[t],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":j3(n,s),Ke("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ke("invalid",n);break;case"textarea":V3(n,s),Ke("invalid",n)}Ly(r,s),t=null;for(var o in s)s.hasOwnProperty(o)&&(i=s[o],o==="children"?typeof i=="string"?n.textContent!==i&&(t=["children",i]):typeof i=="number"&&n.textContent!==""+i&&(t=["children",""+i]):Lc.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&Ke("scroll",n));switch(r){case"input":md(n),H3(n,s,!0);break;case"textarea":md(n),W3(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Hh)}n=t,e.updateQueue=n,n!==null&&(e.flags|=4)}else{switch(o=i.nodeType===9?i:i.ownerDocument,t===Iy.html&&(t=$O(r)),t===Iy.html?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[As]=e,t[Vh]=n,XB(t,e,!1,!1),e.stateNode=t,o=Ny(r,n),r){case"dialog":Ke("cancel",t),Ke("close",t),i=n;break;case"iframe":case"object":case"embed":Ke("load",t),i=n;break;case"video":case"audio":for(i=0;i<ec.length;i++)Ke(ec[i],t);i=n;break;case"source":Ke("error",t),i=n;break;case"img":case"image":case"link":Ke("error",t),Ke("load",t),i=n;break;case"details":Ke("toggle",t),i=n;break;case"input":j3(t,n),i=Oy(t,n),Ke("invalid",t);break;case"option":i=Dy(t,n);break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=st({},n,{value:void 0}),Ke("invalid",t);break;case"textarea":V3(t,n),i=My(t,n),Ke("invalid",t);break;default:i=n}Ly(r,i);var a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?VO(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&jO(t,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&Nc(t,u):typeof u=="number"&&Nc(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Lc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ke("scroll",t):u!=null&&Ex(t,s,u,o))}switch(r){case"input":md(t),H3(t,n,!1);break;case"textarea":md(t),W3(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Ys(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Ya(t,!!n.multiple,s,!1):n.defaultValue!=null&&Ya(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Hh)}SB(r,n)&&(e.flags|=4)}e.ref!==null&&(e.flags|=128)}return null;case 6:if(t&&e.stateNode!=null)YB(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Q(166));r=ko(Yc.current),ko(_i.current),xd(e)?(n=e.stateNode,r=e.memoizedProps,n[As]=e,n.nodeValue!==r&&(e.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[As]=e,e.stateNode=n)}return null;case 13:return Qe(pt),n=e.memoizedState,e.flags&64?(e.lanes=r,e):(n=n!==null,r=!1,t===null?e.memoizedProps.fallback!==void 0&&xd(e):r=t.memoizedState!==null,n&&!r&&e.mode&2&&(t===null&&e.memoizedProps.unstable_avoidThisFallback!==!0||pt.current&1?rr===0&&(rr=3):((rr===0||rr===3)&&(rr=4),Cr===null||!(Ff&134217727)&&!(Zu&134217727)||tu(Cr,mr))),(n||r)&&(e.flags|=4),null);case 4:return wu(),n_(e),t===null&&_B(e.stateNode.containerInfo),null;case 10:return Yx(e),null;case 17:return Gr(e.type)&&Wh(),null;case 19:if(Qe(pt),n=e.memoizedState,n===null)return null;if(s=(e.flags&64)!==0,o=n.rendering,o===null)if(s)Il(n,!1);else{if(rr!==0||t!==null&&t.flags&64)for(t=e.child;t!==null;){if(o=Qh(t),o!==null){for(e.flags|=64,Il(n,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),n.lastEffect===null&&(e.firstEffect=null),e.lastEffect=n.lastEffect,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return gt(pt,pt.current&1|2),e.child}t=t.sibling}n.tail!==null&&hr()>l_&&(e.flags|=64,s=!0,Il(n,!1),e.lanes=33554432)}else{if(!s)if(t=Qh(o),t!==null){if(e.flags|=64,s=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Il(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!bi)return e=e.lastEffect=n.lastEffect,e!==null&&(e.nextEffect=null),null}else 2*hr()-n.renderingStartTime>l_&&r!==1073741824&&(e.flags|=64,s=!0,Il(n,!1),e.lanes=33554432);n.isBackwards?(o.sibling=e.child,e.child=o):(r=n.last,r!==null?r.sibling=o:e.child=o,n.last=o)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=e.lastEffect,n.renderingStartTime=hr(),r.sibling=null,e=pt.current,gt(pt,s?e&1|2:e&1),r):null;case 23:case 24:return u1(),t!==null&&t.memoizedState!==null!=(e.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(e.flags|=4),null}throw Error(Q(156,e.tag))}function B$(t){switch(t.tag){case 1:Gr(t.type)&&Wh();var e=t.flags;return e&4096?(t.flags=e&-4097|64,t):null;case 3:if(wu(),Qe(Ur),Qe(vr),Qx(),e=t.flags,e&64)throw Error(Q(285));return t.flags=e&-4097|64,t;case 5:return Zx(t),null;case 13:return Qe(pt),e=t.flags,e&4096?(t.flags=e&-4097|64,t):null;case 19:return Qe(pt),null;case 4:return wu(),null;case 10:return Yx(t),null;case 23:case 24:return u1(),null;default:return null}}function i1(t,e){try{var r="",n=e;do r+=fz(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i}}function i_(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var k$=typeof WeakMap=="function"?WeakMap:Map;function KB(t,e,r){r=Ns(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){sp||(sp=!0,c_=n),i_(t,e)},r}function ZB(t,e,r){r=Ns(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return i_(t,e),n(i)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(gi===null?gi=new Set([this]):gi.add(this),i_(t,e));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}var D$=typeof WeakSet=="function"?WeakSet:Set;function HE(t){var e=t.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(r){$s(t,r)}else e.current=null}function M$(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(e.flags&256&&t!==null){var r=t.memoizedProps,n=t.memoizedState;t=e.stateNode,e=t.getSnapshotBeforeUpdate(e.elementType===e.type?r:Vn(e.type,r),n),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:e.flags&256&&Vx(e.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Q(163))}function I$(t,e,r){switch(r.tag){case 0:case 11:case 15:case 22:if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{if((t.tag&3)===3){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}if(e=r.updateQueue,e=e!==null?e.lastEffect:null,e!==null){t=e=e.next;do{var i=t;n=i.next,i=i.tag,i&4&&i&1&&(ok(r,t),j$(r,t)),t=n}while(t!==e)}return;case 1:t=r.stateNode,r.flags&4&&(e===null?t.componentDidMount():(n=r.elementType===r.type?e.memoizedProps:Vn(r.type,e.memoizedProps),t.componentDidUpdate(n,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),e=r.updateQueue,e!==null&&CE(r,e,t);return;case 3:if(e=r.updateQueue,e!==null){if(t=null,r.child!==null)switch(r.child.tag){case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}CE(r,e,t)}return;case 5:t=r.stateNode,e===null&&r.flags&4&&SB(r.type,r.memoizedProps)&&t.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&tB(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Q(163))}function VE(t,e){for(var r=t;;){if(r.tag===5){var n=r.stateNode;if(e)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var i=r.memoizedProps.style;i=i!=null&&i.hasOwnProperty("display")?i.display:null,n.style.display=HO("display",i)}}else if(r.tag===6)r.stateNode.nodeValue=e?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function WE(t,e){if(Fo&&typeof Fo.onCommitFiberUnmount=="function")try{Fo.onCommitFiberUnmount(Wx,e)}catch{}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(t=e.updateQueue,t!==null&&(t=t.lastEffect,t!==null)){var r=t=t.next;do{var n=r,i=n.destroy;if(n=n.tag,i!==void 0)if(n&4)ok(e,r);else{n=e;try{i()}catch(s){$s(n,s)}}r=r.next}while(r!==t)}break;case 1:if(HE(e),t=e.stateNode,typeof t.componentWillUnmount=="function")try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(s){$s(e,s)}break;case 5:HE(e);break;case 4:QB(t,e)}}function XE(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function qE(t){return t.tag===5||t.tag===3||t.tag===4}function YE(t){e:{for(var e=t.return;e!==null;){if(qE(e))break e;e=e.return}throw Error(Q(160))}var r=e;switch(e=r.stateNode,r.tag){case 5:var n=!1;break;case 3:e=e.containerInfo,n=!0;break;case 4:e=e.containerInfo,n=!0;break;default:throw Error(Q(161))}r.flags&16&&(Nc(e,""),r.flags&=-17);e:t:for(r=t;;){for(;r.sibling===null;){if(r.return===null||qE(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?s_(t,r,e):o_(t,r,e)}function s_(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Hh));else if(n!==4&&(t=t.child,t!==null))for(s_(t,e,r),t=t.sibling;t!==null;)s_(t,e,r),t=t.sibling}function o_(t,e,r){var n=t.tag,i=n===5||n===6;if(i)t=i?t.stateNode:t.stateNode.instance,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(o_(t,e,r),t=t.sibling;t!==null;)o_(t,e,r),t=t.sibling}function QB(t,e){for(var r=e,n=!1,i,s;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Q(160));switch(i=n.stateNode,n.tag){case 5:s=!1;break e;case 3:i=i.containerInfo,s=!0;break e;case 4:i=i.containerInfo,s=!0;break e}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var o=t,a=r,u=a;;)if(WE(o,u),u.child!==null&&u.tag!==4)u.child.return=u,u=u.child;else{if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}s?(o=i,a=r.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):i.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){i=r.stateNode.containerInfo,s=!0,r.child.return=r,r=r.child;continue}}else if(WE(t,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function Av(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(t=n.destroy,n.destroy=void 0,t!==void 0&&t()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=e.stateNode,r!=null){n=e.memoizedProps;var i=t!==null?t.memoizedProps:n;t=e.type;var s=e.updateQueue;if(e.updateQueue=null,s!==null){for(r[Vh]=n,t==="input"&&n.type==="radio"&&n.name!=null&&GO(r,n),Ny(t,i),e=Ny(t,n),i=0;i<s.length;i+=2){var o=s[i],a=s[i+1];o==="style"?VO(r,a):o==="dangerouslySetInnerHTML"?jO(r,a):o==="children"?Nc(r,a):Ex(r,o,a,e)}switch(t){case"input":By(r,n);break;case"textarea":zO(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,s=n.value,s!=null?Ya(r,!!n.multiple,s,!1):t!==!!n.multiple&&(n.defaultValue!=null?Ya(r,!!n.multiple,n.defaultValue,!0):Ya(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(e.stateNode===null)throw Error(Q(162));e.stateNode.nodeValue=e.memoizedProps;return;case 3:r=e.stateNode,r.hydrate&&(r.hydrate=!1,tB(r.containerInfo));return;case 12:return;case 13:e.memoizedState!==null&&(a1=hr(),VE(e.child,!0)),KE(e);return;case 19:KE(e);return;case 17:return;case 23:case 24:VE(e,e.memoizedState!==null);return}throw Error(Q(163))}function KE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new D$),e.forEach(function(n){var i=W$.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function F$(t,e){return t!==null&&(t=t.memoizedState,t===null||t.dehydrated!==null)?(e=e.memoizedState,e!==null&&e.dehydrated===null):!1}var L$=Math.ceil,ip=ea.ReactCurrentDispatcher,s1=ea.ReactCurrentOwner,ye=0,Cr=null,Nt=null,mr=0,Ho=0,a_=ao(0),rr=0,cm=null,Ku=0,Ff=0,Zu=0,o1=0,u_=null,a1=0,l_=1/0;function Qu(){l_=hr()+500}var se=null,sp=!1,c_=null,gi=null,Qs=!1,xc=null,tc=90,f_=[],d_=[],Yi=null,Sc=0,h_=null,dh=-1,Vi=0,hh=0,wc=null,ph=!1;function an(){return ye&48?hr():dh!==-1?dh:dh=hr()}function Gs(t){if(t=t.mode,!(t&2))return 1;if(!(t&4))return Su()===99?1:2;if(Vi===0&&(Vi=Ku),E$.transition!==0){hh!==0&&(hh=u_!==null?u_.pendingLanes:0),t=Vi;var e=4186112&~hh;return e&=-e,e===0&&(t=4186112&~t,e=t&-t,e===0&&(e=8192)),e}return t=Su(),ye&4&&t===98?t=$h(12,Vi):(t=Az(t),t=$h(t,Vi)),t}function zs(t,e,r){if(50<Sc)throw Sc=0,h_=null,Error(Q(185));if(t=fm(t,e),t===null)return null;nm(t,e,r),t===Cr&&(Zu|=e,rr===4&&tu(t,mr));var n=Su();e===1?ye&8&&!(ye&48)?p_(t):(In(t,r),ye===0&&(Qu(),Ii())):(!(ye&4)||n!==98&&n!==99||(Yi===null?Yi=new Set([t]):Yi.add(t)),In(t,r)),u_=t}function fm(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}function In(t,e){for(var r=t.callbackNode,n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ks(o),u=1<<a,l=s[a];if(l===-1){if(!(u&n)||u&i){l=e,Oa(u);var c=Xe;s[a]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=e&&(t.expiredLanes|=u);o&=~u}if(n=$c(t,t===Cr?mr:0),e=Xe,n===0)r!==null&&(r!==Sv&&Yy(r),t.callbackNode=null,t.callbackPriority=0);else{if(r!==null){if(t.callbackPriority===e)return;r!==Sv&&Yy(r)}e===15?(r=p_.bind(null,t),ji===null?(ji=[r],fh=Xx(um,OB)):ji.push(r),r=Sv):e===14?r=Wc(99,p_.bind(null,t)):(r=Pz(e),r=Wc(r,JB.bind(null,t))),t.callbackPriority=e,t.callbackNode=r}}function JB(t){if(dh=-1,hh=Vi=0,ye&48)throw Error(Q(327));var e=t.callbackNode;if(uo()&&t.callbackNode!==e)return null;var r=$c(t,t===Cr?mr:0);if(r===0)return null;var n=r,i=ye;ye|=16;var s=nk();(Cr!==t||mr!==n)&&(Qu(),ru(t,n));do try{G$();break}catch(a){rk(t,a)}while(1);if(qx(),ip.current=s,ye=i,Nt!==null?n=0:(Cr=null,mr=0,n=rr),Ku&Zu)ru(t,0);else if(n!==0){if(n===2&&(ye|=64,t.hydrate&&(t.hydrate=!1,Vx(t.containerInfo)),r=uB(t),r!==0&&(n=rc(t,r))),n===1)throw e=cm,ru(t,0),tu(t,r),In(t,hr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=r,n){case 0:case 1:throw Error(Q(345));case 2:xo(t);break;case 3:if(tu(t,r),(r&62914560)===r&&(n=a1+500-hr(),10<n)){if($c(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=vE(xo.bind(null,t),n);break}xo(t);break;case 4:if(tu(t,r),(r&4186112)===r)break;for(n=t.eventTimes,i=-1;0<r;){var o=31-Ks(r);s=1<<o,o=n[o],o>i&&(i=o),r&=~s}if(r=i,r=hr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*L$(r/1960))-r,10<r){t.timeoutHandle=vE(xo.bind(null,t),r);break}xo(t);break;case 5:xo(t);break;default:throw Error(Q(329))}}return In(t,hr()),t.callbackNode===e?JB.bind(null,t):null}function tu(t,e){for(e&=~o1,e&=~Zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ks(e),n=1<<r;t[r]=-1,e&=~n}}function p_(t){if(ye&48)throw Error(Q(327));if(uo(),t===Cr&&t.expiredLanes&mr){var e=mr,r=rc(t,e);Ku&Zu&&(e=$c(t,e),r=rc(t,e))}else e=$c(t,0),r=rc(t,e);if(t.tag!==0&&r===2&&(ye|=64,t.hydrate&&(t.hydrate=!1,Vx(t.containerInfo)),e=uB(t),e!==0&&(r=rc(t,e))),r===1)throw r=cm,ru(t,0),tu(t,e),In(t,hr()),r;return t.finishedWork=t.current.alternate,t.finishedLanes=e,xo(t),In(t,hr()),null}function N$(){if(Yi!==null){var t=Yi;Yi=null,t.forEach(function(e){e.expiredLanes|=24&e.pendingLanes,In(e,hr())})}Ii()}function ek(t,e){var r=ye;ye|=1;try{return t(e)}finally{ye=r,ye===0&&(Qu(),Ii())}}function tk(t,e){var r=ye;ye&=-2,ye|=8;try{return t(e)}finally{ye=r,ye===0&&(Qu(),Ii())}}function wd(t,e){gt(a_,Ho),Ho|=e,Ku|=e}function u1(){Ho=a_.current,Qe(a_)}function ru(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,y$(r)),Nt!==null)for(r=Nt.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Wh();break;case 3:wu(),Qe(Ur),Qe(vr),Qx();break;case 5:Zx(n);break;case 4:wu();break;case 13:Qe(pt);break;case 19:Qe(pt);break;case 10:Yx(n);break;case 23:case 24:u1()}r=r.return}Cr=t,Nt=Js(t.current,null),mr=Ho=Ku=e,rr=0,cm=null,o1=Zu=Ff=0}function rk(t,e){do{var r=Nt;try{if(qx(),_c.current=np,Jh){for(var n=At.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Jh=!1}if(Kc=0,er=fr=At=null,bc=!1,s1.current=null,r===null||r.return===null){rr=1,cm=e,Nt=null;break}e:{var s=t,o=r.return,a=r,u=e;if(e=mr,a.flags|=2048,a.firstEffect=a.lastEffect=null,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u;if(!(a.mode&2)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.lanes=c.lanes):(a.updateQueue=null,a.memoizedState=null)}var f=(pt.current&1)!==0,d=o;do{var h;if(h=d.tag===13){var p=d.memoizedState;if(p!==null)h=p.dehydrated!==null;else{var m=d.memoizedProps;h=m.fallback===void 0?!1:m.unstable_avoidThisFallback!==!0?!0:!f}}if(h){var g=d.updateQueue;if(g===null){var v=new Set;v.add(l),d.updateQueue=v}else g.add(l);if(!(d.mode&2)){if(d.flags|=64,a.flags|=16384,a.flags&=-2981,a.tag===1)if(a.alternate===null)a.tag=17;else{var y=Ns(-1,1);y.tag=2,Us(a,y)}a.lanes|=1;break e}u=void 0,a=e;var b=s.pingCache;if(b===null?(b=s.pingCache=new k$,u=new Set,b.set(l,u)):(u=b.get(l),u===void 0&&(u=new Set,b.set(l,u))),!u.has(a)){u.add(a);var _=V$.bind(null,s,l,a);l.then(_,_)}d.flags|=4096,d.lanes=e;break e}d=d.return}while(d!==null);u=Error((qa(a.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}rr!==5&&(rr=2),u=i1(u,a),d=o;do{switch(d.tag){case 3:s=u,d.flags|=4096,e&=-e,d.lanes|=e;var x=KB(d,s,e);EE(d,x);break e;case 1:s=u;var S=d.type,w=d.stateNode;if(!(d.flags&64)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(gi===null||!gi.has(w)))){d.flags|=4096,e&=-e,d.lanes|=e;var P=ZB(d,s,e);EE(d,P);break e}}d=d.return}while(d!==null)}sk(r)}catch(C){e=C,Nt===r&&r!==null&&(Nt=r=r.return);continue}break}while(1)}function nk(){var t=ip.current;return ip.current=np,t===null?np:t}function rc(t,e){var r=ye;ye|=16;var n=nk();Cr===t&&mr===e||ru(t,e);do try{U$();break}catch(i){rk(t,i)}while(1);if(qx(),ye=r,ip.current=n,Nt!==null)throw Error(Q(261));return Cr=null,mr=0,rr}function U$(){for(;Nt!==null;)ik(Nt)}function G$(){for(;Nt!==null&&!x$();)ik(Nt)}function ik(t){var e=ak(t.alternate,t,Ho);t.memoizedProps=t.pendingProps,e===null?sk(t):Nt=e,s1.current=null}function sk(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&2048){if(r=B$(e),r!==null){r.flags&=2047,Nt=r;return}t!==null&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}else{if(r=O$(r,e,Ho),r!==null){Nt=r;return}if(r=e,r.tag!==24&&r.tag!==23||r.memoizedState===null||Ho&1073741824||!(r.mode&4)){for(var n=0,i=r.child;i!==null;)n|=i.lanes|i.childLanes,i=i.sibling;r.childLanes=n}t!==null&&!(t.flags&2048)&&(t.firstEffect===null&&(t.firstEffect=e.firstEffect),e.lastEffect!==null&&(t.lastEffect!==null&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(t.lastEffect!==null?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}if(e=e.sibling,e!==null){Nt=e;return}Nt=e=t}while(e!==null);rr===0&&(rr=5)}function xo(t){var e=Su();return jo(99,z$.bind(null,t,e)),null}function z$(t,e){do uo();while(xc!==null);if(ye&48)throw Error(Q(327));var r=t.finishedWork;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Q(177));t.callbackNode=null;var n=r.lanes|r.childLanes,i=n,s=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var o=t.eventTimes,a=t.expirationTimes;0<s;){var u=31-Ks(s),l=1<<u;i[u]=0,o[u]=-1,a[u]=-1,s&=~l}if(Yi!==null&&!(n&24)&&Yi.has(t)&&Yi.delete(t),t===Cr&&(Nt=Cr=null,mr=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(i=ye,ye|=32,s1.current=null,_v=ah,o=cE(),Hy(o)){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else e:if(a=(a=o.ownerDocument)&&a.defaultView||window,(l=a.getSelection&&a.getSelection())&&l.rangeCount!==0){a=l.anchorNode,s=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{a.nodeType,u.nodeType}catch{a=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=o,g=null;t:for(;;){for(var v;m!==a||s!==0&&m.nodeType!==3||(f=c+s),m!==u||l!==0&&m.nodeType!==3||(d=c+l),m.nodeType===3&&(c+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===o)break t;if(g===a&&++h===s&&(f=c),g===u&&++p===l&&(d=c),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}a=f===-1||d===-1?null:{start:f,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;bv={focusedElem:o,selectionRange:a},ah=!1,wc=null,ph=!1,se=n;do try{$$()}catch(C){if(se===null)throw Error(Q(330));$s(se,C),se=se.nextEffect}while(se!==null);wc=null,se=n;do try{for(o=t;se!==null;){var y=se.flags;if(y&16&&Nc(se.stateNode,""),y&128){var b=se.alternate;if(b!==null){var _=b.ref;_!==null&&(typeof _=="function"?_(null):_.current=null)}}switch(y&1038){case 2:YE(se),se.flags&=-3;break;case 6:YE(se),se.flags&=-3,Av(se.alternate,se);break;case 1024:se.flags&=-1025;break;case 1028:se.flags&=-1025,Av(se.alternate,se);break;case 4:Av(se.alternate,se);break;case 8:a=se,QB(o,a);var x=a.alternate;XE(a),x!==null&&XE(x)}se=se.nextEffect}}catch(C){if(se===null)throw Error(Q(330));$s(se,C),se=se.nextEffect}while(se!==null);if(_=bv,b=cE(),y=_.focusedElem,o=_.selectionRange,b!==y&&y&&y.ownerDocument&&gB(y.ownerDocument.documentElement,y)){for(o!==null&&Hy(y)&&(b=o.start,_=o.end,_===void 0&&(_=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(_,y.value.length)):(_=(b=y.ownerDocument||document)&&b.defaultView||window,_.getSelection&&(_=_.getSelection(),a=y.textContent.length,x=Math.min(o.start,a),o=o.end===void 0?x:Math.min(o.end,a),!_.extend&&x>o&&(a=o,o=x,x=a),a=lE(y,x),s=lE(y,o),a&&s&&(_.rangeCount!==1||_.anchorNode!==a.node||_.anchorOffset!==a.offset||_.focusNode!==s.node||_.focusOffset!==s.offset)&&(b=b.createRange(),b.setStart(a.node,a.offset),_.removeAllRanges(),x>o?(_.addRange(b),_.extend(s.node,s.offset)):(b.setEnd(s.node,s.offset),_.addRange(b)))))),b=[],_=y;_=_.parentNode;)_.nodeType===1&&b.push({element:_,left:_.scrollLeft,top:_.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<b.length;y++)_=b[y],_.element.scrollLeft=_.left,_.element.scrollTop=_.top}ah=!!_v,bv=_v=null,t.current=r,se=n;do try{for(y=t;se!==null;){var S=se.flags;if(S&36&&I$(y,se.alternate,se),S&128){b=void 0;var w=se.ref;if(w!==null){var P=se.stateNode;switch(se.tag){case 5:b=P;break;default:b=P}typeof w=="function"?w(b):w.current=b}}se=se.nextEffect}}catch(C){if(se===null)throw Error(Q(330));$s(se,C),se=se.nextEffect}while(se!==null);se=null,w$(),ye=i}else t.current=r;if(Qs)Qs=!1,xc=t,tc=e;else for(se=n;se!==null;)e=se.nextEffect,se.nextEffect=null,se.flags&8&&(S=se,S.sibling=null,S.stateNode=null),se=e;if(n=t.pendingLanes,n===0&&(gi=null),n===1?t===h_?Sc++:(Sc=0,h_=t):Sc=0,r=r.stateNode,Fo&&typeof Fo.onCommitFiberRoot=="function")try{Fo.onCommitFiberRoot(Wx,r,void 0,(r.current.flags&64)===64)}catch{}if(In(t,hr()),sp)throw sp=!1,t=c_,c_=null,t;return ye&8||Ii(),null}function $$(){for(;se!==null;){var t=se.alternate;ph||wc===null||(se.flags&8?Y3(se,wc)&&(ph=!0):se.tag===13&&F$(t,se)&&Y3(se,wc)&&(ph=!0));var e=se.flags;e&256&&M$(t,se),!(e&512)||Qs||(Qs=!0,Wc(97,function(){return uo(),null})),se=se.nextEffect}}function uo(){if(tc!==90){var t=97<tc?97:tc;return tc=90,jo(t,H$)}return!1}function j$(t,e){f_.push(e,t),Qs||(Qs=!0,Wc(97,function(){return uo(),null}))}function ok(t,e){d_.push(e,t),Qs||(Qs=!0,Wc(97,function(){return uo(),null}))}function H$(){if(xc===null)return!1;var t=xc;if(xc=null,ye&48)throw Error(Q(331));var e=ye;ye|=32;var r=d_;d_=[];for(var n=0;n<r.length;n+=2){var i=r[n],s=r[n+1],o=i.destroy;if(i.destroy=void 0,typeof o=="function")try{o()}catch(u){if(s===null)throw Error(Q(330));$s(s,u)}}for(r=f_,f_=[],n=0;n<r.length;n+=2){i=r[n],s=r[n+1];try{var a=i.create;i.destroy=a()}catch(u){if(s===null)throw Error(Q(330));$s(s,u)}}for(a=t.current.firstEffect;a!==null;)t=a.nextEffect,a.nextEffect=null,a.flags&8&&(a.sibling=null,a.stateNode=null),a=t;return ye=e,Ii(),!0}function ZE(t,e,r){e=i1(r,e),e=KB(t,e,1),Us(t,e),e=an(),t=fm(t,1),t!==null&&(nm(t,1,e),In(t,e))}function $s(t,e){if(t.tag===3)ZE(t,t,e);else for(var r=t.return;r!==null;){if(r.tag===3){ZE(r,t,e);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gi===null||!gi.has(n))){t=i1(e,t);var i=ZB(r,t,1);if(Us(r,i),i=an(),r=fm(r,1),r!==null)nm(r,1,i),In(r,i);else if(typeof n.componentDidCatch=="function"&&(gi===null||!gi.has(n)))try{n.componentDidCatch(e,t)}catch{}break}}r=r.return}}function V$(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&r,Cr===t&&(mr&r)===r&&(rr===4||rr===3&&(mr&62914560)===mr&&500>hr()-a1?ru(t,0):o1|=r),In(t,e)}function W$(t,e){var r=t.stateNode;r!==null&&r.delete(e),e=0,e===0&&(e=t.mode,e&2?e&4?(Vi===0&&(Vi=Ku),e=Ba(62914560&~Vi),e===0&&(e=4194304)):e=Su()===99?1:2:e=1),r=an(),t=fm(t,e),t!==null&&(nm(t,e,r),In(t,r))}var ak;ak=function(t,e,r){var n=e.lanes;if(t!==null)if(t.memoizedProps!==e.pendingProps||Ur.current)Xn=!0;else if(r&n)Xn=!!(t.flags&16384);else{switch(Xn=!1,e.tag){case 3:LE(e),Ev();break;case 5:PE(e);break;case 1:Gr(e.type)&&ch(e);break;case 4:Qy(e,e.stateNode.containerInfo);break;case 10:n=e.memoizedProps.value;var i=e.type._context;gt(Xh,i._currentValue),i._currentValue=n;break;case 13:if(e.memoizedState!==null)return r&e.child.childLanes?NE(t,e,r):(gt(pt,pt.current&1),e=qi(t,e,r),e!==null?e.sibling:null);gt(pt,pt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&64){if(n)return jE(t,e,r);e.flags|=64}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gt(pt,pt.current),n)break;return null;case 23:case 24:return e.lanes=0,Cv(t,e,r)}return qi(t,e,r)}else Xn=!1;switch(e.lanes=0,e.tag){case 2:if(n=e.type,t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=xu(e,vr.current),Ja(e,r),i=e1(null,e,n,t,i,r),e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gr(n)){var s=!0;ch(e)}else s=!1;e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Kx(e);var o=n.getDerivedStateFromProps;typeof o=="function"&&Kh(e,n,o,t),i.updater=lm,e.stateNode=i,i._reactInternals=e,Zy(e,n,t,r),e=r_(null,e,n,!0,s,r)}else e.tag=0,Fr(null,e,i,r),e=e.child;return e;case 16:i=e.elementType;e:{switch(t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=q$(i),t=Vn(i,t),s){case 0:e=t_(null,e,i,t,r);break e;case 1:e=FE(null,e,i,t,r);break e;case 11:e=ME(null,e,i,t,r);break e;case 14:e=IE(null,e,i,Vn(i.type,t),n,r);break e}throw Error(Q(306,i,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vn(n,i),t_(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vn(n,i),FE(t,e,n,i,r);case 3:if(LE(e),n=e.updateQueue,t===null||n===null)throw Error(Q(282));if(n=e.pendingProps,i=e.memoizedState,i=i!==null?i.element:null,kB(t,e),Xc(e,n,null,r),n=e.memoizedState.element,n===i)Ev(),e=qi(t,e,r);else{if(i=e.stateNode,(s=i.hydrate)&&(Ps=Qa(e.stateNode.containerInfo.firstChild),Xi=e,s=bi=!0),s){if(t=i.mutableSourceEagerHydrationData,t!=null)for(i=0;i<t.length;i+=2)s=t[i],s._workInProgressVersionPrimary=t[i+1],eu.push(s);for(r=FB(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Fr(t,e,n,r),Ev();e=e.child}return e;case 5:return PE(e),t===null&&Jy(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Xy(n,i)?o=null:s!==null&&Xy(n,s)&&(e.flags|=16),WB(t,e),Fr(t,e,o,r),e.child;case 6:return t===null&&Jy(e),null;case 13:return NE(t,e,r);case 4:return Qy(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Zh(e,null,n,r):Fr(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vn(n,i),ME(t,e,n,i,r);case 7:return Fr(t,e,e.pendingProps,r),e.child;case 8:return Fr(t,e,e.pendingProps.children,r),e.child;case 12:return Fr(t,e,e.pendingProps.children,r),e.child;case 10:e:{n=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value;var a=e.type._context;if(gt(Xh,a._currentValue),a._currentValue=s,o!==null)if(a=o.value,s=An(a,s)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(a,s):1073741823)|0,s===0){if(o.children===i.children&&!Ur.current){e=qi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var u=a.dependencies;if(u!==null){o=a.child;for(var l=u.firstContext;l!==null;){if(l.context===n&&l.observedBits&s){a.tag===1&&(l=Ns(-1,r&-r),l.tag=2,Us(a,l)),a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),BB(a.return,r),u.lanes|=r;break}l=l.next}}else o=a.tag===10&&a.type===e.type?null:a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Fr(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,s=e.pendingProps,n=s.children,Ja(e,r),i=Mn(i,s.unstable_observedBits),n=n(i),e.flags|=1,Fr(t,e,n,r),e.child;case 14:return i=e.type,s=Vn(i,e.pendingProps),s=Vn(i.type,s),IE(t,e,i,s,n,r);case 15:return VB(t,e,e.type,e.pendingProps,n,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Vn(n,i),t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,Gr(n)?(t=!0,ch(e)):t=!1,Ja(e,r),MB(e,n,i),Zy(e,n,i,r),r_(null,e,n,!0,t,r);case 19:return jE(t,e,r);case 23:return Cv(t,e,r);case 24:return Cv(t,e,r)}throw Error(Q(156,e.tag))};function X$(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,r,n){return new X$(t,e,r,n)}function l1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q$(t){if(typeof t=="function")return l1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===em)return 11;if(t===tm)return 14}return 2}function Js(t,e){var r=t.alternate;return r===null?(r=Pn(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function mh(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")l1(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ws:return nu(r.children,i,s,e);case LO:o=8,i|=16;break;case Cx:o=8,i|=1;break;case dc:return t=Pn(12,r,e,i|8),t.elementType=dc,t.type=dc,t.lanes=s,t;case hc:return t=Pn(13,r,e,i),t.type=hc,t.elementType=hc,t.lanes=s,t;case Nh:return t=Pn(19,r,e,i),t.elementType=Nh,t.lanes=s,t;case Bx:return c1(r,i,s,e);case Ry:return t=Pn(24,r,e,i),t.elementType=Ry,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Tx:o=10;break e;case Ax:o=9;break e;case em:o=11;break e;case tm:o=14;break e;case Px:o=16,n=null;break e;case Rx:o=22;break e}throw Error(Q(130,t==null?t:typeof t,""))}return e=Pn(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function nu(t,e,r,n){return t=Pn(7,t,n,e),t.lanes=r,t}function c1(t,e,r,n){return t=Pn(23,t,n,e),t.elementType=Bx,t.lanes=r,t}function Pv(t,e,r){return t=Pn(6,t,null,e),t.lanes=r,t}function Rv(t,e,r){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Y$(t,e,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=dv(0),this.expirationTimes=dv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dv(0),this.mutableSourceEagerHydrationData=null}function K$(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ro,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function op(t,e,r,n){var i=e.current,s=an(),o=Gs(i);e:if(r){r=r._reactInternals;t:{if(ta(r)!==r||r.tag!==1)throw Error(Q(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break t;case 1:if(Gr(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break t}}a=a.return}while(a!==null);throw Error(Q(171))}if(r.tag===1){var u=r.type;if(Gr(u)){r=EB(r,u,a);break e}}r=a}else r=Zs;return e.context===null?e.context=r:e.pendingContext=r,e=Ns(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),Us(i,e),zs(i,o,s),o}function Ov(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function QE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function f1(t,e){QE(t,e),(t=t.alternate)&&QE(t,e)}function Z$(){return null}function d1(t,e,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new Y$(t,e,r!=null&&r.hydrate===!0),e=Pn(3,null,null,e===2?7:e===1?3:0),r.current=e,e.stateNode=r,Kx(e),t[Yu]=r.current,_B(t.nodeType===8?t.parentNode:t),n)for(t=0;t<n.length;t++){e=n[t];var i=e._getVersion;i=i(e._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[e,i]:r.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=r}d1.prototype.render=function(t){op(t,this._internalRoot,null,null)};d1.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;op(null,t,null,function(){e[Yu]=null})};function Lf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Q$(t,e){if(e||(e=t?t.nodeType===9?t.documentElement:t.firstChild:null,e=!(!e||e.nodeType!==1||!e.hasAttribute("data-reactroot"))),!e)for(var r;r=t.lastChild;)t.removeChild(r);return new d1(t,0,e?{hydrate:!0}:void 0)}function dm(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s._internalRoot;if(typeof i=="function"){var a=i;i=function(){var l=Ov(o);a.call(l)}}op(e,o,t,i)}else{if(s=r._reactRootContainer=Q$(r,n),o=s._internalRoot,typeof i=="function"){var u=i;i=function(){var l=Ov(o);u.call(l)}}tk(function(){op(e,o,t,i)})}return Ov(o)}QO=function(t){if(t.tag===13){var e=an();zs(t,4,e),f1(t,4)}};Fx=function(t){if(t.tag===13){var e=an();zs(t,67108864,e),f1(t,67108864)}};JO=function(t){if(t.tag===13){var e=an(),r=Gs(t);zs(t,r,e),f1(t,r)}};eB=function(t,e){return e()};Uy=function(t,e,r){switch(e){case"input":if(By(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=am(n);if(!i)throw Error(Q(90));UO(n),By(n,i)}}}break;case"textarea":zO(t,r);break;case"select":e=r.value,e!=null&&Ya(t,!!r.multiple,e,!1)}};Dx=ek;qO=function(t,e,r,n,i){var s=ye;ye|=4;try{return jo(98,t.bind(null,e,r,n,i))}finally{ye=s,ye===0&&(Qu(),Ii())}};Mx=function(){!(ye&49)&&(N$(),uo())};YO=function(t,e){var r=ye;ye|=2;try{return t(e)}finally{ye=r,ye===0&&(Qu(),Ii())}};function uk(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Lf(e))throw Error(Q(200));return K$(t,e,null,r)}var J$={Events:[Mf,Na,am,WO,XO,uo,{current:!1}]},Fl={findFiberByHostInstance:Bo,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},e9={bundleType:Fl.bundleType,version:Fl.version,rendererPackageName:Fl.rendererPackageName,rendererConfig:Fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ea.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZO(t),t===null?null:t.stateNode},findFiberByHostInstance:Fl.findFiberByHostInstance||Z$,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{Wx=Ed.inject(e9),Fo=Ed}catch{}}Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J$;Fn.createPortal=uk;Fn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Q(188)):Error(Q(268,Object.keys(t)));return t=ZO(e),t=t===null?null:t.stateNode,t};Fn.flushSync=function(t,e){var r=ye;if(r&48)return t(e);ye|=1;try{if(t)return jo(99,t.bind(null,e))}finally{ye=r,Ii()}};Fn.hydrate=function(t,e,r){if(!Lf(e))throw Error(Q(200));return dm(null,t,e,!0,r)};Fn.render=function(t,e,r){if(!Lf(e))throw Error(Q(200));return dm(null,t,e,!1,r)};Fn.unmountComponentAtNode=function(t){if(!Lf(t))throw Error(Q(40));return t._reactRootContainer?(tk(function(){dm(null,null,t,!1,function(){t._reactRootContainer=null,t[Yu]=null})}),!0):!1};Fn.unstable_batchedUpdates=ek;Fn.unstable_createPortal=function(t,e){return uk(t,e,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Fn.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Lf(r))throw Error(Q(200));if(t==null||t._reactInternals===void 0)throw Error(Q(38));return dm(t,e,r,!1,n)};Fn.version="17.0.2";function lk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(lk)}catch(t){console.error(t)}}lk(),DO.exports=Fn;var Zc=DO.exports;const B0e=Zt(Zc);function Wn(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function eo(t){return!!t&&!!t[nt]}function es(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===l9}(t)||Array.isArray(t)||!!t[sC]||!!(!((e=t.constructor)===null||e===void 0)&&e[sC])||h1(t)||p1(t))}function Vo(t,e,r){r===void 0&&(r=!1),Ju(t)===0?(r?Object.keys:su)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Ju(t){var e=t[nt];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:h1(t)?2:p1(t)?3:0}function iu(t,e){return Ju(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function t9(t,e){return Ju(t)===2?t.get(e):t[e]}function ck(t,e,r){var n=Ju(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function fk(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function h1(t){return a9&&t instanceof Map}function p1(t){return u9&&t instanceof Set}function So(t){return t.o||t.t}function m1(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=hk(t);delete e[nt];for(var r=su(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function g1(t,e){return e===void 0&&(e=!1),v1(t)||eo(t)||!es(t)||(Ju(t)>1&&(t.set=t.add=t.clear=t.delete=r9),Object.freeze(t),e&&Vo(t,function(r,n){return g1(n,!0)},!0)),t}function r9(){Wn(2)}function v1(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function xi(t){var e=y_[t];return e||Wn(18,t),e}function n9(t,e){y_[t]||(y_[t]=e)}function m_(){return Qc}function Bv(t,e){e&&(xi("Patches"),t.u=[],t.s=[],t.v=e)}function ap(t){g_(t),t.p.forEach(i9),t.p=null}function g_(t){t===Qc&&(Qc=t.l)}function JE(t){return Qc={p:[],l:Qc,h:t,m:!0,_:0}}function i9(t){var e=t[nt];e.i===0||e.i===1?e.j():e.g=!0}function kv(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||xi("ES5").S(e,t,n),n?(r[nt].P&&(ap(e),Wn(4)),es(t)&&(t=up(e,t),e.l||lp(e,t)),e.u&&xi("Patches").M(r[nt].t,t,e.u,e.s)):t=up(e,r,[]),ap(e),e.u&&e.v(e.u,e.s),t!==dk?t:void 0}function up(t,e,r){if(v1(e))return e;var n=e[nt];if(!n)return Vo(e,function(a,u){return eC(t,n,e,a,u,r)},!0),e;if(n.A!==t)return e;if(!n.P)return lp(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=m1(n.k):n.o,s=i,o=!1;n.i===3&&(s=new Set(i),i.clear(),o=!0),Vo(s,function(a,u){return eC(t,n,i,a,u,r,o)}),lp(t,i,!1),r&&t.u&&xi("Patches").N(n,r,t.u,t.s)}return n.o}function eC(t,e,r,n,i,s,o){if(eo(i)){var a=up(t,i,s&&e&&e.i!==3&&!iu(e.R,n)?s.concat(n):void 0);if(ck(r,n,a),!eo(a))return;t.m=!1}else o&&r.add(i);if(es(i)&&!v1(i)){if(!t.h.D&&t._<1)return;up(t,i),e&&e.A.l||lp(t,i)}}function lp(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&g1(e,r)}function Dv(t,e){var r=t[nt];return(r?So(r):t)[e]}function tC(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Es(t){t.P||(t.P=!0,t.l&&Es(t.l))}function Mv(t){t.o||(t.o=m1(t.t))}function v_(t,e,r){var n=h1(e)?xi("MapSet").F(e,r):p1(e)?xi("MapSet").T(e,r):t.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:m_(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Jc;o&&(u=[a],l=nc);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(e,r):xi("ES5").J(e,r);return(r?r.A:m_()).p.push(n),n}function s9(t){return eo(t)||Wn(22,t),function e(r){if(!es(r))return r;var n,i=r[nt],s=Ju(r);if(i){if(!i.P&&(i.i<4||!xi("ES5").K(i)))return i.t;i.I=!0,n=rC(r,s),i.I=!1}else n=rC(r,s);return Vo(n,function(o,a){i&&t9(i.t,o)===a||ck(n,o,e(a))}),s===3?new Set(n):n}(t)}function rC(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return m1(t)}function o9(){function t(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[nt];return Jc.get(u,s)},set:function(u){var l=this[nt];Jc.set(l,s,u)}},a}function e(s){for(var o=s.length-1;o>=0;o--){var a=s[o][nt];if(!a.P)switch(a.i){case 5:n(a)&&Es(a);break;case 4:r(a)&&Es(a)}}}function r(s){for(var o=s.t,a=s.k,u=su(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==nt){var f=o[c];if(f===void 0&&!iu(o,c))return!0;var d=a[c],h=d&&d[nt];if(h?h.t!==f:!fk(d,f))return!0}}var p=!!o[nt];return u.length!==su(o).length+(p?0:1)}function n(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};n9("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,t(h,!0));return d}var p=hk(f);delete p[nt];for(var m=su(p),g=0;g<m.length;g++){var v=m[g];p[v]=t(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:m_(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,nt,{value:l,writable:!0}),u},S:function(s,o,a){a?eo(o)&&o[nt].A===s&&e(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[nt];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)Vo(d,function(b){b!==nt&&(f[b]!==void 0||iu(f,b)?h[b]||u(d[b]):(h[b]=!0,Es(c)))}),Vo(f,function(b){d[b]!==void 0||iu(d,b)||(h[b]=!1,Es(c))});else if(p===5){if(n(c)&&(Es(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var v=Math.min(d.length,f.length),y=0;y<v;y++)d.hasOwnProperty(y)||(h[y]=!0),h[y]===void 0&&u(d[y])}}}}(s.p[0]),e(s.p))},K:function(s){return s.i===4?r(s):n(s)}})}var nC,Qc,y1=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",a9=typeof Map<"u",u9=typeof Set<"u",iC=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",dk=y1?Symbol.for("immer-nothing"):((nC={})["immer-nothing"]=!0,nC),sC=y1?Symbol.for("immer-draftable"):"__$immer_draftable",nt=y1?Symbol.for("immer-state"):"__$immer_state",l9=""+Object.prototype.constructor,su=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,hk=Object.getOwnPropertyDescriptors||function(t){var e={};return su(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},y_={},Jc={get:function(t,e){if(e===nt)return t;var r=So(t);if(!iu(r,e))return function(i,s,o){var a,u=tC(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!es(n)?n:n===Dv(t.t,e)?(Mv(t),t.o[e]=v_(t.A.h,n,t)):n},has:function(t,e){return e in So(t)},ownKeys:function(t){return Reflect.ownKeys(So(t))},set:function(t,e,r){var n=tC(So(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Dv(So(t),e),s=i==null?void 0:i[nt];if(s&&s.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(fk(r,i)&&(r!==void 0||iu(t.t,e)))return!0;Mv(t),Es(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Dv(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Mv(t),Es(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=So(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){Wn(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){Wn(12)}},nc={};Vo(Jc,function(t,e){nc[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),nc.deleteProperty=function(t,e){return nc.set.call(this,t,e,void 0)},nc.set=function(t,e,r){return Jc.set.call(this,t[0],e,r,t[0])};var c9=function(){function t(r){var n=this;this.O=iC,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=n;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,y=Array(v>1?v-1:0),b=1;b<v;b++)y[b-1]=arguments[b];return u.produce(m,function(_){var x;return(x=s).call.apply(x,[g,_].concat(y))})}}var l;if(typeof s!="function"&&Wn(6),o!==void 0&&typeof o!="function"&&Wn(7),es(i)){var c=JE(n),f=v_(n,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?ap(c):g_(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Bv(c,o),kv(m,c)},function(m){throw ap(c),m}):(Bv(c,o),kv(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===dk&&(l=void 0),n.D&&g1(l,!0),o){var h=[],p=[];xi("Patches").M(i,l,h,p),o(h,p)}return l}Wn(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return n.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=n.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){es(r)||Wn(8),eo(r)&&(r=s9(r));var n=JE(this),i=v_(this,r,void 0);return i[nt].C=!0,g_(n),i},e.finishDraft=function(r,n){var i=r&&r[nt],s=i.A;return Bv(s,n),kv(void 0,s)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!iC&&Wn(20),this.O=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=xi("Patches").$;return eo(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),fn=new c9,pk=fn.produce;fn.produceWithPatches.bind(fn);fn.setAutoFreeze.bind(fn);fn.setUseProxies.bind(fn);fn.applyPatches.bind(fn);fn.createDraft.bind(fn);fn.finishDraft.bind(fn);function Xt(t){"@babel/helpers - typeof";return Xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(t)}function f9(t,e){if(Xt(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Xt(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mk(t){var e=f9(t,"string");return Xt(e)=="symbol"?e:e+""}function vn(t,e,r){return e=mk(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function oC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function aC(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?oC(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var uC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Iv=function(){return Math.random().toString(36).substring(7).split("").join(".")},cp={INIT:"@@redux/INIT"+Iv(),REPLACE:"@@redux/REPLACE"+Iv(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Iv()}};function d9(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function gk(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(cr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(cr(1));return r(gk)(t,e)}if(typeof t!="function")throw new Error(cr(2));var i=t,s=e,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(cr(3));return s}function f(m){if(typeof m!="function")throw new Error(cr(4));if(u)throw new Error(cr(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(cr(6));g=!1,l();var y=a.indexOf(m);a.splice(y,1),o=null}}}function d(m){if(!d9(m))throw new Error(cr(7));if(typeof m.type>"u")throw new Error(cr(8));if(u)throw new Error(cr(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,v=0;v<g.length;v++){var y=g[v];y()}return m}function h(m){if(typeof m!="function")throw new Error(cr(10));i=m,d({type:cp.REPLACE})}function p(){var m,g=f;return m={subscribe:function(y){if(typeof y!="object"||y===null)throw new Error(cr(11));function b(){y.next&&y.next(c())}b();var _=g(b);return{unsubscribe:_}}},m[uC]=function(){return this},m}return d({type:cp.INIT}),n={dispatch:d,subscribe:f,getState:c,replaceReducer:h},n[uC]=p,n}function h9(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:cp.INIT});if(typeof n>"u")throw new Error(cr(12));if(typeof r(void 0,{type:cp.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cr(13))})}function p9(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var i=e[n];typeof t[i]=="function"&&(r[i]=t[i])}var s=Object.keys(r),o;try{h9(r)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=r[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(cr(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function fp(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,i){return function(){return n(i.apply(void 0,arguments))}})}function m9(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var i=n.apply(void 0,arguments),s=function(){throw new Error(cr(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=e.map(function(u){return u(o)});return s=fp.apply(void 0,a)(i.dispatch),aC(aC({},i),{},{dispatch:s})}}}function vk(t){var e=function(n){var i=n.dispatch,s=n.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,t):o(a)}}};return e}var yk=vk();yk.withExtraArgument=vk;const lC=yk;var _k=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g9=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){r.label=l[1];break}if(l[0]===6&&r.label<s[1]){r.label=s[1],s=l;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(l);break}s[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Eu=globalThis&&globalThis.__spreadArray||function(t,e){for(var r=0,n=e.length,i=t.length;r<n;r++,i++)t[i]=e[r];return t},v9=Object.defineProperty,y9=Object.defineProperties,_9=Object.getOwnPropertyDescriptors,cC=Object.getOwnPropertySymbols,b9=Object.prototype.hasOwnProperty,x9=Object.prototype.propertyIsEnumerable,fC=function(t,e,r){return e in t?v9(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},js=function(t,e){for(var r in e||(e={}))b9.call(e,r)&&fC(t,r,e[r]);if(cC)for(var n=0,i=cC(e);n<i.length;n++){var r=i[n];x9.call(e,r)&&fC(t,r,e[r])}return t},Fv=function(t,e){return y9(t,_9(e))},S9=function(t,e,r){return new Promise(function(n,i){var s=function(u){try{a(r.next(u))}catch(l){i(l)}},o=function(u){try{a(r.throw(u))}catch(l){i(l)}},a=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(s,o)};a((r=r.apply(t,e)).next())})},w9=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?fp:fp.apply(null,arguments)};function E9(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function Hs(t,e){function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var s=e.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return js(js({type:t,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var C9=function(t){_k(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Eu([void 0],r[0].concat(this)))):new(e.bind.apply(e,Eu([void 0],r.concat(this))))},e}(Array),T9=function(t){_k(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=t.apply(this,r)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Eu([void 0],r[0].concat(this)))):new(e.bind.apply(e,Eu([void 0],r.concat(this))))},e}(Array);function __(t){return es(t)?pk(t,function(){}):t}function A9(t){return typeof t=="boolean"}function P9(){return function(e){return R9(e)}}function R9(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var n=new C9;return r&&(A9(r)?n.push(lC):n.push(lC.withExtraArgument(r.extraArgument))),n}var O9=!0;function k0e(t){var e=P9(),r=t||{},n=r.reducer,i=n===void 0?void 0:n,s=r.middleware,o=s===void 0?e():s,a=r.devTools,u=a===void 0?!0:a,l=r.preloadedState,c=l===void 0?void 0:l,f=r.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(E9(i))h=p9(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(e));var m=m9.apply(void 0,p),g=fp;u&&(g=w9(js({trace:!O9},typeof u=="object"&&u)));var v=new T9(m),y=v;Array.isArray(d)?y=Eu([m],d):typeof d=="function"&&(y=d(v));var b=g.apply(void 0,y);return gk(h,c,b)}function bk(t){var e={},r=[],n,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[a]=o,i},addMatcher:function(s,o){return r.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return n=s,i}};return t(i),[e,r,n]}function B9(t){return typeof t=="function"}function k9(t,e,r,n){r===void 0&&(r=[]);var i=typeof e=="function"?bk(e):[e,r,n],s=i[0],o=i[1],a=i[2],u;if(B9(t))u=function(){return __(t())};else{var l=__(t);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Eu([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(eo(p)){var g=p,v=m(g,d);return v===void 0?p:v}else{if(es(p))return pk(p,function(y){return m(y,d)});var v=m(p,d);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},f)}return c.getInitialState=u,c}function D9(t,e){return t+"/"+e}function D0e(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof t.initialState=="function"?t.initialState:__(t.initialState),n=t.reducers||{},i=Object.keys(n),s={},o={},a={};i.forEach(function(c){var f=n[c],d=D9(e,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Hs(d,p):Hs(d)});function u(){var c=typeof t.extraReducers=="function"?bk(t.extraReducers):[t.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,v=js(js({},d),o);return k9(r,function(y){for(var b in v)y.addCase(b,v[b]);for(var _=0,x=p;_<x.length;_++){var S=x[_];y.addMatcher(S.matcher,S.reducer)}g&&y.addDefaultCase(g)})}var l;return{name:e,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var M9="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",I9=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=M9[Math.random()*64|0];return e},F9=["name","message","stack","code"],Lv=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),dC=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),L9=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=F9;r<n.length;r++){var i=n[r];typeof t[i]=="string"&&(e[i]=t[i])}return e}return{message:String(t)}};(function(){function t(e,r,n){var i=Hs(e+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Fv(js({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Hs(e+"/pending",function(l,c,f){return{payload:void 0,meta:Fv(js({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Hs(e+"/rejected",function(l,c,f,d,h){return{payload:d,error:(n&&n.serializeError||L9)(l||"Rejected"),meta:Fv(js({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=n!=null&&n.idGenerator?n.idGenerator(l):I9(),p=new a,m;function g(y){m=y,p.abort()}var v=function(){return S9(this,null,function(){var y,b,_,x,S,w,P;return g9(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),x=(y=n==null?void 0:n.condition)==null?void 0:y.call(n,l,{getState:f,extra:d}),U9(x)?[4,x]:[3,2];case 1:x=C.sent(),C.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(R,F){return p.signal.addEventListener("abort",function(){return F({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=n==null?void 0:n.getPendingMeta)==null?void 0:b.call(n,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(r(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(R,F){return new Lv(R,F)},fulfillWithValue:function(R,F){return new dC(R,F)}})).then(function(R){if(R instanceof Lv)throw R;return R instanceof dC?i(R.payload,h,l,R.meta):i(R,h,l)})])];case 3:return _=C.sent(),[3,5];case 4:return w=C.sent(),_=w instanceof Lv?o(null,h,l,w.payload,w.meta):o(w,h,l),[3,5];case 5:return P=n&&!n.dispatchConditionRejection&&o.match(_)&&_.meta.condition,P||c(_),[2,_]}})})}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap:function(){return v.then(N9)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:e})}return t.withTypes=function(){return t},t})();function N9(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function U9(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var _1="listenerMiddleware";Hs(_1+"/add");Hs(_1+"/removeAll");Hs(_1+"/remove");var hC;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);o9();function G9(){this.__data__=[],this.size=0}var z9=G9;function $9(t,e){return t===e||t!==t&&e!==e}var b1=$9,j9=b1;function H9(t,e){for(var r=t.length;r--;)if(j9(t[r][0],e))return r;return-1}var hm=H9,V9=hm,W9=Array.prototype,X9=W9.splice;function q9(t){var e=this.__data__,r=V9(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():X9.call(e,r,1),--this.size,!0}var Y9=q9,K9=hm;function Z9(t){var e=this.__data__,r=K9(e,t);return r<0?void 0:e[r][1]}var Q9=Z9,J9=hm;function ej(t){return J9(this.__data__,t)>-1}var tj=ej,rj=hm;function nj(t,e){var r=this.__data__,n=rj(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}var ij=nj,sj=z9,oj=Y9,aj=Q9,uj=tj,lj=ij;function el(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}el.prototype.clear=sj;el.prototype.delete=oj;el.prototype.get=aj;el.prototype.has=uj;el.prototype.set=lj;var pm=el,cj=pm;function fj(){this.__data__=new cj,this.size=0}var dj=fj;function hj(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var pj=hj;function mj(t){return this.__data__.get(t)}var gj=mj;function vj(t){return this.__data__.has(t)}var yj=vj,_j=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs,xk=_j,bj=xk,xj=typeof self=="object"&&self&&self.Object===Object&&self,Sj=bj||xj||Function("return this")(),ei=Sj,wj=ei,Ej=wj.Symbol,Nf=Ej,pC=Nf,Sk=Object.prototype,Cj=Sk.hasOwnProperty,Tj=Sk.toString,Ll=pC?pC.toStringTag:void 0;function Aj(t){var e=Cj.call(t,Ll),r=t[Ll];try{t[Ll]=void 0;var n=!0}catch{}var i=Tj.call(t);return n&&(e?t[Ll]=r:delete t[Ll]),i}var Pj=Aj,Rj=Object.prototype,Oj=Rj.toString;function Bj(t){return Oj.call(t)}var kj=Bj,mC=Nf,Dj=Pj,Mj=kj,Ij="[object Null]",Fj="[object Undefined]",gC=mC?mC.toStringTag:void 0;function Lj(t){return t==null?t===void 0?Fj:Ij:gC&&gC in Object(t)?Dj(t):Mj(t)}var Uf=Lj;function Nj(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Fi=Nj,Uj=Uf,Gj=Fi,zj="[object AsyncFunction]",$j="[object Function]",jj="[object GeneratorFunction]",Hj="[object Proxy]";function Vj(t){if(!Gj(t))return!1;var e=Uj(t);return e==$j||e==jj||e==zj||e==Hj}var wk=Vj,Wj=ei,Xj=Wj["__core-js_shared__"],qj=Xj,Nv=qj,vC=function(){var t=/[^.]+$/.exec(Nv&&Nv.keys&&Nv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Yj(t){return!!vC&&vC in t}var Kj=Yj,Zj=Function.prototype,Qj=Zj.toString;function Jj(t){if(t!=null){try{return Qj.call(t)}catch{}try{return t+""}catch{}}return""}var Ek=Jj,e7=wk,t7=Kj,r7=Fi,n7=Ek,i7=/[\\^$.*+?()[\]{}|]/g,s7=/^\[object .+?Constructor\]$/,o7=Function.prototype,a7=Object.prototype,u7=o7.toString,l7=a7.hasOwnProperty,c7=RegExp("^"+u7.call(l7).replace(i7,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f7(t){if(!r7(t)||t7(t))return!1;var e=e7(t)?c7:s7;return e.test(n7(t))}var d7=f7;function h7(t,e){return t==null?void 0:t[e]}var p7=h7,m7=d7,g7=p7;function v7(t,e){var r=g7(t,e);return m7(r)?r:void 0}var na=v7,y7=na,_7=ei,b7=y7(_7,"Map"),x1=b7,x7=na,S7=x7(Object,"create"),mm=S7,yC=mm;function w7(){this.__data__=yC?yC(null):{},this.size=0}var E7=w7;function C7(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var T7=C7,A7=mm,P7="__lodash_hash_undefined__",R7=Object.prototype,O7=R7.hasOwnProperty;function B7(t){var e=this.__data__;if(A7){var r=e[t];return r===P7?void 0:r}return O7.call(e,t)?e[t]:void 0}var k7=B7,D7=mm,M7=Object.prototype,I7=M7.hasOwnProperty;function F7(t){var e=this.__data__;return D7?e[t]!==void 0:I7.call(e,t)}var L7=F7,N7=mm,U7="__lodash_hash_undefined__";function G7(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=N7&&e===void 0?U7:e,this}var z7=G7,$7=E7,j7=T7,H7=k7,V7=L7,W7=z7;function tl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}tl.prototype.clear=$7;tl.prototype.delete=j7;tl.prototype.get=H7;tl.prototype.has=V7;tl.prototype.set=W7;var X7=tl,_C=X7,q7=pm,Y7=x1;function K7(){this.size=0,this.__data__={hash:new _C,map:new(Y7||q7),string:new _C}}var Z7=K7;function Q7(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var J7=Q7,eH=J7;function tH(t,e){var r=t.__data__;return eH(e)?r[typeof e=="string"?"string":"hash"]:r.map}var gm=tH,rH=gm;function nH(t){var e=rH(this,t).delete(t);return this.size-=e?1:0,e}var iH=nH,sH=gm;function oH(t){return sH(this,t).get(t)}var aH=oH,uH=gm;function lH(t){return uH(this,t).has(t)}var cH=lH,fH=gm;function dH(t,e){var r=fH(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}var hH=dH,pH=Z7,mH=iH,gH=aH,vH=cH,yH=hH;function rl(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}rl.prototype.clear=pH;rl.prototype.delete=mH;rl.prototype.get=gH;rl.prototype.has=vH;rl.prototype.set=yH;var S1=rl,_H=pm,bH=x1,xH=S1,SH=200;function wH(t,e){var r=this.__data__;if(r instanceof _H){var n=r.__data__;if(!bH||n.length<SH-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new xH(n)}return r.set(t,e),this.size=r.size,this}var EH=wH,CH=pm,TH=dj,AH=pj,PH=gj,RH=yj,OH=EH;function nl(t){var e=this.__data__=new CH(t);this.size=e.size}nl.prototype.clear=TH;nl.prototype.delete=AH;nl.prototype.get=PH;nl.prototype.has=RH;nl.prototype.set=OH;var w1=nl;function BH(t,e){for(var r=-1,n=t==null?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}var kH=BH,DH=na,MH=function(){try{var t=DH(Object,"defineProperty");return t({},"",{}),t}catch{}}(),IH=MH,bC=IH;function FH(t,e,r){e=="__proto__"&&bC?bC(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var Ck=FH,LH=Ck,NH=b1,UH=Object.prototype,GH=UH.hasOwnProperty;function zH(t,e,r){var n=t[e];(!(GH.call(t,e)&&NH(n,r))||r===void 0&&!(e in t))&&LH(t,e,r)}var E1=zH,$H=E1,jH=Ck;function HH(t,e,r,n){var i=!r;r||(r={});for(var s=-1,o=e.length;++s<o;){var a=e[s],u=n?n(r[a],t[a],a,r,t):void 0;u===void 0&&(u=t[a]),i?jH(r,a,u):$H(r,a,u)}return r}var vm=HH;function VH(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}var WH=VH;function XH(t){return t!=null&&typeof t=="object"}var ia=XH,qH=Uf,YH=ia,KH="[object Arguments]";function ZH(t){return YH(t)&&qH(t)==KH}var QH=ZH,xC=QH,JH=ia,Tk=Object.prototype,eV=Tk.hasOwnProperty,tV=Tk.propertyIsEnumerable,rV=xC(function(){return arguments}())?xC:function(t){return JH(t)&&eV.call(t,"callee")&&!tV.call(t,"callee")},Ak=rV,nV=Array.isArray,fs=nV,dp={exports:{}};function iV(){return!1}var sV=iV;dp.exports;(function(t,e){var r=ei,n=sV,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,o=s&&s.exports===i,a=o?r.Buffer:void 0,u=a?a.isBuffer:void 0,l=u||n;t.exports=l})(dp,dp.exports);var C1=dp.exports,oV=9007199254740991,aV=/^(?:0|[1-9]\d*)$/;function uV(t,e){var r=typeof t;return e=e??oV,!!e&&(r=="number"||r!="symbol"&&aV.test(t))&&t>-1&&t%1==0&&t<e}var T1=uV,lV=9007199254740991;function cV(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=lV}var A1=cV,fV=Uf,dV=A1,hV=ia,pV="[object Arguments]",mV="[object Array]",gV="[object Boolean]",vV="[object Date]",yV="[object Error]",_V="[object Function]",bV="[object Map]",xV="[object Number]",SV="[object Object]",wV="[object RegExp]",EV="[object Set]",CV="[object String]",TV="[object WeakMap]",AV="[object ArrayBuffer]",PV="[object DataView]",RV="[object Float32Array]",OV="[object Float64Array]",BV="[object Int8Array]",kV="[object Int16Array]",DV="[object Int32Array]",MV="[object Uint8Array]",IV="[object Uint8ClampedArray]",FV="[object Uint16Array]",LV="[object Uint32Array]",Ze={};Ze[RV]=Ze[OV]=Ze[BV]=Ze[kV]=Ze[DV]=Ze[MV]=Ze[IV]=Ze[FV]=Ze[LV]=!0;Ze[pV]=Ze[mV]=Ze[AV]=Ze[gV]=Ze[PV]=Ze[vV]=Ze[yV]=Ze[_V]=Ze[bV]=Ze[xV]=Ze[SV]=Ze[wV]=Ze[EV]=Ze[CV]=Ze[TV]=!1;function NV(t){return hV(t)&&dV(t.length)&&!!Ze[fV(t)]}var UV=NV;function GV(t){return function(e){return t(e)}}var P1=GV,hp={exports:{}};hp.exports;(function(t,e){var r=xk,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s&&r.process,a=function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(hp,hp.exports);var R1=hp.exports,zV=UV,$V=P1,SC=R1,wC=SC&&SC.isTypedArray,jV=wC?$V(wC):zV,Pk=jV,HV=WH,VV=Ak,WV=fs,XV=C1,qV=T1,YV=Pk,KV=Object.prototype,ZV=KV.hasOwnProperty;function QV(t,e){var r=WV(t),n=!r&&VV(t),i=!r&&!n&&XV(t),s=!r&&!n&&!i&&YV(t),o=r||n||i||s,a=o?HV(t.length,String):[],u=a.length;for(var l in t)(e||ZV.call(t,l))&&!(o&&(l=="length"||i&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||qV(l,u)))&&a.push(l);return a}var Rk=QV,JV=Object.prototype;function eW(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||JV;return t===r}var O1=eW;function tW(t,e){return function(r){return t(e(r))}}var Ok=tW,rW=Ok,nW=rW(Object.keys,Object),iW=nW,sW=O1,oW=iW,aW=Object.prototype,uW=aW.hasOwnProperty;function lW(t){if(!sW(t))return oW(t);var e=[];for(var r in Object(t))uW.call(t,r)&&r!="constructor"&&e.push(r);return e}var cW=lW,fW=wk,dW=A1;function hW(t){return t!=null&&dW(t.length)&&!fW(t)}var Bk=hW,pW=Rk,mW=cW,gW=Bk;function vW(t){return gW(t)?pW(t):mW(t)}var ym=vW,yW=vm,_W=ym;function bW(t,e){return t&&yW(e,_W(e),t)}var xW=bW;function SW(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var wW=SW,EW=Fi,CW=O1,TW=wW,AW=Object.prototype,PW=AW.hasOwnProperty;function RW(t){if(!EW(t))return TW(t);var e=CW(t),r=[];for(var n in t)n=="constructor"&&(e||!PW.call(t,n))||r.push(n);return r}var OW=RW,BW=Rk,kW=OW,DW=Bk;function MW(t){return DW(t)?BW(t,!0):kW(t)}var B1=MW,IW=vm,FW=B1;function LW(t,e){return t&&IW(e,FW(e),t)}var NW=LW,pp={exports:{}};pp.exports;(function(t,e){var r=ei,n=e&&!e.nodeType&&e,i=n&&!0&&t&&!t.nodeType&&t,s=i&&i.exports===n,o=s?r.Buffer:void 0,a=o?o.allocUnsafe:void 0;function u(l,c){if(c)return l.slice();var f=l.length,d=a?a(f):new l.constructor(f);return l.copy(d),d}t.exports=u})(pp,pp.exports);var UW=pp.exports;function GW(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}var zW=GW;function $W(t,e){for(var r=-1,n=t==null?0:t.length,i=0,s=[];++r<n;){var o=t[r];e(o,r,t)&&(s[i++]=o)}return s}var jW=$W;function HW(){return[]}var kk=HW,VW=jW,WW=kk,XW=Object.prototype,qW=XW.propertyIsEnumerable,EC=Object.getOwnPropertySymbols,YW=EC?function(t){return t==null?[]:(t=Object(t),VW(EC(t),function(e){return qW.call(t,e)}))}:WW,k1=YW,KW=vm,ZW=k1;function QW(t,e){return KW(t,ZW(t),e)}var JW=QW;function eX(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}var Dk=eX,tX=Ok,rX=tX(Object.getPrototypeOf,Object),Mk=rX,nX=Dk,iX=Mk,sX=k1,oX=kk,aX=Object.getOwnPropertySymbols,uX=aX?function(t){for(var e=[];t;)nX(e,sX(t)),t=iX(t);return e}:oX,Ik=uX,lX=vm,cX=Ik;function fX(t,e){return lX(t,cX(t),e)}var dX=fX,hX=Dk,pX=fs;function mX(t,e,r){var n=e(t);return pX(t)?n:hX(n,r(t))}var Fk=mX,gX=Fk,vX=k1,yX=ym;function _X(t){return gX(t,yX,vX)}var Lk=_X,bX=Fk,xX=Ik,SX=B1;function wX(t){return bX(t,SX,xX)}var Nk=wX,EX=na,CX=ei,TX=EX(CX,"DataView"),AX=TX,PX=na,RX=ei,OX=PX(RX,"Promise"),BX=OX,kX=na,DX=ei,MX=kX(DX,"Set"),Uk=MX,IX=na,FX=ei,LX=IX(FX,"WeakMap"),NX=LX,b_=AX,x_=x1,S_=BX,w_=Uk,E_=NX,Gk=Uf,il=Ek,CC="[object Map]",UX="[object Object]",TC="[object Promise]",AC="[object Set]",PC="[object WeakMap]",RC="[object DataView]",GX=il(b_),zX=il(x_),$X=il(S_),jX=il(w_),HX=il(E_),wo=Gk;(b_&&wo(new b_(new ArrayBuffer(1)))!=RC||x_&&wo(new x_)!=CC||S_&&wo(S_.resolve())!=TC||w_&&wo(new w_)!=AC||E_&&wo(new E_)!=PC)&&(wo=function(t){var e=Gk(t),r=e==UX?t.constructor:void 0,n=r?il(r):"";if(n)switch(n){case GX:return RC;case zX:return CC;case $X:return TC;case jX:return AC;case HX:return PC}return e});var _m=wo,VX=Object.prototype,WX=VX.hasOwnProperty;function XX(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&WX.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var qX=XX,YX=ei,KX=YX.Uint8Array,zk=KX,OC=zk;function ZX(t){var e=new t.constructor(t.byteLength);return new OC(e).set(new OC(t)),e}var D1=ZX,QX=D1;function JX(t,e){var r=e?QX(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var eq=JX,tq=/\w*$/;function rq(t){var e=new t.constructor(t.source,tq.exec(t));return e.lastIndex=t.lastIndex,e}var nq=rq,BC=Nf,kC=BC?BC.prototype:void 0,DC=kC?kC.valueOf:void 0;function iq(t){return DC?Object(DC.call(t)):{}}var sq=iq,oq=D1;function aq(t,e){var r=e?oq(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var uq=aq,lq=D1,cq=eq,fq=nq,dq=sq,hq=uq,pq="[object Boolean]",mq="[object Date]",gq="[object Map]",vq="[object Number]",yq="[object RegExp]",_q="[object Set]",bq="[object String]",xq="[object Symbol]",Sq="[object ArrayBuffer]",wq="[object DataView]",Eq="[object Float32Array]",Cq="[object Float64Array]",Tq="[object Int8Array]",Aq="[object Int16Array]",Pq="[object Int32Array]",Rq="[object Uint8Array]",Oq="[object Uint8ClampedArray]",Bq="[object Uint16Array]",kq="[object Uint32Array]";function Dq(t,e,r){var n=t.constructor;switch(e){case Sq:return lq(t);case pq:case mq:return new n(+t);case wq:return cq(t,r);case Eq:case Cq:case Tq:case Aq:case Pq:case Rq:case Oq:case Bq:case kq:return hq(t,r);case gq:return new n;case vq:case bq:return new n(t);case yq:return fq(t);case _q:return new n;case xq:return dq(t)}}var Mq=Dq,Iq=Fi,MC=Object.create,Fq=function(){function t(){}return function(e){if(!Iq(e))return{};if(MC)return MC(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),Lq=Fq,Nq=Lq,Uq=Mk,Gq=O1;function zq(t){return typeof t.constructor=="function"&&!Gq(t)?Nq(Uq(t)):{}}var $q=zq,jq=_m,Hq=ia,Vq="[object Map]";function Wq(t){return Hq(t)&&jq(t)==Vq}var Xq=Wq,qq=Xq,Yq=P1,IC=R1,FC=IC&&IC.isMap,Kq=FC?Yq(FC):qq,Zq=Kq,Qq=_m,Jq=ia,eY="[object Set]";function tY(t){return Jq(t)&&Qq(t)==eY}var rY=tY,nY=rY,iY=P1,LC=R1,NC=LC&&LC.isSet,sY=NC?iY(NC):nY,oY=sY,aY=w1,uY=kH,lY=E1,cY=xW,fY=NW,dY=UW,hY=zW,pY=JW,mY=dX,gY=Lk,vY=Nk,yY=_m,_Y=qX,bY=Mq,xY=$q,SY=fs,wY=C1,EY=Zq,CY=Fi,TY=oY,AY=ym,PY=B1,RY=1,OY=2,BY=4,$k="[object Arguments]",kY="[object Array]",DY="[object Boolean]",MY="[object Date]",IY="[object Error]",jk="[object Function]",FY="[object GeneratorFunction]",LY="[object Map]",NY="[object Number]",Hk="[object Object]",UY="[object RegExp]",GY="[object Set]",zY="[object String]",$Y="[object Symbol]",jY="[object WeakMap]",HY="[object ArrayBuffer]",VY="[object DataView]",WY="[object Float32Array]",XY="[object Float64Array]",qY="[object Int8Array]",YY="[object Int16Array]",KY="[object Int32Array]",ZY="[object Uint8Array]",QY="[object Uint8ClampedArray]",JY="[object Uint16Array]",eK="[object Uint32Array]",Ve={};Ve[$k]=Ve[kY]=Ve[HY]=Ve[VY]=Ve[DY]=Ve[MY]=Ve[WY]=Ve[XY]=Ve[qY]=Ve[YY]=Ve[KY]=Ve[LY]=Ve[NY]=Ve[Hk]=Ve[UY]=Ve[GY]=Ve[zY]=Ve[$Y]=Ve[ZY]=Ve[QY]=Ve[JY]=Ve[eK]=!0;Ve[IY]=Ve[jk]=Ve[jY]=!1;function gh(t,e,r,n,i,s){var o,a=e&RY,u=e&OY,l=e&BY;if(r&&(o=i?r(t,n,i,s):r(t)),o!==void 0)return o;if(!CY(t))return t;var c=SY(t);if(c){if(o=_Y(t),!a)return hY(t,o)}else{var f=yY(t),d=f==jk||f==FY;if(wY(t))return dY(t,a);if(f==Hk||f==$k||d&&!i){if(o=u||d?{}:xY(t),!a)return u?mY(t,fY(o,t)):pY(t,cY(o,t))}else{if(!Ve[f])return i?t:{};o=bY(t,f,a)}}s||(s=new aY);var h=s.get(t);if(h)return h;s.set(t,o),TY(t)?t.forEach(function(g){o.add(gh(g,e,r,g,t,s))}):EY(t)&&t.forEach(function(g,v){o.set(v,gh(g,e,r,v,t,s))});var p=l?u?vY:gY:u?PY:AY,m=c?void 0:p(t);return uY(m||t,function(g,v){m&&(v=g,g=t[v]),lY(o,v,gh(g,e,r,v,t,s))}),o}var tK=gh,rK=tK,nK=1,iK=4;function sK(t){return rK(t,nK|iK)}var oK=sK;const M0e=Zt(oK);function Cd(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Vk={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(t,e){(function(r){t.exports=r()})(function(){return function r(n,i,s){function o(l,c){if(!i[l]){if(!n[l]){var f=typeof Cd=="function"&&Cd;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};n[l][0].call(h.exports,function(p){var m=n[l][1][p];return o(m||p)},h,h.exports,r,n,i,s)}return i[l].exports}for(var a=typeof Cd=="function"&&Cd,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(r,n,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,v,y=h.length;y;){for(v=h,h=[],g=-1;++g<y;)v[g]();y=h.length}d=!1}n.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,n,i){var s=r(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];n.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,S){if(typeof x!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var w=new this.constructor(o);if(this.state!==c){var P=this.state===l?x:S;h(w,P,this.outcome)}else this.queue.push(new d(w,x,S));return w};function d(x,S,w){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,S,w){s(function(){var P;try{P=S(w)}catch(C){return a.reject(x,C)}P===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,P)})}a.resolve=function(x,S){var w=g(p,S);if(w.status==="error")return a.reject(x,w.value);var P=w.value;if(P)m(x,P);else{x.state=l,x.outcome=S;for(var C=-1,R=x.queue.length;++C<R;)x.queue[C].callFulfilled(S)}return x},a.reject=function(x,S){x.state=u,x.outcome=S;for(var w=-1,P=x.queue.length;++w<P;)x.queue[w].callRejected(S);return x};function p(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function m(x,S){var w=!1;function P(N){w||(w=!0,a.reject(x,N))}function C(N){w||(w=!0,a.resolve(x,N))}function R(){S(C,P)}var F=g(R);F.status==="error"&&P(F.value)}function g(x,S){var w={};try{w.value=x(S),w.status="success"}catch(P){w.status="error",w.value=P}return w}f.resolve=v;function v(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=y;function y(x){var S=new this(o);return a.reject(S,x)}f.all=b;function b(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=x.length,P=!1;if(!w)return this.resolve([]);for(var C=new Array(w),R=0,F=-1,N=new this(o);++F<w;)G(x[F],F);return N;function G(j,re){S.resolve(j).then(U,function(z){P||(P=!0,a.reject(N,z))});function U(z){C[re]=z,++R===w&&!P&&(P=!0,a.resolve(N,C))}}}f.race=_;function _(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=x.length,P=!1;if(!w)return this.resolve([]);for(var C=-1,R=new this(o);++C<w;)F(x[C]);return R;function F(N){S.resolve(N).then(function(G){P||(P=!0,a.resolve(R,G))},function(G){P||(P=!0,a.reject(R,G))})}}},{1:1}],3:[function(r,n,i){(function(s){typeof s.Promise!="function"&&(s.Promise=r(2))}).call(this,typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,n,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E};function o(E,B){if(!(E instanceof B))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var E=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),B=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!E||B)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(E,B){E=E||[],B=B||{};try{return new Blob(E,B)}catch(k){if(k.name!=="TypeError")throw k;for(var T=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,I=new T,L=0;L<E.length;L+=1)I.append(E[L]);return I.getBlob(B.type)}}typeof Promise>"u"&&r(3);var f=Promise;function d(E,B){B&&E.then(function(T){B(null,T)},function(T){B(T)})}function h(E,B,T){typeof B=="function"&&E.then(B),typeof T=="function"&&E.catch(T)}function p(E){return typeof E!="string"&&(console.warn(E+" used as a key, but it is not a string."),E=String(E)),E}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,y={},b=Object.prototype.toString,_="readonly",x="readwrite";function S(E){for(var B=E.length,T=new ArrayBuffer(B),I=new Uint8Array(T),L=0;L<B;L++)I[L]=E.charCodeAt(L);return T}function w(E){return new f(function(B){var T=E.transaction(g,x),I=c([""]);T.objectStore(g).put(I,"key"),T.onabort=function(L){L.preventDefault(),L.stopPropagation(),B(!1)},T.oncomplete=function(){var L=navigator.userAgent.match(/Chrome\/(\d+)/),k=navigator.userAgent.match(/Edge\//);B(k||!L||parseInt(L[1],10)>=43)}}).catch(function(){return!1})}function P(E){return typeof v=="boolean"?f.resolve(v):w(E).then(function(B){return v=B,v})}function C(E){var B=y[E.name],T={};T.promise=new f(function(I,L){T.resolve=I,T.reject=L}),B.deferredOperations.push(T),B.dbReady?B.dbReady=B.dbReady.then(function(){return T.promise}):B.dbReady=T.promise}function R(E){var B=y[E.name],T=B.deferredOperations.pop();if(T)return T.resolve(),T.promise}function F(E,B){var T=y[E.name],I=T.deferredOperations.pop();if(I)return I.reject(B),I.promise}function N(E,B){return new f(function(T,I){if(y[E.name]=y[E.name]||q(),E.db)if(B)C(E),E.db.close();else return T(E.db);var L=[E.name];B&&L.push(E.version);var k=u.open.apply(u,L);B&&(k.onupgradeneeded=function(H){var X=k.result;try{X.createObjectStore(E.storeName),H.oldVersion<=1&&X.createObjectStore(g)}catch(K){if(K.name==="ConstraintError")console.warn('The database "'+E.name+'" has been upgraded from version '+H.oldVersion+" to version "+H.newVersion+', but the storage "'+E.storeName+'" already exists.');else throw K}}),k.onerror=function(H){H.preventDefault(),I(k.error)},k.onsuccess=function(){var H=k.result;H.onversionchange=function(X){X.target.close()},T(H),R(E)}})}function G(E){return N(E,!1)}function j(E){return N(E,!0)}function re(E,B){if(!E.db)return!0;var T=!E.db.objectStoreNames.contains(E.storeName),I=E.version<E.db.version,L=E.version>E.db.version;if(I&&(E.version!==B&&console.warn('The database "'+E.name+`" can't be downgraded from version `+E.db.version+" to version "+E.version+"."),E.version=E.db.version),L||T){if(T){var k=E.db.version+1;k>E.version&&(E.version=k)}return!0}return!1}function U(E){return new f(function(B,T){var I=new FileReader;I.onerror=T,I.onloadend=function(L){var k=btoa(L.target.result||"");B({__local_forage_encoded_blob:!0,data:k,type:E.type})},I.readAsBinaryString(E)})}function z(E){var B=S(atob(E.data));return c([B],{type:E.type})}function pe(E){return E&&E.__local_forage_encoded_blob}function ae(E){var B=this,T=B._initReady().then(function(){var I=y[B._dbInfo.name];if(I&&I.dbReady)return I.dbReady});return h(T,E,E),T}function we(E){C(E);for(var B=y[E.name],T=B.forages,I=0;I<T.length;I++){var L=T[I];L._dbInfo.db&&(L._dbInfo.db.close(),L._dbInfo.db=null)}return E.db=null,G(E).then(function(k){return E.db=k,re(E)?j(E):k}).then(function(k){E.db=B.db=k;for(var H=0;H<T.length;H++)T[H]._dbInfo.db=k}).catch(function(k){throw F(E,k),k})}function V(E,B,T,I){I===void 0&&(I=1);try{var L=E.db.transaction(E.storeName,B);T(null,L)}catch(k){if(I>0&&(!E.db||k.name==="InvalidStateError"||k.name==="NotFoundError"))return f.resolve().then(function(){if(!E.db||k.name==="NotFoundError"&&!E.db.objectStoreNames.contains(E.storeName)&&E.version<=E.db.version)return E.db&&(E.version=E.db.version+1),j(E)}).then(function(){return we(E).then(function(){V(E,B,T,I-1)})}).catch(T);T(k)}}function q(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function ie(E){var B=this,T={db:null};if(E)for(var I in E)T[I]=E[I];var L=y[T.name];L||(L=q(),y[T.name]=L),L.forages.push(B),B._initReady||(B._initReady=B.ready,B.ready=ae);var k=[];function H(){return f.resolve()}for(var X=0;X<L.forages.length;X++){var K=L.forages[X];K!==B&&k.push(K._initReady().catch(H))}var Z=L.forages.slice(0);return f.all(k).then(function(){return T.db=L.db,G(T)}).then(function(ee){return T.db=ee,re(T,B._defaultConfig.version)?j(T):ee}).then(function(ee){T.db=L.db=ee,B._dbInfo=T;for(var le=0;le<Z.length;le++){var Se=Z[le];Se!==B&&(Se._dbInfo.db=T.db,Se._dbInfo.version=T.version)}})}function ge(E,B){var T=this;E=p(E);var I=new f(function(L,k){T.ready().then(function(){V(T._dbInfo,_,function(H,X){if(H)return k(H);try{var K=X.objectStore(T._dbInfo.storeName),Z=K.get(E);Z.onsuccess=function(){var ee=Z.result;ee===void 0&&(ee=null),pe(ee)&&(ee=z(ee)),L(ee)},Z.onerror=function(){k(Z.error)}}catch(ee){k(ee)}})}).catch(k)});return d(I,B),I}function be(E,B){var T=this,I=new f(function(L,k){T.ready().then(function(){V(T._dbInfo,_,function(H,X){if(H)return k(H);try{var K=X.objectStore(T._dbInfo.storeName),Z=K.openCursor(),ee=1;Z.onsuccess=function(){var le=Z.result;if(le){var Se=le.value;pe(Se)&&(Se=z(Se));var Fe=E(Se,le.key,ee++);Fe!==void 0?L(Fe):le.continue()}else L()},Z.onerror=function(){k(Z.error)}}catch(le){k(le)}})}).catch(k)});return d(I,B),I}function ot(E,B,T){var I=this;E=p(E);var L=new f(function(k,H){var X;I.ready().then(function(){return X=I._dbInfo,b.call(B)==="[object Blob]"?P(X.db).then(function(K){return K?B:U(B)}):B}).then(function(K){V(I._dbInfo,x,function(Z,ee){if(Z)return H(Z);try{var le=ee.objectStore(I._dbInfo.storeName);K===null&&(K=void 0);var Se=le.put(K,E);ee.oncomplete=function(){K===void 0&&(K=null),k(K)},ee.onabort=ee.onerror=function(){var Fe=Se.error?Se.error:Se.transaction.error;H(Fe)}}catch(Fe){H(Fe)}})}).catch(H)});return d(L,T),L}function bt(E,B){var T=this;E=p(E);var I=new f(function(L,k){T.ready().then(function(){V(T._dbInfo,x,function(H,X){if(H)return k(H);try{var K=X.objectStore(T._dbInfo.storeName),Z=K.delete(E);X.oncomplete=function(){L()},X.onerror=function(){k(Z.error)},X.onabort=function(){var ee=Z.error?Z.error:Z.transaction.error;k(ee)}}catch(ee){k(ee)}})}).catch(k)});return d(I,B),I}function zt(E){var B=this,T=new f(function(I,L){B.ready().then(function(){V(B._dbInfo,x,function(k,H){if(k)return L(k);try{var X=H.objectStore(B._dbInfo.storeName),K=X.clear();H.oncomplete=function(){I()},H.onabort=H.onerror=function(){var Z=K.error?K.error:K.transaction.error;L(Z)}}catch(Z){L(Z)}})}).catch(L)});return d(T,E),T}function xt(E){var B=this,T=new f(function(I,L){B.ready().then(function(){V(B._dbInfo,_,function(k,H){if(k)return L(k);try{var X=H.objectStore(B._dbInfo.storeName),K=X.count();K.onsuccess=function(){I(K.result)},K.onerror=function(){L(K.error)}}catch(Z){L(Z)}})}).catch(L)});return d(T,E),T}function Qr(E,B){var T=this,I=new f(function(L,k){if(E<0){L(null);return}T.ready().then(function(){V(T._dbInfo,_,function(H,X){if(H)return k(H);try{var K=X.objectStore(T._dbInfo.storeName),Z=!1,ee=K.openKeyCursor();ee.onsuccess=function(){var le=ee.result;if(!le){L(null);return}E===0||Z?L(le.key):(Z=!0,le.advance(E))},ee.onerror=function(){k(ee.error)}}catch(le){k(le)}})}).catch(k)});return d(I,B),I}function _r(E){var B=this,T=new f(function(I,L){B.ready().then(function(){V(B._dbInfo,_,function(k,H){if(k)return L(k);try{var X=H.objectStore(B._dbInfo.storeName),K=X.openKeyCursor(),Z=[];K.onsuccess=function(){var ee=K.result;if(!ee){I(Z);return}Z.push(ee.key),ee.continue()},K.onerror=function(){L(K.error)}}catch(ee){L(ee)}})}).catch(L)});return d(T,E),T}function br(E,B){B=m.apply(this,arguments);var T=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||T.name,E.storeName=E.storeName||T.storeName);var I=this,L;if(!E.name)L=f.reject("Invalid arguments");else{var k=E.name===T.name&&I._dbInfo.db,H=k?f.resolve(I._dbInfo.db):G(E).then(function(X){var K=y[E.name],Z=K.forages;K.db=X;for(var ee=0;ee<Z.length;ee++)Z[ee]._dbInfo.db=X;return X});E.storeName?L=H.then(function(X){if(X.objectStoreNames.contains(E.storeName)){var K=X.version+1;C(E);var Z=y[E.name],ee=Z.forages;X.close();for(var le=0;le<ee.length;le++){var Se=ee[le];Se._dbInfo.db=null,Se._dbInfo.version=K}var Fe=new f(function(Ne,Ot){var St=u.open(E.name,K);St.onerror=function(Sn){var El=St.result;El.close(),Ot(Sn)},St.onupgradeneeded=function(){var Sn=St.result;Sn.deleteObjectStore(E.storeName)},St.onsuccess=function(){var Sn=St.result;Sn.close(),Ne(Sn)}});return Fe.then(function(Ne){Z.db=Ne;for(var Ot=0;Ot<ee.length;Ot++){var St=ee[Ot];St._dbInfo.db=Ne,R(St._dbInfo)}}).catch(function(Ne){throw(F(E,Ne)||f.resolve()).catch(function(){}),Ne})}}):L=H.then(function(X){C(E);var K=y[E.name],Z=K.forages;X.close();for(var ee=0;ee<Z.length;ee++){var le=Z[ee];le._dbInfo.db=null}var Se=new f(function(Fe,Ne){var Ot=u.deleteDatabase(E.name);Ot.onerror=function(){var St=Ot.result;St&&St.close(),Ne(Ot.error)},Ot.onblocked=function(){console.warn('dropInstance blocked for database "'+E.name+'" until all open connections are closed')},Ot.onsuccess=function(){var St=Ot.result;St&&St.close(),Fe(St)}});return Se.then(function(Fe){K.db=Fe;for(var Ne=0;Ne<Z.length;Ne++){var Ot=Z[Ne];R(Ot._dbInfo)}}).catch(function(Fe){throw(F(E,Fe)||f.resolve()).catch(function(){}),Fe})})}return d(L,B),L}var Br={_driver:"asyncStorage",_initStorage:ie,_support:l(),iterate:be,getItem:ge,setItem:ot,removeItem:bt,clear:zt,length:xt,key:Qr,keys:_r,dropInstance:br};function xr(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vl="~~local_forage_type~",vo=/^~~local_forage_type~([^~]+)~/,ms="__lfsc__:",fa=ms.length,yl="arbf",da="blob",ad="si08",ud="ui08",ld="uic8",cd="si16",_l="si32",fd="ur16",bl="ui32",xl="fl32",zn="fl64",Sl=fa+yl.length,A=Object.prototype.toString;function D(E){var B=E.length*.75,T=E.length,I,L=0,k,H,X,K;E[E.length-1]==="="&&(B--,E[E.length-2]==="="&&B--);var Z=new ArrayBuffer(B),ee=new Uint8Array(Z);for(I=0;I<T;I+=4)k=It.indexOf(E[I]),H=It.indexOf(E[I+1]),X=It.indexOf(E[I+2]),K=It.indexOf(E[I+3]),ee[L++]=k<<2|H>>4,ee[L++]=(H&15)<<4|X>>2,ee[L++]=(X&3)<<6|K&63;return Z}function W(E){var B=new Uint8Array(E),T="",I;for(I=0;I<B.length;I+=3)T+=It[B[I]>>2],T+=It[(B[I]&3)<<4|B[I+1]>>4],T+=It[(B[I+1]&15)<<2|B[I+2]>>6],T+=It[B[I+2]&63];return B.length%3===2?T=T.substring(0,T.length-1)+"=":B.length%3===1&&(T=T.substring(0,T.length-2)+"=="),T}function $(E,B){var T="";if(E&&(T=A.call(E)),E&&(T==="[object ArrayBuffer]"||E.buffer&&A.call(E.buffer)==="[object ArrayBuffer]")){var I,L=ms;E instanceof ArrayBuffer?(I=E,L+=yl):(I=E.buffer,T==="[object Int8Array]"?L+=ad:T==="[object Uint8Array]"?L+=ud:T==="[object Uint8ClampedArray]"?L+=ld:T==="[object Int16Array]"?L+=cd:T==="[object Uint16Array]"?L+=fd:T==="[object Int32Array]"?L+=_l:T==="[object Uint32Array]"?L+=bl:T==="[object Float32Array]"?L+=xl:T==="[object Float64Array]"?L+=zn:B(new Error("Failed to get type for BinaryArray"))),B(L+W(I))}else if(T==="[object Blob]"){var k=new FileReader;k.onload=function(){var H=vl+E.type+"~"+W(this.result);B(ms+da+H)},k.readAsArrayBuffer(E)}else try{B(JSON.stringify(E))}catch(H){console.error("Couldn't convert value into a JSON string: ",E),B(null,H)}}function te(E){if(E.substring(0,fa)!==ms)return JSON.parse(E);var B=E.substring(Sl),T=E.substring(fa,Sl),I;if(T===da&&vo.test(B)){var L=B.match(vo);I=L[1],B=B.substring(L[0].length)}var k=D(B);switch(T){case yl:return k;case da:return c([k],{type:I});case ad:return new Int8Array(k);case ud:return new Uint8Array(k);case ld:return new Uint8ClampedArray(k);case cd:return new Int16Array(k);case fd:return new Uint16Array(k);case _l:return new Int32Array(k);case bl:return new Uint32Array(k);case xl:return new Float32Array(k);case zn:return new Float64Array(k);default:throw new Error("Unkown type: "+T)}}var ue={serialize:$,deserialize:te,stringToBuffer:D,bufferToString:W};function de(E,B,T,I){E.executeSql("CREATE TABLE IF NOT EXISTS "+B.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],T,I)}function Oe(E){var B=this,T={db:null};if(E)for(var I in E)T[I]=typeof E[I]!="string"?E[I].toString():E[I];var L=new f(function(k,H){try{T.db=openDatabase(T.name,String(T.version),T.description,T.size)}catch(X){return H(X)}T.db.transaction(function(X){de(X,T,function(){B._dbInfo=T,k()},function(K,Z){H(Z)})},H)});return T.serializer=ue,L}function xe(E,B,T,I,L,k){E.executeSql(T,I,L,function(H,X){X.code===X.SYNTAX_ERR?H.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[B.storeName],function(K,Z){Z.rows.length?k(K,X):de(K,B,function(){K.executeSql(T,I,L,k)},k)},k):k(H,X)},k)}function tt(E,B){var T=this;E=p(E);var I=new f(function(L,k){T.ready().then(function(){var H=T._dbInfo;H.db.transaction(function(X){xe(X,H,"SELECT * FROM "+H.storeName+" WHERE key = ? LIMIT 1",[E],function(K,Z){var ee=Z.rows.length?Z.rows.item(0).value:null;ee&&(ee=H.serializer.deserialize(ee)),L(ee)},function(K,Z){k(Z)})})}).catch(k)});return d(I,B),I}function rt(E,B){var T=this,I=new f(function(L,k){T.ready().then(function(){var H=T._dbInfo;H.db.transaction(function(X){xe(X,H,"SELECT * FROM "+H.storeName,[],function(K,Z){for(var ee=Z.rows,le=ee.length,Se=0;Se<le;Se++){var Fe=ee.item(Se),Ne=Fe.value;if(Ne&&(Ne=H.serializer.deserialize(Ne)),Ne=E(Ne,Fe.key,Se+1),Ne!==void 0){L(Ne);return}}L()},function(K,Z){k(Z)})})}).catch(k)});return d(I,B),I}function $t(E,B,T,I){var L=this;E=p(E);var k=new f(function(H,X){L.ready().then(function(){B===void 0&&(B=null);var K=B,Z=L._dbInfo;Z.serializer.serialize(B,function(ee,le){le?X(le):Z.db.transaction(function(Se){xe(Se,Z,"INSERT OR REPLACE INTO "+Z.storeName+" (key, value) VALUES (?, ?)",[E,ee],function(){H(K)},function(Fe,Ne){X(Ne)})},function(Se){if(Se.code===Se.QUOTA_ERR){if(I>0){H($t.apply(L,[E,K,T,I-1]));return}X(Se)}})})}).catch(X)});return d(k,T),k}function Jr(E,B,T){return $t.apply(this,[E,B,T,1])}function gs(E,B){var T=this;E=p(E);var I=new f(function(L,k){T.ready().then(function(){var H=T._dbInfo;H.db.transaction(function(X){xe(X,H,"DELETE FROM "+H.storeName+" WHERE key = ?",[E],function(){L()},function(K,Z){k(Z)})})}).catch(k)});return d(I,B),I}function rv(E){var B=this,T=new f(function(I,L){B.ready().then(function(){var k=B._dbInfo;k.db.transaction(function(H){xe(H,k,"DELETE FROM "+k.storeName,[],function(){I()},function(X,K){L(K)})})}).catch(L)});return d(T,E),T}function gG(E){var B=this,T=new f(function(I,L){B.ready().then(function(){var k=B._dbInfo;k.db.transaction(function(H){xe(H,k,"SELECT COUNT(key) as c FROM "+k.storeName,[],function(X,K){var Z=K.rows.item(0).c;I(Z)},function(X,K){L(K)})})}).catch(L)});return d(T,E),T}function vG(E,B){var T=this,I=new f(function(L,k){T.ready().then(function(){var H=T._dbInfo;H.db.transaction(function(X){xe(X,H,"SELECT key FROM "+H.storeName+" WHERE id = ? LIMIT 1",[E+1],function(K,Z){var ee=Z.rows.length?Z.rows.item(0).key:null;L(ee)},function(K,Z){k(Z)})})}).catch(k)});return d(I,B),I}function yG(E){var B=this,T=new f(function(I,L){B.ready().then(function(){var k=B._dbInfo;k.db.transaction(function(H){xe(H,k,"SELECT key FROM "+k.storeName,[],function(X,K){for(var Z=[],ee=0;ee<K.rows.length;ee++)Z.push(K.rows.item(ee).key);I(Z)},function(X,K){L(K)})})}).catch(L)});return d(T,E),T}function _G(E){return new f(function(B,T){E.transaction(function(I){I.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(L,k){for(var H=[],X=0;X<k.rows.length;X++)H.push(k.rows.item(X).name);B({db:E,storeNames:H})},function(L,k){T(k)})},function(I){T(I)})})}function bG(E,B){B=m.apply(this,arguments);var T=this.config();E=typeof E!="function"&&E||{},E.name||(E.name=E.name||T.name,E.storeName=E.storeName||T.storeName);var I=this,L;return E.name?L=new f(function(k){var H;E.name===T.name?H=I._dbInfo.db:H=openDatabase(E.name,"","",0),E.storeName?k({db:H,storeNames:[E.storeName]}):k(_G(H))}).then(function(k){return new f(function(H,X){k.db.transaction(function(K){function Z(Fe){return new f(function(Ne,Ot){K.executeSql("DROP TABLE IF EXISTS "+Fe,[],function(){Ne()},function(St,Sn){Ot(Sn)})})}for(var ee=[],le=0,Se=k.storeNames.length;le<Se;le++)ee.push(Z(k.storeNames[le]));f.all(ee).then(function(){H()}).catch(function(Fe){X(Fe)})},function(K){X(K)})})}):L=f.reject("Invalid arguments"),d(L,B),L}var xG={_driver:"webSQLStorage",_initStorage:Oe,_support:xr(),iterate:rt,getItem:tt,setItem:Jr,removeItem:gs,clear:rv,length:gG,key:vG,keys:yG,dropInstance:bG};function SG(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function B3(E,B){var T=E.name+"/";return E.storeName!==B.storeName&&(T+=E.storeName+"/"),T}function wG(){var E="_localforage_support_test";try{return localStorage.setItem(E,!0),localStorage.removeItem(E),!1}catch{return!0}}function EG(){return!wG()||localStorage.length>0}function CG(E){var B=this,T={};if(E)for(var I in E)T[I]=E[I];return T.keyPrefix=B3(E,B._defaultConfig),EG()?(B._dbInfo=T,T.serializer=ue,f.resolve()):f.reject()}function TG(E){var B=this,T=B.ready().then(function(){for(var I=B._dbInfo.keyPrefix,L=localStorage.length-1;L>=0;L--){var k=localStorage.key(L);k.indexOf(I)===0&&localStorage.removeItem(k)}});return d(T,E),T}function AG(E,B){var T=this;E=p(E);var I=T.ready().then(function(){var L=T._dbInfo,k=localStorage.getItem(L.keyPrefix+E);return k&&(k=L.serializer.deserialize(k)),k});return d(I,B),I}function PG(E,B){var T=this,I=T.ready().then(function(){for(var L=T._dbInfo,k=L.keyPrefix,H=k.length,X=localStorage.length,K=1,Z=0;Z<X;Z++){var ee=localStorage.key(Z);if(ee.indexOf(k)===0){var le=localStorage.getItem(ee);if(le&&(le=L.serializer.deserialize(le)),le=E(le,ee.substring(H),K++),le!==void 0)return le}}});return d(I,B),I}function RG(E,B){var T=this,I=T.ready().then(function(){var L=T._dbInfo,k;try{k=localStorage.key(E)}catch{k=null}return k&&(k=k.substring(L.keyPrefix.length)),k});return d(I,B),I}function OG(E){var B=this,T=B.ready().then(function(){for(var I=B._dbInfo,L=localStorage.length,k=[],H=0;H<L;H++){var X=localStorage.key(H);X.indexOf(I.keyPrefix)===0&&k.push(X.substring(I.keyPrefix.length))}return k});return d(T,E),T}function BG(E){var B=this,T=B.keys().then(function(I){return I.length});return d(T,E),T}function kG(E,B){var T=this;E=p(E);var I=T.ready().then(function(){var L=T._dbInfo;localStorage.removeItem(L.keyPrefix+E)});return d(I,B),I}function DG(E,B,T){var I=this;E=p(E);var L=I.ready().then(function(){B===void 0&&(B=null);var k=B;return new f(function(H,X){var K=I._dbInfo;K.serializer.serialize(B,function(Z,ee){if(ee)X(ee);else try{localStorage.setItem(K.keyPrefix+E,Z),H(k)}catch(le){(le.name==="QuotaExceededError"||le.name==="NS_ERROR_DOM_QUOTA_REACHED")&&X(le),X(le)}})})});return d(L,T),L}function MG(E,B){if(B=m.apply(this,arguments),E=typeof E!="function"&&E||{},!E.name){var T=this.config();E.name=E.name||T.name,E.storeName=E.storeName||T.storeName}var I=this,L;return E.name?L=new f(function(k){E.storeName?k(B3(E,I._defaultConfig)):k(E.name+"/")}).then(function(k){for(var H=localStorage.length-1;H>=0;H--){var X=localStorage.key(H);X.indexOf(k)===0&&localStorage.removeItem(X)}}):L=f.reject("Invalid arguments"),d(L,B),L}var IG={_driver:"localStorageWrapper",_initStorage:CG,_support:SG(),iterate:PG,getItem:AG,setItem:DG,removeItem:kG,clear:TG,length:BG,key:RG,keys:OG,dropInstance:MG},FG=function(B,T){return B===T||typeof B=="number"&&typeof T=="number"&&isNaN(B)&&isNaN(T)},LG=function(B,T){for(var I=B.length,L=0;L<I;){if(FG(B[L],T))return!0;L++}return!1},k3=Array.isArray||function(E){return Object.prototype.toString.call(E)==="[object Array]"},wl={},D3={},ha={INDEXEDDB:Br,WEBSQL:xG,LOCALSTORAGE:IG},NG=[ha.INDEXEDDB._driver,ha.WEBSQL._driver,ha.LOCALSTORAGE._driver],dd=["dropInstance"],nv=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(dd),UG={description:"",driver:NG.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function GG(E,B){E[B]=function(){var T=arguments;return E.ready().then(function(){return E[B].apply(E,T)})}}function iv(){for(var E=1;E<arguments.length;E++){var B=arguments[E];if(B)for(var T in B)B.hasOwnProperty(T)&&(k3(B[T])?arguments[0][T]=B[T].slice():arguments[0][T]=B[T])}return arguments[0]}var zG=function(){function E(B){o(this,E);for(var T in ha)if(ha.hasOwnProperty(T)){var I=ha[T],L=I._driver;this[T]=L,wl[L]||this.defineDriver(I)}this._defaultConfig=iv({},UG),this._config=iv({},this._defaultConfig,B),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return E.prototype.config=function(T){if((typeof T>"u"?"undefined":s(T))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var I in T){if(I==="storeName"&&(T[I]=T[I].replace(/\W/g,"_")),I==="version"&&typeof T[I]!="number")return new Error("Database version must be a number.");this._config[I]=T[I]}return"driver"in T&&T.driver?this.setDriver(this._config.driver):!0}else return typeof T=="string"?this._config[T]:this._config},E.prototype.defineDriver=function(T,I,L){var k=new f(function(H,X){try{var K=T._driver,Z=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!T._driver){X(Z);return}for(var ee=nv.concat("_initStorage"),le=0,Se=ee.length;le<Se;le++){var Fe=ee[le],Ne=!LG(dd,Fe);if((Ne||T[Fe])&&typeof T[Fe]!="function"){X(Z);return}}var Ot=function(){for(var El=function(HG){return function(){var VG=new Error("Method "+HG+" is not implemented by the current driver"),M3=f.reject(VG);return d(M3,arguments[arguments.length-1]),M3}},sv=0,jG=dd.length;sv<jG;sv++){var ov=dd[sv];T[ov]||(T[ov]=El(ov))}};Ot();var St=function(El){wl[K]&&console.info("Redefining LocalForage driver: "+K),wl[K]=T,D3[K]=El,H()};"_support"in T?T._support&&typeof T._support=="function"?T._support().then(St,X):St(!!T._support):St(!0)}catch(Sn){X(Sn)}});return h(k,I,L),k},E.prototype.driver=function(){return this._driver||null},E.prototype.getDriver=function(T,I,L){var k=wl[T]?f.resolve(wl[T]):f.reject(new Error("Driver not found."));return h(k,I,L),k},E.prototype.getSerializer=function(T){var I=f.resolve(ue);return h(I,T),I},E.prototype.ready=function(T){var I=this,L=I._driverSet.then(function(){return I._ready===null&&(I._ready=I._initDriver()),I._ready});return h(L,T,T),L},E.prototype.setDriver=function(T,I,L){var k=this;k3(T)||(T=[T]);var H=this._getSupportedDrivers(T);function X(){k._config.driver=k.driver()}function K(le){return k._extend(le),X(),k._ready=k._initStorage(k._config),k._ready}function Z(le){return function(){var Se=0;function Fe(){for(;Se<le.length;){var Ne=le[Se];return Se++,k._dbInfo=null,k._ready=null,k.getDriver(Ne).then(K).catch(Fe)}X();var Ot=new Error("No available storage method found.");return k._driverSet=f.reject(Ot),k._driverSet}return Fe()}}var ee=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ee.then(function(){var le=H[0];return k._dbInfo=null,k._ready=null,k.getDriver(le).then(function(Se){k._driver=Se._driver,X(),k._wrapLibraryMethodsWithReady(),k._initDriver=Z(H)})}).catch(function(){X();var le=new Error("No available storage method found.");return k._driverSet=f.reject(le),k._driverSet}),h(this._driverSet,I,L),this._driverSet},E.prototype.supports=function(T){return!!D3[T]},E.prototype._extend=function(T){iv(this,T)},E.prototype._getSupportedDrivers=function(T){for(var I=[],L=0,k=T.length;L<k;L++){var H=T[L];this.supports(H)&&I.push(H)}return I},E.prototype._wrapLibraryMethodsWithReady=function(){for(var T=0,I=nv.length;T<I;T++)GG(this,nv[T])},E.prototype.createInstance=function(T){return new E(T)},E}(),$G=new zG;n.exports=$G},{3:3}]},{},[4])(4)})})(Vk);var aK=Vk.exports;const I0e=Zt(aK);var M1={exports:{}},Wk=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},uK=Wk,sa=Object.prototype.toString;function I1(t){return sa.call(t)==="[object Array]"}function C_(t){return typeof t>"u"}function lK(t){return t!==null&&!C_(t)&&t.constructor!==null&&!C_(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function cK(t){return sa.call(t)==="[object ArrayBuffer]"}function fK(t){return typeof FormData<"u"&&t instanceof FormData}function dK(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function hK(t){return typeof t=="string"}function pK(t){return typeof t=="number"}function Xk(t){return t!==null&&typeof t=="object"}function vh(t){if(sa.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function mK(t){return sa.call(t)==="[object Date]"}function gK(t){return sa.call(t)==="[object File]"}function vK(t){return sa.call(t)==="[object Blob]"}function qk(t){return sa.call(t)==="[object Function]"}function yK(t){return Xk(t)&&qk(t.pipe)}function _K(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}function bK(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function xK(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function F1(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),I1(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function T_(){var t={};function e(i,s){vh(t[s])&&vh(i)?t[s]=T_(t[s],i):vh(i)?t[s]=T_({},i):I1(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)F1(arguments[r],e);return t}function SK(t,e,r){return F1(e,function(i,s){r&&typeof i=="function"?t[s]=uK(i,r):t[s]=i}),t}function wK(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var yn={isArray:I1,isArrayBuffer:cK,isBuffer:lK,isFormData:fK,isArrayBufferView:dK,isString:hK,isNumber:pK,isObject:Xk,isPlainObject:vh,isUndefined:C_,isDate:mK,isFile:gK,isBlob:vK,isFunction:qk,isStream:yK,isURLSearchParams:_K,isStandardBrowserEnv:xK,forEach:F1,merge:T_,extend:SK,trim:bK,stripBOM:wK},ma=yn;function UC(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Yk=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(ma.isURLSearchParams(r))i=r.toString();else{var s=[];ma.forEach(r,function(u,l){u===null||typeof u>"u"||(ma.isArray(u)?l=l+"[]":u=[u],ma.forEach(u,function(f){ma.isDate(f)?f=f.toISOString():ma.isObject(f)&&(f=JSON.stringify(f)),s.push(UC(l)+"="+UC(f))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},EK=yn;function bm(){this.handlers=[]}bm.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};bm.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};bm.prototype.forEach=function(e){EK.forEach(this.handlers,function(n){n!==null&&e(n)})};var CK=bm,TK=yn,AK=function(e,r){TK.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},Kk=function(e,r,n,i,s){return e.config=r,n&&(e.code=n),e.request=i,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Uv,GC;function Zk(){if(GC)return Uv;GC=1;var t=Kk;return Uv=function(r,n,i,s,o){var a=new Error(r);return t(a,n,i,s,o)},Uv}var Gv,zC;function PK(){if(zC)return Gv;zC=1;var t=Zk();return Gv=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(t("Request failed with status code "+i.status,i.config,null,i.request,i))},Gv}var zv,$C;function RK(){if($C)return zv;$C=1;var t=yn;return zv=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,u){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),zv}var $v,jC;function OK(){return jC||(jC=1,$v=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}),$v}var jv,HC;function BK(){return HC||(HC=1,jv=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e}),jv}var Hv,VC;function kK(){if(VC)return Hv;VC=1;var t=OK(),e=BK();return Hv=function(n,i){return n&&!t(i)?e(n,i):i},Hv}var Vv,WC;function DK(){if(WC)return Vv;WC=1;var t=yn,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Vv=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.substr(0,a)).toLowerCase(),o=t.trim(l.substr(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},Vv}var Wv,XC;function MK(){if(XC)return Wv;XC=1;var t=yn;return Wv=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var u=t.isString(a)?s(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),Wv}var Xv,qC;function xm(){if(qC)return Xv;qC=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Xv=t,Xv}var qv,YC;function KC(){if(YC)return qv;YC=1;var t=yn,e=PK(),r=RK(),n=Yk,i=kK(),s=DK(),o=MK(),a=Zk(),u=Sm(),l=xm();return qv=function(f){return new Promise(function(h,p){var m=f.data,g=f.headers,v=f.responseType,y;function b(){f.cancelToken&&f.cancelToken.unsubscribe(y),f.signal&&f.signal.removeEventListener("abort",y)}t.isFormData(m)&&delete g["Content-Type"];var _=new XMLHttpRequest;if(f.auth){var x=f.auth.username||"",S=f.auth.password?unescape(encodeURIComponent(f.auth.password)):"";g.Authorization="Basic "+btoa(x+":"+S)}var w=i(f.baseURL,f.url);_.open(f.method.toUpperCase(),n(w,f.params,f.paramsSerializer),!0),_.timeout=f.timeout;function P(){if(_){var R="getAllResponseHeaders"in _?s(_.getAllResponseHeaders()):null,F=!v||v==="text"||v==="json"?_.responseText:_.response,N={data:F,status:_.status,statusText:_.statusText,headers:R,config:f,request:_};e(function(j){h(j),b()},function(j){p(j),b()},N),_=null}}if("onloadend"in _?_.onloadend=P:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(P)},_.onabort=function(){_&&(p(a("Request aborted",f,"ECONNABORTED",_)),_=null)},_.onerror=function(){p(a("Network Error",f,null,_)),_=null},_.ontimeout=function(){var F=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded",N=f.transitional||u.transitional;f.timeoutErrorMessage&&(F=f.timeoutErrorMessage),p(a(F,f,N.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",_)),_=null},t.isStandardBrowserEnv()){var C=(f.withCredentials||o(w))&&f.xsrfCookieName?r.read(f.xsrfCookieName):void 0;C&&(g[f.xsrfHeaderName]=C)}"setRequestHeader"in _&&t.forEach(g,function(F,N){typeof m>"u"&&N.toLowerCase()==="content-type"?delete g[N]:_.setRequestHeader(N,F)}),t.isUndefined(f.withCredentials)||(_.withCredentials=!!f.withCredentials),v&&v!=="json"&&(_.responseType=f.responseType),typeof f.onDownloadProgress=="function"&&_.addEventListener("progress",f.onDownloadProgress),typeof f.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",f.onUploadProgress),(f.cancelToken||f.signal)&&(y=function(R){_&&(p(!R||R&&R.type?new l("canceled"):R),_.abort(),_=null)},f.cancelToken&&f.cancelToken.subscribe(y),f.signal&&(f.signal.aborted?y():f.signal.addEventListener("abort",y))),m||(m=null),_.send(m)})},qv}var Yv,ZC;function Sm(){if(ZC)return Yv;ZC=1;var t=yn,e=AK,r=Kk,n={"Content-Type":"application/x-www-form-urlencoded"};function i(u,l){!t.isUndefined(u)&&t.isUndefined(u["Content-Type"])&&(u["Content-Type"]=l)}function s(){var u;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(u=KC()),u}function o(u,l,c){if(t.isString(u))try{return(l||JSON.parse)(u),t.trim(u)}catch(f){if(f.name!=="SyntaxError")throw f}return(c||JSON.stringify)(u)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:s(),transformRequest:[function(l,c){return e(c,"Accept"),e(c,"Content-Type"),t.isFormData(l)||t.isArrayBuffer(l)||t.isBuffer(l)||t.isStream(l)||t.isFile(l)||t.isBlob(l)?l:t.isArrayBufferView(l)?l.buffer:t.isURLSearchParams(l)?(i(c,"application/x-www-form-urlencoded;charset=utf-8"),l.toString()):t.isObject(l)||c&&c["Content-Type"]==="application/json"?(i(c,"application/json"),o(l)):l}],transformResponse:[function(l){var c=this.transitional||a.transitional,f=c&&c.silentJSONParsing,d=c&&c.forcedJSONParsing,h=!f&&this.responseType==="json";if(h||d&&t.isString(l)&&l.length)try{return JSON.parse(l)}catch(p){if(h)throw p.name==="SyntaxError"?r(p,this,"E_JSON_PARSE"):p}return l}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(l){return l>=200&&l<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(l){a.headers[l]={}}),t.forEach(["post","put","patch"],function(l){a.headers[l]=t.merge(n)}),Yv=a,Yv}var IK=yn,FK=Sm(),LK=function(e,r,n){var i=this||FK;return IK.forEach(n,function(o){e=o.call(i,e,r)}),e},Kv,QC;function Qk(){return QC||(QC=1,Kv=function(e){return!!(e&&e.__CANCEL__)}),Kv}var JC=yn,Zv=LK,NK=Qk(),UK=Sm(),GK=xm();function Qv(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new GK("canceled")}var zK=function(e){Qv(e),e.headers=e.headers||{},e.data=Zv.call(e,e.data,e.headers,e.transformRequest),e.headers=JC.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),JC.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||UK.adapter;return r(e).then(function(i){return Qv(e),i.data=Zv.call(e,i.data,i.headers,e.transformResponse),i},function(i){return NK(i)||(Qv(e),i&&i.response&&(i.response.data=Zv.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},en=yn,Jk=function(e,r){r=r||{};var n={};function i(c,f){return en.isPlainObject(c)&&en.isPlainObject(f)?en.merge(c,f):en.isPlainObject(f)?en.merge({},f):en.isArray(f)?f.slice():f}function s(c){if(en.isUndefined(r[c])){if(!en.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!en.isUndefined(r[c]))return i(void 0,r[c])}function a(c){if(en.isUndefined(r[c])){if(!en.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function u(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return en.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=l[f]||s,h=d(f);en.isUndefined(h)&&d!==u||(n[f]=h)}),n},Jv,eT;function eD(){return eT||(eT=1,Jv={version:"0.24.0"}),Jv}var $K=eD().version,L1={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){L1[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var tT={};L1.transitional=function(e,r,n){function i(s,o){return"[Axios v"+$K+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Error(i(o," has been removed"+(r?" in "+r:"")));return r&&!tT[o]&&(tT[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function jK(t,e,r){if(typeof t!="object")throw new TypeError("options must be an object");for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new TypeError("option "+s+" must be "+u);continue}if(r!==!0)throw Error("Unknown option "+s)}}var HK={assertOptions:jK,validators:L1},tD=yn,VK=Yk,rT=CK,nT=zK,wm=Jk,rD=HK,ga=rD.validators;function Gf(t){this.defaults=t,this.interceptors={request:new rT,response:new rT}}Gf.prototype.request=function(e){typeof e=="string"?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},e=wm(this.defaults,e),e.method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;r!==void 0&&rD.assertOptions(r,{silentJSONParsing:ga.transitional(ga.boolean),forcedJSONParsing:ga.transitional(ga.boolean),clarifyTimeoutError:ga.transitional(ga.boolean)},!1);var n=[],i=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(e)===!1||(i=i&&d.synchronous,n.unshift(d.fulfilled,d.rejected))});var s=[];this.interceptors.response.forEach(function(d){s.push(d.fulfilled,d.rejected)});var o;if(!i){var a=[nT,void 0];for(Array.prototype.unshift.apply(a,n),a=a.concat(s),o=Promise.resolve(e);a.length;)o=o.then(a.shift(),a.shift());return o}for(var u=e;n.length;){var l=n.shift(),c=n.shift();try{u=l(u)}catch(f){c(f);break}}try{o=nT(u)}catch(f){return Promise.reject(f)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};Gf.prototype.getUri=function(e){return e=wm(this.defaults,e),VK(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};tD.forEach(["delete","get","head","options"],function(e){Gf.prototype[e]=function(r,n){return this.request(wm(n||{},{method:e,url:r,data:(n||{}).data}))}});tD.forEach(["post","put","patch"],function(e){Gf.prototype[e]=function(r,n,i){return this.request(wm(i||{},{method:e,url:r,data:n}))}});var WK=Gf,e0,iT;function XK(){if(iT)return e0;iT=1;var t=xm();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){var o,a=i._listeners.length;for(o=0;o<a;o++)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(u){i.subscribe(u),o=u}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o){i.reason||(i.reason=new t(o),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},e0=e,e0}var t0,sT;function qK(){return sT||(sT=1,t0=function(e){return function(n){return e.apply(null,n)}}),t0}var r0,oT;function YK(){return oT||(oT=1,r0=function(e){return typeof e=="object"&&e.isAxiosError===!0}),r0}var aT=yn,KK=Wk,yh=WK,ZK=Jk,QK=Sm();function nD(t){var e=new yh(t),r=KK(yh.prototype.request,e);return aT.extend(r,yh.prototype,e),aT.extend(r,e),r.create=function(i){return nD(ZK(t,i))},r}var Li=nD(QK);Li.Axios=yh;Li.Cancel=xm();Li.CancelToken=XK();Li.isCancel=Qk();Li.VERSION=eD().version;Li.all=function(e){return Promise.all(e)};Li.spread=qK();Li.isAxiosError=YK();M1.exports=Li;M1.exports.default=Li;var JK=M1.exports,eZ=JK;const tZ=eZ;class rZ{constructor(){this.url="",this.level="all",this.mongoUrl="mongodb://localhost:27017/",this.collection="main",this.isUpload=!0}init(e,r){this.url=e,r&&(this.mongoUrl=r)}setUpload(e){this.isUpload=e}setCollection(e){this.collection=e}setLevel(e){this.level=e.toUpperCase()}upload(e,r,n,i){typeof e!="string"&&this.error("log",void 0,!1);let s={log:{info:e,data:r,level:n,now:i},mongoUrl:this.mongoUrl,collection:this.collection};const o=this;this.url!==""&&this.isUpload&&tZ.post(this.url+"/log",s).then(a=>{o.trace("Logged to cloud.",void 0,!1)}).catch(a=>{o.error("Logging to cloud failed!",void 0,!1)})}clog(e,r,n,i,s,o){const a={all:7,ALL:7,TRACE:6,DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,NONE:0,none:0};a[n]<=a[this.level]&&(console.log("%c%s%c%s%c%s%c %s","color:white;background-color:"+i,"["+n+"]",""," ","color:"+i,"["+s.toLocaleString()+"]","",e),r&&(console.log(r),console.log("------------------------"))),o===void 0&&this.upload(e,r,n,s),o!==void 0&&o&&this.upload(e,r,n,s)}trace(e,r,n){const i=new Date,s="TRACE",o="#005CAF";this.clog(e,r,s,o,i,n)}debug(e,r,n){const i=new Date,s="DEBUG",o="#0089A7";this.clog(e,r,s,o,i,n)}info(e,r,n){const i=new Date,s="INFO",o="#00896C";this.clog(e,r,s,o,i,n)}warn(e,r,n){const i=new Date,s="WARN",o="#DDA52D";this.clog(e,r,s,o,i,n)}error(e,r,n){const i=new Date,s="ERROR",o="#AB3B3A";this.clog(e,r,s,o,i,n)}fatal(e,r,n){const i=new Date,s="FATAL",o="#E16B8C";this.clog(e,r,s,o,i,n)}}var nZ=rZ;const F0e=Zt(nZ),iZ="modulepreload",sZ=function(t){return"https://cdn.jsdelivr.net/gh/cpu251/Coincident-Apartment@main/web_low/"+t},uT={},mp=function(e,r,n){if(!r||r.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=sZ(s),s in uT)return;uT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let c=i.length-1;c>=0;c--){const f=i[c];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":iZ,o||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),o)return new Promise((c,f)=>{l.addEventListener("load",c),l.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var O=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(O||{});const A_=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},ic=(t,e)=>A_(t).priority??e,me={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(A_).forEach(e=>{e.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,e)})}),this},add(...t){return t.map(A_).forEach(e=>{e.type.forEach(r=>{var s,o;const n=this._addHandlers,i=this._queue;n[r]?(o=n[r])==null||o.call(n,e):(i[r]=i[r]||[],(s=i[r])==null||s.push(e))})}),this},handle(t,e,r){var o;const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{r.name&&(e[r.name]=r.ref)},r=>{r.name&&delete e[r.name]})},handleByNamedList(t,e,r=-1){return this.handle(t,n=>{e.findIndex(s=>s.name===n.name)>=0||(e.push({name:n.name,value:n.ref}),e.sort((s,o)=>ic(o.value,r)-ic(s.value,r)))},n=>{const i=e.findIndex(s=>s.name===n.name);i!==-1&&e.splice(i,1)})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>ic(s,r)-ic(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})},mixin(t,...e){for(const r of e)Object.defineProperties(t.prototype,Object.getOwnPropertyDescriptors(r))}},iD={extension:{type:O.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await mp(()=>Promise.resolve().then(()=>P0e),void 0)}},sD={extension:{type:O.Environment,name:"webworker",priority:0},test:()=>typeof self<"u"&&self.WorkerGlobalScope!==void 0,load:async()=>{await mp(()=>Promise.resolve().then(()=>R0e),void 0)}};class Et{constructor(e,r,n){this._x=r||0,this._y=n||0,this._observer=e}clone(e){return new Et(e??this._observer,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this._observer._onUpdate(this)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this._observer._onUpdate(this)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this._observer._onUpdate(this))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this._observer._onUpdate(this))}}var oD={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function s(u,l,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var h=new i(c,f||u,d),p=r?r+l:l;return u._events[p]?u._events[p].fn?u._events[p]=[u._events[p],h]:u._events[p].push(h):(u._events[p]=h,u._eventsCount++),u}function o(u,l){--u._eventsCount===0?u._events=new n:delete u._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=r?r+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,p=new Array(h);d<h;d++)p[d]=f[d].fn;return p},a.prototype.listenerCount=function(l){var c=r?r+l:l,f=this._events[c];return f?f.fn?1:f.length:0},a.prototype.emit=function(l,c,f,d,h,p){var m=r?r+l:l;if(!this._events[m])return!1;var g=this._events[m],v=arguments.length,y,b;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,d),!0;case 5:return g.fn.call(g.context,c,f,d,h),!0;case 6:return g.fn.call(g.context,c,f,d,h,p),!0}for(b=1,y=new Array(v-1);b<v;b++)y[b-1]=arguments[b];g.fn.apply(g.context,y)}else{var _=g.length,x;for(b=0;b<_;b++)switch(g[b].once&&this.removeListener(l,g[b].fn,void 0,!0),v){case 1:g[b].fn.call(g[b].context);break;case 2:g[b].fn.call(g[b].context,c);break;case 3:g[b].fn.call(g[b].context,c,f);break;case 4:g[b].fn.call(g[b].context,c,f,d);break;default:if(!y)for(x=1,y=new Array(v-1);x<v;x++)y[x-1]=arguments[x];g[b].fn.apply(g[b].context,y)}}return!0},a.prototype.on=function(l,c,f){return s(this,l,c,f,!1)},a.prototype.once=function(l,c,f){return s(this,l,c,f,!0)},a.prototype.removeListener=function(l,c,f,d){var h=r?r+l:l;if(!this._events[h])return this;if(!c)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&o(this,h);else{for(var m=0,g=[],v=p.length;m<v;m++)(p[m].fn!==c||d&&!p[m].once||f&&p[m].context!==f)&&g.push(p[m]);g.length?this._events[h]=g.length===1?g[0]:g:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=r?r+l:l,this._events[c]&&o(this,c)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(oD);var oZ=oD.exports;const Yr=Zt(oZ),aD=Math.PI*2,uD=180/Math.PI,ef=Math.PI/180;class Le{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new Le(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return n0.x=0,n0.y=0,n0}}const n0=new Le;class ce{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new Le;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new Le;const n=this.a,i=this.b,s=this.c,o=this.d,a=this.tx,u=this.ty,l=1/(n*o+s*-i),c=e.x,f=e.y;return r.x=o*l*c+-s*l*f+(u*s-a*o)*l,r.y=n*l*f+-i*l*c+(-u*n+a*i)*l,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}appendFrom(e,r){const n=e.a,i=e.b,s=e.c,o=e.d,a=e.tx,u=e.ty,l=r.a,c=r.b,f=r.c,d=r.d;return this.a=n*l+i*f,this.b=n*c+i*d,this.c=s*l+o*f,this.d=s*c+o*d,this.tx=a*l+u*f+r.tx,this.ty=a*c+u*d+r.ty,this}setTransform(e,r,n,i,s,o,a,u,l){return this.a=Math.cos(a+l)*s,this.b=Math.sin(a+l)*s,this.c=-Math.sin(a-u)*o,this.d=Math.cos(a-u)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),u=Math.atan2(n,r),l=Math.abs(a+u);return l<1e-5||Math.abs(aD-l)<1e-5?(e.rotation=u,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=u),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ce;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return uZ.identity()}static get shared(){return aZ.identity()}}const aZ=new ce,uZ=new ce,Eo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Co=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],To=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Ao=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],P_=[],lD=[],Td=Math.sign;function lZ(){for(let t=0;t<16;t++){const e=[];P_.push(e);for(let r=0;r<16;r++){const n=Td(Eo[t]*Eo[r]+To[t]*Co[r]),i=Td(Co[t]*Eo[r]+Ao[t]*Co[r]),s=Td(Eo[t]*To[r]+To[t]*Ao[r]),o=Td(Co[t]*To[r]+Ao[t]*Ao[r]);for(let a=0;a<16;a++)if(Eo[a]===n&&Co[a]===i&&To[a]===s&&Ao[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new ce;e.set(Eo[t],Co[t],To[t],Ao[t],0,0),lD.push(e)}}lZ();const Ee={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>Eo[t],uY:t=>Co[t],vX:t=>To[t],vY:t=>Ao[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>P_[t][e],sub:(t,e)=>P_[t][Ee.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Ee.S:Ee.N:Math.abs(e)*2<=Math.abs(t)?t>0?Ee.E:Ee.W:e>0?t>0?Ee.SE:Ee.SW:t>0?Ee.NE:Ee.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=lD[Ee.inv(e)];i.tx=r,i.ty=n,t.append(i)}},Ad=[new Le,new Le,new Le,new Le];class Ie{constructor(e=0,r=0,n=0,i=0){this.type="rectangle",this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new Ie(0,0,0,0)}clone(){return new Ie(this.x,this.y,this.width,this.height)}copyFromBounds(e){return this.x=e.minX,this.y=e.minY,this.width=e.maxX-e.minX,this.height=e.maxY-e.minY,this}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}strokeContains(e,r,n,i=.5){const{width:s,height:o}=this;if(s<=0||o<=0)return!1;const a=this.x,u=this.y,l=n*(1-i),c=n-l,f=a-l,d=a+s+l,h=u-l,p=u+o+l,m=a+c,g=a+s-c,v=u+c,y=u+o-c;return e>=f&&e<=d&&r>=h&&r<=p&&!(e>m&&e<g&&r>v&&r<y)}intersects(e,r){if(!r){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const R=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>R}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Ad[0].set(e.left,e.top),u=Ad[1].set(e.left,e.bottom),l=Ad[2].set(e.right,e.top),c=Ad[3].set(e.right,e.bottom);if(l.x<=a.x||u.y<=a.y)return!1;const f=Math.sign(r.a*r.d-r.b*r.c);if(f===0||(r.apply(a,a),r.apply(u,u),r.apply(l,l),r.apply(c,c),Math.max(a.x,u.x,l.x,c.x)<=n||Math.min(a.x,u.x,l.x,c.x)>=i||Math.max(a.y,u.y,l.y,c.y)<=s||Math.min(a.y,u.y,l.y,c.y)>=o))return!1;const d=f*(u.y-a.y),h=f*(a.x-u.x),p=d*n+h*s,m=d*i+h*s,g=d*n+h*o,v=d*i+h*o;if(Math.max(p,m,g,v)<=d*a.x+h*a.y||Math.min(p,m,g,v)>=d*c.x+h*c.y)return!1;const y=f*(a.y-l.y),b=f*(l.x-a.x),_=y*n+b*s,x=y*i+b*s,S=y*n+b*o,w=y*i+b*o;return!(Math.max(_,x,S,w)<=y*a.x+b*a.y||Math.min(_,x,S,w)>=y*c.x+b*c.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}getBounds(e){return e||(e=new Ie),e.copyFrom(this),e}containsRect(e){if(this.width<=0||this.height<=0)return!1;const r=e.x,n=e.y,i=e.x+e.width,s=e.y+e.height;return r>=this.x&&r<this.x+this.width&&n>=this.y&&n<this.y+this.height&&i>=this.x&&i<this.x+this.width&&s>=this.y&&s<this.y+this.height}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}const Ec={default:-1};function Je(t="default"){return Ec[t]===void 0&&(Ec[t]=-1),++Ec[t]}function cZ(){for(const t in Ec)delete Ec[t]}const lT={},_e="8.0.0",cD="8.3.4";function oe(t,e,r=3){if(lT[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),lT[e]=!0}const N1=()=>{};function Wo(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function R_(t){return!(t&t-1)&&!!t}function fZ(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function Kn(t){const e={};for(const r in t)t[r]!==void 0&&(e[r]=t[r]);return e}const cT=Object.create(null);function dZ(t){const e=cT[t];return e===void 0&&(cT[t]=Je("resource")),e}const fD=class dD extends Yr{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...dD.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(e){this.addressModeU=e,this.addressModeV=e,this.addressModeW=e}get addressMode(){return this.addressModeU}set wrapMode(e){oe(_e,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=e}get wrapMode(){return this.addressMode}set scaleMode(e){this.magFilter=e,this.minFilter=e,this.mipmapFilter=e}get scaleMode(){return this.magFilter}set maxAnisotropy(e){this._maxAnisotropy=Math.min(e,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const e=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=dZ(e),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};fD.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let U1=fD;const hD=class pD extends Yr{constructor(e={}){super(),this.options=e,this.uid=Je("textureSource"),this._resourceType="textureSource",this._resourceId=Je("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...pD.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new U1(Kn(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(e){var r,n;this.style!==e&&((r=this._style)==null||r.off("change",this._onStyleChange,this),this._style=e,(n=this._style)==null||n.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(e){this._style.addressMode=e}get repeatMode(){return this._style.addressMode}set repeatMode(e){this._style.addressMode=e}get magFilter(){return this._style.magFilter}set magFilter(e){this._style.magFilter=e}get minFilter(){return this._style.minFilter}set minFilter(e){this._style.minFilter=e}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(e){this._style.mipmapFilter=e}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(e){this._style.lodMinClamp=e}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(e){this._style.lodMaxClamp=e}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const e=this._resolution;if(this.resize(this.resourceWidth/e,this.resourceHeight/e))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=Je("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:e}=this;return e.naturalWidth||e.videoWidth||e.displayWidth||e.width}get resourceHeight(){const{resource:e}=this;return e.naturalHeight||e.videoHeight||e.displayHeight||e.height}get resolution(){return this._resolution}set resolution(e){this._resolution!==e&&(this._resolution=e,this.width=this.pixelWidth/e,this.height=this.pixelHeight/e)}resize(e,r,n){n||(n=this._resolution),e||(e=this.width),r||(r=this.height);const i=Math.round(e*n),s=Math.round(r*n);return this.width=i/n,this.height=s/n,this._resolution=n,this.pixelWidth===i&&this.pixelHeight===s?!1:(this._refreshPOT(),this.pixelWidth=i,this.pixelHeight=s,this.emit("resize",this),this._resourceId=Je("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(e){this._style.wrapMode=e}get wrapMode(){return this._style.wrapMode}set scaleMode(e){this._style.scaleMode=e}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=R_(this.pixelWidth)&&R_(this.pixelHeight)}static test(e){throw new Error("Unimplemented")}};hD.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let yt=hD;class Em extends yt{constructor(e){const r=e.resource||new Float32Array(e.width*e.height*4);let n=e.format;n||(r instanceof Float32Array?n="rgba32float":r instanceof Int32Array||r instanceof Uint32Array?n="rgba32uint":r instanceof Int16Array||r instanceof Uint16Array?n="rgba16uint":(r instanceof Int8Array,n="bgra8unorm")),super({...e,resource:r,format:n}),this.uploadMethodId="buffer"}static test(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}Em.extension=O.TextureSource;const fT=new ce;class G1{constructor(e,r){this.mapCoord=new ce,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,typeof r>"u"?this.clampMargin=e.width<10?0:.5:this.clampMargin=r,this.isSimple=!1,this.texture=e}get texture(){return this._texture}set texture(e){var r;this.texture!==e&&((r=this._texture)==null||r.removeListener("update",this.update,this),this._texture=e,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(){const e=this._texture;this._updateID++;const r=e.uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const n=e.orig,i=e.trim;i&&(fT.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(fT));const s=e.source,o=this.uClampFrame,a=this.clampMargin/s._resolution,u=this.clampOffset/s._resolution;return o[0]=(e.frame.x+a+u)/s.width,o[1]=(e.frame.y+a+u)/s.height,o[2]=(e.frame.x+e.frame.width-a+u)/s.width,o[3]=(e.frame.y+e.frame.height-a+u)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=e.frame.width===s.width&&e.frame.height===s.height&&e.rotate===0,!0}}class ne extends Yr{constructor({source:e,label:r,frame:n,orig:i,trim:s,defaultAnchor:o,defaultBorders:a,rotate:u,dynamic:l}={}){if(super(),this.uid=Je("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new Ie,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=r,this.source=(e==null?void 0:e.source)??new yt,this.noFrame=!n,n)this.frame.copyFrom(n);else{const{width:c,height:f}=this._source;this.frame.width=c,this.frame.height=f}this.orig=i||this.frame,this.trim=s,this.rotate=u??0,this.defaultAnchor=o,this.defaultBorders=a,this.destroyed=!1,this.dynamic=l||!1,this.updateUvs()}set source(e){this._source&&this._source.off("resize",this.update,this),this._source=e,e.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new G1(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:e,frame:r}=this,{width:n,height:i}=this._source,s=r.x/n,o=r.y/i,a=r.width/n,u=r.height/i;let l=this.rotate;if(l){const c=a/2,f=u/2,d=s+c,h=o+f;l=Ee.add(l,Ee.NW),e.x0=d+c*Ee.uX(l),e.y0=h+f*Ee.uY(l),l=Ee.add(l,2),e.x1=d+c*Ee.uX(l),e.y1=h+f*Ee.uY(l),l=Ee.add(l,2),e.x2=d+c*Ee.uX(l),e.y2=h+f*Ee.uY(l),l=Ee.add(l,2),e.x3=d+c*Ee.uX(l),e.y3=h+f*Ee.uY(l)}else e.x0=s,e.y0=o,e.x1=s+a,e.y1=o,e.x2=s+a,e.y2=o+u,e.x3=s,e.y3=o+u}destroy(e=!1){this._source&&e&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return oe(_e,"Texture.baseTexture is now Texture.source"),this._source}}ne.EMPTY=new ne({label:"EMPTY",source:new yt({label:"EMPTY"})});ne.EMPTY.destroy=N1;ne.WHITE=new ne({source:new Em({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"});ne.WHITE.destroy=N1;function z1(t,e,r){const{width:n,height:i}=r.orig,s=r.trim;if(s){const o=s.width,a=s.height;t.minX=s.x-e._x*n,t.maxX=t.minX+o,t.minY=s.y-e._y*i,t.maxY=t.minY+a}else t.minX=-e._x*n,t.maxX=t.minX+n,t.minY=-e._y*i,t.maxY=t.minY+i}const dT=new ce;class Ut{constructor(e=1/0,r=1/0,n=-1/0,i=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dT,this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new Ie);const e=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(e.x=0,e.y=0,e.width=0,e.height=0):e.copyFromBounds(this),e}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=dT,this}set(e,r,n,i){this.minX=e,this.minY=r,this.maxX=n,this.maxY=i}addFrame(e,r,n,i,s){s||(s=this.matrix);const o=s.a,a=s.b,u=s.c,l=s.d,c=s.tx,f=s.ty;let d=this.minX,h=this.minY,p=this.maxX,m=this.maxY,g=o*e+u*r+c,v=a*e+l*r+f;g<d&&(d=g),v<h&&(h=v),g>p&&(p=g),v>m&&(m=v),g=o*n+u*r+c,v=a*n+l*r+f,g<d&&(d=g),v<h&&(h=v),g>p&&(p=g),v>m&&(m=v),g=o*e+u*i+c,v=a*e+l*i+f,g<d&&(d=g),v<h&&(h=v),g>p&&(p=g),v>m&&(m=v),g=o*n+u*i+c,v=a*n+l*i+f,g<d&&(d=g),v<h&&(h=v),g>p&&(p=g),v>m&&(m=v),this.minX=d,this.minY=h,this.maxX=p,this.maxY=m}addRect(e,r){this.addFrame(e.x,e.y,e.x+e.width,e.y+e.height,r)}addBounds(e,r){this.addFrame(e.minX,e.minY,e.maxX,e.maxY,r)}addBoundsMask(e){this.minX=this.minX>e.minX?this.minX:e.minX,this.minY=this.minY>e.minY?this.minY:e.minY,this.maxX=this.maxX<e.maxX?this.maxX:e.maxX,this.maxY=this.maxY<e.maxY?this.maxY:e.maxY}applyMatrix(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,{a:o,b:a,c:u,d:l,tx:c,ty:f}=e;let d=o*r+u*n+c,h=a*r+l*n+f;this.minX=d,this.minY=h,this.maxX=d,this.maxY=h,d=o*i+u*n+c,h=a*i+l*n+f,this.minX=d<this.minX?d:this.minX,this.minY=h<this.minY?h:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=h>this.maxY?h:this.maxY,d=o*r+u*s+c,h=a*r+l*s+f,this.minX=d<this.minX?d:this.minX,this.minY=h<this.minY?h:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=h>this.maxY?h:this.maxY,d=o*i+u*s+c,h=a*i+l*s+f,this.minX=d<this.minX?d:this.minX,this.minY=h<this.minY?h:this.minY,this.maxX=d>this.maxX?d:this.maxX,this.maxY=h>this.maxY?h:this.maxY}fit(e){return this.minX<e.left&&(this.minX=e.left),this.maxX>e.right&&(this.maxX=e.right),this.minY<e.top&&(this.minY=e.top),this.maxY>e.bottom&&(this.maxY=e.bottom),this}fitBounds(e,r,n,i){return this.minX<e&&(this.minX=e),this.maxX>r&&(this.maxX=r),this.minY<n&&(this.minY=n),this.maxY>i&&(this.maxY=i),this}pad(e,r=e){return this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new Ut(this.minX,this.minY,this.maxX,this.maxY)}scale(e,r=e){return this.minX*=e,this.minY*=r,this.maxX*=e,this.maxY*=r,this}get x(){return this.minX}set x(e){const r=this.maxX-this.minX;this.minX=e,this.maxX=e+r}get y(){return this.minY}set y(e){const r=this.maxY-this.minY;this.minY=e,this.maxY=e+r}get width(){return this.maxX-this.minX}set width(e){this.maxX=this.minX+e}get height(){return this.maxY-this.minY}set height(e){this.maxY=this.minY+e}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(e,r,n,i){let s=this.minX,o=this.minY,a=this.maxX,u=this.maxY;i||(i=this.matrix);const l=i.a,c=i.b,f=i.c,d=i.d,h=i.tx,p=i.ty;for(let m=r;m<n;m+=2){const g=e[m],v=e[m+1],y=l*g+f*v+h,b=c*g+d*v+p;s=y<s?y:s,o=b<o?b:o,a=y>a?y:a,u=b>u?b:u}this.minX=s,this.minY=o,this.maxX=a,this.maxY=u}containsPoint(e,r){return this.minX<=e&&this.minY<=r&&this.maxX>=e&&this.maxY>=r}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(e){return this.minX=e.minX,this.minY=e.minY,this.maxX=e.maxX,this.maxY=e.maxY,this}}var hZ={grad:.9,turn:360,rad:360/(2*Math.PI)},Ui=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Wt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},On=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},mD=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},hT=function(t){return{r:On(t.r,0,255),g:On(t.g,0,255),b:On(t.b,0,255),a:On(t.a)}},i0=function(t){return{r:Wt(t.r),g:Wt(t.g),b:Wt(t.b),a:Wt(t.a,3)}},pZ=/^#([0-9a-f]{3,8})$/i,Pd=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},gD=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),a=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},vD=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),a=n*(1-(e-s)*r),u=n*(1-(1-e+s)*r),l=s%6;return{r:255*[n,a,o,o,u,n][l],g:255*[u,n,n,a,o,o][l],b:255*[o,o,u,n,n,a][l],a:i}},pT=function(t){return{h:mD(t.h),s:On(t.s,0,100),l:On(t.l,0,100),a:On(t.a)}},mT=function(t){return{h:Wt(t.h),s:Wt(t.s),l:Wt(t.l),a:Wt(t.a,3)}},gT=function(t){return vD((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},Cc=function(t){return{h:(e=gD(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},mZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,vZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,O_={string:[[function(t){var e=pZ.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Wt(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Wt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=vZ.exec(t)||yZ.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:hT({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=mZ.exec(t)||gZ.exec(t);if(!e)return null;var r,n,i=pT({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(hZ[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return gT(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return Ui(e)&&Ui(r)&&Ui(n)?hT({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!Ui(e)||!Ui(r)||!Ui(n))return null;var o=pT({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return gT(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!Ui(e)||!Ui(r)||!Ui(n))return null;var o=function(a){return{h:mD(a.h),s:On(a.s,0,100),v:On(a.v,0,100),a:On(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return vD(o)},"hsv"]]},vT=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},_Z=function(t){return typeof t=="string"?vT(t.trim(),O_.string):typeof t=="object"&&t!==null?vT(t,O_.object):[null,void 0]},s0=function(t,e){var r=Cc(t);return{h:r.h,s:On(r.s+100*e,0,100),l:r.l,a:r.a}},o0=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},yT=function(t,e){var r=Cc(t);return{h:r.h,s:r.s,l:On(r.l+100*e,0,100),a:r.a}},B_=function(){function t(e){this.parsed=_Z(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Wt(o0(this.rgba),2)},t.prototype.isDark=function(){return o0(this.rgba)<.5},t.prototype.isLight=function(){return o0(this.rgba)>=.5},t.prototype.toHex=function(){return e=i0(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Pd(Wt(255*s)):"","#"+Pd(r)+Pd(n)+Pd(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return i0(this.rgba)},t.prototype.toRgbString=function(){return e=i0(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return mT(Cc(this.rgba))},t.prototype.toHslString=function(){return e=mT(Cc(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=gD(this.rgba),{h:Wt(e.h),s:Wt(e.s),v:Wt(e.v),a:Wt(e.a,3)};var e},t.prototype.invert=function(){return si({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),si(s0(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),si(s0(this.rgba,-e))},t.prototype.grayscale=function(){return si(s0(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),si(yT(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),si(yT(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?si({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Wt(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Cc(this.rgba);return typeof e=="number"?si({h:e,s:r.s,l:r.l,a:r.a}):Wt(r.h)},t.prototype.isEqual=function(e){return this.toHex()===si(e).toHex()},t}(),si=function(t){return t instanceof B_?t:new B_(t)},_T=[],bZ=function(t){t.forEach(function(e){_T.indexOf(e)<0&&(e(B_,O_),_T.push(e))})};function xZ(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,u,l=n[this.toHex()];if(l)return l;if(o!=null&&o.closest){var c=this.toRgb(),f=1/0,d="black";if(!s.length)for(var h in r)s[h]=new t(r[h]).toRgb();for(var p in r){var m=(a=c,u=s[p],Math.pow(a.r-u.r,2)+Math.pow(a.g-u.g,2)+Math.pow(a.b-u.b,2));m<f&&(f=m,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),u=a==="transparent"?"#0000":r[a];return u?new t(u).toRgb():null},"name"])}bZ([xZ]);const Cu=class sc{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof sc)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set Color#value to null");(this._value===null||!this._isSourceEqual(this._value,e))&&(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}_isSourceEqual(e,r){const n=typeof e;if(n!==typeof r)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===r;if(Array.isArray(e)&&Array.isArray(r)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(r))return e.length!==r.length?!1:e.every((s,o)=>s===r[o]);if(e!==null&&r!==null){const s=Object.keys(e),o=Object.keys(r);return s.length!==o.length?!1:s.every(a=>e[a]===r[a])}return e===r}toRgba(){const[e,r,n,i]=this._components;return{r:e,g:r,b:n,a:i}}toRgb(){const[e,r,n]=this._components;return{r:e,g:r,b:n}}toRgbaString(){const[e,r,n]=this.toUint8RgbArray();return`rgba(${e},${r},${n},${this.alpha})`}toUint8RgbArray(e){const[r,n,i]=this._components;return this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb),e[0]=Math.round(r*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toArray(e){this._arrayRgba||(this._arrayRgba=[]),e||(e=this._arrayRgba);const[r,n,i,s]=this._components;return e[0]=r,e[1]=n,e[2]=i,e[3]=s,e}toRgbArray(e){this._arrayRgb||(this._arrayRgb=[]),e||(e=this._arrayRgb);const[r,n,i]=this._components;return e[0]=r,e[1]=n,e[2]=i,e}toNumber(){return this._int}toBgrNumber(){const[e,r,n]=this.toUint8RgbArray();return(n<<16)+(r<<8)+e}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[r,n,i,s]=sc._temp.setValue(e)._components;return this._components[0]*=r,this._components[1]*=n,this._components[2]*=i,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(e,r=!0){return r&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this._refreshInt(),this._value=null,this}toPremultiplied(e,r=!0){if(e===1)return(255<<24)+this._int;if(e===0)return r?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return r&&(n=n*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const r=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-r.length)+r}setAlpha(e){return this._components[3]=this._clamp(e),this}_normalize(e){let r,n,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;r=(o>>16&255)/255,n=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[r,n,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[r,n,i,s=255]=e,r/=255,n/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=sc.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=si(e);o.isValid()&&({r,g:n,b:i,a:s}=o.rgba,r/=255,n/=255,i/=255)}if(r!==void 0)this._components[0]=r,this._components[1]=n,this._components[2]=i,this._components[3]=s,this._refreshInt();else throw new Error(`Unable to convert color ${e}`)}_refreshInt(){this._clamp(this._components);const[e,r,n]=this._components;this._int=(e*255<<16)+(r*255<<8)+(n*255|0)}_clamp(e,r=0,n=1){return typeof e=="number"?Math.min(Math.max(e,r),n):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,r),n)}),e)}static isColorLike(e){return typeof e=="number"||typeof e=="string"||e instanceof Number||e instanceof sc||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||e.r!==void 0&&e.g!==void 0&&e.b!==void 0||e.r!==void 0&&e.g!==void 0&&e.b!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0||e.h!==void 0&&e.s!==void 0&&e.l!==void 0&&e.a!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0||e.h!==void 0&&e.s!==void 0&&e.v!==void 0&&e.a!==void 0}};Cu.shared=new Cu;Cu._temp=new Cu;Cu.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Re=Cu;const yD={cullArea:null,cullable:!1,cullableChildren:!0};class Cm{constructor(e,r){this._pool=[],this._count=0,this._index=0,this._classType=e,r&&this.prepopulate(r)}prepopulate(e){for(let r=0;r<e;r++)this._pool[this._index++]=new this._classType;this._count+=e}get(e){var n;let r;return this._index>0?r=this._pool[--this._index]:r=new this._classType,(n=r.init)==null||n.call(r,e),r}return(e){var r;(r=e.reset)==null||r.call(e),this._pool[this._index++]=e}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}class _D{constructor(){this._poolsByClass=new Map}prepopulate(e,r){this.getPool(e).prepopulate(r)}get(e,r){return this.getPool(e).get(r)}return(e){this.getPool(e.constructor).return(e)}getPool(e){return this._poolsByClass.has(e)||this._poolsByClass.set(e,new Cm(e)),this._poolsByClass.get(e)}stats(){const e={};return this._poolsByClass.forEach(r=>{const n=e[r._classType.name]?r._classType.name+r._classType.ID:r._classType.name;e[n]={free:r.totalFree,used:r.totalUsed,size:r.totalSize}}),e}}const Te=new _D,bD={get isCachedAsTexture(){var t;return!!((t=this.renderGroup)!=null&&t.isCachedAsTexture)},cacheAsTexture(t){typeof t=="boolean"&&t===!1?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(t===!0?{}:t))},updateCacheTexture(){var t;(t=this.renderGroup)==null||t.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){oe("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};function $1(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}const xD={allowChildren:!0,removeChildren(t=0,e){var s;const r=e??this.children.length,n=r-t,i=[];if(n>0&&n<=r){for(let a=r-1;a>=t;a--){const u=this.children[a];u&&(i.push(u),u.parent=null)}$1(this.children,t,r);const o=this.renderGroup||this.parentRenderGroup;o&&o.removeChildren(i);for(let a=0;a<i.length;++a){const u=i[a];(s=u.parentRenderLayer)==null||s.detach(u),this.emit("childRemoved",u,this,a),i[a].emit("removed",this)}return i.length>0&&this._didViewChangeTick++,i}else if(n===0&&this.children.length===0)return i;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||oe(_e,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:r}=this;if(e<0||e>r.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${r.length}`);if(t.parent){const i=t.parent.children.indexOf(t);if(t.parent===this&&i===e)return t;i!==-1&&t.parent.children.splice(i,1)}e===r.length?r.push(t):r.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const n=this.renderGroup||this.parentRenderGroup;return n&&n.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)},reparentChild(...t){return t.length===1?this.reparentChildAt(t[0],this.children.length):(t.forEach(e=>this.reparentChildAt(e,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const r=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const n=this.worldTransform.clone();return n.invert(),r.prepend(n),t.setFromMatrix(r),t}},SD={collectRenderables(t,e,r){this.parentRenderLayer&&this.parentRenderLayer!==r||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,r):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,r))},collectRenderablesSimple(t,e,r){const n=this.children,i=n.length;for(let s=0;s<i;s++)n[s].collectRenderables(t,e,r)},collectRenderablesWithEffects(t,e,r){const{renderPipes:n}=e;for(let i=0;i<this.effects.length;i++){const s=this.effects[i];n[s.pipe].push(s,this,t)}this.collectRenderablesSimple(t,e,r);for(let i=this.effects.length-1;i>=0;i--){const s=this.effects[i];n[s.pipe].pop(s,this,t)}}};class tf{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let e=0;e<this.filters.length;e++)this.filters[e].destroy();this.filters=null,this.filterArea=null}}class wD{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(e=>{this.add({test:e.test,maskClass:e})}))}add(e){this._tests.push(e)}getMaskEffect(e){this._initialized||this.init();for(let r=0;r<this._tests.length;r++){const n=this._tests[r];if(n.test(e))return Te.get(n.maskClass,e)}return e}returnMaskEffect(e){Te.return(e)}}const gp=new wD;me.handleByList(O.MaskEffect,gp._effectClasses);const ED={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){this.effects.indexOf(t)===-1&&(this.effects.push(t),this.effects.sort((r,n)=>r.priority-n.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);e!==-1&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;(e==null?void 0:e.mask)!==t&&(e&&(this.removeEffect(e),gp.returnMaskEffect(e),this._maskEffect=null),t!=null&&(this._maskEffect=gp.getMaskEffect(t),this.addEffect(this._maskEffect)))},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},get mask(){var t;return(t=this._maskEffect)==null?void 0:t.mask},set filters(t){var s;!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new tf);t=t;const r=(t==null?void 0:t.length)>0,n=((s=e.filters)==null?void 0:s.length)>0,i=r!==n;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),i&&(r?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){var t;return(t=this._filterEffect)==null?void 0:t.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new tf),this._filterEffect.filterArea=t},get filterArea(){var t;return(t=this._filterEffect)==null?void 0:t.filterArea}},CD={label:null,get name(){return oe(_e,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){oe(_e,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const r=this.children;for(let n=0;n<r.length;n++){const i=r[n];if(i.label===t||t instanceof RegExp&&t.test(i.label))return i}if(e)for(let n=0;n<r.length;n++){const s=r[n].getChildByLabel(t,!0);if(s)return s}return null},getChildrenByLabel(t,e=!1,r=[]){const n=this.children;for(let i=0;i<n.length;i++){const s=n[i];(s.label===t||t instanceof RegExp&&t.test(s.label))&&r.push(s)}if(e)for(let i=0;i<n.length;i++)n[i].getChildrenByLabel(t,!0,r);return r}},pr=new Cm(ce),Si=new Cm(Ut),SZ=new ce,TD={getFastGlobalBounds(t,e){e||(e=new Ut),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const r=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(r.worldTransform),e},_getGlobalBoundsRecursive(t,e,r){let n=e;if(t&&this.parentRenderLayer&&this.parentRenderLayer!==r||this.localDisplayStatus!==7||!this.measurable)return;const i=!!this.effects.length;if((this.renderGroup||i)&&(n=Si.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const o=this.bounds;n.addFrame(o.minX,o.minY,o.maxX,o.maxY,this.groupTransform)}const s=this.children;for(let o=0;o<s.length;o++)s[o]._getGlobalBoundsRecursive(t,n,r)}if(i){let s=!1;const o=this.renderGroup||this.parentRenderGroup;for(let a=0;a<this.effects.length;a++)this.effects[a].addBounds&&(s||(s=!0,n.applyMatrix(o.worldTransform)),this.effects[a].addBounds(n,!0));s&&(n.applyMatrix(o.worldTransform.copyTo(SZ).invert()),e.addBounds(n,this.relativeGroupTransform)),e.addBounds(n),Si.return(n)}else this.renderGroup&&(e.addBounds(n,this.relativeGroupTransform),Si.return(n))}};function zf(t,e,r){r.clear();let n,i;return t.parent?e?n=t.parent.worldTransform:(i=pr.get().identity(),n=Tm(t,i)):n=ce.IDENTITY,j1(t,r,n,e),i&&pr.return(i),r.isValid||r.set(0,0,0,0),r}function j1(t,e,r,n){var a,u;if(!t.visible||!t.measurable)return;let i;n?i=t.worldTransform:(t.updateLocalTransform(),i=pr.get(),i.appendFrom(t.localTransform,r));const s=e,o=!!t.effects.length;if(o&&(e=Si.get().clear()),t.boundsArea)e.addRect(t.boundsArea,i);else{t.bounds&&(e.matrix=i,e.addBounds(t.bounds));for(let l=0;l<t.children.length;l++)j1(t.children[l],e,i,n)}if(o){for(let l=0;l<t.effects.length;l++)(u=(a=t.effects[l]).addBounds)==null||u.call(a,e);s.addBounds(e,ce.IDENTITY),Si.return(e)}n||pr.return(i)}function Tm(t,e){const r=t.parent;return r&&(Tm(r,e),r.updateLocalTransform(),e.append(r.localTransform)),e}function H1(t,e){if(t===16777215||!e)return e;if(e===16777215||!t)return t;const r=t>>16&255,n=t>>8&255,i=t&255,s=e>>16&255,o=e>>8&255,a=e&255,u=r*s/255|0,l=n*o/255|0,c=i*a/255|0;return(u<<16)+(l<<8)+c}const bT=16777215;function rf(t,e){return t===bT?e:e===bT?t:H1(t,e)}function ou(t){return((t&255)<<16)+(t&65280)+(t>>16&255)}const AD={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,r=this.parent;for(;r;)e*=r.alpha,r=r.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const r=Tm(this,pr.get().identity());return t.appendFrom(this.localTransform,r),pr.return(r),t},getGlobalTint(t){if(t)return this.renderGroup?ou(this.renderGroup.worldColor):this.parentRenderGroup?ou(rf(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,r=this.parent;for(;r;)e=rf(e,r.localColor),r=r.parent;return ou(e)}};let a0=0;const xT=500;function he(...t){a0!==xT&&(a0++,a0===xT?console.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):console.warn("PixiJS Warning: ",...t))}function Am(t,e,r){return e.clear(),r||(r=ce.IDENTITY),PD(t,e,r,t,!0),e.isValid||e.set(0,0,0,0),e}function PD(t,e,r,n,i){var u,l;let s;if(i)s=pr.get(),s=r.copyTo(s);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const c=t.localTransform;s=pr.get(),s.appendFrom(c,r)}const o=e,a=!!t.effects.length;if(a&&(e=Si.get().clear()),t.boundsArea)e.addRect(t.boundsArea,s);else{t.renderPipeId&&(e.matrix=s,e.addBounds(t.bounds));const c=t.children;for(let f=0;f<c.length;f++)PD(c[f],e,s,n,!1)}if(a){for(let c=0;c<t.effects.length;c++)(l=(u=t.effects[c]).addLocalBounds)==null||l.call(u,e,n);o.addBounds(e,ce.IDENTITY),Si.return(e)}pr.return(s)}function RD(t,e,r){const n=t.parent;if(!n){he("Item is not inside the root container");return}n!==e&&(RD(n,e,r),n.updateLocalTransform(),r.append(n.localTransform))}function V1(t,e){const r=t.children;for(let n=0;n<r.length;n++){const i=r[n],s=i.uid,o=(i._didViewChangeTick&65535)<<16|i._didContainerChangeTick&65535,a=e.index;(e.data[a]!==s||e.data[a+1]!==o)&&(e.data[e.index]=s,e.data[e.index+1]=o,e.didChange=!0),e.index=a+2,i.children.length&&V1(i,e)}return e.didChange}const wZ=new ce,OD={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const r=Math.sign(this.scale.x)||1;e!==0?this.scale.x=t/e*r:this.scale.x=r},_setHeight(t,e){const r=Math.sign(this.scale.y)||1;e!==0?this.scale.y=t/e*r:this.scale.y=r},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new Ut});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),V1(this,t),t.didChange&&Am(this,t.localBounds,wZ),t.localBounds},getBounds(t,e){return zf(this,t,e||new Ut)}},BD={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t){this._onRender&&(e==null||e.removeOnRender(this)),this._onRender=null;return}this._onRender||e==null||e.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},kD={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(EZ))}};function EZ(t,e){return t._zIndex-e._zIndex}const DD={getGlobalPosition(t=new Le,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,r=!1){const n=this.getGlobalTransform(pr.get(),r);return e=n.apply(t,e),pr.return(n),e},toLocal(t,e,r,n){e&&(t=e.toGlobal(t,r,n));const i=this.getGlobalTransform(pr.get(),n);return r=i.applyInverse(t,r),pr.return(i),r}};class W1{constructor(){this.uid=Je("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(e){this.instructions[this.instructionSize++]=e}log(){this.instructions.length=this.instructionSize,console.table(this.instructions,["type","action"])}}let CZ=0;class MD{constructor(e){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1}createTexture(e,r,n){const i=new yt({...this.textureOptions,width:e,height:r,resolution:1,antialias:n,autoGarbageCollect:!1});return new ne({source:i,label:`texturePool_${CZ++}`})}getOptimalTexture(e,r,n=1,i){let s=Math.ceil(e*n-1e-6),o=Math.ceil(r*n-1e-6);s=Wo(s),o=Wo(o);const a=(s<<17)+(o<<1)+(i?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let u=this._texturePool[a].pop();return u||(u=this.createTexture(s,o,i)),u.source._resolution=n,u.source.width=s/n,u.source.height=o/n,u.source.pixelWidth=s,u.source.pixelHeight=o,u.frame.x=0,u.frame.y=0,u.frame.width=e,u.frame.height=r,u.updateUvs(),this._poolKeyHash[u.uid]=a,u}getSameSizeTexture(e,r=!1){const n=e.source;return this.getOptimalTexture(e.width,e.height,n._resolution,r)}returnTexture(e){const r=this._poolKeyHash[e.uid];this._texturePool[r].push(e)}clear(e){if(e=e!==!1,e)for(const r in this._texturePool){const n=this._texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this._texturePool={}}}const Ct=new MD;class ID{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new ce,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new W1,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(e){this.root=e,e._onRender&&this.addOnRender(e),e.didChange=!0;const r=e.children;for(let n=0;n<r.length;n++){const i=r[n];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(e={}){this.textureOptions=e,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(Ct.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const e in this.childrenToUpdate){const r=this.childrenToUpdate[e];r.list.fill(null),r.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(e){e.renderGroupParent&&e.renderGroupParent._removeRenderGroupChild(e),e.renderGroupParent=this,this.renderGroupChildren.push(e)}_removeRenderGroupChild(e){const r=this.renderGroupChildren.indexOf(e);r>-1&&this.renderGroupChildren.splice(r,1),e.renderGroupParent=null}addChild(e){if(this.structureDidChange=!0,e.parentRenderGroup=this,e.updateTick=-1,e.parent===this.root?e.relativeRenderGroupDepth=1:e.relativeRenderGroupDepth=e.parent.relativeRenderGroupDepth+1,e.didChange=!0,this.onChildUpdate(e),e.renderGroup){this.addRenderGroupChild(e.renderGroup);return}e._onRender&&this.addOnRender(e);const r=e.children;for(let n=0;n<r.length;n++)this.addChild(r[n])}removeChild(e){if(this.structureDidChange=!0,e._onRender&&(e.renderGroup||this.removeOnRender(e)),e.parentRenderGroup=null,e.renderGroup){this._removeRenderGroupChild(e.renderGroup);return}const r=e.children;for(let n=0;n<r.length;n++)this.removeChild(r[n])}removeChildren(e){for(let r=0;r<e.length;r++)this.removeChild(e[r])}onChildUpdate(e){let r=this.childrenToUpdate[e.relativeRenderGroupDepth];r||(r=this.childrenToUpdate[e.relativeRenderGroupDepth]={index:0,list:[]}),r.list[r.index++]=e}updateRenderable(e){e.globalDisplayStatus<7||(this.instructionSet.renderPipes[e.renderPipeId].updateRenderable(e),e.didViewUpdate=!1)}onChildViewUpdate(e){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=e}get isRenderable(){return this.root.localDisplayStatus===7&&this.worldAlpha>0}addOnRender(e){this._onRenderContainers.push(e)}removeOnRender(e){this._onRenderContainers.splice(this._onRenderContainers.indexOf(e),1)}runOnRender(e){for(let r=0;r<this._onRenderContainers.length;r++)this._onRenderContainers[r]._onRender(e)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(e=[]){const r=this.root.children;for(let n=0;n<r.length;n++)this._getChildren(r[n],e);return e}_getChildren(e,r=[]){if(r.push(e),e.renderGroup)return r;const n=e.children;for(let i=0;i<n.length;i++)this._getChildren(n[i],r);return r}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return this._matrixDirty&1?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new ce),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return this._matrixDirty&2?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new ce),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(this._matrixDirty&4))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const e=this._parentCacheAsTextureRenderGroup;return e?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new ce),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(e.inverseWorldTransform).translate(-e._textureBounds.x,-e._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}function vp(t,e,r={}){for(const n in e)!r[n]&&e[n]!==void 0&&(t[n]=e[n])}const u0=new Et(null),l0=new Et(null),c0=new Et(null,1,1),nf=1,Pm=2,au=4,TZ=8;class ar extends Yr{constructor(e={}){var r,n;super(),this.uid=Je("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new ce,this.relativeGroupTransform=new ce,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new Et(this,0,0),this._scale=c0,this._pivot=l0,this._skew=u0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],vp(this,e,{children:!0,parent:!0,effects:!0}),(r=e.children)==null||r.forEach(i=>this.addChild(i)),(n=e.parent)==null||n.addChild(this)}static mixin(e){oe("8.8.0","Container.mixin is deprecated, please use extensions.mixin instead."),me.mixin(ar,e)}set _didChangeId(e){this._didViewChangeTick=e>>12&4095,this._didContainerChangeTick=e&4095}get _didChangeId(){return this._didContainerChangeTick&4095|(this._didViewChangeTick&4095)<<12}addChild(...e){if(this.allowChildren||oe(_e,"addChild: Only Containers will be allowed to add children in v8.0.0"),e.length>1){for(let i=0;i<e.length;i++)this.addChild(e[i]);return e[0]}const r=e[0],n=this.renderGroup||this.parentRenderGroup;return r.parent===this?(this.children.splice(this.children.indexOf(r),1),this.children.push(r),n&&(n.structureDidChange=!0),r):(r.parent&&r.parent.removeChild(r),this.children.push(r),this.sortableChildren&&(this.sortDirty=!0),r.parent=this,r.didChange=!0,r._updateFlags=15,n&&n.addChild(r),this.emit("childAdded",r,this,this.children.length-1),r.emit("added",this),this._didViewChangeTick++,r._zIndex!==0&&r.depthOfChildModified(),r)}removeChild(...e){if(e.length>1){for(let i=0;i<e.length;i++)this.removeChild(e[i]);return e[0]}const r=e[0],n=this.children.indexOf(r);return n>-1&&(this._didViewChangeTick++,this.children.splice(n,1),this.renderGroup?this.renderGroup.removeChild(r):this.parentRenderGroup&&this.parentRenderGroup.removeChild(r),r.parentRenderLayer&&r.parentRenderLayer.detach(r),r.parent=null,this.emit("childRemoved",r,this,n),r.emit("removed",this)),r}_onUpdate(e){e&&e===this._skew&&this._updateSkew(),this._didContainerChangeTick++,!this.didChange&&(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(e){!!this.renderGroup!==e&&(e?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),this.renderGroup=Te.get(ID,this),this.groupTransform=ce.IDENTITY,e==null||e.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const e=this.parentRenderGroup;e==null||e.removeChild(this),Te.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,e==null||e.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&this.effects.length===0}get worldTransform(){return this._worldTransform||(this._worldTransform=new ce),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(e){this._position.x=e}get y(){return this._position.y}set y(e){this._position.y=e}get position(){return this._position}set position(e){this._position.copyFrom(e)}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this._skew))}get angle(){return this.rotation*uD}set angle(e){this.rotation=e*ef}get pivot(){return this._pivot===l0&&(this._pivot=new Et(this,0,0)),this._pivot}set pivot(e){this._pivot===l0&&(this._pivot=new Et(this,0,0)),typeof e=="number"?this._pivot.set(e):this._pivot.copyFrom(e)}get skew(){return this._skew===u0&&(this._skew=new Et(this,0,0)),this._skew}set skew(e){this._skew===u0&&(this._skew=new Et(this,0,0)),this._skew.copyFrom(e)}get scale(){return this._scale===c0&&(this._scale=new Et(this,1,1)),this._scale}set scale(e){this._scale===c0&&(this._scale=new Et(this,0,0)),typeof e=="number"?this._scale.set(e):this._scale.copyFrom(e)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(e){const r=this.getLocalBounds().width;this._setWidth(e,r)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(e){const r=this.getLocalBounds().height;this._setHeight(e,r)}getSize(e){e||(e={});const r=this.getLocalBounds();return e.width=Math.abs(this.scale.x*r.width),e.height=Math.abs(this.scale.y*r.height),e}setSize(e,r){const n=this.getLocalBounds();typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,n.width),r!==void 0&&this._setHeight(r,n.height)}_updateSkew(){const e=this._rotation,r=this._skew;this._cx=Math.cos(e+r._y),this._sx=Math.sin(e+r._y),this._cy=-Math.sin(e-r._x),this._sy=Math.cos(e-r._x)}updateTransform(e){return this.position.set(typeof e.x=="number"?e.x:this.position.x,typeof e.y=="number"?e.y:this.position.y),this.scale.set(typeof e.scaleX=="number"?e.scaleX||1:this.scale.x,typeof e.scaleY=="number"?e.scaleY||1:this.scale.y),this.rotation=typeof e.rotation=="number"?e.rotation:this.rotation,this.skew.set(typeof e.skewX=="number"?e.skewX:this.skew.x,typeof e.skewY=="number"?e.skewY:this.skew.y),this.pivot.set(typeof e.pivotX=="number"?e.pivotX:this.pivot.x,typeof e.pivotY=="number"?e.pivotY:this.pivot.y),this}setFromMatrix(e){e.decompose(this)}updateLocalTransform(){const e=this._didContainerChangeTick;if(this._didLocalTransformChangeId===e)return;this._didLocalTransformChangeId=e;const r=this.localTransform,n=this._scale,i=this._pivot,s=this._position,o=n._x,a=n._y,u=i._x,l=i._y;r.a=this._cx*o,r.b=this._sx*o,r.c=this._cy*a,r.d=this._sy*a,r.tx=s._x-(u*r.a+l*r.c),r.ty=s._y-(u*r.b+l*r.d)}set alpha(e){e!==this.localAlpha&&(this.localAlpha=e,this._updateFlags|=nf,this._onUpdate())}get alpha(){return this.localAlpha}set tint(e){const n=Re.shared.setValue(e??16777215).toBgrNumber();n!==this.localColor&&(this.localColor=n,this._updateFlags|=nf,this._onUpdate())}get tint(){return ou(this.localColor)}set blendMode(e){this.localBlendMode!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=Pm,this.localBlendMode=e,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(this.localDisplayStatus&2)}set visible(e){const r=e?2:0;(this.localDisplayStatus&2)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=au,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(this.localDisplayStatus&4)}set culled(e){const r=e?0:4;(this.localDisplayStatus&4)!==r&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=au,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(this.localDisplayStatus&1)}set renderable(e){const r=e?1:0;(this.localDisplayStatus&1)!==r&&(this._updateFlags|=au,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return this.localDisplayStatus===7&&this.groupAlpha>0}destroy(e=!1){var i;if(this.destroyed)return;this.destroyed=!0;let r;if(this.children.length&&(r=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),(typeof e=="boolean"?e:e==null?void 0:e.children)&&r)for(let s=0;s<r.length;++s)r[s].destroy(e);(i=this.renderGroup)==null||i.destroy(),this.renderGroup=null}}me.mixin(ar,xD,TD,DD,BD,OD,ED,CD,kD,yD,bD,AD,SD);class Ni extends ar{constructor(e){super(e),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new Ut(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(e){this._roundPixels=e?1:0}containsPoint(e){const r=this.bounds,{x:n,y:i}=e;return n>=r.minX&&n<=r.maxX&&i>=r.minY&&i<=r.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const e=this.renderGroup||this.parentRenderGroup;e&&e.onChildViewUpdate(this)}destroy(e){super.destroy(e),this._bounds=null}collectRenderablesSimple(e,r,n){const{renderPipes:i,renderableGC:s}=r;i.blendMode.setBlendMode(this,this.groupBlendMode,e),i[this.renderPipeId].addRenderable(this,e),s.addRenderable(this),this.didViewUpdate=!1;const a=this.children,u=a.length;for(let l=0;l<u;l++)a[l].collectRenderables(e,r,n)}}class Zn extends Ni{constructor(e=ne.EMPTY){e instanceof ne&&(e={texture:e});const{texture:r=ne.EMPTY,anchor:n,roundPixels:i,width:s,height:o,...a}=e;super({label:"Sprite",...a}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),n?this.anchor=n:r.defaultAnchor&&(this.anchor=r.defaultAnchor),this.texture=r,this.allowChildren=!1,this.roundPixels=i??!1,s!==void 0&&(this.width=s),o!==void 0&&(this.height=o)}static from(e,r=!1){return e instanceof ne?new Zn(e):new Zn(ne.from(e,r))}set texture(e){e||(e=ne.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return z1(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return oe("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const e=this._anchor,r=this._texture,n=this._bounds,{width:i,height:s}=r.orig;n.minX=-e._x*i,n.maxX=n.minX+i,n.minY=-e._y*s,n.maxY=n.minY+s}destroy(e=!1){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this._setWidth(e,this._texture.orig.width),this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this._setHeight(e,this._texture.orig.height),this._height=e}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this._texture.orig.width,e.height=Math.abs(this.scale.y)*this._texture.orig.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this._texture.orig.width),r!==void 0&&this._setHeight(r,this._texture.orig.height)}}const AZ=new Ut;function Rm(t,e,r){const n=AZ;t.measurable=!0,zf(t,r,n),e.addBoundsMask(n),t.measurable=!1}function Om(t,e,r){const n=Si.get();t.measurable=!0;const i=pr.get().identity(),s=X1(t,r,i);Am(t,n,s),t.measurable=!1,e.addBoundsMask(n),pr.return(i),Si.return(n)}function X1(t,e,r){return t?(t!==e&&(X1(t.parent,e,r),t.updateLocalTransform(),r.append(t.localTransform)),r):(he("Mask bounds, renderable is not inside the root container"),r)}class q1{constructor(e){this.priority=0,this.inverse=!1,this.pipe="alphaMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.renderMaskToTexture=!(e instanceof Zn),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(e,r){this.inverse||Rm(this.mask,e,r)}addLocalBounds(e,r){Om(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}destroy(){this.reset()}static test(e){return e instanceof Zn}}q1.extension=O.MaskEffect;class Y1{constructor(e){this.priority=0,this.pipe="colorMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e}destroy(){}static test(e){return typeof e=="number"}}Y1.extension=O.MaskEffect;class K1{constructor(e){this.priority=0,this.pipe="stencilMask",e!=null&&e.mask&&this.init(e.mask)}init(e){this.mask=e,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(e,r){Rm(this.mask,e,r)}addLocalBounds(e,r){Om(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}destroy(){this.reset()}static test(e){return e instanceof ar}}K1.extension=O.MaskEffect;const FD={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")};let ST=FD;const Ae={get(){return ST},set(t){ST=t}};class wi extends yt{constructor(e){e.resource||(e.resource=Ae.get().createCanvas()),e.width||(e.width=e.resource.width,e.autoDensity||(e.width/=e.resolution)),e.height||(e.height=e.resource.height,e.autoDensity||(e.height/=e.resolution)),super(e),this.uploadMethodId="image",this.autoDensity=e.autoDensity,this.resizeCanvas(),this.transparent=!!e.transparent}resizeCanvas(){this.autoDensity&&"style"in this.resource&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),(this.resource.width!==this.pixelWidth||this.resource.height!==this.pixelHeight)&&(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(e=this.width,r=this.height,n=this._resolution){const i=super.resize(e,r,n);return i&&this.resizeCanvas(),i}static test(e){return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&e instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}wi.extension=O.TextureSource;class ts extends yt{constructor(e){if(e.resource&&globalThis.HTMLImageElement&&e.resource instanceof HTMLImageElement){const r=Ae.get().createCanvas(e.resource.width,e.resource.height);r.getContext("2d").drawImage(e.resource,0,0,e.resource.width,e.resource.height),e.resource=r,he("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(e),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(e){return globalThis.HTMLImageElement&&e instanceof HTMLImageElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||globalThis.VideoFrame&&e instanceof VideoFrame}}ts.extension=O.TextureSource;var rs=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(rs||{});class _h{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=e,this._context=r,this.priority=n,this._once=i}match(e,r=null){return this._fn===e&&this._context===r}emit(e){this._fn&&(this._context?this._fn.call(this._context,e):this._fn(e));const r=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const LD=class tn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new _h(null,null,1/0),this.deltaMS=1/tn.targetFPMS,this.elapsedMS=1/tn.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,r,n=rs.NORMAL){return this._addListener(new _h(e,r,n))}addOnce(e,r,n=rs.NORMAL){return this._addListener(new _h(e,r,n,!0))}_addListener(e){let r=this._head.next,n=this._head;if(!r)e.connect(n);else{for(;r;){if(e.priority>r.priority){e.connect(n);break}n=r,r=r.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,r){let n=this._head.next;for(;n;)n.match(e,r)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,r=this._head;for(;r=r.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let r;if(e>this.lastTime){if(r=this.elapsedMS=e-this.lastTime,r>this._maxElapsedMS&&(r=this._maxElapsedMS),r*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=r,this.deltaTime=this.deltaMS*tn.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const r=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,r)/1e3,tn.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const r=Math.max(this.minFPS,e);this._minElapsedMS=1/(r/1e3)}}static get shared(){if(!tn._shared){const e=tn._shared=new tn;e.autoStart=!0,e._protected=!0}return tn._shared}static get system(){if(!tn._system){const e=tn._system=new tn;e.autoStart=!0,e._protected=!0}return tn._system}};LD.targetFPMS=.06;let nr=LD,f0;async function Z1(){return f0??(f0=(async()=>{var o;const e=document.createElement("canvas").getContext("webgl");if(!e)return"premultiply-alpha-on-upload";const r=await new Promise(a=>{const u=document.createElement("video");u.onloadeddata=()=>a(u),u.onerror=()=>a(null),u.autoplay=!1,u.crossOrigin="anonymous",u.preload="auto",u.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",u.load()});if(!r)return"premultiply-alpha-on-upload";const n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r);const s=new Uint8Array(4);return e.readPixels(0,0,1,1,e.RGBA,e.UNSIGNED_BYTE,s),e.deleteFramebuffer(i),e.deleteTexture(n),(o=e.getExtension("WEBGL_lose_context"))==null||o.loseContext(),s[0]<=s[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),f0}const Bm=class ND extends yt{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...ND.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),e.autoLoad!==!1&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const e=nr.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const e=this.resource,r=this.options;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(r.preload||e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlayThrough),e.addEventListener("error",this._onError,!0)),this.alphaMode=await Z1(),this._load=new Promise((n,i)=>{this.isValid?n(this):(this._resolve=n,this._reject=i,r.preloadTimeoutMs!==void 0&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${r.preloadTimeoutMs}ms`))})),e.load())}),this._load}_onError(e){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.resource;return!e.paused&&!e.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const e=this.resource;this.isValid&&(this.isReady=!0,this.resize(e.videoWidth,e.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const e=this.resource;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlayThrough),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(nr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(nr.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(nr.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement}};Bm.extension=O.TextureSource;Bm.defaultOptions={...yt.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1};Bm.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Tc=Bm;const Rn=(t,e,r=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"||r?e(n):n):t);class PZ{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||he(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=Rn(e);let i;for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];if(l.test(r)){i=l.getCacheableAssets(n,r);break}}const s=new Map(Object.entries(i||{}));i||n.forEach(u=>{s.set(u,r)});const o=[...s.keys()],a={cacheKeys:o,keys:n};n.forEach(u=>{this._cacheMap.set(u,a)}),o.forEach(u=>{const l=i?i[u]:r;this._cache.has(u)&&this._cache.get(u)!==l&&he("[Cache] already has key:",u),this._cache.set(u,s.get(u))})}remove(e){if(!this._cacheMap.has(e)){he(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const He=new PZ,k_=[];me.handleByList(O.TextureSource,k_);function RZ(t={}){return Q1(t)}function Q1(t={}){const e=t&&t.resource,r=e?t.resource:t,n=e?t:{resource:t};for(let i=0;i<k_.length;i++){const s=k_[i];if(s.test(r))return new s(n)}throw new Error(`Could not find a source type for resource: ${n.resource}`)}function UD(t={},e=!1){const r=t&&t.resource,n=r?t.resource:t,i=r?t:{resource:t};if(!e&&He.has(n))return He.get(n);const s=new ne({source:Q1(i)});return s.on("destroy",()=>{He.has(n)&&He.remove(n)}),e||He.set(n,s),s}function GD(t,e=!1){return typeof t=="string"?He.get(t):t instanceof yt?new ne({source:t}):UD(t,e)}ne.from=GD;yt.from=Q1;me.add(q1,Y1,K1,Tc,ts,wi,Em);var _n=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(_n||{});function jn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Nl(t){return t.split("?")[0].split("#")[0]}function OZ(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function BZ(t,e,r){return t.replace(new RegExp(OZ(e),"g"),r)}function kZ(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const u=r.lastIndexOf("/");if(u!==r.length-1){u===-1?(r="",n=0):(r=r.slice(0,u),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const zr={toPosix(t){return BZ(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){jn(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const r=/^[^/:]+:\/{0,2}/.exec(t);return r?r[0]:""},toAbsolute(t,e,r){if(jn(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const n=Nl(this.toPosix(e??Ae.get().getBaseUrl())),i=Nl(this.toPosix(r??this.rootname(n)));return t=this.toPosix(t),t.startsWith("/")?zr.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(jn(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=kZ(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return jn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(jn(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(jn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){jn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){jn(t),e&&jn(e),t=Nl(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const u=t.charCodeAt(s);if(u===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(u===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){jn(t),t=Nl(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){jn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Nl(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,u=!0,l=t.length-1,c=0;for(;l>=i;--l){if(r=t.charCodeAt(l),r===47){if(!u){o=l+1;break}continue}a===-1&&(u=!1,a=l+1),r===46?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||a===-1||c===0||c===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};function zD(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?zD(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function $D(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),zD(t,i,0,r,n)}else n.push(t);return n}const sf=t=>!Array.isArray(t);class lo{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}getAlias(e){const{alias:r,src:n}=e;return Rn(r||n,s=>typeof s=="string"?s:Array.isArray(s)?s.map(o=>(o==null?void 0:o.src)??o):s!=null&&s.src?s.src:s,!0)}addManifest(e){this._manifest&&he("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];let i=r;Array.isArray(r)||(i=Object.entries(r).map(([s,o])=>typeof o=="string"||Array.isArray(o)?{alias:s,src:o}:{alias:s,...o})),i.forEach(s=>{const o=s.src,a=s.alias;let u;if(typeof a=="string"){const l=this._createBundleAssetId(e,a);n.push(l),u=[a,l]}else{const l=a.map(c=>this._createBundleAssetId(e,c));n.push(...l),u=[...a,...l]}this.add({...s,alias:u,src:o})}),this._bundles[e]=n}add(e){const r=[];Array.isArray(e)?r.push(...e):r.push(e);let n;n=s=>{this.hasKey(s)&&he(`[Resolver] already has key: ${s} overwriting`)},Rn(r).forEach(s=>{const{src:o}=s;let{data:a,format:u,loadParser:l}=s;const c=Rn(o).map(h=>typeof h=="string"?$D(h):Array.isArray(h)?h:[h]),f=this.getAlias(s);Array.isArray(f)?f.forEach(n):n(f);const d=[];c.forEach(h=>{h.forEach(p=>{let m={};if(typeof p!="object"){m.src=p;for(let g=0;g<this._parsers.length;g++){const v=this._parsers[g];if(v.test(p)){m=v.parse(p);break}}}else a=p.data??a,u=p.format??u,l=p.loadParser??l,m={...m,...p};if(!f)throw new Error(`[Resolver] alias is undefined for this asset: ${m.src}`);m=this._buildResolvedAsset(m,{aliases:f,data:a,format:u,loadParser:l}),d.push(m)})}),f.forEach(h=>{this._assetMap[h]=d})})}resolveBundle(e){const r=sf(e);e=Rn(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const u in o){const l=o[u];a[this._extractAssetIdFromBundle(i,u)]=l}n[i]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=sf(e);e=Rn(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s);o==null||o.priority.forEach(a=>{o.params[a].forEach(u=>{const l=s.filter(c=>c[a]?c[a]===u:!1);l.length&&(s=l)})}),this._resolverHash[i]=s[0]}else this._resolverHash[i]=this._buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[r],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}_buildResolvedAsset(e,r){const{aliases:n,data:i,loadParser:s,format:o}=r;return(this._basePath||this._rootPath)&&(e.src=zr.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??e.format??jD(e.src),e}}lo.RETINA_PREFIX=/@([0-9\.]+)x/;function jD(t){return t.split(".").pop().split("?").shift().split("#").shift()}const yp=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t},HD=class oc{constructor(e,r){this.linkedSheets=[],this._texture=e instanceof ne?e:null,this.textureSource=e.source,this.textures={},this.animations={},this.data=r;const n=parseFloat(r.meta.scale);n?(this.resolution=n,e.source.resolution=this.resolution):this.resolution=e.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=oc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let r=e;const n=oc.BATCH_SIZE;for(;r-e<n&&r<this._frameKeys.length;){const i=this._frameKeys[r],s=this._frames[i],o=s.frame;if(o){let a=null,u=null;const l=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,c=new Ie(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);s.rotated?a=new Ie(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Ie(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(u=new Ie(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new ne({source:this.textureSource,frame:a,orig:c,trim:u,rotate:s.rotated?2:0,defaultAnchor:s.anchor,defaultBorders:s.borders,label:i.toString()})}r++}}_processAnimations(){const e=this.data.animations||{};for(const r in e){this.animations[r]=[];for(let n=0;n<e[r].length;n++){const i=e[r][n];this.animations[r].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*oc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*oc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var r;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((r=this._texture)==null||r.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};HD.BATCH_SIZE=1e3;let D_=HD;const DZ=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function VD(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[i]=e.textures[i]}),!r){const i=zr.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=VD([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const WD={extension:O.Asset,cache:{test:t=>t instanceof D_,getCacheableAssets:(t,e)=>VD(t,e,!1)},resolver:{extension:{type:O.ResolveParser,name:"resolveSpritesheet"},test:t=>{const r=t.split("?")[0].split("."),n=r.pop(),i=r.pop();return n==="json"&&DZ.includes(i)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=lo.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:O.LoadParser,priority:_n.Normal,name:"spritesheetLoader"},async testParse(t,e){return zr.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var c,f;const{texture:n,imageFilename:i,textureOptions:s}=(e==null?void 0:e.data)??{};let o=zr.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(n instanceof ne)a=n;else{const d=yp(o+(i??t.meta.image),e.src);a=(await r.load([{src:d,data:s}]))[d]}const u=new D_(a.source,t);await u.parse();const l=(c=t==null?void 0:t.meta)==null?void 0:c.related_multi_packs;if(Array.isArray(l)){const d=[];for(const p of l){if(typeof p!="string")continue;let m=o+p;(f=e.data)!=null&&f.ignoreMultiPack||(m=yp(m,e.src),d.push(r.load({src:m,data:{textureOptions:s,ignoreMultiPack:!0}})))}const h=await Promise.all(d);u.linkedSheets=h,h.forEach(p=>{p.linkedSheets=[u].concat(u.linkedSheets.filter(m=>m!==p))})}return u},async unload(t,e,r){await r.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};me.add(WD);class sl{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=sl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Le,this.page=new Le,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}var d0=/iPhone/i,wT=/iPod/i,ET=/iPad/i,CT=/\biOS-universal(?:.+)Mac\b/i,h0=/\bAndroid(?:.+)Mobile\b/i,TT=/Android/i,va=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Rd=/Silk/i,Gi=/Windows Phone/i,AT=/\bWindows(?:.+)ARM\b/i,PT=/BlackBerry/i,RT=/BB10/i,OT=/Opera Mini/i,BT=/\b(CriOS|Chrome)(?:.+)Mobile/i,kT=/Mobile(?:.+)Firefox\b/i,DT=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function MZ(t){return function(e){return e.test(t)}}function MT(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=MZ(r),s={apple:{phone:i(d0)&&!i(Gi),ipod:i(wT),tablet:!i(d0)&&(i(ET)||DT(e))&&!i(Gi),universal:i(CT),device:(i(d0)||i(wT)||i(ET)||i(CT)||DT(e))&&!i(Gi)},amazon:{phone:i(va),tablet:!i(va)&&i(Rd),device:i(va)||i(Rd)},android:{phone:!i(Gi)&&i(va)||!i(Gi)&&i(h0),tablet:!i(Gi)&&!i(va)&&!i(h0)&&(i(Rd)||i(TT)),device:!i(Gi)&&(i(va)||i(Rd)||i(h0)||i(TT))||i(/\bokhttp\b/i)},windows:{phone:i(Gi),tablet:i(AT),device:i(Gi)||i(AT)},other:{blackberry:i(PT),blackberry10:i(RT),opera:i(OT),firefox:i(kT),chrome:i(BT),device:i(PT)||i(RT)||i(OT)||i(kT)||i(BT)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const IZ=MT.default??MT,XD=IZ(globalThis.navigator),FZ=9,Od=100,LZ=0,NZ=0,IT=2,FT=1,UZ=-1e3,GZ=-1e3,zZ=2,J1=class qD{constructor(e,r=XD){this._mobileInfo=r,this.debug=!1,this._activateOnTab=!0,this._deactivateOnMouseMove=!0,this._isActive=!1,this._isMobileAccessibility=!1,this._div=null,this._pool=[],this._renderId=0,this._children=[],this._androidUpdateCount=0,this._androidUpdateFrequency=500,this._hookDiv=null,(r.tablet||r.phone)&&this._createTouchHook(),this._renderer=e}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}get hookDiv(){return this._hookDiv}_createTouchHook(){const e=document.createElement("button");e.style.width=`${FT}px`,e.style.height=`${FT}px`,e.style.position="absolute",e.style.top=`${UZ}px`,e.style.left=`${GZ}px`,e.style.zIndex=zZ.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this._activate(),this._destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}_destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}_activate(){if(this._isActive)return;this._isActive=!0,this._div||(this._div=document.createElement("div"),this._div.style.width=`${Od}px`,this._div.style.height=`${Od}px`,this._div.style.position="absolute",this._div.style.top=`${LZ}px`,this._div.style.left=`${NZ}px`,this._div.style.zIndex=IT.toString(),this._div.style.pointerEvents="none"),this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._deactivateOnMouseMove&&(this._onMouseMove=this._onMouseMove.bind(this),globalThis.document.addEventListener("mousemove",this._onMouseMove,!0));const e=this._renderer.view.canvas;if(e.parentNode)e.parentNode.appendChild(this._div),this._initAccessibilitySetup();else{const r=new MutationObserver(()=>{e.parentNode&&(e.parentNode.appendChild(this._div),r.disconnect(),this._initAccessibilitySetup())});r.observe(document.body,{childList:!0,subtree:!0})}}_initAccessibilitySetup(){this._renderer.runners.postrender.add(this),this._renderer.lastObjectRendered&&this._updateAccessibleObjects(this._renderer.lastObjectRendered)}_deactivate(){if(!(!this._isActive||this._isMobileAccessibility)){this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),this._activateOnTab&&globalThis.addEventListener("keydown",this._onKeyDown,!1),this._renderer.runners.postrender.remove(this);for(const e of this._children)e._accessibleDiv&&e._accessibleDiv.parentNode&&(e._accessibleDiv.parentNode.removeChild(e._accessibleDiv),e._accessibleDiv=null),e._accessibleActive=!1;this._pool.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div),this._pool=[],this._children=[]}}_updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&(e._accessibleActive||this._addChild(e),e._renderId=this._renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this._updateAccessibleObjects(r[n])}init(e){const n={accessibilityOptions:{...qD.defaultOptions,...(e==null?void 0:e.accessibilityOptions)||{}}};this.debug=n.accessibilityOptions.debug,this._activateOnTab=n.accessibilityOptions.activateOnTab,this._deactivateOnMouseMove=n.accessibilityOptions.deactivateOnMouseMove,n.accessibilityOptions.enabledByDefault?this._activate():this._activateOnTab&&(this._onKeyDown=this._onKeyDown.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)),this._renderer.runners.postrender.remove(this)}postrender(){const e=performance.now();if(this._mobileInfo.android.device&&e<this._androidUpdateCount||(this._androidUpdateCount=e+this._androidUpdateFrequency,!this._renderer.renderingToScreen||!this._renderer.view.canvas))return;const r=new Set;if(this._renderer.lastObjectRendered){this._updateAccessibleObjects(this._renderer.lastObjectRendered);for(const n of this._children)n._renderId===this._renderId&&r.add(this._children.indexOf(n))}for(let n=this._children.length-1;n>=0;n--){const i=this._children[n];r.has(n)||(i._accessibleDiv&&i._accessibleDiv.parentNode&&(i._accessibleDiv.parentNode.removeChild(i._accessibleDiv),this._pool.push(i._accessibleDiv),i._accessibleDiv=null),i._accessibleActive=!1,$1(this._children,n,1))}if(this._renderer.renderingToScreen){const{x:n,y:i,width:s,height:o}=this._renderer.screen,a=this._div;a.style.left=`${n}px`,a.style.top=`${i}px`,a.style.width=`${s}px`,a.style.height=`${o}px`}for(let n=0;n<this._children.length;n++){const i=this._children[n];if(!i._accessibleActive||!i._accessibleDiv)continue;const s=i._accessibleDiv,o=i.hitArea||i.getBounds().rectangle;if(i.hitArea){const a=i.worldTransform,u=this._renderer.resolution,l=this._renderer.resolution;s.style.left=`${(a.tx+o.x*a.a)*u}px`,s.style.top=`${(a.ty+o.y*a.d)*l}px`,s.style.width=`${o.width*a.a*u}px`,s.style.height=`${o.height*a.d*l}px`}else{this._capHitArea(o);const a=this._renderer.resolution,u=this._renderer.resolution;s.style.left=`${o.x*a}px`,s.style.top=`${o.y*u}px`,s.style.width=`${o.width*a}px`,s.style.height=`${o.height*u}px`}}this._renderId++}_updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}_capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this._renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}_addChild(e){let r=this._pool.pop();r||(e.accessibleType==="button"?r=document.createElement("button"):(r=document.createElement(e.accessibleType),r.style.cssText=`
                        color: transparent;
                        pointer-events: none;
                        padding: 0;
                        margin: 0;
                        border: 0;
                        outline: 0;
                        background: transparent;
                        box-sizing: border-box;
                        user-select: none;
                        -webkit-user-select: none;
                        -moz-user-select: none;
                        -ms-user-select: none;
                    `,e.accessibleText&&(r.innerText=e.accessibleText)),r.style.width=`${Od}px`,r.style.height=`${Od}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=IT.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`container ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this._updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.container=e,this._children.push(e),this._div.appendChild(e._accessibleDiv),e.interactive&&(e._accessibleDiv.tabIndex=e.tabIndex)}_dispatchEvent(e,r){const{container:n}=e.target,i=this._renderer.events.rootBoundary,s=Object.assign(new sl(i),{target:n});i.rootTarget=this._renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode!==FZ||!this._activateOnTab||this._activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this._deactivate()}destroy(){this._deactivate(),this._destroyTouchHook(),this._div=null,this._pool=null,this._children=null,this._renderer=null,this._activateOnTab&&globalThis.removeEventListener("keydown",this._onKeyDown)}setAccessibilityEnabled(e){e?this._activate():this._deactivate()}};J1.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"accessibility"};J1.defaultOptions={enabledByDefault:!1,debug:!1,activateOnTab:!0,deactivateOnMouseMove:!0};let YD=J1;const KD={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessibleText:null,accessiblePointerEvents:"auto",accessibleChildren:!0,_renderId:-1},p0=Object.create(null),LT=Object.create(null);function Tu(t,e){let r=LT[t];return r===void 0&&(p0[e]===void 0&&(p0[e]=1),LT[t]=r=p0[e]++),r}let ya;function e2(){return(!ya||ya!=null&&ya.isContextLost())&&(ya=Ae.get().createCanvas().getContext("webgl",{})),ya}let Bd;function ZD(){if(!Bd){Bd="mediump";const t=e2();t&&t.getShaderPrecisionFormat&&(Bd=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?"highp":"mediump")}return Bd}function QD(t,e,r){return e?t:r?(t=t.replace("out vec4 finalColor;",""),`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in varying
        #define finalColor gl_FragColor
        #define texture texture2D
        #endif
        ${t}
        `):`
        
        #ifdef GL_ES // This checks if it is WebGL1
        #define in attribute
        #define out varying
        #endif
        ${t}
        `}function JD(t,e,r){const n=r?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if(t.substring(0,9)!=="precision"){let i=r?e.requestedFragmentPrecision:e.requestedVertexPrecision;return i==="highp"&&n!=="highp"&&(i="mediump"),`precision ${i} float;
${t}`}else if(n!=="highp"&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}function e4(t,e){return e?`#version 300 es
${t}`:t}const $Z={},jZ={};function t4(t,{name:e="pixi-program"},r=!0){e=e.replace(/\s+/g,"-"),e+=r?"-fragment":"-vertex";const n=r?$Z:jZ;return n[e]?(n[e]++,e+=`-${n[e]}`):n[e]=1,t.indexOf("#define SHADER_NAME")!==-1?t:`${`#define SHADER_NAME ${e}`}
${t}`}function r4(t,e){return e?t.replace("#version 300 es",""):t}const m0={stripVersion:r4,ensurePrecision:JD,addProgramDefines:QD,setProgramName:t4,insertVersion:e4},g0=Object.create(null),n4=class M_{constructor(e){e={...M_.defaultOptions,...e};const r=e.fragment.indexOf("#version 300 es")!==-1,n={stripVersion:r,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:ZD()},setProgramName:{name:e.name},addProgramDefines:r,insertVersion:r};let i=e.fragment,s=e.vertex;Object.keys(m0).forEach(o=>{const a=n[o];i=m0[o](i,a,!0),s=m0[o](s,a,!1)}),this.fragment=i,this.vertex=s,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=Tu(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const r=`${e.vertex}:${e.fragment}`;return g0[r]||(g0[r]=new M_(e)),g0[r]}};n4.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let et=n4;const NT={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function ns(t){return NT[t]??NT.float32}const HZ={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function i4({source:t,entryPoint:e}){const r={},n=t.indexOf(`fn ${e}`);if(n!==-1){const i=t.indexOf("->",n);if(i!==-1){const s=t.substring(n,i),o=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let a;for(;(a=o.exec(s))!==null;){const u=HZ[a[3]]??"float32";r[a[2]]={location:parseInt(a[1],10),format:u,stride:ns(u).stride,offset:0,instance:!1,start:0}}}}return r}function bh(t){var f,d;const e=/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g,r=/@group\((\d+)\)/,n=/@binding\((\d+)\)/,i=/var(<[^>]+>)? (\w+)/,s=/:\s*(\w+)/,o=/struct\s+(\w+)\s*{([^}]+)}/g,a=/(\w+)\s*:\s*([\w\<\>]+)/g,u=/struct\s+(\w+)/,l=(f=t.match(e))==null?void 0:f.map(h=>({group:parseInt(h.match(r)[1],10),binding:parseInt(h.match(n)[1],10),name:h.match(i)[2],isUniform:h.match(i)[1]==="<uniform>",type:h.match(s)[1]}));if(!l)return{groups:[],structs:[]};const c=((d=t.match(o))==null?void 0:d.map(h=>{const p=h.match(u)[1],m=h.match(a).reduce((g,v)=>{const[y,b]=v.split(":");return g[y.trim()]=b.trim(),g},{});return m?{name:p,members:m}:null}).filter(({name:h})=>l.some(p=>p.type===h)))??[];return{groups:l,structs:c}}var za=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(za||{});function s4({groups:t}){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[n.group]||(e[n.group]=[]),n.isUniform?e[n.group].push({binding:n.binding,visibility:za.VERTEX|za.FRAGMENT,buffer:{type:"uniform"}}):n.type==="sampler"?e[n.group].push({binding:n.binding,visibility:za.FRAGMENT,sampler:{type:"filtering"}}):n.type==="texture_2d"&&e[n.group].push({binding:n.binding,visibility:za.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}function o4({groups:t}){const e=[];for(let r=0;r<t.length;r++){const n=t[r];e[n.group]||(e[n.group]={}),e[n.group][n.name]=n.binding}return e}function a4(t,e){const r=new Set,n=new Set,i=[...t.structs,...e.structs].filter(o=>r.has(o.name)?!1:(r.add(o.name),!0)),s=[...t.groups,...e.groups].filter(o=>{const a=`${o.name}-${o.binding}`;return n.has(a)?!1:(n.add(a),!0)});return{structs:i,groups:s}}const v0=Object.create(null);class qe{constructor(e){var a,u;this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:r,vertex:n,layout:i,gpuLayout:s,name:o}=e;if(this.name=o,this.fragment=r,this.vertex=n,r.source===n.source){const l=bh(r.source);this.structsAndGroups=l}else{const l=bh(n.source),c=bh(r.source);this.structsAndGroups=a4(l,c)}this.layout=i??o4(this.structsAndGroups),this.gpuLayout=s??s4(this.structsAndGroups),this.autoAssignGlobalUniforms=((a=this.layout[0])==null?void 0:a.globalUniforms)!==void 0,this.autoAssignLocalUniforms=((u=this.layout[1])==null?void 0:u.localUniforms)!==void 0,this._generateProgramKey()}_generateProgramKey(){const{vertex:e,fragment:r}=this,n=e.source+r.source+e.entryPoint+r.entryPoint;this._layoutKey=Tu(n,"program")}get attributeData(){return this._attributeData??(this._attributeData=i4(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(e){const r=`${e.vertex.source}:${e.fragment.source}:${e.fragment.entryPoint}:${e.vertex.entryPoint}`;return v0[r]||(v0[r]=new qe(e)),v0[r]}}const t2=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],u4=t2.reduce((t,e)=>(t[e]=!0,t),{});function l4(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const c4=class f4{constructor(e,r){this._touched=0,this.uid=Je("uniform"),this._resourceType="uniformGroup",this._resourceId=Je("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,r={...f4.defaultOptions,...r},this.uniformStructures=e;const n={};for(const i in e){const s=e[i];if(s.name=i,s.size=s.size??1,!u4[s.type])throw new Error(`Uniform type ${s.type} is not supported. Supported uniform types are: ${t2.join(", ")}`);s.value??(s.value=l4(s.type,s.size)),n[i]=s.value}this.uniforms=n,this._dirtyId=1,this.ubo=r.ubo,this.isStatic=r.isStatic,this._signature=Tu(Object.keys(n).map(i=>`${i}-${e[i].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};c4.defaultOptions={ubo:!1,isStatic:!1};let Pt=c4;class Ei{constructor(e){this.resources=Object.create(null),this._dirty=!0;let r=0;for(const n in e){const i=e[n];this.setResource(i,r++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const e=[];let r=0;for(const n in this.resources)e[r++]=this.resources[n]._resourceId;this._key=e.join("|")}setResource(e,r){var i,s;const n=this.resources[r];e!==n&&(n&&((i=e.off)==null||i.call(e,"change",this.onResourceChange,this)),(s=e.on)==null||s.call(e,"change",this.onResourceChange,this),this.resources[r]=e,this._dirty=!0)}getResource(e){return this.resources[e]}_touch(e){const r=this.resources;for(const n in r)r[n]._touched=e}destroy(){var r;const e=this.resources;for(const n in e){const i=e[n];(r=i.off)==null||r.call(i,"change",this.onResourceChange,this)}this.resources=null}onResourceChange(e){if(this._dirty=!0,e.destroyed){const r=this.resources;for(const n in r)r[n]===e&&(r[n]=null)}else this._updateKey()}}var Wr=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(Wr||{});class bn extends Yr{constructor(e){super(),this.uid=Je("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:r,glProgram:n,groups:i,resources:s,compatibleRenderers:o,groupMap:a}=e;this.gpuProgram=r,this.glProgram=n,o===void 0&&(o=0,r&&(o|=Wr.WEBGPU),n&&(o|=Wr.WEBGL)),this.compatibleRenderers=o;const u={};if(!s&&!i&&(s={}),s&&i)throw new Error("[Shader] Cannot have both resources and groups");if(!r&&i&&!a)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!r&&i&&a)for(const l in a)for(const c in a[l]){const f=a[l][c];u[f]={group:l,binding:c,name:f}}else if(r&&i&&!a){const l=r.structsAndGroups.groups;a={},l.forEach(c=>{a[c.group]=a[c.group]||{},a[c.group][c.binding]=c.name,u[c.name]=c})}else if(s){i={},a={},r&&r.structsAndGroups.groups.forEach(f=>{a[f.group]=a[f.group]||{},a[f.group][f.binding]=f.name,u[f.name]=f});let l=0;for(const c in s)u[c]||(i[99]||(i[99]=new Ei,this._ownedBindGroups.push(i[99])),u[c]={group:99,binding:l,name:c},a[99]=a[99]||{},a[99][l]=c,l++);for(const c in s){const f=c;let d=s[c];!d.source&&!d._resourceType&&(d=new Pt(d));const h=u[f];h&&(i[h.group]||(i[h.group]=new Ei,this._ownedBindGroups.push(i[h.group])),i[h.group].setResource(d,h.binding))}}this.groups=i,this._uniformBindMap=a,this.resources=this._buildResourceAccessor(i,u)}addResource(e,r,n){var i,s;(i=this._uniformBindMap)[r]||(i[r]={}),(s=this._uniformBindMap[r])[n]||(s[n]=e),this.groups[r]||(this.groups[r]=new Ei,this._ownedBindGroups.push(this.groups[r]))}_buildResourceAccessor(e,r){const n={};for(const i in r){const s=r[i];Object.defineProperty(n,s.name,{get(){return e[s.group].getResource(s.binding)},set(o){e[s.group].setResource(o,s.binding)}})}return n}destroy(e=!1){var r,n;this.emit("destroy",this),e&&((r=this.gpuProgram)==null||r.destroy(),(n=this.glProgram)==null||n.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(i=>{i.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(e){const{gpu:r,gl:n,...i}=e;let s,o;return r&&(s=qe.from(r)),n&&(o=et.from(n)),new bn({gpuProgram:s,glProgram:o,...i})}}const VZ={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},y0=0,_0=1,b0=2,x0=3,S0=4,w0=5,I_=class d4{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<y0)}set blend(e){!!(this.data&1<<y0)!==e&&(this.data^=1<<y0)}get offsets(){return!!(this.data&1<<_0)}set offsets(e){!!(this.data&1<<_0)!==e&&(this.data^=1<<_0)}set cullMode(e){if(e==="none"){this.culling=!1;return}this.culling=!0,this.clockwiseFrontFace=e==="front"}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(this.data&1<<b0)}set culling(e){!!(this.data&1<<b0)!==e&&(this.data^=1<<b0)}get depthTest(){return!!(this.data&1<<x0)}set depthTest(e){!!(this.data&1<<x0)!==e&&(this.data^=1<<x0)}get depthMask(){return!!(this.data&1<<w0)}set depthMask(e){!!(this.data&1<<w0)!==e&&(this.data^=1<<w0)}get clockwiseFrontFace(){return!!(this.data&1<<S0)}set clockwiseFrontFace(e){!!(this.data&1<<S0)!==e&&(this.data^=1<<S0)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!=="none",this._blendMode=e,this._blendModeId=VZ[e]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new d4;return e.depthTest=!1,e.blend=!0,e}};I_.default2d=I_.for2d();let dn=I_;const h4=class F_ extends bn{constructor(e){e={...F_.defaultOptions,...e},super(e),this.enabled=!0,this._state=dn.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,typeof e.antialias=="boolean"?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(e,r,n,i){e.applyFilter(this,r,n,i)}get blendMode(){return this._state.blendMode}set blendMode(e){this._state.blendMode=e}static from(e){const{gpu:r,gl:n,...i}=e;let s,o;return r&&(s=qe.from(r)),n&&(o=et.from(n)),new F_({gpuProgram:s,glProgram:o,...i})}};h4.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Rt=h4;var p4=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uBlend;

uniform sampler2D uTexture;
uniform sampler2D uBackTexture;

{FUNCTIONS}

void main()
{ 
    vec4 back = texture(uBackTexture, vTextureCoord);
    vec4 front = texture(uTexture, vTextureCoord);
    float blendedAlpha = front.a + back.a * (1.0 - front.a);
    
    {MAIN}
}
`,m4=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 backgroundUv;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,g4=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlendUniforms {
  uBlend:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(0) @binding(3) var uBackTexture: texture_2d<f32>;

@group(1) @binding(0) var<uniform> blendUniforms : BlendUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

{FUNCTIONS}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>
) -> @location(0) vec4<f32> {


   var back =  textureSample(uBackTexture, uSampler, uv);
   var front = textureSample(uTexture, uSampler, uv);
   var blendedAlpha = front.a + back.a * (1.0 - front.a);
   
   var out = vec4<f32>(0.0,0.0,0.0,0.0);

   {MAIN}

   return out;
}`;class _t extends Rt{constructor(e){const r=e.gpu,n=UT({source:g4,...r}),i=qe.from({vertex:{source:n,entryPoint:"mainVertex"},fragment:{source:n,entryPoint:"mainFragment"}}),s=e.gl,o=UT({source:p4,...s}),a=et.from({vertex:m4,fragment:o}),u=new Pt({uBlend:{value:1,type:"f32"}});super({gpuProgram:i,glProgram:a,blendRequired:!0,resources:{blendUniforms:u,uBackTexture:ne.EMPTY}})}}function UT(t){const{source:e,functions:r,main:n}=t;return e.replace("{FUNCTIONS}",r).replace("{MAIN}",n)}const km=`
	float getLuminosity(vec3 c) {
		return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
	}

	vec3 setLuminosity(vec3 c, float lum) {
		float modLum = lum - getLuminosity(c);
		vec3 color = c.rgb + vec3(modLum);

		// clip back into legal range
		modLum = getLuminosity(color);
		vec3 modLumVec = vec3(modLum);

		float cMin = min(color.r, min(color.g, color.b));
		float cMax = max(color.r, max(color.g, color.b));

		if(cMin < 0.0) {
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0) {
			color = mix(modLumVec, color, (1.0 - modLum) / (cMax - modLum));
		}

		return color;
	}

	float getSaturation(vec3 c) {
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	vec3 setSaturationMinMidMax(vec3 cSorted, float s) {
		vec3 colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x) {
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else {
			colorSorted.y = 0.0;
			colorSorted.z = 0.0;
		}

		colorSorted.x = 0.0;

		return colorSorted;
	}

	vec3 setSaturation(vec3 c, float s) {
		vec3 color = c;

		if(color.r <= color.g && color.r <= color.b) {
			if(color.g <= color.b) {
				color = setSaturationMinMidMax(color.rgb, s).rgb;
			}
			else {
				color = setSaturationMinMidMax(color.rbg, s).rbg;
			}
		}
		else if(color.g <= color.r && color.g <= color.b) {
			if(color.r <= color.b) {
				color = setSaturationMinMidMax(color.grb, s).grb;
			}
			else {
				color = setSaturationMinMidMax(color.gbr, s).gbr;
			}
		}
		else {
			// Using bgr for both fixes part of hue
			if(color.r <= color.g) {
				color = setSaturationMinMidMax(color.brg, s).brg;
			}
			else {
				color = setSaturationMinMidMax(color.bgr, s).bgr;
			}
		}

		return color;
	}
    `,Dm=`
	fn getLuminosity(c: vec3<f32>) -> f32
	{
		return 0.3*c.r + 0.59*c.g + 0.11*c.b;
	}

	fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32>
	{
		var modLum: f32 = lum - getLuminosity(c);
		var color: vec3<f32> = c.rgb + modLum;

		// clip back into legal range
		modLum = getLuminosity(color);
		let modLumVec = vec3<f32>(modLum);

		let cMin: f32 = min(color.r, min(color.g, color.b));
		let cMax: f32 = max(color.r, max(color.g, color.b));

		if(cMin < 0.0)
		{
			color = mix(modLumVec, color, modLum / (modLum - cMin));
		}

		if(cMax > 1.0)
		{
			color = mix(modLumVec, color, (1 - modLum) / (cMax - modLum));
		}

		return color;
	}

	fn getSaturation(c: vec3<f32>) -> f32
	{
		return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
	}

	fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32>
	{
		var colorSorted = cSorted;

		if(colorSorted.z > colorSorted.x)
		{
			colorSorted.y = (((colorSorted.y - colorSorted.x) * s) / (colorSorted.z - colorSorted.x));
			colorSorted.z = s;
		}
		else
		{
			colorSorted.y = 0;
			colorSorted.z = 0;
		}

		colorSorted.x = 0;

		return colorSorted;
	}

	fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32>
	{
		var color = c;

		if (color.r <= color.g && color.r <= color.b)
		{
			if (color.g <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rgb, s)).rgb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.rbg, s)).rbg;
			}
		}
		else if (color.g <= color.r && color.g <= color.b)
		{
			if (color.r <= color.b)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.grb, s)).grb;
			}
			else
			{
				color = vec3<f32>(setSaturationMinMidMax(color.gbr, s)).gbr;
			}
		}
		else
		{
			// Using bgr for both fixes part of hue
			if (color.r <= color.g)
			{
				color = vec3<f32>(setSaturationMinMidMax(color.brg, s)).brg;
			}
			else
			{
				color  = vec3<f32>(setSaturationMinMidMax(color.bgr, s)).bgr;
			}
		}

		return color;
	}
	`;class v4 extends _t{constructor(){super({gl:{functions:`
                ${km}

                vec3 blendColor(vec3 base, vec3 blend,  float opacity)
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColor(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Dm}

                fn blendColorOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (setLuminosity(blend, getLuminosity(base)) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendColorOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}v4.extension={name:"color",type:O.BlendMode};class y4 extends _t{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0 - ((1.0 - base) / blend)), 0.0);
                }

                vec3 blendColorBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendColorBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn blendColorBurn(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorBurn(base.r, blend.r),
                        colorBurn(base.g, blend.g),
                        colorBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendColorBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}y4.extension={name:"color-burn",type:O.BlendMode};class _4 extends _t{constructor(){super({gl:{functions:`
                float colorDodge(float base, float blend)
                {
                    return base / (1.0 - blend);
                }

                vec3 blendColorDodge(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendColorDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return base / (1.0 - blend);
                }

                fn blendColorDodge(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        colorDodge(base.r, blend.r),
                        colorDodge(base.g, blend.g),
                        colorDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                    out = vec4<f32>(blendColorDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}_4.extension={name:"color-dodge",type:O.BlendMode};class b4 extends _t{constructor(){super({gl:{functions:`
                vec3 blendDarken(vec3 base, vec3 blend, float opacity)
                {
                    return (min(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDarken(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendDarken(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (min(blend,base) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendDarken(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}b4.extension={name:"darken",type:O.BlendMode};class x4 extends _t{constructor(){super({gl:{functions:`
                vec3 blendDifference(vec3 base, vec3 blend,  float opacity)
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendDifference(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn blendDifference(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (abs(blend - base) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDifference(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}x4.extension={name:"difference",type:O.BlendMode};class S4 extends _t{constructor(){super({gl:{functions:`
                float divide(float base, float blend)
                {
                    return (blend > 0.0) ? clamp(base / blend, 0.0, 1.0) : 1.0;
                }

                vec3 blendDivide(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendDivide(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn divide(base: f32, blend: f32) -> f32
                {
                    return select(1.0, clamp(base / blend, 0.0, 1.0), blend > 0.0);
                }

                fn blendDivide(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        divide(base.r, blend.r),
                        divide(base.g, blend.g),
                        divide(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendDivide(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}S4.extension={name:"divide",type:O.BlendMode};class w4 extends _t{constructor(){super({gl:{functions:`
                vec3 exclusion(vec3 base, vec3 blend)
                {
                    return base + blend - 2.0 * base * blend;
                }

                vec3 blendExclusion(vec3 base, vec3 blend, float opacity)
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendExclusion(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn exclusion(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return base+blend-2.0*base*blend;
                }

                fn blendExclusion(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (exclusion(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendExclusion(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}w4.extension={name:"exclusion",type:O.BlendMode};class E4 extends _t{constructor(){super({gl:{functions:`
                float hardLight(float base, float blend)
                {
                    return (blend < 0.5) ? 2.0 * base * blend : 1.0 - 2.0 * (1.0 - base) * (1.0 - blend);
                }

                vec3 blendHardLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardLight(base: f32, blend: f32) -> f32
                {
                    return select(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, blend < 0.5);
                }

                fn blendHardLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        hardLight(base.r, blend.r),
                        hardLight(base.g, blend.g),
                        hardLight(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendHardLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}E4.extension={name:"hard-light",type:O.BlendMode};class C4 extends _t{constructor(){super({gl:{functions:`
                float hardMix(float base, float blend)
                {
                    return (base + blend >= 1.0) ? 1.0 : 0.0;
                }

                vec3 blendHardMix(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blended = vec3(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendHardMix(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn hardMix(base: f32, blend: f32) -> f32
                {
                    return select(0.0, 1.0, base + blend >= 1.0);
                }

                fn blendHardMix(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        hardMix(base.r, blend.r),
                        hardMix(base.g, blend.g),
                        hardMix(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendHardMix(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}C4.extension={name:"hard-mix",type:O.BlendMode};class T4 extends _t{constructor(){super({gl:{functions:`
                vec3 blendLighten(vec3 base, vec3 blend, float opacity)
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLighten(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendLighten(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    return (max(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLighten(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}T4.extension={name:"lighten",type:O.BlendMode};class A4 extends _t{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend)
                {
                    return max(0.0, base + blend - 1.0);
                }

                vec3 blendLinearBurn(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearBurn(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn blendLinearBurn(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearBurn(base.r, blend.r),
                        linearBurn(base.g, blend.g),
                        linearBurn(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendLinearBurn(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}A4.extension={name:"linear-burn",type:O.BlendMode};class P4 extends _t{constructor(){super({gl:{functions:`
                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                vec3 blendLinearDodge(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLinearDodge(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1, base + blend);
                }

                fn blendLinearDodge(base:vec3<f32>, blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearDodge(base.r, blend.r),
                        linearDodge(base.g, blend.g),
                        linearDodge(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearDodge(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}P4.extension={name:"linear-dodge",type:O.BlendMode};class R4 extends _t{constructor(){super({gl:{functions:`
                float linearBurn(float base, float blend) {
                    return max(0.0, base + blend - 1.0);
                }

                float linearDodge(float base, float blend) {
                    return min(1.0, base + blend);
                }

                float linearLight(float base, float blend) {
                    return (blend <= 0.5) ? linearBurn(base,2.0*blend) : linearBurn(base,2.0*(blend-0.5));
                }

                vec3 blendLinearLight(vec3 base, vec3 blend, float opacity) {
                    vec3 blended = vec3(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendLinearLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn linearBurn(base: f32, blend: f32) -> f32
                {
                    return max(0.0, base + blend - 1.0);
                }

                fn linearDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base + blend);
                }

                fn linearLight(base: f32, blend: f32) -> f32
                {
                    return select(linearBurn(base,2.0*(blend-0.5)), linearBurn(base,2.0*blend), blend <= 0.5);
                }

                fn blendLinearLightOpacity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        linearLight(base.r, blend.r),
                        linearLight(base.g, blend.g),
                        linearLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLinearLightOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}R4.extension={name:"linear-light",type:O.BlendMode};class O4 extends _t{constructor(){super({gl:{functions:`
                ${km}

                vec3 blendLuminosity(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendLuminosity = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendLuminosity(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                ${Dm}

                fn blendLuminosity(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendLuminosity: vec3<f32> = setLuminosity(base, getLuminosity(blend));
                    return (blendLuminosity * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendLuminosity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}O4.extension={name:"luminosity",type:O.BlendMode};class B4 extends _t{constructor(){super({gl:{functions:`
                vec3 negation(vec3 base, vec3 blend)
                {
                    return 1.0-abs(1.0-base-blend);
                }

                vec3 blendNegation(vec3 base, vec3 blend, float opacity)
                {
                    return (negation(base, blend) * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendNegation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn blendNegation(base: vec3<f32>, blend: vec3<f32>) -> vec3<f32>
                {
                    return 1.0-abs(1.0-base-blend);
                }

                fn blendNegationOpacity(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    return (blendNegation(base, blend) * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendNegationOpacity(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}B4.extension={name:"negation",type:O.BlendMode};class k4 extends _t{constructor(){super({gl:{functions:`
                float overlay(float base, float blend)
                {
                    return (base < 0.5) ? (2.0*base*blend) : (1.0-2.0*(1.0-base)*(1.0-blend));
                }

                vec3 blendOverlay(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );
   
                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendOverlay(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn overlay(base: f32, blend: f32) -> f32
                {
                    return select((1.0-2.0*(1.0-base)*(1.0-blend)), (2.0*base*blend), base < 0.5);
                }

                fn blendOverlay(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        overlay(base.r, blend.r),
                        overlay(base.g, blend.g),
                        overlay(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendOverlay(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}k4.extension={name:"overlay",type:O.BlendMode};class D4 extends _t{constructor(){super({gl:{functions:`
                float pinLight(float base, float blend)
                {
                    return (blend <= 0.5) ? min(base, 2.0 * blend) : max(base, 2.0 * (blend - 0.5));
                }

                vec3 blendPinLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn pinLight(base: f32, blend: f32) -> f32
                {
                    return select(max(base,2.0*(blend-0.5)), min(base,2.0*blend), blend <= 0.5);
                }

                fn blendPinLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        pinLight(base.r, blend.r),
                        pinLight(base.g, blend.g),
                        pinLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendPinLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}D4.extension={name:"pin-light",type:O.BlendMode};class M4 extends _t{constructor(){super({gl:{functions:`
                ${km}

                vec3 blendSaturation(vec3 base, vec3 blend,  float opacity)
                {
                    vec3 blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                ${Dm}

                fn blendSaturation(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blendSaturation = setLuminosity(setSaturation(base, getSaturation(blend)), getLuminosity(base));
                    return (blendSaturation * opacity + base * (1.0 - opacity));
                }
            `,main:`
                out = vec4<f32>(blendSaturation(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
            `}})}}M4.extension={name:"saturation",type:O.BlendMode};class I4 extends _t{constructor(){super({gl:{functions:`
                float softLight(float base, float blend)
                {
                    return (blend < 0.5) ? (2.0 * base * blend + base * base * (1.0 - 2.0 * blend)) : (sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend));
                }

                vec3 blendSoftLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn softLight(base: f32, blend: f32) -> f32
                {
                    return select(2.0 * base * blend + base * base * (1.0 - 2.0 * blend), sqrt(base) * (2.0 * blend - 1.0) + 2.0 * base * (1.0 - blend), blend < 0.5);
                }

                fn blendSoftLight(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        softLight(base.r, blend.r),
                        softLight(base.g, blend.g),
                        softLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSoftLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}I4.extension={name:"soft-light",type:O.BlendMode};class F4 extends _t{constructor(){super({gl:{functions:`
                float subtract(float base, float blend)
                {
                    return max(0.0, base - blend);
                }

                vec3 blendSubtract(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                finalColor = vec4(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * uBlend;
                `},gpu:{functions:`
                fn subtract(base: f32, blend: f32) -> f32
                {
                    return max(0, base - blend);
                }

                fn blendSubtract(base:vec3<f32>,  blend:vec3<f32>,  opacity:f32) -> vec3<f32>
                {
                    let blended = vec3<f32>(
                        subtract(base.r, blend.r),
                        subtract(base.g, blend.g),
                        subtract(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendSubtract(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}F4.extension={name:"subtract",type:O.BlendMode};class L4 extends _t{constructor(){super({gl:{functions:`
                float colorBurn(float base, float blend)
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                float colorDodge(float base, float blend)
                {
                    return min(1.0, base / (1.0-blend));
                }

                float vividLight(float base, float blend)
                {
                    return (blend < 0.5) ? colorBurn(base,(2.0*blend)) : colorDodge(base,(2.0*(blend-0.5)));
                }

                vec3 blendVividLight(vec3 base, vec3 blend, float opacity)
                {
                    vec3 blended = vec3(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
            `,main:`
                finalColor = vec4(blendVividLight(back.rgb, front.rgb,front.a), blendedAlpha) * uBlend;
            `},gpu:{functions:`
                fn colorBurn(base:f32, blend:f32) -> f32
                {
                    return max((1.0-((1.0-base)/blend)),0.0);
                }

                fn colorDodge(base: f32, blend: f32) -> f32
                {
                    return min(1.0, base / (1.0-blend));
                }

                fn vividLight(base: f32, blend: f32) -> f32
                {
                    return select(colorDodge(base,(2.0*(blend-0.5))), colorBurn(base,(2.0*blend)), blend<0.5);
                }

                fn blendVividLight(base: vec3<f32>, blend: vec3<f32>, opacity: f32) -> vec3<f32>
                {
                    let blended: vec3<f32> = vec3<f32>(
                        vividLight(base.r, blend.r),
                        vividLight(base.g, blend.g),
                        vividLight(base.b, blend.b)
                    );

                    return (blended * opacity + base * (1.0 - opacity));
                }
                `,main:`
                out = vec4<f32>(blendVividLight(back.rgb, front.rgb, front.a), blendedAlpha) * blendUniforms.uBlend;
                `}})}}L4.extension={name:"vivid-light",type:O.BlendMode};const L_=[];me.handleByNamedList(O.Environment,L_);async function r2(t){if(!t)for(let e=0;e<L_.length;e++){const r=L_[e];if(r.value.test()){await r.value.load();return}}}async function WZ(t){return r2(!t)}let Ul;function n2(){if(typeof Ul=="boolean")return Ul;try{Ul=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Ul=!1}return Ul}var i2={exports:{}};i2.exports=Mm;i2.exports.default=Mm;function Mm(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=N4(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,u,l,c,f,d,h;if(n&&(s=ZZ(t,e,s,r)),t.length>80*r){a=l=t[0],u=c=t[1];for(var p=r;p<i;p+=r)f=t[p],d=t[p+1],f<a&&(a=f),d<u&&(u=d),f>l&&(l=f),d>c&&(c=d);h=Math.max(l-a,c-u),h=h!==0?32767/h:0}return of(s,o,r,a,u,h,0),o}function N4(t,e,r,n,i){var s,o;if(i===G_(t,e,r,n)>0)for(s=e;s<r;s+=n)o=GT(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=GT(s,t[s],t[s+1],o);return o&&Im(o,o.next)&&(uf(o),o=o.next),o}function Xo(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(Im(r,r.next)||ct(r.prev,r,r.next)===0)){if(uf(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function of(t,e,r,n,i,s,o){if(t){!o&&s&&rQ(t,n,i,s);for(var a=t,u,l;t.prev!==t.next;){if(u=t.prev,l=t.next,s?qZ(t,n,i,s):XZ(t)){e.push(u.i/r|0),e.push(t.i/r|0),e.push(l.i/r|0),uf(t),t=l.next,a=l.next;continue}if(t=l,t===a){o?o===1?(t=YZ(Xo(t),e,r),of(t,e,r,n,i,s,2)):o===2&&KZ(t,e,r,n,i,s):of(Xo(t),e,r,n,i,s,1);break}}}}function XZ(t){var e=t.prev,r=t,n=t.next;if(ct(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,a=e.y,u=r.y,l=n.y,c=i<s?i<o?i:o:s<o?s:o,f=a<u?a<l?a:l:u<l?u:l,d=i>s?i>o?i:o:s>o?s:o,h=a>u?a>l?a:l:u>l?u:l,p=n.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=f&&p.y<=h&&$a(i,a,s,u,o,l,p.x,p.y)&&ct(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function qZ(t,e,r,n){var i=t.prev,s=t,o=t.next;if(ct(i,s,o)>=0)return!1;for(var a=i.x,u=s.x,l=o.x,c=i.y,f=s.y,d=o.y,h=a<u?a<l?a:l:u<l?u:l,p=c<f?c<d?c:d:f<d?f:d,m=a>u?a>l?a:l:u>l?u:l,g=c>f?c>d?c:d:f>d?f:d,v=N_(h,p,e,r,n),y=N_(m,g,e,r,n),b=t.prevZ,_=t.nextZ;b&&b.z>=v&&_&&_.z<=y;){if(b.x>=h&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&$a(a,c,u,f,l,d,b.x,b.y)&&ct(b.prev,b,b.next)>=0||(b=b.prevZ,_.x>=h&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&$a(a,c,u,f,l,d,_.x,_.y)&&ct(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;b&&b.z>=v;){if(b.x>=h&&b.x<=m&&b.y>=p&&b.y<=g&&b!==i&&b!==o&&$a(a,c,u,f,l,d,b.x,b.y)&&ct(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=y;){if(_.x>=h&&_.x<=m&&_.y>=p&&_.y<=g&&_!==i&&_!==o&&$a(a,c,u,f,l,d,_.x,_.y)&&ct(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function YZ(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!Im(i,s)&&U4(i,n,n.next,s)&&af(i,s)&&af(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),uf(n),uf(n.next),n=t=s),n=n.next}while(n!==t);return Xo(n)}function KZ(t,e,r,n,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&sQ(o,a)){var u=G4(o,a);o=Xo(o,o.next),u=Xo(u,u.next),of(o,e,r,n,i,s,0),of(u,e,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function ZZ(t,e,r,n){var i=[],s,o,a,u,l;for(s=0,o=e.length;s<o;s++)a=e[s]*n,u=s<o-1?e[s+1]*n:t.length,l=N4(t,a,u,n,!1),l===l.next&&(l.steiner=!0),i.push(iQ(l));for(i.sort(QZ),s=0;s<i.length;s++)r=JZ(i[s],r);return r}function QZ(t,e){return t.x-e.x}function JZ(t,e){var r=eQ(t,e);if(!r)return e;var n=G4(r,t);return Xo(n,n.next),Xo(r,r.next)}function eQ(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var u=o,l=o.x,c=o.y,f=1/0,d;r=o;do n>=r.x&&r.x>=l&&n!==r.x&&$a(i<c?n:s,i,l,c,i<c?s:n,i,r.x,r.y)&&(d=Math.abs(i-r.y)/(n-r.x),af(r,t)&&(d<f||d===f&&(r.x>o.x||r.x===o.x&&tQ(o,r)))&&(o=r,f=d)),r=r.next;while(r!==u);return o}function tQ(t,e){return ct(t.prev,t,e.prev)<0&&ct(e.next,t,t.next)<0}function rQ(t,e,r,n){var i=t;do i.z===0&&(i.z=N_(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,nQ(i)}function nQ(t){var e,r,n,i,s,o,a,u,l=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<l&&(a++,n=n.nextZ,!!n);e++);for(u=l;a>0||u>0&&n;)a!==0&&(u===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,u--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,l*=2}while(o>1);return t}function N_(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function iQ(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function $a(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function sQ(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!oQ(t,e)&&(af(t,e)&&af(e,t)&&aQ(t,e)&&(ct(t.prev,t,e.prev)||ct(t,e.prev,e))||Im(t,e)&&ct(t.prev,t,t.next)>0&&ct(e.prev,e,e.next)>0)}function ct(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function Im(t,e){return t.x===e.x&&t.y===e.y}function U4(t,e,r,n){var i=Dd(ct(t,e,r)),s=Dd(ct(t,e,n)),o=Dd(ct(r,n,t)),a=Dd(ct(r,n,e));return!!(i!==s&&o!==a||i===0&&kd(t,r,e)||s===0&&kd(t,n,e)||o===0&&kd(r,t,n)||a===0&&kd(r,e,n))}function kd(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function Dd(t){return t>0?1:t<0?-1:0}function oQ(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&U4(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function af(t,e){return ct(t.prev,t,t.next)<0?ct(t,e,t.next)>=0&&ct(t,t.prev,e)>=0:ct(t,e,t.prev)<0||ct(t,t.next,e)<0}function aQ(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function G4(t,e){var r=new U_(t.i,t.x,t.y),n=new U_(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function GT(t,e,r,n){var i=new U_(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function uf(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function U_(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}Mm.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(G_(t,0,s,r));if(i)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,c=a<u-1?e[a+1]*r:t.length;o-=Math.abs(G_(t,l,c,r))}var f=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,h=n[a+1]*r,p=n[a+2]*r;f+=Math.abs((t[d]-t[p])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[p+1]-t[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function G_(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}Mm.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var uQ=i2.exports;const z4=Zt(uQ);var Nr=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(Nr||{});class s2{constructor(e){this.items=[],this._name=e}emit(e,r,n,i,s,o,a,u){const{name:l,items:c}=this;for(let f=0,d=c.length;f<d;f++)c[f][l](e,r,n,i,s,o,a,u);return this}add(e){return e[this._name]&&(this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&this.items.splice(r,1),this}contains(e){return this.items.indexOf(e)!==-1}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}const lQ=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],$4=class j4 extends Yr{constructor(e){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=e.type,this.name=e.name,this.config=e;const r=[...lQ,...this.config.runners??[]];this._addRunners(...r),this._unsafeEvalCheck()}async init(e={}){const r=e.skipExtensionImports===!0?!0:e.manageImports===!1;await r2(r),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const n in this._systemsHash)e={...this._systemsHash[n].constructor.defaultOptions,...e};e={...j4.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let n=0;n<this.runners.init.items.length;n++)await this.runners.init.items[n].init(e);this._initOptions=e}render(e,r){let n=e;if(n instanceof ar&&(n={container:n},r&&(oe(_e,"passing a second argument is deprecated, please use render options instead"),n.target=r.renderTexture)),n.target||(n.target=this.view.renderTarget),n.target===this.view.renderTarget&&(this._lastObjectRendered=n.container,n.clearColor??(n.clearColor=this.background.colorRgba),n.clear??(n.clear=this.background.clearBeforeRender)),n.clearColor){const i=Array.isArray(n.clearColor)&&n.clearColor.length===4;n.clearColor=i?n.clearColor:Re.shared.setValue(n.clearColor).toArray()}n.transform||(n.container.updateLocalTransform(),n.transform=n.container.localTransform),n.container.enableRenderGroup(),this.runners.prerender.emit(n),this.runners.renderStart.emit(n),this.runners.render.emit(n),this.runners.renderEnd.emit(n),this.runners.postrender.emit(n)}resize(e,r,n){const i=this.view.resolution;this.view.resize(e,r,n),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),n!==void 0&&n!==i&&this.runners.resolutionChange.emit(n)}clear(e={}){const r=this;e.target||(e.target=r.renderTarget.renderTarget),e.clearColor||(e.clearColor=this.background.colorRgba),e.clear??(e.clear=Nr.ALL);const{clear:n,clearColor:i,target:s}=e;Re.shared.setValue(i??this.background.colorRgba),r.renderTarget.clear(s,n,Re.shared.toArray())}get resolution(){return this.view.resolution}set resolution(e){this.view.resolution=e,this.runners.resolutionChange.emit(e)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...e){e.forEach(r=>{this.runners[r]=new s2(r)})}_addSystems(e){let r;for(r in e){const n=e[r];this._addSystem(n.value,n.name)}}_addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}_addPipes(e,r){const n=r.reduce((i,s)=>(i[s.name]=s.value,i),{});e.forEach(i=>{const s=i.value,o=i.name,a=n[o];this.renderPipes[o]=new s(this,a?new a:null)})}destroy(e=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(e),Object.values(this.runners).forEach(r=>{r.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(e){return this.textureGenerator.generateTexture(e)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!n2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};$4.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let $f=$4,Md;function jf(t){return Md!==void 0||(Md=(()=>{var r;const e={stencil:!0,failIfMajorPerformanceCaveat:t??$f.defaultOptions.failIfMajorPerformanceCaveat};try{if(!Ae.get().getWebGLRenderingContext())return!1;let i=Ae.get().createCanvas().getContext("webgl",e);const s=!!((r=i==null?void 0:i.getContextAttributes())!=null&&r.stencil);if(i){const o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch{return!1}})()),Md}let Id;async function Hf(t={}){return Id!==void 0||(Id=await(async()=>{const e=Ae.get().getNavigator().gpu;if(!e)return!1;try{return await(await e.requestAdapter(t)).requestDevice(),!0}catch{return!1}})()),Id}const zT=["webgl","webgpu","canvas"];async function H4(t){let e=[];t.preference?(e.push(t.preference),zT.forEach(s=>{s!==t.preference&&e.push(s)})):e=zT.slice();let r,n={};for(let s=0;s<e.length;s++){const o=e[s];if(o==="webgpu"&&await Hf()){const{WebGPURenderer:a}=await mp(()=>Promise.resolve().then(()=>are),void 0);r=a,n={...t,...t.webgpu};break}else if(o==="webgl"&&jf(t.failIfMajorPerformanceCaveat??$f.defaultOptions.failIfMajorPerformanceCaveat)){const{WebGLRenderer:a}=await mp(()=>Promise.resolve().then(()=>Qte),void 0);r=a,n={...t,...t.webgl};break}else if(o==="canvas")throw n={...t},new Error("CanvasRenderer is not yet implemented")}if(delete n.webgpu,delete n.webgl,!r)throw new Error("No available renderer for the current environment");const i=new r;return await i.init(n),i}const cQ=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,lf="8.9.2";class o2{static init(){var e;(e=globalThis.__PIXI_APP_INIT__)==null||e.call(globalThis,this,lf)}static destroy(){}}o2.extension=O.Application;class a2{constructor(e){this._renderer=e}init(){var e;(e=globalThis.__PIXI_RENDERER_INIT__)==null||e.call(globalThis,this._renderer,lf)}destroy(){this._renderer=null}}a2.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"initHook",priority:-10};const V4=class z_{constructor(...e){this.stage=new ar,e[0]!==void 0&&oe(_e,"Application constructor options are deprecated, please use Application.init() instead.")}async init(e){e={...e},this.renderer=await H4(e),z_._plugins.forEach(r=>{r.init.call(this,e)})}render(){this.renderer.render({container:this.stage})}get canvas(){return this.renderer.canvas}get view(){return oe(_e,"Application.view is deprecated, please use Application.canvas instead."),this.renderer.canvas}get screen(){return this.renderer.screen}destroy(e=!1,r=!1){const n=z_._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(r),this.stage=null,this.renderer.destroy(e),this.renderer=null}};V4._plugins=[];let W4=V4;me.handleByList(O.Application,W4._plugins);me.add(o2);class u2{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this._cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this._cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this._cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this._cancelResize(),this._cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}u2.extension=O.Application;class l2{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,rs.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?nr.shared:new nr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}l2.extension=O.Application;class c2 extends Yr{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return oe(_e,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return oe(_e,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return oe(_e,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return oe(_e,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return oe(_e,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(e=!1){var r;this.emit("destroy",this),this.removeAllListeners();for(const n in this.chars)(r=this.chars[n].texture)==null||r.destroy();this.chars=null,e&&(this.pages.forEach(n=>n.texture.destroy(!0)),this.pages=null)}}const $T=[{offset:0,color:"white"},{offset:1,color:"black"}],f2=class $_{constructor(...e){this.uid=Je("fillGradient"),this.type="linear",this.colorStops=[];let r=fQ(e);r={...r.type==="radial"?$_.defaultRadialOptions:$_.defaultLinearOptions,...Kn(r)},this._textureSize=r.textureSize,this._wrapMode=r.wrapMode,r.type==="radial"?(this.center=r.center,this.outerCenter=r.outerCenter??this.center,this.innerRadius=r.innerRadius,this.outerRadius=r.outerRadius,this.scale=r.scale,this.rotation=r.rotation):(this.start=r.start,this.end=r.end),this.textureSpace=r.textureSpace,this.type=r.type,r.colorStops.forEach(i=>{this.addColorStop(i.offset,i.color)})}addColorStop(e,r){return this.colorStops.push({offset:e,color:Re.shared.setValue(r).toHexa()}),this}buildLinearGradient(){if(this.texture)return;let{x:e,y:r}=this.start,{x:n,y:i}=this.end,s=n-e,o=i-r;const a=s<0||o<0;if(this._wrapMode==="clamp-to-edge"){if(s<0){const g=e;e=n,n=g,s*=-1}if(o<0){const g=r;r=i,i=g,o*=-1}}const u=this.colorStops.length?this.colorStops:$T,l=this._textureSize,{canvas:c,context:f}=HT(l,1),d=a?f.createLinearGradient(this._textureSize,0,0,0):f.createLinearGradient(0,0,this._textureSize,0);jT(d,u),f.fillStyle=d,f.fillRect(0,0,l,1),this.texture=new ne({source:new ts({resource:c,addressMode:this._wrapMode})});const h=Math.sqrt(s*s+o*o),p=Math.atan2(o,s),m=new ce;m.scale(h/l,1),m.rotate(p),m.translate(e,r),this.textureSpace==="local"&&m.scale(l,l),this.transform=m}buildGradient(){this.type==="linear"?this.buildLinearGradient():this.buildRadialGradient()}buildRadialGradient(){if(this.texture)return;const e=this.colorStops.length?this.colorStops:$T,r=this._textureSize,{canvas:n,context:i}=HT(r,r),{x:s,y:o}=this.center,{x:a,y:u}=this.outerCenter,l=this.innerRadius,c=this.outerRadius,f=a-c,d=u-c,h=r/(c*2),p=(s-f)*h,m=(o-d)*h,g=i.createRadialGradient(p,m,l*h,(a-f)*h,(u-d)*h,c*h);jT(g,e),i.fillStyle=e[e.length-1].color,i.fillRect(0,0,r,r),i.fillStyle=g,i.translate(p,m),i.rotate(this.rotation),i.scale(1,this.scale),i.translate(-p,-m),i.fillRect(0,0,r,r),this.texture=new ne({source:new ts({resource:n,addressMode:this._wrapMode})});const v=new ce;v.scale(1/h,1/h),v.translate(f,d),this.textureSpace==="local"&&v.scale(r,r),this.transform=v}get styleKey(){return this.uid}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=null}};f2.defaultLinearOptions={start:{x:0,y:0},end:{x:0,y:1},colorStops:[],textureSpace:"local",type:"linear",textureSize:256,wrapMode:"clamp-to-edge"};f2.defaultRadialOptions={center:{x:.5,y:.5},innerRadius:0,outerRadius:.5,colorStops:[],scale:1,textureSpace:"local",type:"radial",textureSize:256,wrapMode:"clamp-to-edge"};let Bi=f2;function jT(t,e){for(let r=0;r<e.length;r++){const n=e[r];t.addColorStop(n.offset,n.color)}}function HT(t,e){const r=Ae.get().createCanvas(t,e),n=r.getContext("2d");return{canvas:r,context:n}}function fQ(t){let e=t[0]??{};return(typeof e=="number"||t[1])&&(oe("8.5.2","use options object instead"),e={type:"linear",start:{x:t[0],y:t[1]},end:{x:t[2],y:t[3]},textureSpace:t[4],textureSize:t[5]??Bi.defaultLinearOptions.textureSize}),e}const VT={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class Vf{constructor(e,r){this.uid=Je("fillPattern"),this.transform=new ce,this._styleKey=null,this.texture=e,this.transform.scale(1/e.frame.width,1/e.frame.height),r&&(e.source.style.addressModeU=VT[r].addressModeU,e.source.style.addressModeV=VT[r].addressModeV)}setTransform(e){const r=this.texture;this.transform.copyFrom(e),this.transform.invert(),this.transform.scale(1/r.frame.width,1/r.frame.height),this._styleKey=null}get styleKey(){return this._styleKey?this._styleKey:(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`,this._styleKey)}}var dQ=pQ,E0={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},hQ=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function pQ(t){var e=[];return t.replace(hQ,function(r,n,i){var s=n.toLowerCase();for(i=gQ(i),s=="m"&&i.length>2&&(e.push([n].concat(i.splice(0,2))),s="l",n=n=="m"?"l":"L");;){if(i.length==E0[s])return i.unshift(n),e.push(i);if(i.length<E0[s])throw new Error("malformed path data");e.push([n].concat(i.splice(0,E0[s])))}}),e}var mQ=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function gQ(t){var e=t.match(mQ);return e?e.map(Number):[]}const vQ=Zt(dQ);function X4(t,e){const r=vQ(t),n=[];let i=null,s=0,o=0;for(let a=0;a<r.length;a++){const u=r[a],l=u[0],c=u;switch(l){case"M":s=c[1],o=c[2],e.moveTo(s,o);break;case"m":s+=c[1],o+=c[2],e.moveTo(s,o);break;case"H":s=c[1],e.lineTo(s,o);break;case"h":s+=c[1],e.lineTo(s,o);break;case"V":o=c[1],e.lineTo(s,o);break;case"v":o+=c[1],e.lineTo(s,o);break;case"L":s=c[1],o=c[2],e.lineTo(s,o);break;case"l":s+=c[1],o+=c[2],e.lineTo(s,o);break;case"C":s=c[5],o=c[6],e.bezierCurveTo(c[1],c[2],c[3],c[4],s,o);break;case"c":e.bezierCurveTo(s+c[1],o+c[2],s+c[3],o+c[4],s+c[5],o+c[6]),s+=c[5],o+=c[6];break;case"S":s=c[3],o=c[4],e.bezierCurveToShort(c[1],c[2],s,o);break;case"s":e.bezierCurveToShort(s+c[1],o+c[2],s+c[3],o+c[4]),s+=c[3],o+=c[4];break;case"Q":s=c[3],o=c[4],e.quadraticCurveTo(c[1],c[2],s,o);break;case"q":e.quadraticCurveTo(s+c[1],o+c[2],s+c[3],o+c[4]),s+=c[3],o+=c[4];break;case"T":s=c[1],o=c[2],e.quadraticCurveToShort(s,o);break;case"t":s+=c[1],o+=c[2],e.quadraticCurveToShort(s,o);break;case"A":s=c[6],o=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,o);break;case"a":s+=c[6],o+=c[7],e.arcToSvg(c[1],c[2],c[3],c[4],c[5],s,o);break;case"Z":case"z":e.closePath(),n.length>0&&(i=n.pop(),i?(s=i.startX,o=i.startY):(s=0,o=0)),i=null;break;default:he(`Unknown SVG path command: ${l}`)}l!=="Z"&&l!=="z"&&i===null&&(i={startX:s,startY:o},n.push(i))}return e}class Fm{constructor(e=0,r=0,n=0){this.type="circle",this.x=e,this.y=r,this.radius=n}clone(){return new Fm(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}strokeContains(e,r,n,i=.5){if(this.radius===0)return!1;const s=this.x-e,o=this.y-r,a=this.radius,u=(1-i)*n,l=Math.sqrt(s*s+o*o);return l<=a+u&&l>a-(n-u)}getBounds(e){return e||(e=new Ie),e.x=this.x-this.radius,e.y=this.y-this.radius,e.width=this.radius*2,e.height=this.radius*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.radius=e.radius,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Lm{constructor(e=0,r=0,n=0,i=0){this.type="ellipse",this.x=e,this.y=r,this.halfWidth=n,this.halfHeight=i}clone(){return new Lm(this.x,this.y,this.halfWidth,this.halfHeight)}contains(e,r){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let n=(e-this.x)/this.halfWidth,i=(r-this.y)/this.halfHeight;return n*=n,i*=i,n+i<=1}strokeContains(e,r,n,i=.5){const{halfWidth:s,halfHeight:o}=this;if(s<=0||o<=0)return!1;const a=n*(1-i),u=n-a,l=s-u,c=o-u,f=s+a,d=o+a,h=e-this.x,p=r-this.y,m=h*h/(l*l)+p*p/(c*c),g=h*h/(f*f)+p*p/(d*d);return m>1&&g<=1}getBounds(e){return e||(e=new Ie),e.x=this.x-this.halfWidth,e.y=this.y-this.halfHeight,e.width=this.halfWidth*2,e.height=this.halfHeight*2,e}copyFrom(e){return this.x=e.x,this.y=e.y,this.halfWidth=e.halfWidth,this.halfHeight=e.halfHeight,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function Ac(t,e,r,n,i,s){const o=t-r,a=e-n,u=i-r,l=s-n,c=o*u+a*l,f=u*u+l*l;let d=-1;f!==0&&(d=c/f);let h,p;d<0?(h=r,p=n):d>1?(h=i,p=s):(h=r+d*u,p=n+d*l);const m=t-h,g=e-p;return m*m+g*g}let yQ,_Q;class uu{constructor(...e){this.type="polygon";let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.closePath=!0}isClockwise(){let e=0;const r=this.points,n=r.length;for(let i=0;i<n;i+=2){const s=r[i],o=r[i+1],a=r[(i+2)%n],u=r[(i+3)%n];e+=(a-s)*(u+o)}return e<0}containsPolygon(e){const r=this.getBounds(yQ),n=e.getBounds(_Q);if(!r.containsRect(n))return!1;const i=e.points;for(let s=0;s<i.length;s+=2){const o=i[s],a=i[s+1];if(!this.contains(o,a))return!1}return!0}clone(){const e=this.points.slice(),r=new uu(e);return r.closePath=this.closePath,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],u=this.points[s*2+1],l=this.points[o*2],c=this.points[o*2+1];u>r!=c>r&&e<(l-a)*((r-u)/(c-u))+a&&(n=!n)}return n}strokeContains(e,r,n,i=.5){const s=n*n,o=s*(1-i),a=s-o,{points:u}=this,l=u.length-(this.closePath?0:2);for(let c=0;c<l;c+=2){const f=u[c],d=u[c+1],h=u[(c+2)%u.length],p=u[(c+3)%u.length],m=Ac(e,r,f,d,h,p),g=Math.sign((h-f)*(r-d)-(p-d)*(e-f));if(m<=(g<0?a:o))return!0}return!1}getBounds(e){e||(e=new Ie);const r=this.points;let n=1/0,i=-1/0,s=1/0,o=-1/0;for(let a=0,u=r.length;a<u;a+=2){const l=r[a],c=r[a+1];n=l<n?l:n,i=l>i?l:i,s=c<s?c:s,o=c>o?c:o}return e.x=n,e.width=i-n,e.y=s,e.height=o-s,e}copyFrom(e){return this.points=e.points.slice(),this.closePath=e.closePath,this}copyTo(e){return e.copyFrom(this),e}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const Fd=(t,e,r,n,i,s,o)=>{const a=t-r,u=e-n,l=Math.sqrt(a*a+u*u);return l>=i-s&&l<=i+o};class Nm{constructor(e=0,r=0,n=0,i=0,s=20){this.type="roundedRectangle",this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s}getBounds(e){return e||(e=new Ie),e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}clone(){return new Nm(this.x,this.y,this.width,this.height,this.radius)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.copyFrom(this),e}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}strokeContains(e,r,n,i=.5){const{x:s,y:o,width:a,height:u,radius:l}=this,c=n*(1-i),f=n-c,d=s+l,h=o+l,p=a-l*2,m=u-l*2,g=s+a,v=o+u;return(e>=s-c&&e<=s+f||e>=g-f&&e<=g+c)&&r>=h&&r<=h+m||(r>=o-c&&r<=o+f||r>=v-f&&r<=v+c)&&e>=d&&e<=d+p?!0:e<d&&r<h&&Fd(e,r,d,h,l,f,c)||e>g-l&&r<h&&Fd(e,r,g-l,h,l,f,c)||e>g-l&&r>v-l&&Fd(e,r,g-l,v-l,l,f,c)||e<d&&r>v-l&&Fd(e,r,d,v-l,l,f,c)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}const bQ=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function xQ(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function q4(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const n=bQ.replace(/%forloop%/gi,xQ(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}}finally{e.deleteShader(r)}return t}let _a=null;function oa(){var e;if(_a)return _a;const t=e2();return _a=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),_a=q4(_a,t),(e=t.getExtension("WEBGL_lose_context"))==null||e.loseContext(),_a}const Y4={};function Um(t,e){let r=2166136261;for(let n=0;n<e;n++)r^=t[n].uid,r=Math.imul(r,16777619),r>>>=0;return Y4[r]||SQ(t,e,r)}let C0=0;function SQ(t,e,r){const n={};let i=0;C0||(C0=oa());for(let o=0;o<C0;o++){const a=o<e?t[o]:ne.EMPTY.source;n[i++]=a.source,n[i++]=a.style}const s=new Ei(n);return Y4[r]=s,s}class Mo{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}function _p(t,e){const r=t.byteLength/8|0,n=new Float64Array(t,0,r);new Float64Array(e,0,r).set(n);const s=t.byteLength-r*8;if(s>0){const o=new Uint8Array(t,r*8,s);new Uint8Array(e,r*8,s).set(o)}}const K4={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var mt=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(mt||{});function Au(t,e){return e.alphaMode==="no-premultiply-alpha"&&K4[t]||t}class Z4{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let e=0;e<this.count;e++){const r=this.textures[e];this.textures[e]=null,this.ids[r.uid]=null}this.count=0}}class Q4{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new Z4,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const J4=[];let j_=0;function WT(){return j_>0?J4[--j_]:new Q4}function XT(t){J4[j_++]=t}let Gl=0;const eM=class xh{constructor(e={}){this.uid=Je("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],xh.defaultOptions.maxTextures=xh.defaultOptions.maxTextures??oa(),e={...xh.defaultOptions,...e};const{maxTextures:r,attributesInitialSize:n,indicesInitialSize:i}=e;this.attributeBuffer=new Mo(n*4),this.indexBuffer=new Uint16Array(i),this.maxTextures=r}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let e=0;e<this.batchIndex;e++)XT(this.batches[e]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(e){this._elements[this.elementSize++]=e,e._indexStart=this.indexSize,e._attributeStart=this.attributeSize,e._batcher=this,this.indexSize+=e.indexSize,this.attributeSize+=e.attributeSize*this.vertexSize}checkAndUpdateTexture(e,r){const n=e._batch.textures.ids[r._source.uid];return!n&&n!==0?!1:(e._textureId=n,e.texture=r,!0)}updateElement(e){this.dirty=!0;const r=this.attributeBuffer;e.packAsQuad?this.packQuadAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId):this.packAttributes(e,r.float32View,r.uint32View,e._attributeStart,e._textureId)}break(e){const r=this._elements;if(!r[this.elementStart])return;let n=WT(),i=n.textures;i.clear();const s=r[this.elementStart];let o=Au(s.blendMode,s.texture._source),a=s.topology;this.attributeSize*4>this.attributeBuffer.size&&this._resizeAttributeBuffer(this.attributeSize*4),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const u=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,c=this.indexBuffer;let f=this._batchIndexSize,d=this._batchIndexStart,h="startBatch";const p=this.maxTextures;for(let m=this.elementStart;m<this.elementSize;++m){const g=r[m];r[m]=null;const y=g.texture._source,b=Au(g.blendMode,y),_=o!==b||a!==g.topology;if(y._batchTick===Gl&&!_){g._textureId=y._textureBindLocation,f+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,u,l,g._attributeStart,g._textureId),this.packQuadIndex(c,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,u,l,g._attributeStart,g._textureId),this.packIndex(g,c,g._indexStart,g._attributeStart/this.vertexSize)),g._batch=n;continue}y._batchTick=Gl,(i.count>=p||_)&&(this._finishBatch(n,d,f-d,i,o,a,e,h),h="renderBatch",d=f,o=b,a=g.topology,n=WT(),i=n.textures,i.clear(),++Gl),g._textureId=y._textureBindLocation=i.count,i.ids[y.uid]=i.count,i.textures[i.count++]=y,g._batch=n,f+=g.indexSize,g.packAsQuad?(this.packQuadAttributes(g,u,l,g._attributeStart,g._textureId),this.packQuadIndex(c,g._indexStart,g._attributeStart/this.vertexSize)):(this.packAttributes(g,u,l,g._attributeStart,g._textureId),this.packIndex(g,c,g._indexStart,g._attributeStart/this.vertexSize))}i.count>0&&(this._finishBatch(n,d,f-d,i,o,a,e,h),d=f,++Gl),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=f}_finishBatch(e,r,n,i,s,o,a,u){e.gpuBindGroup=null,e.bindGroup=null,e.action=u,e.batcher=this,e.textures=i,e.blendMode=s,e.topology=o,e.start=r,e.size=n,++Gl,this.batches[this.batchIndex++]=e,a.add(e)}finish(e){this.break(e)}ensureAttributeBuffer(e){e*4<=this.attributeBuffer.size||this._resizeAttributeBuffer(e*4)}ensureIndexBuffer(e){e<=this.indexBuffer.length||this._resizeIndexBuffer(e)}_resizeAttributeBuffer(e){const r=Math.max(e,this.attributeBuffer.size*2),n=new Mo(r);_p(this.attributeBuffer.rawBinaryData,n.rawBinaryData),this.attributeBuffer=n}_resizeIndexBuffer(e){const r=this.indexBuffer;let n=Math.max(e,r.length*1.5);n+=n%2;const i=n>65535?new Uint32Array(n):new Uint16Array(n);if(i.BYTES_PER_ELEMENT!==r.BYTES_PER_ELEMENT)for(let s=0;s<r.length;s++)i[s]=r[s];else _p(r.buffer,i.buffer);this.indexBuffer=i}packQuadIndex(e,r,n){e[r]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3}packIndex(e,r,n,i){const s=e.indices,o=e.indexSize,a=e.indexOffset,u=e.attributeOffset;for(let l=0;l<o;l++)r[n++]=i+s[l+a]-u}destroy(){for(let e=0;e<this.batches.length;e++)XT(this.batches[e]);this.batches=null;for(let e=0;e<this._elements.length;e++)this._elements[e]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};eM.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let tM=eM;var Ce=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(Ce||{});let Tr=class extends Yr{constructor(e){let{data:r,size:n}=e;const{usage:i,label:s,shrinkToFit:o}=e;super(),this.uid=Je("buffer"),this._resourceType="buffer",this._resourceId=Je("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,r instanceof Array&&(r=new Float32Array(r)),this._data=r,n??(n=r==null?void 0:r.byteLength);const a=!!r;this.descriptor={size:n,usage:i,mappedAtCreation:a,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(e){this.setDataWithSize(e,e.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&Ce.STATIC)}set static(e){e?this.descriptor.usage|=Ce.STATIC:this.descriptor.usage&=~Ce.STATIC}setDataWithSize(e,r,n){if(this._updateID++,this._updateSize=r*e.BYTES_PER_ELEMENT,this._data===e){n&&this.emit("update",this);return}const i=this._data;if(this._data=e,this._dataInt32=null,!i||i.length!==e.length){!this.shrinkToFit&&i&&e.byteLength<i.byteLength?n&&this.emit("update",this):(this.descriptor.size=e.byteLength,this._resourceId=Je("resource"),this.emit("change",this));return}n&&this.emit("update",this)}update(e){this._updateSize=e??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}};function d2(t,e){if(!(t instanceof Tr)){let r=e?Ce.INDEX:Ce.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),r=Ce.INDEX|Ce.COPY_DST):(t=new Float32Array(t),r=Ce.VERTEX|Ce.COPY_DST)),t=new Tr({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:r})}return t}function rM(t,e,r){const n=t.getAttribute(e);if(!n)return r.minX=0,r.minY=0,r.maxX=0,r.maxY=0,r;const i=n.buffer.data;let s=1/0,o=1/0,a=-1/0,u=-1/0;const l=i.BYTES_PER_ELEMENT,c=(n.offset||0)/l,f=(n.stride||2*4)/l;for(let d=c;d<i.length;d+=f){const h=i[d],p=i[d+1];h>a&&(a=h),p>u&&(u=p),h<s&&(s=h),p<o&&(o=p)}return r.minX=s,r.minY=o,r.maxX=a,r.maxY=u,r}function wQ(t){return(t instanceof Tr||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=d2(t.buffer,!1),t}class aa extends Yr{constructor(e={}){super(),this.uid=Je("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new Ut,this._boundsDirty=!0;const{attributes:r,indexBuffer:n,topology:i}=e;if(this.buffers=[],this.attributes={},r)for(const s in r)this.addAttribute(s,r[s]);this.instanceCount=e.instanceCount??1,n&&this.addIndex(n),this.topology=i||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(e){return this.attributes[e]}getIndex(){return this.indexBuffer}getBuffer(e){return this.getAttribute(e).buffer}getSize(){for(const e in this.attributes){const r=this.attributes[e];return r.buffer.data.length/(r.stride/4||r.size)}return 0}addAttribute(e,r){const n=wQ(r);this.buffers.indexOf(n.buffer)===-1&&(this.buffers.push(n.buffer),n.buffer.on("update",this.onBufferUpdate,this),n.buffer.on("change",this.onBufferUpdate,this)),this.attributes[e]=n}addIndex(e){this.indexBuffer=d2(e,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,rM(this,"aPosition",this._bounds)):this._bounds}destroy(e=!1){this.emit("destroy",this),this.removeAllListeners(),e&&this.buffers.forEach(r=>r.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}const EQ=new Float32Array(1),CQ=new Uint32Array(1);class nM extends aa{constructor(){const r=new Tr({data:EQ,label:"attribute-batch-buffer",usage:Ce.VERTEX|Ce.COPY_DST,shrinkToFit:!1}),n=new Tr({data:CQ,label:"index-batch-buffer",usage:Ce.INDEX|Ce.COPY_DST,shrinkToFit:!1}),i=6*4;super({attributes:{aPosition:{buffer:r,format:"float32x2",stride:i,offset:0},aUV:{buffer:r,format:"float32x2",stride:i,offset:2*4},aColor:{buffer:r,format:"unorm8x4",stride:i,offset:4*4},aTextureIdAndRound:{buffer:r,format:"uint16x2",stride:i,offset:5*4}},indexBuffer:n})}}function H_(t,e,r){if(t)for(const n in t){const i=n.toLocaleLowerCase(),s=e[i];if(s){let o=t[n];n==="header"&&(o=o.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),r&&s.push(`//----${r}----//`),s.push(o)}else he(`${n} placement hook does not exist in shader`)}}const iM=/\{\{(.*?)\}\}/g;function V_(t){var n;const e={};return(((n=t.match(iM))==null?void 0:n.map(i=>i.replace(/[{()}]/g,"")))??[]).forEach(i=>{e[i]=[]}),e}function qT(t,e){let r;const n=/@in\s+([^;]+);/g;for(;(r=n.exec(t))!==null;)e.push(r[1])}function W_(t,e,r=!1){const n=[];qT(e,n),t.forEach(a=>{a.header&&qT(a.header,n)});const i=n;r&&i.sort();const s=i.map((a,u)=>`       @location(${u}) ${a},`).join(`
`);let o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`
${s}
`),o}function YT(t,e){let r;const n=/@out\s+([^;]+);/g;for(;(r=n.exec(t))!==null;)e.push(r[1])}function TQ(t){const r=/\b(\w+)\s*:/g.exec(t);return r?r[1]:""}function AQ(t){const e=/@.*?\s+/g;return t.replace(e,"")}function sM(t,e){const r=[];YT(e,r),t.forEach(u=>{u.header&&YT(u.header,r)});let n=0;const i=r.sort().map(u=>u.indexOf("builtin")>-1?u:`@location(${n++}) ${u}`).join(`,
`),s=r.sort().map(u=>`       var ${AQ(u)};`).join(`
`),o=`return VSOutput(
            ${r.sort().map(u=>` ${TQ(u)}`).join(`,
`)});`;let a=e.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`
${i}
`),a=a.replace("{{start}}",`
${s}
`),a=a.replace("{{return}}",`
${o}
`),a}function X_(t,e){let r=t;for(const n in e){const i=e[n];i.join(`
`).length?r=r.replace(`{{${n}}}`,`//-----${n} START-----//
${i.join(`
`)}
//----${n} FINISH----//`):r=r.replace(`{{${n}}}`,"")}return r}const Rs=Object.create(null),T0=new Map;let PQ=0;function oM({template:t,bits:e}){const r=uM(t,e);if(Rs[r])return Rs[r];const{vertex:n,fragment:i}=RQ(t,e);return Rs[r]=lM(n,i,e),Rs[r]}function aM({template:t,bits:e}){const r=uM(t,e);return Rs[r]||(Rs[r]=lM(t.vertex,t.fragment,e)),Rs[r]}function RQ(t,e){const r=e.map(o=>o.vertex).filter(o=>!!o),n=e.map(o=>o.fragment).filter(o=>!!o);let i=W_(r,t.vertex,!0);i=sM(r,i);const s=W_(n,t.fragment,!0);return{vertex:i,fragment:s}}function uM(t,e){return e.map(r=>(T0.has(r)||T0.set(r,PQ++),T0.get(r))).sort((r,n)=>r-n).join("-")+t.vertex+t.fragment}function lM(t,e,r){const n=V_(t),i=V_(e);return r.forEach(s=>{H_(s.vertex,n,s.name),H_(s.fragment,i,s.name)}),{vertex:X_(t,n),fragment:X_(e,i)}}const cM=`
    @in aPosition: vec2<f32>;
    @in aUV: vec2<f32>;

    @out @builtin(position) vPosition: vec4<f32>;
    @out vUV : vec2<f32>;
    @out vColor : vec4<f32>;

    {{header}}

    struct VSOutput {
        {{struct}}
    };

    @vertex
    fn main( {{in}} ) -> VSOutput {

        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;
        var modelMatrix = mat3x3<f32>(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        var position = aPosition;
        var uv = aUV;

        {{start}}
        
        vColor = vec4<f32>(1., 1., 1., 1.);

        {{main}}

        vUV = uv;

        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;

        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);
       
        vColor *= globalUniforms.uWorldColorAlpha;

        {{end}}

        {{return}}
    };
`,fM=`
    @in vUV : vec2<f32>;
    @in vColor : vec4<f32>;
   
    {{header}}

    @fragment
    fn main(
        {{in}}
      ) -> @location(0) vec4<f32> {
        
        {{start}}

        var outColor:vec4<f32>;
      
        {{main}}
        
        var finalColor:vec4<f32> = outColor * vColor;

        {{end}}

        return finalColor;
      };
`,dM=`
    in vec2 aPosition;
    in vec2 aUV;

    out vec4 vColor;
    out vec2 vUV;

    {{header}}

    void main(void){

        mat3 worldTransformMatrix = uWorldTransformMatrix;
        mat3 modelMatrix = mat3(
            1.0, 0.0, 0.0,
            0.0, 1.0, 0.0,
            0.0, 0.0, 1.0
          );
        vec2 position = aPosition;
        vec2 uv = aUV;
        
        {{start}}
        
        vColor = vec4(1.);
        
        {{main}}
        
        vUV = uv;
        
        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;

        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);

        vColor *= uWorldColorAlpha;

        {{end}}
    }
`,hM=`
   
    in vec4 vColor;
    in vec2 vUV;

    out vec4 finalColor;

    {{header}}

    void main(void) {
        
        {{start}}

        vec4 outColor;
      
        {{main}}
        
        finalColor = outColor * vColor;
        
        {{end}}
    }
`,pM={name:"global-uniforms-bit",vertex:{header:`
        struct GlobalUniforms {
            uProjectionMatrix:mat3x3<f32>,
            uWorldTransformMatrix:mat3x3<f32>,
            uWorldColorAlpha: vec4<f32>,
            uResolution: vec2<f32>,
        }

        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;
        `}},OQ={name:"global-uniforms-ubo-bit",vertex:{header:`
          uniform globalUniforms {
            mat3 uProjectionMatrix;
            mat3 uWorldTransformMatrix;
            vec4 uWorldColorAlpha;
            vec2 uResolution;
          };
        `}},mM={name:"global-uniforms-bit",vertex:{header:`
          uniform mat3 uProjectionMatrix;
          uniform mat3 uWorldTransformMatrix;
          uniform vec4 uWorldColorAlpha;
          uniform vec2 uResolution;
        `}};function ol({bits:t,name:e}){const r=oM({template:{fragment:fM,vertex:cM},bits:[pM,...t]});return qe.from({name:e,vertex:{source:r.vertex,entryPoint:"main"},fragment:{source:r.fragment,entryPoint:"main"}})}function al({bits:t,name:e}){return new et({name:e,...aM({template:{vertex:dM,fragment:hM},bits:[mM,...t]})})}const Gm={name:"color-bit",vertex:{header:`
            @in aColor: vec4<f32>;
        `,main:`
            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);
        `}},zm={name:"color-bit",vertex:{header:`
            in vec4 aColor;
        `,main:`
            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);
        `}},A0={};function BQ(t){const e=[];if(t===1)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let r=0;for(let n=0;n<t;n++)e.push(`@group(1) @binding(${r++}) var textureSource${n+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${r++}) var textureSampler${n+1}: sampler;`)}return e.join(`
`)}function kQ(t){const e=[];if(t===1)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let r=0;r<t;r++)r===t-1?e.push("  default:{"):e.push(`  case ${r}:{`),e.push(`      outColor = textureSampleGrad(textureSource${r+1}, textureSampler${r+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join(`
`)}function $m(t){return A0[t]||(A0[t]={name:"texture-batch-bit",vertex:{header:`
                @in aTextureIdAndRound: vec2<u32>;
                @out @interpolate(flat) vTextureId : u32;
            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1)
                {
                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
                }
            `},fragment:{header:`
                @in @interpolate(flat) vTextureId: u32;

                ${BQ(t)}
            `,main:`
                var uvDx = dpdx(vUV);
                var uvDy = dpdy(vUV);

                ${kQ(t)}
            `}}),A0[t]}const P0={};function DQ(t){const e=[];for(let r=0;r<t;r++)r>0&&e.push("else"),r<t-1&&e.push(`if(vTextureId < ${r}.5)`),e.push("{"),e.push(`	outColor = texture(uTextures[${r}], vUV);`),e.push("}");return e.join(`
`)}function jm(t){return P0[t]||(P0[t]={name:"texture-batch-bit",vertex:{header:`
                in vec2 aTextureIdAndRound;
                out float vTextureId;

            `,main:`
                vTextureId = aTextureIdAndRound.y;
            `,end:`
                if(aTextureIdAndRound.x == 1.)
                {
                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
                }
            `},fragment:{header:`
                in float vTextureId;

                uniform sampler2D uTextures[${t}];

            `,main:`

                ${DQ(t)}
            `}}),P0[t]}const ul={name:"round-pixels-bit",vertex:{header:`
            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> 
            {
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},ll={name:"round-pixels-bit",vertex:{header:`   
            vec2 roundPixels(vec2 position, vec2 targetSize)
            {       
                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
            }
        `}},KT={};function Hm(t){let e=KT[t];if(e)return e;const r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=n;return e=KT[t]=new Pt({uTextures:{value:r,type:"i32",size:t}},{isStatic:!0}),e}class gM extends bn{constructor(e){const r=al({name:"batch",bits:[zm,jm(e),ll]}),n=ol({name:"batch",bits:[Gm,$m(e),ul]});super({glProgram:r,gpuProgram:n,resources:{batchSamplers:Hm(e)}})}}let ZT=null;const vM=class yM extends tM{constructor(){super(...arguments),this.geometry=new nM,this.shader=ZT||(ZT=new gM(this.maxTextures)),this.name=yM.extension.name,this.vertexSize=6}packAttributes(e,r,n,i,s){const o=s<<16|e.roundPixels&65535,a=e.transform,u=a.a,l=a.b,c=a.c,f=a.d,d=a.tx,h=a.ty,{positions:p,uvs:m}=e,g=e.color,v=e.attributeOffset,y=v+e.attributeSize;for(let b=v;b<y;b++){const _=b*2,x=p[_],S=p[_+1];r[i++]=u*x+c*S+d,r[i++]=f*S+l*x+h,r[i++]=m[_],r[i++]=m[_+1],n[i++]=g,n[i++]=o}}packQuadAttributes(e,r,n,i,s){const o=e.texture,a=e.transform,u=a.a,l=a.b,c=a.c,f=a.d,d=a.tx,h=a.ty,p=e.bounds,m=p.maxX,g=p.minX,v=p.maxY,y=p.minY,b=o.uvs,_=e.color,x=s<<16|e.roundPixels&65535;r[i+0]=u*g+c*y+d,r[i+1]=f*y+l*g+h,r[i+2]=b.x0,r[i+3]=b.y0,n[i+4]=_,n[i+5]=x,r[i+6]=u*m+c*y+d,r[i+7]=f*y+l*m+h,r[i+8]=b.x1,r[i+9]=b.y1,n[i+10]=_,n[i+11]=x,r[i+12]=u*m+c*v+d,r[i+13]=f*v+l*m+h,r[i+14]=b.x2,r[i+15]=b.y2,n[i+16]=_,n[i+17]=x,r[i+18]=u*g+c*v+d,r[i+19]=f*v+l*g+h,r[i+20]=b.x3,r[i+21]=b.y3,n[i+22]=_,n[i+23]=x}};vM.extension={type:[O.Batcher],name:"default"};let Vm=vM;function h2(t,e,r,n,i,s,o,a=null){let u=0;r*=e,i*=s;const l=a.a,c=a.b,f=a.c,d=a.d,h=a.tx,p=a.ty;for(;u<o;){const m=t[r],g=t[r+1];n[i]=l*m+f*g+h,n[i+1]=c*m+d*g+p,i+=s,r+=e,u++}}function p2(t,e,r,n){let i=0;for(e*=r;i<n;)t[e]=0,t[e+1]=0,e+=r,i++}function Wm(t,e,r,n,i){const s=e.a,o=e.b,a=e.c,u=e.d,l=e.tx,c=e.ty;r||(r=0),n||(n=2),i||(i=t.length/n-r);let f=r*n;for(let d=0;d<i;d++){const h=t[f],p=t[f+1];t[f]=s*h+a*p+l,t[f+1]=o*h+u*p+c,f+=n}}const MQ=new ce;class Xm{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const e=this.baseColor,r=e>>16|e&65280|(e&255)<<16,n=this.renderable;return n?H1(r,n.groupColor)+(this.alpha*n.groupAlpha*255<<24):r+(this.alpha*255<<24)}get transform(){var e;return((e=this.renderable)==null?void 0:e.groupTransform)||MQ}copyTo(e){e.indexOffset=this.indexOffset,e.indexSize=this.indexSize,e.attributeOffset=this.attributeOffset,e.attributeSize=this.attributeSize,e.baseColor=this.baseColor,e.alpha=this.alpha,e.texture=this.texture,e.geometryData=this.geometryData,e.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}const Ki={extension:{type:O.ShapeBuilder,name:"circle"},build(t,e){let r,n,i,s,o,a;if(t.type==="circle"){const _=t;r=_.x,n=_.y,o=a=_.radius,i=s=0}else if(t.type==="ellipse"){const _=t;r=_.x,n=_.y,o=_.halfWidth,a=_.halfHeight,i=s=0}else{const _=t,x=_.width/2,S=_.height/2;r=_.x+x,n=_.y+S,o=a=Math.max(0,Math.min(_.radius,Math.min(x,S))),i=x-o,s=S-a}if(!(o>=0&&a>=0&&i>=0&&s>=0))return e;const u=Math.ceil(2.3*Math.sqrt(o+a)),l=u*8+(i?4:0)+(s?4:0);if(l===0)return e;if(u===0)return e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s,e;let c=0,f=u*4+(i?2:0)+2,d=f,h=l,p=i+o,m=s,g=r+p,v=r-p,y=n+m;if(e[c++]=g,e[c++]=y,e[--f]=y,e[--f]=v,s){const _=n-m;e[d++]=v,e[d++]=_,e[--h]=_,e[--h]=g}for(let _=1;_<u;_++){const x=Math.PI/2*(_/u),S=i+Math.cos(x)*o,w=s+Math.sin(x)*a,P=r+S,C=r-S,R=n+w,F=n-w;e[c++]=P,e[c++]=R,e[--f]=R,e[--f]=C,e[d++]=C,e[d++]=F,e[--h]=F,e[--h]=P}p=i,m=s+a,g=r+p,v=r-p,y=n+m;const b=n-m;return e[c++]=g,e[c++]=y,e[--h]=b,e[--h]=g,i&&(e[c++]=v,e[c++]=y,e[--h]=b,e[--h]=v),e},triangulate(t,e,r,n,i,s){if(t.length===0)return;let o=0,a=0;for(let c=0;c<t.length;c+=2)o+=t[c],a+=t[c+1];o/=t.length/2,a/=t.length/2;let u=n;e[u*r]=o,e[u*r+1]=a;const l=u++;for(let c=0;c<t.length;c+=2)e[u*r]=t[c],e[u*r+1]=t[c+1],c>0&&(i[s++]=u,i[s++]=l,i[s++]=u-1),u++;i[s++]=l+1,i[s++]=l,i[s++]=u-1}},_M={...Ki,extension:{...Ki.extension,name:"ellipse"}},bM={...Ki,extension:{...Ki.extension,name:"roundedRectangle"}},m2=1e-4,q_=1e-4;function xM(t){const e=t.length;if(e<6)return 1;let r=0;for(let n=0,i=t[e-2],s=t[e-1];n<e;n+=2){const o=t[n],a=t[n+1];r+=(o-i)*(a+s),i=o,s=a}return r<0?-1:1}function QT(t,e,r,n,i,s,o,a){const u=t-r*i,l=e-n*i,c=t+r*s,f=e+n*s;let d,h;o?(d=n,h=-r):(d=-n,h=r);const p=u+d,m=l+h,g=c+d,v=f+h;return a.push(p,m),a.push(g,v),2}function yo(t,e,r,n,i,s,o,a){const u=r-t,l=n-e;let c=Math.atan2(u,l),f=Math.atan2(i-t,s-e);a&&c<f?c+=Math.PI*2:!a&&c>f&&(f+=Math.PI*2);let d=c;const h=f-c,p=Math.abs(h),m=Math.sqrt(u*u+l*l),g=(15*p*Math.sqrt(m)/Math.PI>>0)+1,v=h/g;if(d+=v,a){o.push(t,e),o.push(r,n);for(let y=1,b=d;y<g;y++,b+=v)o.push(t,e),o.push(t+Math.sin(b)*m,e+Math.cos(b)*m);o.push(t,e),o.push(i,s)}else{o.push(r,n),o.push(t,e);for(let y=1,b=d;y<g;y++,b+=v)o.push(t+Math.sin(b)*m,e+Math.cos(b)*m),o.push(t,e);o.push(i,s),o.push(t,e)}return g*2}function SM(t,e,r,n,i,s){const o=m2;if(t.length===0)return;const a=e;let u=a.alignment;if(e.alignment!==.5){let ae=xM(t);r&&(ae*=-1),u=(u-.5)*ae+.5}const l=new Le(t[0],t[1]),c=new Le(t[t.length-2],t[t.length-1]),f=n,d=Math.abs(l.x-c.x)<o&&Math.abs(l.y-c.y)<o;if(f){t=t.slice(),d&&(t.pop(),t.pop(),c.set(t[t.length-2],t[t.length-1]));const ae=(l.x+c.x)*.5,we=(c.y+l.y)*.5;t.unshift(ae,we),t.push(ae,we)}const h=i,p=t.length/2;let m=t.length;const g=h.length/2,v=a.width/2,y=v*v,b=a.miterLimit*a.miterLimit;let _=t[0],x=t[1],S=t[2],w=t[3],P=0,C=0,R=-(x-w),F=_-S,N=0,G=0,j=Math.sqrt(R*R+F*F);R/=j,F/=j,R*=v,F*=v;const re=u,U=(1-re)*2,z=re*2;f||(a.cap==="round"?m+=yo(_-R*(U-z)*.5,x-F*(U-z)*.5,_-R*U,x-F*U,_+R*z,x+F*z,h,!0)+2:a.cap==="square"&&(m+=QT(_,x,R,F,U,z,!0,h))),h.push(_-R*U,x-F*U),h.push(_+R*z,x+F*z);for(let ae=1;ae<p-1;++ae){_=t[(ae-1)*2],x=t[(ae-1)*2+1],S=t[ae*2],w=t[ae*2+1],P=t[(ae+1)*2],C=t[(ae+1)*2+1],R=-(x-w),F=_-S,j=Math.sqrt(R*R+F*F),R/=j,F/=j,R*=v,F*=v,N=-(w-C),G=S-P,j=Math.sqrt(N*N+G*G),N/=j,G/=j,N*=v,G*=v;const we=S-_,V=x-w,q=S-P,ie=C-w,ge=we*q+V*ie,be=V*q-ie*we,ot=be<0;if(Math.abs(be)<.001*Math.abs(ge)){h.push(S-R*U,w-F*U),h.push(S+R*z,w+F*z),ge>=0&&(a.join==="round"?m+=yo(S,w,S-R*U,w-F*U,S-N*U,w-G*U,h,!1)+4:m+=2,h.push(S-N*z,w-G*z),h.push(S+N*U,w+G*U));continue}const bt=(-R+_)*(-F+w)-(-R+S)*(-F+x),zt=(-N+P)*(-G+w)-(-N+S)*(-G+C),xt=(we*zt-q*bt)/be,Qr=(ie*bt-V*zt)/be,_r=(xt-S)*(xt-S)+(Qr-w)*(Qr-w),br=S+(xt-S)*U,Br=w+(Qr-w)*U,xr=S-(xt-S)*z,It=w-(Qr-w)*z,vl=Math.min(we*we+V*V,q*q+ie*ie),vo=ot?U:z,ms=vl+vo*vo*y;_r<=ms?a.join==="bevel"||_r/y>b?(ot?(h.push(br,Br),h.push(S+R*z,w+F*z),h.push(br,Br),h.push(S+N*z,w+G*z)):(h.push(S-R*U,w-F*U),h.push(xr,It),h.push(S-N*U,w-G*U),h.push(xr,It)),m+=2):a.join==="round"?ot?(h.push(br,Br),h.push(S+R*z,w+F*z),m+=yo(S,w,S+R*z,w+F*z,S+N*z,w+G*z,h,!0)+4,h.push(br,Br),h.push(S+N*z,w+G*z)):(h.push(S-R*U,w-F*U),h.push(xr,It),m+=yo(S,w,S-R*U,w-F*U,S-N*U,w-G*U,h,!1)+4,h.push(S-N*U,w-G*U),h.push(xr,It)):(h.push(br,Br),h.push(xr,It)):(h.push(S-R*U,w-F*U),h.push(S+R*z,w+F*z),a.join==="round"?ot?m+=yo(S,w,S+R*z,w+F*z,S+N*z,w+G*z,h,!0)+2:m+=yo(S,w,S-R*U,w-F*U,S-N*U,w-G*U,h,!1)+2:a.join==="miter"&&_r/y<=b&&(ot?(h.push(xr,It),h.push(xr,It)):(h.push(br,Br),h.push(br,Br)),m+=2),h.push(S-N*U,w-G*U),h.push(S+N*z,w+G*z),m+=2)}_=t[(p-2)*2],x=t[(p-2)*2+1],S=t[(p-1)*2],w=t[(p-1)*2+1],R=-(x-w),F=_-S,j=Math.sqrt(R*R+F*F),R/=j,F/=j,R*=v,F*=v,h.push(S-R*U,w-F*U),h.push(S+R*z,w+F*z),f||(a.cap==="round"?m+=yo(S-R*(U-z)*.5,w-F*(U-z)*.5,S-R*U,w-F*U,S+R*z,w+F*z,h,!1)+2:a.cap==="square"&&(m+=QT(S,w,R,F,U,z,!1,h)));const pe=q_*q_;for(let ae=g;ae<m+g-2;++ae)_=h[ae*2],x=h[ae*2+1],S=h[(ae+1)*2],w=h[(ae+1)*2+1],P=h[(ae+2)*2],C=h[(ae+2)*2+1],!(Math.abs(_*(w-C)+S*(C-x)+P*(x-w))<pe)&&s.push(ae,ae+1,ae+2)}function wM(t,e,r,n){const i=m2;if(t.length===0)return;const s=t[0],o=t[1],a=t[t.length-2],u=t[t.length-1],l=e||Math.abs(s-a)<i&&Math.abs(o-u)<i,c=r,f=t.length/2,d=c.length/2;for(let h=0;h<f;h++)c.push(t[h*2]),c.push(t[h*2+1]);for(let h=0;h<f-1;h++)n.push(d+h,d+h+1);l&&n.push(d+f-1,d)}function g2(t,e,r,n,i,s,o){const a=z4(t,e,2);if(!a)return;for(let l=0;l<a.length;l+=3)s[o++]=a[l]+i,s[o++]=a[l+1]+i,s[o++]=a[l+2]+i;let u=i*n;for(let l=0;l<t.length;l+=2)r[u]=t[l],r[u+1]=t[l+1],u+=n}const IQ=[],v2={extension:{type:O.ShapeBuilder,name:"polygon"},build(t,e){for(let r=0;r<t.points.length;r++)e[r]=t.points[r];return e},triangulate(t,e,r,n,i,s){g2(t,IQ,e,r,n,i,s)}},y2={extension:{type:O.ShapeBuilder,name:"rectangle"},build(t,e){const r=t,n=r.x,i=r.y,s=r.width,o=r.height;return s>=0&&o>=0&&(e[0]=n,e[1]=i,e[2]=n+s,e[3]=i,e[4]=n+s,e[5]=i+o,e[6]=n,e[7]=i+o),e},triangulate(t,e,r,n,i,s){let o=0;n*=r,e[n+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[6],e[n+o+1]=t[7],o+=r,e[n+o]=t[4],e[n+o+1]=t[5],o+=r;const a=n/r;i[s++]=a,i[s++]=a+1,i[s++]=a+2,i[s++]=a+1,i[s++]=a+3,i[s++]=a+2}},_2={extension:{type:O.ShapeBuilder,name:"triangle"},build(t,e){return e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e},triangulate(t,e,r,n,i,s){let o=0;n*=r,e[n+o]=t[0],e[n+o+1]=t[1],o+=r,e[n+o]=t[2],e[n+o+1]=t[3],o+=r,e[n+o]=t[4],e[n+o+1]=t[5];const a=n/r;i[s++]=a,i[s++]=a+1,i[s++]=a+2}},FQ=new ce,LQ=new Ie;function EM(t,e,r,n){const i=e.matrix?t.copyFrom(e.matrix).invert():t.identity();if(e.textureSpace==="local"){const o=r.getBounds(LQ);e.width&&o.pad(e.width);const{x:a,y:u}=o,l=1/o.width,c=1/o.height,f=-a*l,d=-u*c,h=i.a,p=i.b,m=i.c,g=i.d;i.a*=l,i.b*=l,i.c*=c,i.d*=c,i.tx=f*h+d*m+i.tx,i.ty=f*p+d*g+i.ty}else i.translate(e.texture.frame.x,e.texture.frame.y),i.scale(1/e.texture.source.width,1/e.texture.source.height);const s=e.texture.source.style;return!(e.fill instanceof Bi)&&s.addressMode==="clamp-to-edge"&&(s.addressMode="repeat",s.update()),n&&i.append(FQ.copyFrom(n).invert()),i}const Wf={};me.handleByMap(O.ShapeBuilder,Wf);me.add(y2,v2,_2,Ki,_M,bM);const NQ=new Ie,UQ=new ce;function CM(t,e){const{geometryData:r,batches:n}=e;n.length=0,r.indices.length=0,r.vertices.length=0,r.uvs.length=0;for(let i=0;i<t.instructions.length;i++){const s=t.instructions[i];if(s.action==="texture")GQ(s.data,n,r);else if(s.action==="fill"||s.action==="stroke"){const o=s.action==="stroke",a=s.data.path.shapePath,u=s.data.style,l=s.data.hole;o&&l&&JT(l.shapePath,u,!0,n,r),l&&(a.shapePrimitives[a.shapePrimitives.length-1].holes=l.shapePath.shapePrimitives),JT(a,u,o,n,r)}}}function GQ(t,e,r){const{vertices:n,uvs:i,indices:s}=r,o=s.length,a=n.length/2,u=[],l=Wf.rectangle,c=NQ,f=t.image;c.x=t.dx,c.y=t.dy,c.width=t.dw,c.height=t.dh;const d=t.transform;l.build(c,u),d&&Wm(u,d),l.triangulate(u,n,2,a,s,o);const h=f.uvs;i.push(h.x0,h.y0,h.x1,h.y1,h.x3,h.y3,h.x2,h.y2);const p=Te.get(Xm);p.indexOffset=o,p.indexSize=s.length-o,p.attributeOffset=a,p.attributeSize=n.length/2-a,p.baseColor=t.style,p.alpha=t.alpha,p.texture=f,p.geometryData=r,e.push(p)}function JT(t,e,r,n,i){const{vertices:s,uvs:o,indices:a}=i;t.shapePrimitives.forEach(({shape:u,transform:l,holes:c})=>{const f=a.length,d=s.length/2,h=[],p=Wf[u.type];let m="triangle-list";if(p.build(u,h),l&&Wm(h,l),r){const b=u.closePath??!0,_=e;_.pixelLine?(wM(h,b,s,a),m="line-list"):SM(h,_,!1,b,s,a)}else if(c){const b=[],_=h.slice();zQ(c).forEach(S=>{b.push(_.length/2),_.push(...S)}),g2(_,b,s,2,d,a,f)}else p.triangulate(h,s,2,d,a,f);const g=o.length/2,v=e.texture;if(v!==ne.WHITE){const b=EM(UQ,e,u,l);h2(s,2,d,o,g,2,s.length/2-d,b)}else p2(o,g,2,s.length/2-d);const y=Te.get(Xm);y.indexOffset=f,y.indexSize=a.length-f,y.attributeOffset=d,y.attributeSize=s.length/2-d,y.baseColor=e.color,y.alpha=e.alpha,y.texture=v,y.geometryData=i,y.topology=m,n.push(y)})}function zQ(t){const e=[];for(let r=0;r<t.length;r++){const n=t[r].shape,i=[];Wf[n.type].build(n,i),e.push(i)}return e}class TM{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class AM{constructor(){this.batcher=new Vm,this.instructions=new W1}init(){this.instructions.reset()}get geometry(){return oe(cD,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const b2=class Y_{constructor(e){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),e.renderableGC.addManagedHash(this,"_gpuContextHash"),e.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){Y_.defaultOptions.bezierSmoothness=(e==null?void 0:e.bezierSmoothness)??Y_.defaultOptions.bezierSmoothness}getContextRenderData(e){return this._graphicsDataContextHash[e.uid]||this._initContextRenderData(e)}updateGpuContext(e){let r=this._gpuContextHash[e.uid]||this._initContext(e);if(e.dirty){r?this._cleanGraphicsContextData(e):r=this._initContext(e),CM(e,r);const n=e.batchMode;e.customShader||n==="no-batch"?r.isBatchable=!1:n==="auto"&&(r.isBatchable=r.geometryData.vertices.length<400),e.dirty=!1}return r}getGpuContext(e){return this._gpuContextHash[e.uid]||this._initContext(e)}_initContextRenderData(e){const r=Te.get(AM),{batches:n,geometryData:i}=this._gpuContextHash[e.uid],s=i.vertices.length,o=i.indices.length;for(let c=0;c<n.length;c++)n[c].applyTransform=!1;const a=r.batcher;a.ensureAttributeBuffer(s),a.ensureIndexBuffer(o),a.begin();for(let c=0;c<n.length;c++){const f=n[c];a.add(f)}a.finish(r.instructions);const u=a.geometry;u.indexBuffer.setDataWithSize(a.indexBuffer,a.indexSize,!0),u.buffers[0].setDataWithSize(a.attributeBuffer.float32View,a.attributeSize,!0);const l=a.batches;for(let c=0;c<l.length;c++){const f=l[c];f.bindGroup=Um(f.textures.textures,f.textures.count)}return this._graphicsDataContextHash[e.uid]=r,r}_initContext(e){const r=new TM;return r.context=e,this._gpuContextHash[e.uid]=r,e.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]}onGraphicsContextDestroy(e){this._cleanGraphicsContextData(e),e.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[e.uid]=null}_cleanGraphicsContextData(e){const r=this._gpuContextHash[e.uid];r.isBatchable||this._graphicsDataContextHash[e.uid]&&(Te.return(this.getContextRenderData(e)),this._graphicsDataContextHash[e.uid]=null),r.batches&&r.batches.forEach(n=>{Te.return(n)})}destroy(){for(const e in this._gpuContextHash)this._gpuContextHash[e]&&this.onGraphicsContextDestroy(this._gpuContextHash[e].context)}};b2.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"graphicsContext"};b2.defaultOptions={bezierSmoothness:.5};let qm=b2;const $Q=8,Ld=11920929e-14,jQ=1;function x2(t,e,r,n,i,s,o,a,u,l){const f=Math.min(.99,Math.max(0,l??qm.defaultOptions.bezierSmoothness));let d=(jQ-f)/1;return d*=d,HQ(e,r,n,i,s,o,a,u,t,d),t}function HQ(t,e,r,n,i,s,o,a,u,l){K_(t,e,r,n,i,s,o,a,u,l,0),u.push(o,a)}function K_(t,e,r,n,i,s,o,a,u,l,c){if(c>$Q)return;const f=(t+r)/2,d=(e+n)/2,h=(r+i)/2,p=(n+s)/2,m=(i+o)/2,g=(s+a)/2,v=(f+h)/2,y=(d+p)/2,b=(h+m)/2,_=(p+g)/2,x=(v+b)/2,S=(y+_)/2;if(c>0){let w=o-t,P=a-e;const C=Math.abs((r-o)*P-(n-a)*w),R=Math.abs((i-o)*P-(s-a)*w);if(C>Ld&&R>Ld){if((C+R)*(C+R)<=l*(w*w+P*P)){u.push(x,S);return}}else if(C>Ld){if(C*C<=l*(w*w+P*P)){u.push(x,S);return}}else if(R>Ld){if(R*R<=l*(w*w+P*P)){u.push(x,S);return}}else if(w=x-(t+o)/2,P=S-(e+a)/2,w*w+P*P<=l){u.push(x,S);return}}K_(t,e,f,d,v,y,x,S,u,l,c+1),K_(x,S,b,_,m,g,o,a,u,l,c+1)}const VQ=8,WQ=11920929e-14,XQ=1;function PM(t,e,r,n,i,s,o,a){const l=Math.min(.99,Math.max(0,a??qm.defaultOptions.bezierSmoothness));let c=(XQ-l)/1;return c*=c,qQ(e,r,n,i,s,o,t,c),t}function qQ(t,e,r,n,i,s,o,a){Z_(o,t,e,r,n,i,s,a,0),o.push(i,s)}function Z_(t,e,r,n,i,s,o,a,u){if(u>VQ)return;const l=(e+n)/2,c=(r+i)/2,f=(n+s)/2,d=(i+o)/2,h=(l+f)/2,p=(c+d)/2;let m=s-e,g=o-r;const v=Math.abs((n-s)*g-(i-o)*m);if(v>WQ){if(v*v<=a*(m*m+g*g)){t.push(h,p);return}}else if(m=h-(e+s)/2,g=p-(r+o)/2,m*m+g*g<=a){t.push(h,p);return}Z_(t,e,r,l,c,h,p,a,u+1),Z_(t,h,p,f,d,s,o,a,u+1)}function S2(t,e,r,n,i,s,o,a){let u=Math.abs(i-s);(!o&&i>s||o&&s>i)&&(u=2*Math.PI-u),a||(a=Math.max(6,Math.floor(6*Math.pow(n,1/3)*(u/Math.PI)))),a=Math.max(a,3);let l=u/a,c=i;l*=o?-1:1;for(let f=0;f<a+1;f++){const d=Math.cos(c),h=Math.sin(c),p=e+d*n,m=r+h*n;t.push(p,m),c+=l}}function RM(t,e,r,n,i,s){const o=t[t.length-2],u=t[t.length-1]-r,l=o-e,c=i-r,f=n-e,d=Math.abs(u*f-l*c);if(d<1e-8||s===0){(t[t.length-2]!==e||t[t.length-1]!==r)&&t.push(e,r);return}const h=u*u+l*l,p=c*c+f*f,m=u*c+l*f,g=s*Math.sqrt(h)/d,v=s*Math.sqrt(p)/d,y=g*m/h,b=v*m/p,_=g*f+v*l,x=g*c+v*u,S=l*(v+y),w=u*(v+y),P=f*(g+b),C=c*(g+b),R=Math.atan2(w-x,S-_),F=Math.atan2(C-x,P-_);S2(t,_+e,x+r,s,R,F,l*c>f*u)}const Pc=Math.PI*2,R0={centerX:0,centerY:0,ang1:0,ang2:0},O0=({x:t,y:e},r,n,i,s,o,a,u)=>{t*=r,e*=n;const l=i*t-s*e,c=s*t+i*e;return u.x=l+o,u.y=c+a,u};function YQ(t,e){const r=e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),n=e===1.5707963267948966?.551915024494:r,i=Math.cos(t),s=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:i-s*n,y:s+i*n},{x:o+a*n,y:a-o*n},{x:o,y:a}]}const eA=(t,e,r,n)=>{const i=t*n-e*r<0?-1:1;let s=t*r+e*n;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)},KQ=(t,e,r,n,i,s,o,a,u,l,c,f,d)=>{const h=Math.pow(i,2),p=Math.pow(s,2),m=Math.pow(c,2),g=Math.pow(f,2);let v=h*p-h*g-p*m;v<0&&(v=0),v/=h*g+p*m,v=Math.sqrt(v)*(o===a?-1:1);const y=v*i/s*f,b=v*-s/i*c,_=l*y-u*b+(t+r)/2,x=u*y+l*b+(e+n)/2,S=(c-y)/i,w=(f-b)/s,P=(-c-y)/i,C=(-f-b)/s,R=eA(1,0,S,w);let F=eA(S,w,P,C);a===0&&F>0&&(F-=Pc),a===1&&F<0&&(F+=Pc),d.centerX=_,d.centerY=x,d.ang1=R,d.ang2=F};function OM(t,e,r,n,i,s,o,a=0,u=0,l=0){if(s===0||o===0)return;const c=Math.sin(a*Pc/360),f=Math.cos(a*Pc/360),d=f*(e-n)/2+c*(r-i)/2,h=-c*(e-n)/2+f*(r-i)/2;if(d===0&&h===0)return;s=Math.abs(s),o=Math.abs(o);const p=Math.pow(d,2)/Math.pow(s,2)+Math.pow(h,2)/Math.pow(o,2);p>1&&(s*=Math.sqrt(p),o*=Math.sqrt(p)),KQ(e,r,n,i,s,o,u,l,c,f,d,h,R0);let{ang1:m,ang2:g}=R0;const{centerX:v,centerY:y}=R0;let b=Math.abs(g)/(Pc/4);Math.abs(1-b)<1e-7&&(b=1);const _=Math.max(Math.ceil(b),1);g/=_;let x=t[t.length-2],S=t[t.length-1];const w={x:0,y:0};for(let P=0;P<_;P++){const C=YQ(m,g),{x:R,y:F}=O0(C[0],s,o,f,c,v,y,w),{x:N,y:G}=O0(C[1],s,o,f,c,v,y,w),{x:j,y:re}=O0(C[2],s,o,f,c,v,y,w);x2(t,x,S,R,F,N,G,j,re),x=j,S=re,m+=g}}function BM(t,e,r){const n=(o,a)=>{const u=a.x-o.x,l=a.y-o.y,c=Math.sqrt(u*u+l*l),f=u/c,d=l/c;return{len:c,nx:f,ny:d}},i=(o,a)=>{o===0?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y)};let s=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],u=a.radius??r;if(u<=0){i(o,a),s=a;continue}const l=e[(o+1)%e.length],c=n(a,s),f=n(a,l);if(c.len<1e-4||f.len<1e-4){i(o,a),s=a;continue}let d=Math.asin(c.nx*f.ny-c.ny*f.nx),h=1,p=!1;c.nx*f.nx-c.ny*-f.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,h=-1,p=!0):d>0&&(h=-1,p=!0);const m=d/2;let g,v=Math.abs(Math.cos(m)*u/Math.sin(m));v>Math.min(c.len/2,f.len/2)?(v=Math.min(c.len/2,f.len/2),g=Math.abs(v*Math.sin(m)/Math.cos(m))):g=u;const y=a.x+f.nx*v+-f.ny*g*h,b=a.y+f.ny*v+f.nx*g*h,_=Math.atan2(c.ny,c.nx)+Math.PI/2*h,x=Math.atan2(f.ny,f.nx)-Math.PI/2*h;o===0&&t.moveTo(y+Math.cos(_)*g,b+Math.sin(_)*g),t.arc(y,b,g,_,x,p),s=a}}function kM(t,e,r,n){const i=(a,u)=>Math.sqrt((a.x-u.x)**2+(a.y-u.y)**2),s=(a,u,l)=>({x:a.x+(u.x-a.x)*l,y:a.y+(u.y-a.y)*l}),o=e.length;for(let a=0;a<o;a++){const u=e[(a+1)%o],l=u.radius??r;if(l<=0){a===0?t.moveTo(u.x,u.y):t.lineTo(u.x,u.y);continue}const c=e[a],f=e[(a+2)%o],d=i(c,u);let h;if(d<1e-4)h=u;else{const g=Math.min(d/2,l);h=s(u,c,g/d)}const p=i(f,u);let m;if(p<1e-4)m=u;else{const g=Math.min(p/2,l);m=s(u,f,g/p)}a===0?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y),t.quadraticCurveTo(u.x,u.y,m.x,m.y,n)}}const ZQ=new Ie;class DM{constructor(e){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new Ut,this._graphicsPath2D=e,this.signed=e.checkForHoles}moveTo(e,r){return this.startPoly(e,r),this}lineTo(e,r){this._ensurePoly();const n=this._currentPoly.points,i=n[n.length-2],s=n[n.length-1];return(i!==e||s!==r)&&n.push(e,r),this}arc(e,r,n,i,s,o){this._ensurePoly(!1);const a=this._currentPoly.points;return S2(a,e,r,n,i,s,o),this}arcTo(e,r,n,i,s){this._ensurePoly();const o=this._currentPoly.points;return RM(o,e,r,n,i,s),this}arcToSvg(e,r,n,i,s,o,a){const u=this._currentPoly.points;return OM(u,this._currentPoly.lastX,this._currentPoly.lastY,o,a,e,r,n,i,s),this}bezierCurveTo(e,r,n,i,s,o,a){this._ensurePoly();const u=this._currentPoly;return x2(this._currentPoly.points,u.lastX,u.lastY,e,r,n,i,s,o,a),this}quadraticCurveTo(e,r,n,i,s){this._ensurePoly();const o=this._currentPoly;return PM(this._currentPoly.points,o.lastX,o.lastY,e,r,n,i,s),this}closePath(){return this.endPoly(!0),this}addPath(e,r){this.endPoly(),r&&!r.isIdentity()&&(e=e.clone(!0),e.transform(r));const n=this.shapePrimitives,i=n.length;for(let s=0;s<e.instructions.length;s++){const o=e.instructions[s];this[o.action](...o.data)}if(e.checkForHoles&&n.length-i>1){let s=null;for(let o=i;o<n.length;o++){const a=n[o];if(a.shape.type==="polygon"){const u=a.shape,l=s==null?void 0:s.shape;l&&l.containsPolygon(u)?(s.holes||(s.holes=[]),s.holes.push(a),n.copyWithin(o,o+1),n.length--,o--):s=a}}}return this}finish(e=!1){this.endPoly(e)}rect(e,r,n,i,s){return this.drawShape(new Ie(e,r,n,i),s),this}circle(e,r,n,i){return this.drawShape(new Fm(e,r,n),i),this}poly(e,r,n){const i=new uu(e);return i.closePath=r,this.drawShape(i,n),this}regularPoly(e,r,n,i,s=0,o){i=Math.max(i|0,3);const a=-1*Math.PI/2+s,u=Math.PI*2/i,l=[];for(let c=0;c<i;c++){const f=a-c*u;l.push(e+n*Math.cos(f),r+n*Math.sin(f))}return this.poly(l,!0,o),this}roundPoly(e,r,n,i,s,o=0,a){if(i=Math.max(i|0,3),s<=0)return this.regularPoly(e,r,n,i,o);const u=n*Math.sin(Math.PI/i)-.001;s=Math.min(s,u);const l=-1*Math.PI/2+o,c=Math.PI*2/i,f=(i-2)*Math.PI/i/2;for(let d=0;d<i;d++){const h=d*c+l,p=e+n*Math.cos(h),m=r+n*Math.sin(h),g=h+Math.PI+f,v=h-Math.PI-f,y=p+s*Math.cos(g),b=m+s*Math.sin(g),_=p+s*Math.cos(v),x=m+s*Math.sin(v);d===0?this.moveTo(y,b):this.lineTo(y,b),this.quadraticCurveTo(p,m,_,x,a)}return this.closePath()}roundShape(e,r,n=!1,i){return e.length<3?this:(n?kM(this,e,r,i):BM(this,e,r),this.closePath())}filletRect(e,r,n,i,s){if(s===0)return this.rect(e,r,n,i);const o=Math.min(n,i)/2,a=Math.min(o,Math.max(-o,s)),u=e+n,l=r+i,c=a<0?-a:0,f=Math.abs(a);return this.moveTo(e,r+f).arcTo(e+c,r+c,e+f,r,f).lineTo(u-f,r).arcTo(u-c,r+c,u,r+f,f).lineTo(u,l-f).arcTo(u-c,l-c,e+n-f,l,f).lineTo(e+f,l).arcTo(e+c,l-c,e,l-f,f).closePath()}chamferRect(e,r,n,i,s,o){if(s<=0)return this.rect(e,r,n,i);const a=Math.min(s,Math.min(n,i)/2),u=e+n,l=r+i,c=[e+a,r,u-a,r,u,r+a,u,l-a,u-a,l,e+a,l,e,l-a,e,r+a];for(let f=c.length-1;f>=2;f-=2)c[f]===c[f-2]&&c[f-1]===c[f-3]&&c.splice(f-1,2);return this.poly(c,!0,o)}ellipse(e,r,n,i,s){return this.drawShape(new Lm(e,r,n,i),s),this}roundRect(e,r,n,i,s,o){return this.drawShape(new Nm(e,r,n,i,s),o),this}drawShape(e,r){return this.endPoly(),this.shapePrimitives.push({shape:e,transform:r}),this}startPoly(e,r){let n=this._currentPoly;return n&&this.endPoly(),n=new uu,n.points.push(e,r),this._currentPoly=n,this}endPoly(e=!1){const r=this._currentPoly;return r&&r.points.length>2&&(r.closePath=e,this.shapePrimitives.push({shape:r})),this._currentPoly=null,this}_ensurePoly(e=!0){if(!this._currentPoly&&(this._currentPoly=new uu,e)){const r=this.shapePrimitives[this.shapePrimitives.length-1];if(r){let n=r.shape.x,i=r.shape.y;if(r.transform&&!r.transform.isIdentity()){const s=r.transform,o=n;n=s.a*n+s.c*i+s.tx,i=s.b*o+s.d*i+s.ty}this._currentPoly.points.push(n,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const e=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let r=0;r<e.instructions.length;r++){const n=e.instructions[r];this[n.action](...n.data)}this.finish()}get bounds(){const e=this._bounds;e.clear();const r=this.shapePrimitives;for(let n=0;n<r.length;n++){const i=r[n],s=i.shape.getBounds(ZQ);i.transform?e.addRect(s,i.transform):e.addRect(s)}return e}}class to{constructor(e,r=!1){this.instructions=[],this.uid=Je("graphicsPath"),this._dirty=!0,this.checkForHoles=r,typeof e=="string"?X4(e,this):this.instructions=(e==null?void 0:e.slice())??[]}get shapePath(){return this._shapePath||(this._shapePath=new DM(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(e,r){return e=e.clone(),this.instructions.push({action:"addPath",data:[e,r]}),this._dirty=!0,this}arc(...e){return this.instructions.push({action:"arc",data:e}),this._dirty=!0,this}arcTo(...e){return this.instructions.push({action:"arcTo",data:e}),this._dirty=!0,this}arcToSvg(...e){return this.instructions.push({action:"arcToSvg",data:e}),this._dirty=!0,this}bezierCurveTo(...e){return this.instructions.push({action:"bezierCurveTo",data:e}),this._dirty=!0,this}bezierCurveToShort(e,r,n,i,s){const o=this.instructions[this.instructions.length-1],a=this.getLastPoint(Le.shared);let u=0,l=0;if(!o||o.action!=="bezierCurveTo")u=a.x,l=a.y;else{u=o.data[2],l=o.data[3];const c=a.x,f=a.y;u=c+(c-u),l=f+(f-l)}return this.instructions.push({action:"bezierCurveTo",data:[u,l,e,r,n,i,s]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...e){return this.instructions.push({action:"ellipse",data:e}),this._dirty=!0,this}lineTo(...e){return this.instructions.push({action:"lineTo",data:e}),this._dirty=!0,this}moveTo(...e){return this.instructions.push({action:"moveTo",data:e}),this}quadraticCurveTo(...e){return this.instructions.push({action:"quadraticCurveTo",data:e}),this._dirty=!0,this}quadraticCurveToShort(e,r,n){const i=this.instructions[this.instructions.length-1],s=this.getLastPoint(Le.shared);let o=0,a=0;if(!i||i.action!=="quadraticCurveTo")o=s.x,a=s.y;else{o=i.data[0],a=i.data[1];const u=s.x,l=s.y;o=u+(u-o),a=l+(l-a)}return this.instructions.push({action:"quadraticCurveTo",data:[o,a,e,r,n]}),this._dirty=!0,this}rect(e,r,n,i,s){return this.instructions.push({action:"rect",data:[e,r,n,i,s]}),this._dirty=!0,this}circle(e,r,n,i){return this.instructions.push({action:"circle",data:[e,r,n,i]}),this._dirty=!0,this}roundRect(...e){return this.instructions.push({action:"roundRect",data:e}),this._dirty=!0,this}poly(...e){return this.instructions.push({action:"poly",data:e}),this._dirty=!0,this}regularPoly(...e){return this.instructions.push({action:"regularPoly",data:e}),this._dirty=!0,this}roundPoly(...e){return this.instructions.push({action:"roundPoly",data:e}),this._dirty=!0,this}roundShape(...e){return this.instructions.push({action:"roundShape",data:e}),this._dirty=!0,this}filletRect(...e){return this.instructions.push({action:"filletRect",data:e}),this._dirty=!0,this}chamferRect(...e){return this.instructions.push({action:"chamferRect",data:e}),this._dirty=!0,this}star(e,r,n,i,s,o,a){s||(s=i/2);const u=-1*Math.PI/2+o,l=n*2,c=Math.PI*2/l,f=[];for(let d=0;d<l;d++){const h=d%2?s:i,p=d*c+u;f.push(e+h*Math.cos(p),r+h*Math.sin(p))}return this.poly(f,!0,a),this}clone(e=!1){const r=new to;if(r.checkForHoles=this.checkForHoles,!e)r.instructions=this.instructions.slice();else for(let n=0;n<this.instructions.length;n++){const i=this.instructions[n];r.instructions.push({action:i.action,data:i.data.slice()})}return r}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(e){if(e.isIdentity())return this;const r=e.a,n=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty;let u=0,l=0,c=0,f=0,d=0,h=0,p=0,m=0;for(let g=0;g<this.instructions.length;g++){const v=this.instructions[g],y=v.data;switch(v.action){case"moveTo":case"lineTo":u=y[0],l=y[1],y[0]=r*u+i*l+o,y[1]=n*u+s*l+a;break;case"bezierCurveTo":c=y[0],f=y[1],d=y[2],h=y[3],u=y[4],l=y[5],y[0]=r*c+i*f+o,y[1]=n*c+s*f+a,y[2]=r*d+i*h+o,y[3]=n*d+s*h+a,y[4]=r*u+i*l+o,y[5]=n*u+s*l+a;break;case"quadraticCurveTo":c=y[0],f=y[1],u=y[2],l=y[3],y[0]=r*c+i*f+o,y[1]=n*c+s*f+a,y[2]=r*u+i*l+o,y[3]=n*u+s*l+a;break;case"arcToSvg":u=y[5],l=y[6],p=y[0],m=y[1],y[0]=r*p+i*m,y[1]=n*p+s*m,y[5]=r*u+i*l+o,y[6]=n*u+s*l+a;break;case"circle":y[4]=zl(y[3],e);break;case"rect":y[4]=zl(y[4],e);break;case"ellipse":y[8]=zl(y[8],e);break;case"roundRect":y[5]=zl(y[5],e);break;case"addPath":y[0].transform(e);break;case"poly":y[2]=zl(y[2],e);break;default:he("unknown transform action",v.action);break}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(e){let r=this.instructions.length-1,n=this.instructions[r];if(!n)return e.x=0,e.y=0,e;for(;n.action==="closePath";){if(r--,r<0)return e.x=0,e.y=0,e;n=this.instructions[r]}switch(n.action){case"moveTo":case"lineTo":e.x=n.data[0],e.y=n.data[1];break;case"quadraticCurveTo":e.x=n.data[2],e.y=n.data[3];break;case"bezierCurveTo":e.x=n.data[4],e.y=n.data[5];break;case"arc":case"arcToSvg":e.x=n.data[5],e.y=n.data[6];break;case"addPath":n.data[0].getLastPoint(e);break}return e}}function zl(t,e){return t?t.prepend(e):e.clone()}function at(t,e,r){const n=t.getAttribute(e);return n?Number(n):r}function MM(t,e){const r=t.querySelectorAll("defs");for(let n=0;n<r.length;n++){const i=r[n];for(let s=0;s<i.children.length;s++){const o=i.children[s];switch(o.nodeName.toLowerCase()){case"lineargradient":e.defs[o.id]=QQ(o);break;case"radialgradient":e.defs[o.id]=JQ();break}}}}function QQ(t){const e=at(t,"x1",0),r=at(t,"y1",0),n=at(t,"x2",1),i=at(t,"y2",0),s=t.getAttribute("gradientUnits")||"objectBoundingBox",o=new Bi(e,r,n,i,s==="objectBoundingBox"?"local":"global");for(let a=0;a<t.children.length;a++){const u=t.children[a],l=at(u,"offset",0),c=Re.shared.setValue(u.getAttribute("stop-color")).toNumber();o.addColorStop(l,c)}return o}function JQ(t){return he("[SVG Parser] Radial gradients are not yet supported"),new Bi(0,0,1,0)}function Q_(t){const e=t.match(/url\s*\(\s*['"]?\s*#([^'"\s)]+)\s*['"]?\s*\)/i);return e?e[1]:""}const J_={fill:{type:"paint",default:0},"fill-opacity":{type:"number",default:1},stroke:{type:"paint",default:0},"stroke-width":{type:"number",default:1},"stroke-opacity":{type:"number",default:1},"stroke-linecap":{type:"string",default:"butt"},"stroke-linejoin":{type:"string",default:"miter"},"stroke-miterlimit":{type:"number",default:10},"stroke-dasharray":{type:"string",default:"none"},"stroke-dashoffset":{type:"number",default:0},opacity:{type:"number",default:1}};function w2(t,e){const r=t.getAttribute("style"),n={},i={},s={strokeStyle:n,fillStyle:i,useFill:!1,useStroke:!1};for(const o in J_){const a=t.getAttribute(o);a&&eb(e,s,o,a.trim())}if(r){const o=r.split(";");for(let a=0;a<o.length;a++){const u=o[a].trim(),[l,c]=u.split(":");J_[l]&&eb(e,s,l,c.trim())}}return{strokeStyle:s.useStroke?n:null,fillStyle:s.useFill?i:null,useFill:s.useFill,useStroke:s.useStroke}}function eb(t,e,r,n){switch(r){case"stroke":if(n!=="none"){if(n.startsWith("url(")){const i=Q_(n);e.strokeStyle.fill=t.defs[i]}else e.strokeStyle.color=Re.shared.setValue(n).toNumber();e.useStroke=!0}break;case"stroke-width":e.strokeStyle.width=Number(n);break;case"fill":if(n!=="none"){if(n.startsWith("url(")){const i=Q_(n);e.fillStyle.fill=t.defs[i]}else e.fillStyle.color=Re.shared.setValue(n).toNumber();e.useFill=!0}break;case"fill-opacity":e.fillStyle.alpha=Number(n);break;case"stroke-opacity":e.strokeStyle.alpha=Number(n);break;case"opacity":e.fillStyle.alpha=Number(n),e.strokeStyle.alpha=Number(n);break}}function IM(t,e){if(typeof t=="string"){const o=document.createElement("div");o.innerHTML=t.trim(),t=o.querySelector("svg")}const r={context:e,defs:{},path:new to};MM(t,r);const n=t.children,{fillStyle:i,strokeStyle:s}=w2(t,r);for(let o=0;o<n.length;o++){const a=n[o];a.nodeName.toLowerCase()!=="defs"&&FM(a,r,i,s)}return e}function FM(t,e,r,n){const i=t.children,{fillStyle:s,strokeStyle:o}=w2(t,e);s&&r?r={...r,...s}:s&&(r=s),o&&n?n={...n,...o}:o&&(n=o);const a=!r&&!n;a&&(r={color:0});let u,l,c,f,d,h,p,m,g,v,y,b,_,x,S,w,P;switch(t.nodeName.toLowerCase()){case"path":x=t.getAttribute("d"),t.getAttribute("fill-rule")==="evenodd"&&he("SVG Evenodd fill rule not supported, your svg may render incorrectly"),S=new to(x,!0),e.context.path(S),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"circle":p=at(t,"cx",0),m=at(t,"cy",0),g=at(t,"r",0),e.context.ellipse(p,m,g,g),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"rect":u=at(t,"x",0),l=at(t,"y",0),w=at(t,"width",0),P=at(t,"height",0),v=at(t,"rx",0),y=at(t,"ry",0),v||y?e.context.roundRect(u,l,w,P,v||y):e.context.rect(u,l,w,P),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"ellipse":p=at(t,"cx",0),m=at(t,"cy",0),v=at(t,"rx",0),y=at(t,"ry",0),e.context.beginPath(),e.context.ellipse(p,m,v,y),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"line":c=at(t,"x1",0),f=at(t,"y1",0),d=at(t,"x2",0),h=at(t,"y2",0),e.context.beginPath(),e.context.moveTo(c,f),e.context.lineTo(d,h),n&&e.context.stroke(n);break;case"polygon":_=t.getAttribute("points"),b=_.match(/\d+/g).map(C=>parseInt(C,10)),e.context.poly(b,!0),r&&e.context.fill(r),n&&e.context.stroke(n);break;case"polyline":_=t.getAttribute("points"),b=_.match(/\d+/g).map(C=>parseInt(C,10)),e.context.poly(b,!1),n&&e.context.stroke(n);break;case"g":case"svg":break;default:{he(`[SVG parser] <${t.nodeName}> elements unsupported`);break}}a&&(r=null);for(let C=0;C<i.length;C++)FM(i[C],e,r,n)}function eJ(t){return Re.isColorLike(t)}function tA(t){return t instanceof Vf}function rA(t){return t instanceof Bi}function tJ(t){return t instanceof ne}function rJ(t,e,r){const n=Re.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=n.alpha===1?r.alpha:n.alpha,t.texture=ne.WHITE,{...r,...t}}function nJ(t,e,r){return t.texture=e,{...r,...t}}function nA(t,e,r){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...r,...t}}function iA(t,e,r){return e.buildGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,t.textureSpace=e.textureSpace,{...r,...t}}function iJ(t,e){const r={...e,...t},n=Re.shared.setValue(r.color);return r.alpha*=n.alpha,r.color=n.toNumber(),r}function Os(t,e){if(t==null)return null;const r={},n=t;return eJ(t)?rJ(r,t,e):tJ(t)?nJ(r,t,e):tA(t)?nA(r,t,e):rA(t)?iA(r,t,e):n.fill&&tA(n.fill)?nA(n,n.fill,e):n.fill&&rA(n.fill)?iA(n,n.fill,e):iJ(n,e)}function cf(t,e){const{width:r,alignment:n,miterLimit:i,cap:s,join:o,pixelLine:a,...u}=e,l=Os(t,u);return l?{width:r,alignment:n,miterLimit:i,cap:s,join:o,pixelLine:a,...l}:null}const sJ=new Le,sA=new ce,E2=class oi extends Yr{constructor(){super(...arguments),this.uid=Je("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new to,this._transform=new ce,this._fillStyle={...oi.defaultFillStyle},this._strokeStyle={...oi.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new Ut,this._boundsDirty=!0}clone(){const e=new oi;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=Os(e,oi.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=cf(e,oi.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=Os(e,oi.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=Os(e,oi.defaultStrokeStyle),this}texture(e,r,n,i,s,o){return this.instructions.push({action:"texture",data:{image:e,dx:n||0,dy:i||0,dw:s||e.frame.width,dh:o||e.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:r?Re.shared.setValue(r).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new to,this}fill(e,r){let n;const i=this.instructions[this.instructions.length-1];return this._tick===0&&i&&i.action==="stroke"?n=i.data.path:n=this._activePath.clone(),n?(e!=null&&(r!==void 0&&typeof e=="number"&&(oe(_e,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:r}),this._fillStyle=Os(e,oi.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:n}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:e,y:r}=this._activePath.getLastPoint(Le.shared);this._activePath.clear(),this._activePath.moveTo(e,r)}stroke(e){let r;const n=this.instructions[this.instructions.length-1];return this._tick===0&&n&&n.action==="fill"?r=n.data.path:r=this._activePath.clone(),r?(e!=null&&(this._strokeStyle=cf(e,oi.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let e=0;e<2;e++){const r=this.instructions[this.instructions.length-1-e],n=this._activePath.clone();if(r&&(r.action==="stroke"||r.action==="fill"))if(r.data.hole)r.data.hole.addPath(n);else{r.data.hole=n;break}}return this._initNextPathLocation(),this}arc(e,r,n,i,s,o){this._tick++;const a=this._transform;return this._activePath.arc(a.a*e+a.c*r+a.tx,a.b*e+a.d*r+a.ty,n,i,s,o),this}arcTo(e,r,n,i,s){this._tick++;const o=this._transform;return this._activePath.arcTo(o.a*e+o.c*r+o.tx,o.b*e+o.d*r+o.ty,o.a*n+o.c*i+o.tx,o.b*n+o.d*i+o.ty,s),this}arcToSvg(e,r,n,i,s,o,a){this._tick++;const u=this._transform;return this._activePath.arcToSvg(e,r,n,i,s,u.a*o+u.c*a+u.tx,u.b*o+u.d*a+u.ty),this}bezierCurveTo(e,r,n,i,s,o,a){this._tick++;const u=this._transform;return this._activePath.bezierCurveTo(u.a*e+u.c*r+u.tx,u.b*e+u.d*r+u.ty,u.a*n+u.c*i+u.tx,u.b*n+u.d*i+u.ty,u.a*s+u.c*o+u.tx,u.b*s+u.d*o+u.ty,a),this}closePath(){var e;return this._tick++,(e=this._activePath)==null||e.closePath(),this}ellipse(e,r,n,i){return this._tick++,this._activePath.ellipse(e,r,n,i,this._transform.clone()),this}circle(e,r,n){return this._tick++,this._activePath.circle(e,r,n,this._transform.clone()),this}path(e){return this._tick++,this._activePath.addPath(e,this._transform.clone()),this}lineTo(e,r){this._tick++;const n=this._transform;return this._activePath.lineTo(n.a*e+n.c*r+n.tx,n.b*e+n.d*r+n.ty),this}moveTo(e,r){this._tick++;const n=this._transform,i=this._activePath.instructions,s=n.a*e+n.c*r+n.tx,o=n.b*e+n.d*r+n.ty;return i.length===1&&i[0].action==="moveTo"?(i[0].data[0]=s,i[0].data[1]=o,this):(this._activePath.moveTo(s,o),this)}quadraticCurveTo(e,r,n,i,s){this._tick++;const o=this._transform;return this._activePath.quadraticCurveTo(o.a*e+o.c*r+o.tx,o.b*e+o.d*r+o.ty,o.a*n+o.c*i+o.tx,o.b*n+o.d*i+o.ty,s),this}rect(e,r,n,i){return this._tick++,this._activePath.rect(e,r,n,i,this._transform.clone()),this}roundRect(e,r,n,i,s){return this._tick++,this._activePath.roundRect(e,r,n,i,s,this._transform.clone()),this}poly(e,r){return this._tick++,this._activePath.poly(e,r,this._transform.clone()),this}regularPoly(e,r,n,i,s=0,o){return this._tick++,this._activePath.regularPoly(e,r,n,i,s,o),this}roundPoly(e,r,n,i,s,o){return this._tick++,this._activePath.roundPoly(e,r,n,i,s,o),this}roundShape(e,r,n,i){return this._tick++,this._activePath.roundShape(e,r,n,i),this}filletRect(e,r,n,i,s){return this._tick++,this._activePath.filletRect(e,r,n,i,s),this}chamferRect(e,r,n,i,s,o){return this._tick++,this._activePath.chamferRect(e,r,n,i,s,o),this}star(e,r,n,i,s=0,o=0){return this._tick++,this._activePath.star(e,r,n,i,s,o,this._transform.clone()),this}svg(e){return this._tick++,IM(e,this),this}restore(){const e=this._stateStack.pop();return e&&(this._transform=e.transform,this._fillStyle=e.fillStyle,this._strokeStyle=e.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(e){return this._transform.rotate(e),this}scale(e,r=e){return this._transform.scale(e,r),this}setTransform(e,r,n,i,s,o){return e instanceof ce?(this._transform.set(e.a,e.b,e.c,e.d,e.tx,e.ty),this):(this._transform.set(e,r,n,i,s,o),this)}transform(e,r,n,i,s,o){return e instanceof ce?(this._transform.append(e),this):(sA.set(e,r,n,i,s,o),this._transform.append(sA),this)}translate(e,r=e){return this._transform.translate(e,r),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const e=this._bounds;e.clear();for(let r=0;r<this.instructions.length;r++){const n=this.instructions[r],i=n.action;if(i==="fill"){const s=n.data;e.addBounds(s.path.bounds)}else if(i==="texture"){const s=n.data;e.addFrame(s.dx,s.dy,s.dx+s.dw,s.dy+s.dh,s.transform)}if(i==="stroke"){const s=n.data,o=s.style.alignment,a=s.style.width*(1-o),u=s.path.bounds;e.addFrame(u.minX-a,u.minY-a,u.maxX+a,u.maxY+a)}}return e}containsPoint(e){var i;if(!this.bounds.containsPoint(e.x,e.y))return!1;const r=this.instructions;let n=!1;for(let s=0;s<r.length;s++){const o=r[s],a=o.data,u=a.path;if(!o.action||!u)continue;const l=a.style,c=u.shapePath.shapePrimitives;for(let f=0;f<c.length;f++){const d=c[f].shape;if(!l||!d)continue;const h=c[f].transform,p=h?h.applyInverse(e,sJ):e;if(o.action==="fill")n=d.contains(p.x,p.y);else{const g=l;n=d.strokeContains(p.x,p.y,g.width,g.alignment)}const m=a.hole;if(m){const g=(i=m.shapePath)==null?void 0:i.shapePrimitives;if(g)for(let v=0;v<g.length;v++)g[v].shape.contains(p.x,p.y)&&(n=!1)}if(n)return!0}}return n}destroy(e=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(n),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(n)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};E2.defaultFillStyle={color:16777215,alpha:1,texture:ne.WHITE,matrix:null,fill:null,textureSpace:"local"};E2.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:ne.WHITE,matrix:null,fill:null,textureSpace:"local",pixelLine:!1};let wr=E2;const oA=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function C2(t){const e=[];let r=0;for(let n=0;n<oA.length;n++){const i=`_${oA[n]}`;e[r++]=t[i]}return r=LM(t._fill,e,r),r=oJ(t._stroke,e,r),r=aJ(t.dropShadow,e,r),e.join("-")}function LM(t,e,r){var n;return t&&(e[r++]=t.color,e[r++]=t.alpha,e[r++]=(n=t.fill)==null?void 0:n.styleKey),r}function oJ(t,e,r){return t&&(r=LM(t,e,r),e[r++]=t.width,e[r++]=t.alignment,e[r++]=t.cap,e[r++]=t.join,e[r++]=t.miterLimit),r}function aJ(t,e,r){return t&&(e[r++]=t.alpha,e[r++]=t.angle,e[r++]=t.blur,e[r++]=t.distance,e[r++]=Re.shared.setValue(t.color).toNumber()),r}const T2=class ka extends Yr{constructor(e={}){super(),uJ(e);const r={...ka.defaultTextStyle,...e};for(const n in r){const i=n;this[i]=r[n]}this.update()}get align(){return this._align}set align(e){this._align=e,this.update()}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords=e,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){e!==null&&typeof e=="object"?this._dropShadow=this._createProxy({...ka.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...ka.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(e){this._fontFamily=e,this.update()}get fontSize(){return this._fontSize}set fontSize(e){typeof e=="string"?this._fontSize=parseInt(e,10):this._fontSize=e,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle=e.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant=e,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight=e,this.update()}get leading(){return this._leading}set leading(e){this._leading=e,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing=e,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight=e,this.update()}get padding(){return this._padding}set padding(e){this._padding=e,this.update()}get trim(){return this._trim}set trim(e){this._trim=e,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline=e,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace=e,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap=e,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth=e,this.update()}get fill(){return this._originalFill}set fill(e){e!==this._originalFill&&(this._originalFill=e,this._isFillStyle(e)&&(this._originalFill=this._createProxy({...wr.defaultFillStyle,...e},()=>{this._fill=Os({...this._originalFill},wr.defaultFillStyle)})),this._fill=Os(e===0?"black":e,wr.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(e){e!==this._originalStroke&&(this._originalStroke=e,this._isFillStyle(e)&&(this._originalStroke=this._createProxy({...wr.defaultStrokeStyle,...e},()=>{this._stroke=cf({...this._originalStroke},wr.defaultStrokeStyle)})),this._stroke=cf(e,wr.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=C2(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=ka.defaultTextStyle;for(const r in e)this[r]=e[r]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new ka({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(e=!1){var n,i,s,o;if(this.removeAllListeners(),typeof e=="boolean"?e:e==null?void 0:e.texture){const a=typeof e=="boolean"?e:e==null?void 0:e.textureSource;(n=this._fill)!=null&&n.texture&&this._fill.texture.destroy(a),(i=this._originalFill)!=null&&i.texture&&this._originalFill.texture.destroy(a),(s=this._stroke)!=null&&s.texture&&this._stroke.texture.destroy(a),(o=this._originalStroke)!=null&&o.texture&&this._originalStroke.texture.destroy(a)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(e,r){return new Proxy(e,{set:(n,i,s)=>(n[i]=s,r==null||r(i,s),this.update(),!0)})}_isFillStyle(e){return(e??null)!==null&&!(Re.isColorLike(e)||e instanceof Bi||e instanceof Vf)}};T2.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5};T2.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let hn=T2;function uJ(t){const e=t;if(typeof e.dropShadow=="boolean"&&e.dropShadow){const r=hn.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??r.alpha,angle:e.dropShadowAngle??r.angle,blur:e.dropShadowBlur??r.blur,color:e.dropShadowColor??r.color,distance:e.dropShadowDistance??r.distance}}if(e.strokeThickness!==void 0){oe(_e,"strokeThickness is now a part of stroke");const r=e.stroke;let n={};if(Re.isColorLike(r))n.color=r;else if(r instanceof Bi||r instanceof Vf)n.fill=r;else if(Object.hasOwnProperty.call(r,"color")||Object.hasOwnProperty.call(r,"fill"))n=r;else throw new Error("Invalid stroke value.");t.stroke={...n,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){oe(_e,"gradient fill is now a fill pattern: `new FillGradient(...)`");let r;t.fontSize==null?t.fontSize=hn.defaultTextStyle.fontSize:typeof t.fontSize=="string"?r=parseInt(t.fontSize,10):r=t.fontSize;const n=new Bi({start:{x:0,y:0},end:{x:0,y:(r||0)*1.7}}),i=e.fillGradientStops.map(s=>Re.shared.setValue(s).toNumber());i.forEach((s,o)=>{const a=o/(i.length-1);n.addColorStop(a,s)}),t.fill={fill:n}}}class NM{constructor(e){this._canvasPool=Object.create(null),this.canvasOptions=e||{},this.enableFullScreen=!1}_createCanvasAndContext(e,r){const n=Ae.get().createCanvas();n.width=e,n.height=r;const i=n.getContext("2d");return{canvas:n,context:i}}getOptimalCanvasAndContext(e,r,n=1){e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),e=Wo(e),r=Wo(r);const i=(e<<17)+(r<<1);this._canvasPool[i]||(this._canvasPool[i]=[]);let s=this._canvasPool[i].pop();return s||(s=this._createCanvasAndContext(e,r)),s}returnCanvasAndContext(e){const r=e.canvas,{width:n,height:i}=r,s=(n<<17)+(i<<1);e.context.clearRect(0,0,n,i),this._canvasPool[s].push(e)}clear(){this._canvasPool={}}}const Ci=new NM,lJ=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function ff(t){const e=typeof t.fontSize=="number"?`${t.fontSize}px`:t.fontSize;let r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(let n=r.length-1;n>=0;n--){let i=r[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!lJ.includes(i)&&(i=`"${i}"`),r[n]=i}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${r.join(",")}`}const B0={willReadFrequently:!0},ti=class fe{static get experimentalLetterSpacingSupported(){let e=fe._experimentalLetterSpacingSupported;if(e!==void 0){const r=Ae.get().getCanvasRenderingContext2D().prototype;e=fe._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return e}constructor(e,r,n,i,s,o,a,u,l){this.text=e,this.style=r,this.width=n,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=u,this.fontProperties=l}static measureText(e=" ",r,n=fe._canvas,i=r.wordWrap){var y;const s=`${e}:${r.styleKey}`;if(fe._measurementCache[s])return fe._measurementCache[s];const o=ff(r),a=fe.measureFont(o);a.fontSize===0&&(a.fontSize=r.fontSize,a.ascent=r.fontSize);const u=fe.__context;u.font=o;const c=(i?fe._wordWrap(e,r,n):e).split(/(?:\r\n|\r|\n)/),f=new Array(c.length);let d=0;for(let b=0;b<c.length;b++){const _=fe._measureText(c[b],r.letterSpacing,u);f[b]=_,d=Math.max(d,_)}const h=((y=r._stroke)==null?void 0:y.width)||0;let p=d+h;r.dropShadow&&(p+=r.dropShadow.distance);const m=r.lineHeight||a.fontSize;let g=Math.max(m,a.fontSize+h)+(c.length-1)*(m+r.leading);return r.dropShadow&&(g+=r.dropShadow.distance),new fe(e,r,p,g,c,f,m+r.leading,d,a)}static _measureText(e,r,n){let i=!1;fe.experimentalLetterSpacingSupported&&(fe.experimentalLetterSpacing?(n.letterSpacing=`${r}px`,n.textLetterSpacing=`${r}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));const s=n.measureText(e);let o=s.width;const a=-s.actualBoundingBoxLeft;let l=s.actualBoundingBoxRight-a;if(o>0)if(i)o-=r,l-=r;else{const c=(fe.graphemeSegmenter(e).length-1)*r;o+=c,l+=c}return Math.max(o,l)}static _wordWrap(e,r,n=fe._canvas){const i=n.getContext("2d",B0);let s=0,o="",a="";const u=Object.create(null),{letterSpacing:l,whiteSpace:c}=r,f=fe._collapseSpaces(c),d=fe._collapseNewlines(c);let h=!f;const p=r.wordWrapWidth+l,m=fe._tokenize(e);for(let g=0;g<m.length;g++){let v=m[g];if(fe._isNewline(v)){if(!d){a+=fe._addLine(o),h=!f,o="",s=0;continue}v=" "}if(f){const b=fe.isBreakingSpace(v),_=fe.isBreakingSpace(o[o.length-1]);if(b&&_)continue}const y=fe._getFromCache(v,l,u,i);if(y>p)if(o!==""&&(a+=fe._addLine(o),o="",s=0),fe.canBreakWords(v,r.breakWords)){const b=fe.wordWrapSplit(v);for(let _=0;_<b.length;_++){let x=b[_],S=x,w=1;for(;b[_+w];){const C=b[_+w];if(!fe.canBreakChars(S,C,v,_,r.breakWords))x+=C;else break;S=C,w++}_+=w-1;const P=fe._getFromCache(x,l,u,i);P+s>p&&(a+=fe._addLine(o),h=!1,o="",s=0),o+=x,s+=P}}else{o.length>0&&(a+=fe._addLine(o),o="",s=0);const b=g===m.length-1;a+=fe._addLine(v,!b),h=!1,o="",s=0}else y+s>p&&(h=!1,a+=fe._addLine(o),o="",s=0),(o.length>0||!fe.isBreakingSpace(v)||h)&&(o+=v,s+=y)}return a+=fe._addLine(o,!1),a}static _addLine(e,r=!0){return e=fe._trimRight(e),e=r?`${e}
`:e,e}static _getFromCache(e,r,n,i){let s=n[e];return typeof s!="number"&&(s=fe._measureText(e,r,i)+r,n[e]=s),s}static _collapseSpaces(e){return e==="normal"||e==="pre-line"}static _collapseNewlines(e){return e==="normal"}static _trimRight(e){if(typeof e!="string")return"";for(let r=e.length-1;r>=0;r--){const n=e[r];if(!fe.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static _isNewline(e){return typeof e!="string"?!1:fe._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,r){return typeof e!="string"?!1:fe._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const r=[];let n="";if(typeof e!="string")return r;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(fe.isBreakingSpace(s,o)||fe._isNewline(s)){n!==""&&(r.push(n),n=""),r.push(s);continue}n+=s}return n!==""&&r.push(n),r}static canBreakWords(e,r){return r}static canBreakChars(e,r,n,i,s){return!0}static wordWrapSplit(e){return fe.graphemeSegmenter(e)}static measureFont(e){if(fe._fonts[e])return fe._fonts[e];const r=fe._context;r.font=e;const n=r.measureText(fe.METRICS_STRING+fe.BASELINE_SYMBOL),i={ascent:n.actualBoundingBoxAscent,descent:n.actualBoundingBoxDescent,fontSize:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};return fe._fonts[e]=i,i}static clearMetrics(e=""){e?delete fe._fonts[e]:fe._fonts={}}static get _canvas(){if(!fe.__canvas){let e;try{const r=new OffscreenCanvas(0,0),n=r.getContext("2d",B0);if(n!=null&&n.measureText)return fe.__canvas=r,r;e=Ae.get().createCanvas()}catch{e=Ae.get().createCanvas()}e.width=e.height=10,fe.__canvas=e}return fe.__canvas}static get _context(){return fe.__context||(fe.__context=fe._canvas.getContext("2d",B0)),fe.__context}};ti.METRICS_STRING="|q";ti.BASELINE_SYMBOL="M";ti.BASELINE_MULTIPLIER=1.4;ti.HEIGHT_MULTIPLIER=2;ti.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})();ti.experimentalLetterSpacing=!1;ti._fonts={};ti._newlines=[10,13];ti._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];ti._measurementCache={};let li=ti;const aA=1e5;function df(t,e,r,n=0){if(t.texture===ne.WHITE&&!t.fill)return Re.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(t.fill){if(t.fill instanceof Vf){const i=t.fill,s=e.createPattern(i.texture.source.resource,"repeat"),o=i.transform.copyTo(ce.shared);return o.scale(i.texture.frame.width,i.texture.frame.height),s.setTransform(o),s}else if(t.fill instanceof Bi){const i=t.fill,s=i.type==="linear",o=i.textureSpace==="local";let a=1,u=1;o&&r&&(a=r.width+n,u=r.height+n);let l,c=!1;if(s){const{start:f,end:d}=i;l=e.createLinearGradient(f.x*a,f.y*u,d.x*a,d.y*u),c=Math.abs(d.x-f.x)<Math.abs((d.y-f.y)*.1)}else{const{center:f,innerRadius:d,outerCenter:h,outerRadius:p}=i;l=e.createRadialGradient(f.x*a,f.y*u,d*a,h.x*a,h.y*u,p*a)}if(c&&o&&r){const f=r.lineHeight/u;for(let d=0;d<r.lines.length;d++){const h=(d*r.lineHeight+n/2)/u;i.colorStops.forEach(p=>{const m=h+p.offset*f;l.addColorStop(Math.floor(m*aA)/aA,Re.shared.setValue(p.color).toHex())})}}else i.colorStops.forEach(f=>{l.addColorStop(f.offset,Re.shared.setValue(f.color).toHex())});return l}}else{const i=e.createPattern(t.texture.source.resource,"repeat"),s=t.matrix.copyTo(ce.shared);return s.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(s),i}return he("FillStyle not recognised",t),"red"}function A2(t){if(t==="")return[];typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);if(i[0].length===0||i[1].length===0)throw new Error("[BitmapFont]: Invalid character delimiter.");const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,u=o;a<=u;a++)e.push(String.fromCharCode(a))}else e.push(...Array.from(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const UM=class GM extends c2{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const r={...GM.defaultOptions,...e};this._textureSize=r.textureSize,this._mipmap=r.mipmap;const n=r.style.clone();r.overrideFill&&(n._fill.color=16777215,n._fill.alpha=1,n._fill.texture=ne.WHITE,n._fill.fill=null),this.applyFillAsTint=r.overrideFill;const i=n.fontSize;n.fontSize=this.baseMeasurementFontSize;const s=ff(n);r.overrideSize?n._stroke&&(n._stroke.width*=this.baseRenderedFontSize/i):n.fontSize=this.baseRenderedFontSize=i,this._style=n,this._skipKerning=r.skipKerning??!1,this.resolution=r.resolution??1,this._padding=r.padding??4,this.fontMetrics=li.measureFont(s),this.lineHeight=n.lineHeight||this.fontMetrics.fontSize||n.fontSize}ensureCharacters(e){var g,v;const r=A2(e).filter(y=>!this._currentChars.includes(y)).filter((y,b,_)=>_.indexOf(y)===b);if(!r.length)return;this._currentChars=[...this._currentChars,...r];let n;this._currentPageIndex===-1?n=this._nextPage():n=this.pages[this._currentPageIndex];let{canvas:i,context:s}=n.canvasAndContext,o=n.texture.source;const a=this._style;let u=this._currentX,l=this._currentY;const c=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*c;let d=0,h=!1;const p=i.width/this.resolution,m=i.height/this.resolution;for(let y=0;y<r.length;y++){const b=r[y],_=li.measureText(b,a,i,!1);_.lineHeight=_.height;const x=_.width*c,S=Math.ceil((a.fontStyle==="italic"?2:1)*x),w=_.height*c,P=S+f*2,C=w+f*2;if(h=!1,b!==`
`&&b!=="\r"&&b!=="	"&&b!==" "&&(h=!0,d=Math.ceil(Math.max(C,d))),u+P>p&&(l+=d,d=C,u=0,l+d>m)){o.update();const F=this._nextPage();i=F.canvasAndContext.canvas,s=F.canvasAndContext.context,o=F.texture.source,l=0}const R=x/c-(((g=a.dropShadow)==null?void 0:g.distance)??0)-(((v=a._stroke)==null?void 0:v.width)??0);if(this.chars[b]={id:b.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:R,kerning:{}},h){this._drawGlyph(s,_,u+f,l+f,c,a);const F=o.width*c,N=o.height*c,G=new Ie(u/F*o.width,l/N*o.height,P/F*o.width,C/N*o.height);this.chars[b].texture=new ne({source:o,frame:G}),u+=Math.ceil(P)}}o.update(),this._currentX=u,this._currentY=l,this._skipKerning&&this._applyKerning(r,s)}get pageTextures(){return oe(_e,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(e,r){const n=this._measureCache;for(let i=0;i<e.length;i++){const s=e[i];for(let o=0;o<this._currentChars.length;o++){const a=this._currentChars[o];let u=n[s];u||(u=n[s]=r.measureText(s).width);let l=n[a];l||(l=n[a]=r.measureText(a).width);let c=r.measureText(s+a).width,f=c-(u+l);f&&(this.chars[s].kerning[a]=f),c=r.measureText(s+a).width,f=c-(u+l),f&&(this.chars[a].kerning[s]=f)}}}_nextPage(){this._currentPageIndex++;const e=this.resolution,r=Ci.getOptimalCanvasAndContext(this._textureSize,this._textureSize,e);this._setupContext(r.context,this._style,e);const n=e*(this.baseRenderedFontSize/this.baseMeasurementFontSize),i=new ne({source:new ts({resource:r.canvas,resolution:n,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})}),s={canvasAndContext:r,texture:i};return this.pages[this._currentPageIndex]=s,s}_setupContext(e,r,n){r.fontSize=this.baseRenderedFontSize,e.scale(n,n),e.font=ff(r),r.fontSize=this.baseMeasurementFontSize,e.textBaseline=r.textBaseline;const i=r._stroke,s=(i==null?void 0:i.width)??0;if(i&&(e.lineWidth=s,e.lineJoin=i.join,e.miterLimit=i.miterLimit,e.strokeStyle=df(i,e)),r._fill&&(e.fillStyle=df(r._fill,e)),r.dropShadow){const o=r.dropShadow,a=Re.shared.setValue(o.color).toArray(),u=o.blur*n,l=o.distance*n;e.shadowColor=`rgba(${a[0]*255},${a[1]*255},${a[2]*255},${o.alpha})`,e.shadowBlur=u,e.shadowOffsetX=Math.cos(o.angle)*l,e.shadowOffsetY=Math.sin(o.angle)*l}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0}_drawGlyph(e,r,n,i,s,o){const a=r.text,u=r.fontProperties,l=o._stroke,c=((l==null?void 0:l.width)??0)*s,f=n+c/2,d=i-c/2,h=u.descent*s,p=r.lineHeight*s;o.stroke&&c&&e.strokeText(a,f,d+p-h),o._fill&&e.fillText(a,f,d+p-h)}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{canvasAndContext:r,texture:n}=this.pages[e];Ci.returnCanvasAndContext(r),n.destroy(!0)}this.pages=null}};UM.defaultOptions={textureSize:512,style:new hn,mipmap:!0};let tb=UM;function P2(t,e,r,n){const i={width:0,height:0,offsetY:0,scale:e.fontSize/r.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};i.offsetY=r.baseLineOffset;let s=i.lines[0],o=null,a=!0;const u={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=p=>{const m=s.width;for(let g=0;g<u.index;g++){const v=p.positions[g];s.chars.push(p.chars[g]),s.charPositions.push(v+m)}s.width+=p.width,a=!1,u.width=0,u.index=0,u.chars.length=0},c=()=>{let p=s.chars.length-1;if(n){let m=s.chars[p];for(;m===" ";)s.width-=r.chars[m].xAdvance,m=s.chars[--p]}i.width=Math.max(i.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,i.lines.push(s),i.height+=r.lineHeight},f=r.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*f,h=e.wordWrapWidth*f;for(let p=0;p<t.length+1;p++){let m;const g=p===t.length;g||(m=t[p]);const v=r.chars[m]||r.chars[" "];if(/(?:\s)/.test(m)||m==="\r"||m===`
`||g){if(!a&&e.wordWrap&&s.width+u.width-d>h?(c(),l(u),g||s.charPositions.push(0)):(u.start=s.width,l(u),g||s.charPositions.push(0)),m==="\r"||m===`
`)s.width!==0&&c();else if(!g){const x=v.xAdvance+(v.kerning[o]||0)+d;s.width+=x,s.spaceWidth=x,s.spacesIndex.push(s.charPositions.length),s.chars.push(m)}}else{const _=v.kerning[o]||0,x=v.xAdvance+_+d;u.positions[u.index++]=u.width+_,u.chars.push(m),u.width+=x}o=m}return c(),e.align==="center"?cJ(i):e.align==="right"?fJ(i):e.align==="justify"&&dJ(i),i}function cJ(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width/2-r.width/2;for(let i=0;i<r.charPositions.length;i++)r.charPositions[i]+=n}}function fJ(t){for(let e=0;e<t.lines.length;e++){const r=t.lines[e],n=t.width-r.width;for(let i=0;i<r.charPositions.length;i++)r.charPositions[i]+=n}}function dJ(t){const e=t.width;for(let r=0;r<t.lines.length;r++){const n=t.lines[r];let i=0,s=n.spacesIndex[i++],o=0;const a=n.spacesIndex.length,l=(e-n.width)/a;for(let c=0;c<n.charPositions.length;c++)c===s&&(s=n.spacesIndex[i++],o+=l),n.charPositions[c]+=o}}let Nd=0;class hJ{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(e,r){var o;let n=`${r.fontFamily}-bitmap`,i=!0;if(r._fill.fill&&!r._stroke)n+=r._fill.fill.styleKey,i=!1;else if(r._stroke||r.dropShadow){let a=r.styleKey;a=a.substring(0,a.lastIndexOf("-")),n=`${a}-bitmap`,i=!1}if(!He.has(n)){const a=new tb({style:r,overrideFill:i,overrideSize:!0,...this.defaultOptions});Nd++,Nd>50&&he("BitmapText",`You have dynamically created ${Nd} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),a.once("destroy",()=>{Nd--,He.remove(n)}),He.set(n,a)}const s=He.get(n);return(o=s.ensureCharacters)==null||o.call(s,e),s}getLayout(e,r,n=!0){const i=this.getFont(e,r);return P2([...e],r,i,n)}measureText(e,r,n=!0){return this.getLayout(e,r,n)}install(...e){var l,c,f,d;let r=e[0];typeof r=="string"&&(r={name:r,style:e[1],chars:(l=e[2])==null?void 0:l.chars,resolution:(c=e[2])==null?void 0:c.resolution,padding:(f=e[2])==null?void 0:f.padding,skipKerning:(d=e[2])==null?void 0:d.skipKerning},oe(_e,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const n=r==null?void 0:r.name;if(!n)throw new Error("[BitmapFontManager] Property `name` is required.");r={...this.defaultOptions,...r};const i=r.style,s=i instanceof hn?i:new hn(i),o=s._fill.fill!==null&&s._fill.fill!==void 0,a=new tb({style:s,overrideFill:o,skipKerning:r.skipKerning,padding:r.padding,resolution:r.resolution,overrideSize:!1}),u=A2(r.chars);return a.ensureCharacters(u.join("")),He.set(`${n}-bitmap`,a),a.once("destroy",()=>He.remove(`${n}-bitmap`)),a}uninstall(e){const r=`${e}-bitmap`,n=He.get(r);n&&n.destroy()}}const hf=new hJ;class R2 extends c2{constructor(e,r){super();const{textures:n,data:i}=e;Object.keys(i.pages).forEach(s=>{const o=i.pages[parseInt(s,10)],a=n[o.id];this.pages.push({texture:a})}),Object.keys(i.chars).forEach(s=>{const o=i.chars[s],{frame:a,source:u}=n[o.page],l=new Ie(o.x+a.x,o.y+a.y,o.width,o.height),c=new ne({source:u,frame:l});this.chars[s]={id:s.codePointAt(0),xOffset:o.xOffset,yOffset:o.yOffset,xAdvance:o.xAdvance,kerning:o.kerning??{},texture:c}}),this.baseRenderedFontSize=i.fontSize,this.baseMeasurementFontSize=i.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:i.fontSize},this.baseLineOffset=i.baseLineOffset,this.lineHeight=i.lineHeight,this.fontFamily=i.fontFamily,this.distanceField=i.distanceField??{type:"none",range:0},this.url=r}destroy(){super.destroy();for(let e=0;e<this.pages.length;e++){const{texture:r}=this.pages[e];r.destroy(!0)}this.pages=null}static install(e){hf.install(e)}static uninstall(e){hf.uninstall(e)}}const Sh={test(t){return typeof t=="string"&&t.startsWith("info face=")},parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const f in e){const d=e[f].match(/^[a-z]+/gm)[0],h=e[f].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(const m in h){const g=h[m].split("="),v=g[0],y=g[1].replace(/"/gm,""),b=parseFloat(y),_=isNaN(b)?y:b;p[v]=_}r[d].push(p)}const n={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[i]=r.info,[s]=r.common,[o]=r.distanceField??[];o&&(n.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),n.fontSize=parseInt(i.size,10),n.fontFamily=i.face,n.lineHeight=parseInt(s.lineHeight,10);const a=r.page;for(let f=0;f<a.length;f++)n.pages.push({id:parseInt(a[f].id,10)||0,file:a[f].file});const u={};n.baseLineOffset=n.lineHeight-parseInt(s.base,10);const l=r.char;for(let f=0;f<l.length;f++){const d=l[f],h=parseInt(d.id,10);let p=d.letter??d.char??String.fromCharCode(h);p==="space"&&(p=" "),u[h]=p,n.chars[p]={id:h,page:parseInt(d.page,10)||0,x:parseInt(d.x,10),y:parseInt(d.y,10),width:parseInt(d.width,10),height:parseInt(d.height,10),xOffset:parseInt(d.xoffset,10),yOffset:parseInt(d.yoffset,10),xAdvance:parseInt(d.xadvance,10),kerning:{}}}const c=r.kerning||[];for(let f=0;f<c.length;f++){const d=parseInt(c[f].first,10),h=parseInt(c[f].second,10),p=parseInt(c[f].amount,10);n.chars[u[h]].kerning[u[d]]=p}return n}},rb={test(t){const e=t;return typeof e!="string"&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&e.getElementsByTagName("info")[0].getAttribute("face")!==null},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},r=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],i=t.getElementsByTagName("distanceField")[0];i&&(e.distanceField={type:i.getAttribute("fieldType"),range:parseInt(i.getAttribute("distanceRange"),10)});const s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(r.getAttribute("size"),10),e.fontFamily=r.getAttribute("face"),e.lineHeight=parseInt(n.getAttribute("lineHeight"),10);for(let l=0;l<s.length;l++)e.pages.push({id:parseInt(s[l].getAttribute("id"),10)||0,file:s[l].getAttribute("file")});const u={};e.baseLineOffset=e.lineHeight-parseInt(n.getAttribute("base"),10);for(let l=0;l<o.length;l++){const c=o[l],f=parseInt(c.getAttribute("id"),10);let d=c.getAttribute("letter")??c.getAttribute("char")??String.fromCharCode(f);d==="space"&&(d=" "),u[f]=d,e.chars[d]={id:f,page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xOffset:parseInt(c.getAttribute("xoffset"),10),yOffset:parseInt(c.getAttribute("yoffset"),10),xAdvance:parseInt(c.getAttribute("xadvance"),10),kerning:{}}}for(let l=0;l<a.length;l++){const c=parseInt(a[l].getAttribute("first"),10),f=parseInt(a[l].getAttribute("second"),10),d=parseInt(a[l].getAttribute("amount"),10);e.chars[u[f]].kerning[u[c]]=d}return e}},nb={test(t){return typeof t=="string"&&t.includes("<font>")?rb.test(Ae.get().parseXML(t)):!1},parse(t){return rb.parse(Ae.get().parseXML(t))}},pJ=[".xml",".fnt"],zM={extension:{type:O.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof R2,getCacheableAssets(t,e){const r={};return t.forEach(n=>{r[n]=e,r[`${n}-bitmap`]=e}),r[`${e.fontFamily}-bitmap`]=e,r}},$M={extension:{type:O.LoadParser,priority:_n.Normal},name:"loadBitmapFont",test(t){return pJ.includes(zr.extname(t).toLowerCase())},async testParse(t){return Sh.test(t)||nb.test(t)},async parse(t,e,r){const n=Sh.test(t)?Sh.parse(t):nb.parse(t),{src:i}=e,{pages:s}=n,o=[],a=n.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let f=0;f<s.length;++f){const d=s[f].file;let h=zr.join(zr.dirname(i),d);h=yp(h,i),o.push({src:h,data:a})}const u=await r.load(o),l=o.map(f=>u[f.src]);return new R2({data:n,textures:l},i)},async load(t,e){return await(await Ae.get().fetch(t)).text()},async unload(t,e,r){await Promise.all(t.pages.map(n=>r.unload(n.texture.source._sourceOrigin))),t.destroy()}};class jM{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}const HM={extension:{type:O.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(e=>e instanceof ne),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};async function O2(t){if("Image"in globalThis)return new Promise(e=>{const r=new Image;r.onload=()=>{e(!0)},r.onerror=()=>{e(!1)},r.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const VM={extension:{type:O.DetectionParser,priority:1},test:async()=>O2("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")},uA=["png","jpg","jpeg"],WM={extension:{type:O.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...uA],remove:async t=>t.filter(e=>!uA.includes(e))},mJ="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Ym(t){return mJ?!1:document.createElement("video").canPlayType(t)!==""}const XM={extension:{type:O.DetectionParser,priority:0},test:async()=>Ym("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")},qM={extension:{type:O.DetectionParser,priority:0},test:async()=>Ym("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")},YM={extension:{type:O.DetectionParser,priority:0},test:async()=>Ym("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")},KM={extension:{type:O.DetectionParser,priority:0},test:async()=>O2("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};class ZM{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||he(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];if(l.load&&((o=l.test)!=null&&o.call(l,e,r,this))){s=l;break}}if(!s)return he(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let u=0;u<this.parsers.length;u++){const l=this.parsers[u];l.parse&&l.parse&&await((a=l.testParse)==null?void 0:a.call(l,i,r,this))&&(i=await l.parse(i,r,this)||i,n.parser=l)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=sf(e),o=Rn(e,l=>({alias:[l],src:l,data:{}})),a=o.length,u=o.map(async l=>{const c=zr.toAbsolute(l.src);if(!i[l.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,l)),i[l.src]=await this.promiseCache[c].promise,r&&r(++n/a)}catch(f){throw delete this.promiseCache[c],delete i[l.src],new Error(`[Loader.load] Failed to load ${c}.
${f}`)}});return await Promise.all(u),s?i[o[0].src]:i}async unload(e){const n=Rn(e,i=>({alias:[i],src:i})).map(async i=>{var a,u;const s=zr.toAbsolute(i.src),o=this.promiseCache[s];if(o){const l=await o.promise;delete this.promiseCache[s],await((u=(a=o.parser)==null?void 0:a.unload)==null?void 0:u.call(a,l,i,this))}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(r.name?e[r.name]&&he(`[Assets] loadParser name conflict "${r.name}"`):he("[Assets] loadParser should have a name"),{...e,[r.name]:r}),{})}}function ua(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Ln(t,e){const r=t.split("?")[0],n=zr.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const gJ=".json",vJ="application/json",QM={extension:{type:O.LoadParser,priority:_n.Low},name:"loadJson",test(t){return ua(t,vJ)||Ln(t,gJ)},async load(t){return await(await Ae.get().fetch(t)).json()}},yJ=".txt",_J="text/plain",JM={name:"loadTxt",extension:{type:O.LoadParser,priority:_n.Low,name:"loadTxt"},test(t){return ua(t,_J)||Ln(t,yJ)},async load(t){return await(await Ae.get().fetch(t)).text()}},bJ=["normal","bold","100","200","300","400","500","600","700","800","900"],xJ=[".ttf",".otf",".woff",".woff2"],SJ=["font/ttf","font/otf","font/woff","font/woff2"],wJ=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function eI(t){const e=zr.extname(t),i=zr.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(wJ)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const EJ=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function CJ(t){return EJ.test(t)?t:encodeURI(t)}const tI={extension:{type:O.LoadParser,priority:_n.Low},name:"loadWebFont",test(t){return ua(t,SJ)||Ln(t,xJ)},async load(t,e){var n,i,s;const r=Ae.get().getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??eI(t),u=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(c=>bJ.includes(c)))??["normal"],l=e.data??{};for(let c=0;c<u.length;c++){const f=u[c],d=new FontFace(a,`url(${CJ(t)})`,{...l,weight:f});await d.load(),r.add(d),o.push(d)}return He.set(`${a}-and-url`,{url:t,fontFaces:o}),o.length===1?o[0]:o}return he("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>{He.remove(`${e.family}-and-url`),Ae.get().getFontFaceSet().delete(e)})}};function Km(t,e=1){var n;const r=(n=lo.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}function co(t,e,r){t.label=r,t._sourceOrigin=r;const n=new ne({source:t,label:r}),i=()=>{delete e.promiseCache[r],He.has(r)&&He.remove(r)};return n.source.once("destroy",()=>{e.promiseCache[r]&&(he("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),i())}),n.once("destroy",()=>{t.destroyed||(he("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}const TJ=".svg",AJ="image/svg+xml",rI={extension:{type:O.LoadParser,priority:_n.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test(t){return ua(t,AJ)||Ln(t,TJ)},async load(t,e,r){var n;return((n=e.data)==null?void 0:n.parseAsGraphicsContext)??this.config.parseAsGraphicsContext?RJ(t):PJ(t,e,r,this.config.crossOrigin)},unload(t){t.destroy(!0)}};async function PJ(t,e,r,n){var g,v,y;const s=await(await Ae.get().fetch(t)).blob(),o=URL.createObjectURL(s),a=new Image;a.src=o,a.crossOrigin=n,await a.decode(),URL.revokeObjectURL(o);const u=document.createElement("canvas"),l=u.getContext("2d"),c=((g=e.data)==null?void 0:g.resolution)||Km(t),f=((v=e.data)==null?void 0:v.width)??a.width,d=((y=e.data)==null?void 0:y.height)??a.height;u.width=f*c,u.height=d*c,l.drawImage(a,0,0,f*c,d*c);const{parseAsGraphicsContext:h,...p}=e.data??{},m=new ts({resource:u,alphaMode:"premultiply-alpha-on-upload",resolution:c,...p});return co(m,r,t)}async function RJ(t){const r=await(await Ae.get().fetch(t)).text(),n=new wr;return n.svg(r),n}const OJ=`(function () {
    'use strict';

    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
    async function checkImageBitmap() {
      try {
        if (typeof createImageBitmap !== "function")
          return false;
        const response = await fetch(WHITE_PNG);
        const imageBlob = await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);
        return imageBitmap.width === 1 && imageBitmap.height === 1;
      } catch (_e) {
        return false;
      }
    }
    void checkImageBitmap().then((result) => {
      self.postMessage(result);
    });

})();
`;let lu=null,ib=class{constructor(){lu||(lu=URL.createObjectURL(new Blob([OJ],{type:"application/javascript"}))),this.worker=new Worker(lu)}};ib.revokeObjectURL=function(){lu&&(URL.revokeObjectURL(lu),lu=null)};const BJ=`(function () {
    'use strict';

    async function loadImageBitmap(url, alphaMode) {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
      }
      const imageBlob = await response.blob();
      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);
    }
    self.onmessage = async (event) => {
      try {
        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);
        self.postMessage({
          data: imageBitmap,
          uuid: event.data.uuid,
          id: event.data.id
        }, [imageBitmap]);
      } catch (e) {
        self.postMessage({
          error: e,
          uuid: event.data.uuid,
          id: event.data.id
        });
      }
    };

})();
`;let cu=null,nI=class{constructor(){cu||(cu=URL.createObjectURL(new Blob([BJ],{type:"application/javascript"}))),this.worker=new Worker(cu)}};nI.revokeObjectURL=function(){cu&&(URL.revokeObjectURL(cu),cu=null)};let lA=0,k0;class kJ{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const{worker:r}=new ib;r.addEventListener("message",n=>{r.terminate(),ib.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e,r){var n;return this._run("loadImageBitmap",[e,(n=r==null?void 0:r.data)==null?void 0:n.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){k0===void 0&&(k0=navigator.hardwareConcurrency||4);let e=this._workerPool.pop();return!e&&this._createdWorkers<k0&&(this._createdWorkers++,e=new nI().worker,e.addEventListener("message",r=>{this._complete(r.data),this._returnWorker(r.target),this._next()})),e}_returnWorker(e){this._workerPool.push(e)}_complete(e){e.error!==void 0?this._resolveHash[e.uuid].reject(e.error):this._resolveHash[e.uuid].resolve(e.data),this._resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this._queue.push({id:e,arguments:r,resolve:i,reject:s})});return this._next(),n}_next(){if(!this._queue.length)return;const e=this._getWorker();if(!e)return;const r=this._queue.pop(),n=r.id;this._resolveHash[lA]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:lA++,id:n})}}const sb=new kJ,DJ=[".jpeg",".jpg",".png",".webp",".avif"],MJ=["image/jpeg","image/png","image/webp","image/avif"];async function iI(t,e){var i;const r=await Ae.get().fetch(t);if(!r.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${r.status} ${r.statusText}`);const n=await r.blob();return((i=e==null?void 0:e.data)==null?void 0:i.alphaMode)==="premultiplied-alpha"?createImageBitmap(n,{premultiplyAlpha:"none"}):createImageBitmap(n)}const B2={name:"loadTextures",extension:{type:O.LoadParser,priority:_n.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return ua(t,MJ)||Ln(t,DJ)},async load(t,e,r){var s;let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await sb.isImageBitmapSupported()?n=await sb.loadImageBitmap(t,e):n=await iI(t,e):n=await new Promise((o,a)=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?o(n):(n.onload=()=>{o(n)},n.onerror=a)});const i=new ts({resource:n,alphaMode:"premultiply-alpha-on-upload",resolution:((s=e.data)==null?void 0:s.resolution)||Km(t),...e.data});return co(i,r,t)},unload(t){t.destroy(!0)}},sI=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],IJ=sI.map(t=>`video/${t.substring(1)}`);function oI(t,e,r){r===void 0&&!e.startsWith("data:")?t.crossOrigin=uI(e):r!==!1&&(t.crossOrigin=typeof r=="string"?r:"anonymous")}function aI(t){return new Promise((e,r)=>{t.addEventListener("canplaythrough",n),t.addEventListener("error",i),t.load();function n(){s(),e()}function i(o){s(),r(o)}function s(){t.removeEventListener("canplaythrough",n),t.removeEventListener("error",i)}})}function uI(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const r=new URL(t,document.baseURI);return r.hostname!==e.hostname||r.port!==e.port||r.protocol!==e.protocol?"anonymous":""}const lI={name:"loadVideo",extension:{type:O.LoadParser,name:"loadVideo"},test(t){const e=ua(t,IJ),r=Ln(t,sI);return e||r},async load(t,e,r){var u,l;const n={...Tc.defaultOptions,resolution:((u=e.data)==null?void 0:u.resolution)||Km(t),alphaMode:((l=e.data)==null?void 0:l.alphaMode)||await Z1(),...e.data},i=document.createElement("video"),s={preload:n.autoLoad!==!1?"auto":void 0,"webkit-playsinline":n.playsinline!==!1?"":void 0,playsinline:n.playsinline!==!1?"":void 0,muted:n.muted===!0?"":void 0,loop:n.loop===!0?"":void 0,autoplay:n.autoPlay!==!1?"":void 0};Object.keys(s).forEach(c=>{const f=s[c];f!==void 0&&i.setAttribute(c,f)}),n.muted===!0&&(i.muted=!0),oI(i,t,n.crossorigin);const o=document.createElement("source");let a;if(t.startsWith("data:"))a=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const c=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();a=Tc.MIME_TYPES[c]||`video/${c}`}return o.src=t,a&&(o.type=a),new Promise(c=>{const f=async()=>{const d=new Tc({...n,resource:i});i.removeEventListener("canplay",f),e.data.preload&&await aI(i),c(co(d,r,t))};i.addEventListener("canplay",f),i.appendChild(o)})},unload(t){t.destroy(!0)}},k2={extension:{type:O.ResolveParser,name:"resolveTexture"},test:B2.test,parse:t=>{var e;return{resolution:parseFloat(((e=lo.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}},cI={extension:{type:O.ResolveParser,priority:-2,name:"resolveJson"},test:t=>lo.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:k2.parse};class fI{constructor(){this._detections=[],this._initialized=!1,this.resolver=new lo,this.loader=new ZM,this.cache=He,this._backgroundLoader=new jM(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){he("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e){this.resolver.add(e)}async load(e,r){this._initialized||await this.init();const n=sf(e),i=Rn(e).map(a=>{if(typeof a!="string"){const u=this.resolver.getAlias(a);return u.some(l=>!this.resolver.hasKey(l))&&this.add(a),Array.isArray(u)?u[0]:u}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,u=0;const l=()=>{r==null||r(++a/u)},c=o.map(f=>{const d=i[f];return u+=Object.keys(d).length,this._mapLoadToResolve(d,l).then(h=>{s[f]=h})});return await Promise.all(c),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return He.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=He.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=[...new Set(Object.values(e))];this._backgroundLoader.active=!1;const i=await this.loader.load(n,r);this._backgroundLoader.active=!0;const s={};return n.forEach(o=>{const a=i[o.src],u=[o.src];o.alias&&u.push(...o.alias),u.forEach(l=>{s[l]=a}),He.set(u,a)}),s}async unload(e){this._initialized||await this.init();const r=Rn(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=Rn(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{He.remove(n.src)}),await this.loader.unload(r)}async _detectFormats(e){let r=[];e.preferredFormats&&(r=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const n of e.detections)e.skipDetections||await n.test()?r=await n.add(r):e.skipDetections||(r=await n.remove(r));return r=r.filter((n,i)=>r.indexOf(n)===i),r}get detections(){return this._detections}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const ac=new fI;me.handleByList(O.LoadParser,ac.loader.parsers).handleByList(O.ResolveParser,ac.resolver.parsers).handleByList(O.CacheParser,ac.cache.parsers).handleByList(O.DetectionParser,ac.detections);me.add(HM,WM,VM,KM,XM,qM,YM,QM,JM,tI,rI,B2,lI,$M,zM,k2,cI);const cA={loader:O.LoadParser,resolver:O.ResolveParser,cache:O.CacheParser,detection:O.DetectionParser};me.handle(O.Asset,t=>{const e=t.ref;Object.entries(cA).filter(([r])=>!!e[r]).forEach(([r,n])=>me.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(cA).filter(r=>!!e[r]).forEach(r=>me.remove(e[r]))});const FJ={extension:{type:O.DetectionParser,priority:3},test:async()=>!!(await Hf()||jf()),add:async t=>[...t,"basis"],remove:async t=>t.filter(e=>e!=="basis")};class Xf extends yt{constructor(e){super(e),this.uploadMethodId="compressed",this.resource=e.resource,this.mipLevelCount=this.resource.length}}let Ud;function ob(){if(Ud)return Ud;const e=document.createElement("canvas").getContext("webgl");return e?(Ud=[...e.getExtension("EXT_texture_compression_bptc")?["bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc")?["bc1-rgba-unorm","bc2-rgba-unorm","bc3-rgba-unorm"]:[],...e.getExtension("WEBGL_compressed_texture_s3tc_srgb")?["bc1-rgba-unorm-srgb","bc2-rgba-unorm-srgb","bc3-rgba-unorm-srgb"]:[],...e.getExtension("EXT_texture_compression_rgtc")?["bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm"]:[],...e.getExtension("WEBGL_compressed_texture_etc")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","eac-r11unorm","eac-rg11unorm"]:[],...e.getExtension("WEBGL_compressed_texture_astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Ud):[]}let Gd;async function ab(){if(Gd)return Gd;const t=await Ae.get().getNavigator().gpu.requestAdapter();return Gd=[...t.features.has("texture-compression-bc")?["bc1-rgba-unorm","bc1-rgba-unorm-srgb","bc2-rgba-unorm","bc2-rgba-unorm-srgb","bc3-rgba-unorm","bc3-rgba-unorm-srgb","bc4-r-unorm","bc4-r-snorm","bc5-rg-unorm","bc5-rg-snorm","bc6h-rgb-ufloat","bc6h-rgb-float","bc7-rgba-unorm","bc7-rgba-unorm-srgb"]:[],...t.features.has("texture-compression-etc2")?["etc2-rgb8unorm","etc2-rgb8unorm-srgb","etc2-rgb8a1unorm","etc2-rgb8a1unorm-srgb","etc2-rgba8unorm","etc2-rgba8unorm-srgb","eac-r11unorm","eac-r11snorm","eac-rg11unorm","eac-rg11snorm"]:[],...t.features.has("texture-compression-astc")?["astc-4x4-unorm","astc-4x4-unorm-srgb","astc-5x4-unorm","astc-5x4-unorm-srgb","astc-5x5-unorm","astc-5x5-unorm-srgb","astc-6x5-unorm","astc-6x5-unorm-srgb","astc-6x6-unorm","astc-6x6-unorm-srgb","astc-8x5-unorm","astc-8x5-unorm-srgb","astc-8x6-unorm","astc-8x6-unorm-srgb","astc-8x8-unorm","astc-8x8-unorm-srgb","astc-10x5-unorm","astc-10x5-unorm-srgb","astc-10x6-unorm","astc-10x6-unorm-srgb","astc-10x8-unorm","astc-10x8-unorm-srgb","astc-10x10-unorm","astc-10x10-unorm-srgb","astc-12x10-unorm","astc-12x10-unorm-srgb","astc-12x12-unorm","astc-12x12-unorm-srgb"]:[]],Gd}let zd;async function D2(){return zd!==void 0||(zd=await(async()=>{const t=await Hf(),e=jf();if(t&&e){const r=await ab(),n=ob();return r.filter(i=>n.includes(i))}else{if(t)return await ab();if(e)return ob()}return[]})()),zd}const dI=["r8unorm","r8snorm","r8uint","r8sint","r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2unorm","rg11b10ufloat","rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float","rgba32uint","rgba32sint","rgba32float","stencil8","depth16unorm","depth24plus","depth24plus-stencil8","depth32float","depth32float-stencil8"];let $d;async function qf(){if($d!==void 0)return $d;const t=await D2();return $d=[...dI,...t],$d}const LJ=`(function () {
    'use strict';

    function createLevelBuffers(basisTexture, basisTranscoderFormat) {
      const images = basisTexture.getNumImages();
      const levels = basisTexture.getNumLevels(0);
      const success = basisTexture.startTranscoding();
      if (!success) {
        throw new Error("startTranscoding failed");
      }
      const levelBuffers = [];
      for (let levelIndex = 0; levelIndex < levels; ++levelIndex) {
        for (let sliceIndex = 0; sliceIndex < images; ++sliceIndex) {
          const transcodeSize = basisTexture.getImageTranscodedSizeInBytes(sliceIndex, levelIndex, basisTranscoderFormat);
          const levelBuffer = new Uint8Array(transcodeSize);
          const success2 = basisTexture.transcodeImage(levelBuffer, sliceIndex, levelIndex, basisTranscoderFormat, 1, 0);
          if (!success2) {
            throw new Error("transcodeImage failed");
          }
          levelBuffers.push(levelBuffer);
        }
      }
      return levelBuffers;
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": 3,
      // cTFBC3_RGBA
      "bc7-rgba-unorm": 6,
      // cTFBC7_RGBA,
      "etc2-rgba8unorm": 1,
      // cTFETC2_RGBA,
      "astc-4x4-unorm": 10,
      // cTFASTC_4x4_RGBA,
      // Uncompressed
      rgba8unorm: 13,
      // cTFRGBA32,
      rgba4unorm: 16
      // cTFRGBA4444,
    };
    function gpuFormatToBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "basis/basis_transcoder.js",
      wasmUrl: "basis/basis_transcoder.wasm"
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let basisPromise;
    async function getBasis() {
      if (!basisPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        basisPromise = new Promise((resolve) => {
          BASIS({
            locateFile: (_file) => absoluteWasmUrl
          }).then((module) => {
            module.initializeBasis();
            resolve(module.BasisFile);
          });
        });
      }
      return basisPromise;
    }
    async function fetchBasisTexture(url, BasisTexture) {
      const basisResponse = await fetch(url);
      if (basisResponse.ok) {
        const basisArrayBuffer = await basisResponse.arrayBuffer();
        return new BasisTexture(new Uint8Array(basisArrayBuffer));
      }
      throw new Error(\`Failed to load Basis texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const BasisTexture = await getBasis();
      const basisTexture = await fetchBasisTexture(url, BasisTexture);
      const levelBuffers = createLevelBuffers(basisTexture, basisTranscoderFormat);
      return {
        width: basisTexture.getImageWidth(0, 0),
        height: basisTexture.getImageHeight(0, 0),
        format: basisTranscodedTextureFormat,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getBasis();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type](message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let fu=null,hI=class{constructor(){fu||(fu=URL.createObjectURL(new Blob([LJ],{type:"application/javascript"}))),this.worker=new Worker(fu)}};hI.revokeObjectURL=function(){fu&&(URL.revokeObjectURL(fu),fu=null)};const bp={jsUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.js",wasmUrl:"https://files.pixijs.download/transcoders/basis/basis_transcoder.wasm"};function NJ(t){Object.assign(bp,t)}let $l;const pI={};function UJ(t){return $l||($l=new hI().worker,$l.onmessage=e=>{const{success:r,url:n,textureOptions:i}=e.data;r||console.warn("Failed to load Basis texture",n),pI[n](i)},$l.postMessage({type:"init",jsUrl:bp.jsUrl,wasmUrl:bp.wasmUrl,supportedTextures:t})),$l}function mI(t,e){const r=UJ(e);return new Promise(n=>{pI[t]=n,r.postMessage({type:"load",url:t})})}const GJ={extension:{type:O.LoadParser,priority:_n.High,name:"loadBasis"},name:"loadBasis",test(t){return Ln(t,[".basis"])},async load(t,e,r){const n=await qf(),i=await mI(t,n),s=new Xf(i);return co(s,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};function zJ(t,e){const r=t.getNumImages(),n=t.getNumLevels(0);if(!t.startTranscoding())throw new Error("startTranscoding failed");const s=[];for(let o=0;o<n;++o)for(let a=0;a<r;++a){const u=t.getImageTranscodedSizeInBytes(a,o,e),l=new Uint8Array(u);if(!t.transcodeImage(l,a,o,e,1,0))throw new Error("transcodeImage failed");s.push(l)}return s}const $J={"bc3-rgba-unorm":3,"bc7-rgba-unorm":6,"etc2-rgba8unorm":1,"astc-4x4-unorm":10,rgba8unorm:13,rgba4unorm:16};function jJ(t){const e=$J[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const HJ={MAGIC:0,SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19,PF_FLAGS:20,FOURCC:21,RGB_BITCOUNT:22,R_BIT_MASK:23,G_BIT_MASK:24,B_BIT_MASK:25,A_BIT_MASK:26},VJ={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var M2=(t=>(t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",t))(M2||{}),I2=(t=>(t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",t))(I2||{});function Ht(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var Mr=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.R8G8B8=20]="R8G8B8",t[t.A8R8G8B8=21]="A8R8G8B8",t[t.X8R8G8B8=22]="X8R8G8B8",t[t.R5G6B5=23]="R5G6B5",t[t.X1R5G5B5=24]="X1R5G5B5",t[t.A1R5G5B5=25]="A1R5G5B5",t[t.A4R4G4B4=26]="A4R4G4B4",t[t.R3G3B2=27]="R3G3B2",t[t.A8=28]="A8",t[t.A8R3G3B2=29]="A8R3G3B2",t[t.X4R4G4B4=30]="X4R4G4B4",t[t.A2B10G10R10=31]="A2B10G10R10",t[t.A8B8G8R8=32]="A8B8G8R8",t[t.X8B8G8R8=33]="X8B8G8R8",t[t.G16R16=34]="G16R16",t[t.A2R10G10B10=35]="A2R10G10B10",t[t.A16B16G16R16=36]="A16B16G16R16",t[t.A8P8=40]="A8P8",t[t.P8=41]="P8",t[t.L8=50]="L8",t[t.A8L8=51]="A8L8",t[t.A4L4=52]="A4L4",t[t.V8U8=60]="V8U8",t[t.L6V5U5=61]="L6V5U5",t[t.X8L8V8U8=62]="X8L8V8U8",t[t.Q8W8V8U8=63]="Q8W8V8U8",t[t.V16U16=64]="V16U16",t[t.A2W10V10U10=67]="A2W10V10U10",t[t.Q16W16V16U16=110]="Q16W16V16U16",t[t.R16F=111]="R16F",t[t.G16R16F=112]="G16R16F",t[t.A16B16G16R16F=113]="A16B16G16R16F",t[t.R32F=114]="R32F",t[t.G32R32F=115]="G32R32F",t[t.A32B32G32R32F=116]="A32B32G32R32F",t[t.UYVY=Ht("UYVY")]="UYVY",t[t.R8G8_B8G8=Ht("RGBG")]="R8G8_B8G8",t[t.YUY2=Ht("YUY2")]="YUY2",t[t.D3DFMT_G8R8_G8B8=Ht("GRGB")]="D3DFMT_G8R8_G8B8",t[t.DXT1=Ht("DXT1")]="DXT1",t[t.DXT2=Ht("DXT2")]="DXT2",t[t.DXT3=Ht("DXT3")]="DXT3",t[t.DXT4=Ht("DXT4")]="DXT4",t[t.DXT5=Ht("DXT5")]="DXT5",t[t.ATI1=Ht("ATI1")]="ATI1",t[t.AT1N=Ht("AT1N")]="AT1N",t[t.ATI2=Ht("ATI2")]="ATI2",t[t.AT2N=Ht("AT2N")]="AT2N",t[t.BC4U=Ht("BC4U")]="BC4U",t[t.BC4S=Ht("BC4S")]="BC4S",t[t.BC5U=Ht("BC5U")]="BC5U",t[t.BC5S=Ht("BC5S")]="BC5S",t[t.DX10=Ht("DX10")]="DX10",t))(Mr||{});const ub={[Mr.DXT1]:"bc1-rgba-unorm",[Mr.DXT2]:"bc2-rgba-unorm",[Mr.DXT3]:"bc2-rgba-unorm",[Mr.DXT4]:"bc3-rgba-unorm",[Mr.DXT5]:"bc3-rgba-unorm",[Mr.ATI1]:"bc4-r-unorm",[Mr.BC4U]:"bc4-r-unorm",[Mr.BC4S]:"bc4-r-snorm",[Mr.ATI2]:"bc5-rg-unorm",[Mr.BC5U]:"bc5-rg-unorm",[Mr.BC5S]:"bc5-rg-snorm",36:"rgba16uint",110:"rgba16sint",111:"r16float",112:"rg16float",113:"rgba16float",114:"r32float",115:"rg32float",116:"rgba32float"},Ir={70:"bc1-rgba-unorm",71:"bc1-rgba-unorm",72:"bc1-rgba-unorm-srgb",73:"bc2-rgba-unorm",74:"bc2-rgba-unorm",75:"bc2-rgba-unorm-srgb",76:"bc3-rgba-unorm",77:"bc3-rgba-unorm",78:"bc3-rgba-unorm-srgb",79:"bc4-r-unorm",80:"bc4-r-unorm",81:"bc4-r-snorm",82:"bc5-rg-unorm",83:"bc5-rg-unorm",84:"bc5-rg-snorm",94:"bc6h-rgb-ufloat",95:"bc6h-rgb-ufloat",96:"bc6h-rgb-float",97:"bc7-rgba-unorm",98:"bc7-rgba-unorm",99:"bc7-rgba-unorm-srgb",28:"rgba8unorm",29:"rgba8unorm-srgb",87:"bgra8unorm",91:"bgra8unorm-srgb",41:"r32float",49:"rg8unorm",56:"r16uint",61:"r8unorm",24:"rgb10a2unorm",11:"rgba16uint",13:"rgba16sint",10:"rgba16float",54:"r16float",34:"rg16float",16:"rg32float",2:"rgba32float"},ve={MAGIC_VALUE:542327876,MAGIC_SIZE:4,HEADER_SIZE:124,HEADER_DX10_SIZE:20,PIXEL_FORMAT_FLAGS:{ALPHAPIXELS:1,ALPHA:2,FOURCC:4,RGB:64,RGBA:65,YUV:512,LUMINANCE:131072,LUMINANCEA:131073},RESOURCE_MISC_TEXTURECUBE:4,HEADER_FIELDS:HJ,HEADER_DX10_FIELDS:VJ,DXGI_FORMAT:M2,D3D10_RESOURCE_DIMENSION:I2,D3DFMT:Mr},gI={"bc1-rgba-unorm":8,"bc1-rgba-unorm-srgb":8,"bc2-rgba-unorm":16,"bc2-rgba-unorm-srgb":16,"bc3-rgba-unorm":16,"bc3-rgba-unorm-srgb":16,"bc4-r-unorm":8,"bc4-r-snorm":8,"bc5-rg-unorm":16,"bc5-rg-snorm":16,"bc6h-rgb-ufloat":16,"bc6h-rgb-float":16,"bc7-rgba-unorm":16,"bc7-rgba-unorm-srgb":16};function vI(t,e){const{format:r,fourCC:n,width:i,height:s,dataOffset:o,mipmapCount:a}=XJ(t);if(!e.includes(r))throw new Error(`Unsupported texture format: ${n} ${r}, supported: ${e}`);if(a<=1)return{format:r,width:i,height:s,resource:[new Uint8Array(t,o)],alphaMode:"no-premultiply-alpha"};const u=WJ(r,i,s,o,a,t);return{format:r,width:i,height:s,resource:u,alphaMode:"no-premultiply-alpha"}}function WJ(t,e,r,n,i,s){const o=[],a=gI[t];let u=e,l=r,c=n;for(let f=0;f<i;++f){const d=Math.ceil(Math.max(4,u)/4)*4,h=Math.ceil(Math.max(4,l)/4)*4,p=a?d/4*h/4*a:u*l*4,m=new Uint8Array(s,c,p);o.push(m),c+=p,u=Math.max(u>>1,1),l=Math.max(l>>1,1)}return o}function XJ(t){const e=new Uint32Array(t,0,ve.HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(e[ve.HEADER_FIELDS.MAGIC]!==ve.MAGIC_VALUE)throw new Error("Invalid magic number in DDS header");const r=e[ve.HEADER_FIELDS.HEIGHT],n=e[ve.HEADER_FIELDS.WIDTH],i=Math.max(1,e[ve.HEADER_FIELDS.MIPMAP_COUNT]),s=e[ve.HEADER_FIELDS.PF_FLAGS],o=e[ve.HEADER_FIELDS.FOURCC],a=qJ(e,s,o,t),u=ve.MAGIC_SIZE+ve.HEADER_SIZE+(o===ve.D3DFMT.DX10?ve.HEADER_DX10_SIZE:0);return{format:a,fourCC:o,width:n,height:r,dataOffset:u,mipmapCount:i}}function qJ(t,e,r,n){if(e&ve.PIXEL_FORMAT_FLAGS.FOURCC){if(r===ve.D3DFMT.DX10){const i=new Uint32Array(n,ve.MAGIC_SIZE+ve.HEADER_SIZE,ve.HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT);if(i[ve.HEADER_DX10_FIELDS.MISC_FLAG]===ve.RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(i[ve.HEADER_DX10_FIELDS.RESOURCE_DIMENSION]===ve.D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSParser does not supported 3D texture data");const a=i[ve.HEADER_DX10_FIELDS.DXGI_FORMAT];if(a in Ir)return Ir[a];throw new Error(`DDSParser cannot parse texture data with DXGI format ${a}`)}if(r in ub)return ub[r];throw new Error(`DDSParser cannot parse texture data with fourCC format ${r}`)}if(e&ve.PIXEL_FORMAT_FLAGS.RGB||e&ve.PIXEL_FORMAT_FLAGS.RGBA)return YJ(t);throw e&ve.PIXEL_FORMAT_FLAGS.YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):e&ve.PIXEL_FORMAT_FLAGS.LUMINANCE||e&ve.PIXEL_FORMAT_FLAGS.LUMINANCEA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):e&ve.PIXEL_FORMAT_FLAGS.ALPHA||e&ve.PIXEL_FORMAT_FLAGS.ALPHAPIXELS?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}function YJ(t){const e=t[ve.HEADER_FIELDS.RGB_BITCOUNT],r=t[ve.HEADER_FIELDS.R_BIT_MASK],n=t[ve.HEADER_FIELDS.G_BIT_MASK],i=t[ve.HEADER_FIELDS.B_BIT_MASK],s=t[ve.HEADER_FIELDS.A_BIT_MASK];switch(e){case 32:if(r===255&&n===65280&&i===16711680&&s===4278190080)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R8G8B8A8_UNORM];if(r===16711680&&n===65280&&i===255&&s===4278190080)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_B8G8R8A8_UNORM];if(r===1072693248&&n===1047552&&i===1023&&s===3221225472)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R10G10B10A2_UNORM];if(r===65535&&n===4294901760&&i===0&&s===0)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R16G16_UNORM];if(r===4294967295&&n===0&&i===0&&s===0)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R32_FLOAT];break;case 24:break;case 16:if(r===31744&&n===992&&i===31&&s===32768)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_B5G5R5A1_UNORM];if(r===63488&&n===2016&&i===31&&s===0)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_B5G6R5_UNORM];if(r===3840&&n===240&&i===15&&s===61440)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_B4G4R4A4_UNORM];if(r===255&&n===0&&i===0&&s===65280)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R8G8_UNORM];if(r===65535&&n===0&&i===0&&s===0)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R16_UNORM];break;case 8:if(r===255&&n===0&&i===0&&s===0)return Ir[ve.DXGI_FORMAT.DXGI_FORMAT_R8_UNORM];break}throw new Error(`DDSParser does not support uncompressed texture with configuration:
                bitCount = ${e}, rBitMask = ${r}, gBitMask = ${n}, aBitMask = ${s}`)}const KJ={extension:{type:O.LoadParser,priority:_n.High,name:"loadDDS"},name:"loadDDS",test(t){return Ln(t,[".dds"])},async load(t,e,r){const n=await qf(),s=await(await fetch(t)).arrayBuffer(),o=vI(s,n),a=new Xf(o);return co(a,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};var yI=(t=>(t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGBA=6408]="RGBA",t[t.RGBA8UI=36220]="RGBA8UI",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.RGBA8I=36238]="RGBA8I",t[t.RGBA8=32856]="RGBA8",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(yI||{});const ZJ={33776:"bc1-rgba-unorm",33777:"bc1-rgba-unorm",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",35916:"bc1-rgba-unorm-srgb",35917:"bc1-rgba-unorm-srgb",35918:"bc2-rgba-unorm-srgb",35919:"bc3-rgba-unorm-srgb",36283:"bc4-r-unorm",36284:"bc4-r-snorm",36285:"bc5-rg-unorm",36286:"bc5-rg-snorm",37488:"eac-r11unorm",37490:"eac-rg11snorm",37492:"etc2-rgb8unorm",37496:"etc2-rgba8unorm",37493:"etc2-rgb8unorm-srgb",37497:"etc2-rgba8unorm-srgb",37494:"etc2-rgb8a1unorm",37495:"etc2-rgb8a1unorm-srgb",37808:"astc-4x4-unorm",37840:"astc-4x4-unorm-srgb",37809:"astc-5x4-unorm",37841:"astc-5x4-unorm-srgb",37810:"astc-5x5-unorm",37842:"astc-5x5-unorm-srgb",37811:"astc-6x5-unorm",37843:"astc-6x5-unorm-srgb",37812:"astc-6x6-unorm",37844:"astc-6x6-unorm-srgb",37813:"astc-8x5-unorm",37845:"astc-8x5-unorm-srgb",37814:"astc-8x6-unorm",37846:"astc-8x6-unorm-srgb",37815:"astc-8x8-unorm",37847:"astc-8x8-unorm-srgb",37816:"astc-10x5-unorm",37848:"astc-10x5-unorm-srgb",37817:"astc-10x6-unorm",37849:"astc-10x6-unorm-srgb",37818:"astc-10x8-unorm",37850:"astc-10x8-unorm-srgb",37819:"astc-10x10-unorm",37851:"astc-10x10-unorm-srgb",37820:"astc-12x10-unorm",37852:"astc-12x10-unorm-srgb",37821:"astc-12x12-unorm",37853:"astc-12x12-unorm-srgb",36492:"bc7-rgba-unorm",36493:"bc7-rgba-unorm-srgb",36494:"bc6h-rgb-float",36495:"bc6h-rgb-ufloat",35907:"rgba8unorm-srgb",36759:"rgba8snorm",36220:"rgba8uint",36238:"rgba8sint",6408:"rgba8unorm"},QJ=[171,75,84,88,32,49,49,187,13,10,26,10],JJ={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},eee=64,tee=67305985,ree={5121:1,5123:2,5124:4,5125:4,5126:4,36193:8},nee={6408:4,6407:3,33319:2,6403:1,6409:1,6410:2,6406:1},iee={32819:2,32820:2,33635:2},see={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,36283:.5,36284:.5,36285:1,36286:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,37808:1,37840:1,37809:.8,37841:.8,37810:.64,37842:.64,37811:.53375,37843:.53375,37812:.445,37844:.445,37813:.4,37845:.4,37814:.33375,37846:.33375,37815:.25,37847:.25,37816:.32,37848:.32,37817:.26625,37849:.26625,37818:.2,37850:.2,37819:.16,37851:.16,37820:.13375,37852:.13375,37821:.11125,37853:.11125,36492:1,36493:1,36494:1,36495:1},ht={FILE_HEADER_SIZE:eee,FILE_IDENTIFIER:QJ,FORMATS_TO_COMPONENTS:nee,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:see,INTERNAL_FORMAT_TO_TEXTURE_FORMATS:ZJ,FIELDS:JJ,TYPES_TO_BYTES_PER_COMPONENT:ree,TYPES_TO_BYTES_PER_PIXEL:iee,ENDIANNESS:tee};function _I(t,e){const r=new DataView(t);if(!lee(r))throw new Error("Invalid KTX identifier in header");const{littleEndian:n,glType:i,glFormat:s,glInternalFormat:o,pixelWidth:a,pixelHeight:u,numberOfMipmapLevels:l,offset:c}=uee(r),f=ht.INTERNAL_FORMAT_TO_TEXTURE_FORMATS[o];if(!f)throw new Error(`Unknown texture format ${o}`);if(!e.includes(f))throw new Error(`Unsupported texture format: ${f}, supportedFormats: ${e}`);const d=aee(i,s,o),h=oee(r,i,d,a,u,c,l,n);return{format:f,width:a,height:u,resource:h,alphaMode:"no-premultiply-alpha"}}function oee(t,e,r,n,i,s,o,a){const u=n+3&-4,l=i+3&-4;let c=n*i;e===0&&(c=u*l);let f=c*r,d=n,h=i,p=u,m=l,g=s;const v=new Array(o);for(let y=0;y<o;y++){const b=t.getUint32(g,a);let _=g+4;v[y]=new Uint8Array(t.buffer,_,f),_+=f,g+=b+4,g=g%4!==0?g+4-g%4:g,d=d>>1||1,h=h>>1||1,p=d+4-1&~(4-1),m=h+4-1&~(4-1),f=p*m*r}return v}function aee(t,e,r){let n=ht.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[r];if(t!==0&&(ht.TYPES_TO_BYTES_PER_COMPONENT[t]?n=ht.TYPES_TO_BYTES_PER_COMPONENT[t]*ht.FORMATS_TO_COMPONENTS[e]:n=ht.TYPES_TO_BYTES_PER_PIXEL[t]),n===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");return n}function uee(t){const e=t.getUint32(ht.FIELDS.ENDIANNESS,!0)===ht.ENDIANNESS,r=t.getUint32(ht.FIELDS.GL_TYPE,e),n=t.getUint32(ht.FIELDS.GL_FORMAT,e),i=t.getUint32(ht.FIELDS.GL_INTERNAL_FORMAT,e),s=t.getUint32(ht.FIELDS.PIXEL_WIDTH,e),o=t.getUint32(ht.FIELDS.PIXEL_HEIGHT,e)||1,a=t.getUint32(ht.FIELDS.PIXEL_DEPTH,e)||1,u=t.getUint32(ht.FIELDS.NUMBER_OF_ARRAY_ELEMENTS,e)||1,l=t.getUint32(ht.FIELDS.NUMBER_OF_FACES,e),c=t.getUint32(ht.FIELDS.NUMBER_OF_MIPMAP_LEVELS,e),f=t.getUint32(ht.FIELDS.BYTES_OF_KEY_VALUE_DATA,e);if(o===0||a!==1)throw new Error("Only 2D textures are supported");if(l!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(u!==1)throw new Error("WebGL does not support array textures");return{littleEndian:e,glType:r,glFormat:n,glInternalFormat:i,pixelWidth:s,pixelHeight:o,numberOfMipmapLevels:c,offset:ht.FILE_HEADER_SIZE+f}}function lee(t){for(let e=0;e<ht.FILE_IDENTIFIER.length;e++)if(t.getUint8(e)!==ht.FILE_IDENTIFIER[e])return!1;return!0}const cee={extension:{type:O.LoadParser,priority:_n.High,name:"loadKTX"},name:"loadKTX",test(t){return Ln(t,".ktx")},async load(t,e,r){const n=await qf(),s=await(await fetch(t)).arrayBuffer(),o=_I(s,n),a=new Xf(o);return co(a,r,t)},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},fee=`(function () {
    'use strict';

    const converters = {
      rgb8unorm: {
        convertedFormat: "rgba8unorm",
        convertFunction: convertRGBtoRGBA
      },
      "rgb8unorm-srgb": {
        convertedFormat: "rgba8unorm-srgb",
        convertFunction: convertRGBtoRGBA
      }
    };
    function convertFormatIfRequired(textureOptions) {
      const format = textureOptions.format;
      if (converters[format]) {
        const convertFunction = converters[format].convertFunction;
        const levelBuffers = textureOptions.resource;
        for (let i = 0; i < levelBuffers.length; i++) {
          levelBuffers[i] = convertFunction(levelBuffers[i]);
        }
        textureOptions.format = converters[format].convertedFormat;
      }
    }
    function convertRGBtoRGBA(levelBuffer) {
      const pixelCount = levelBuffer.byteLength / 3;
      const levelBufferWithAlpha = new Uint32Array(pixelCount);
      for (let i = 0; i < pixelCount; ++i) {
        levelBufferWithAlpha[i] = levelBuffer[i * 3] + (levelBuffer[i * 3 + 1] << 8) + (levelBuffer[i * 3 + 2] << 16) + 4278190080;
      }
      return new Uint8Array(levelBufferWithAlpha.buffer);
    }

    function createLevelBuffersFromKTX(ktxTexture) {
      const levelBuffers = [];
      for (let i = 0; i < ktxTexture.numLevels; i++) {
        const imageData = ktxTexture.getImageData(i, 0, 0);
        const levelBuffer = new Uint8Array(imageData.byteLength);
        levelBuffer.set(imageData);
        levelBuffers.push(levelBuffer);
      }
      return levelBuffers;
    }

    const glFormatToGPUFormatMap = {
      6408: "rgba8unorm",
      32856: "bgra8unorm",
      //
      32857: "rgb10a2unorm",
      33189: "depth16unorm",
      33190: "depth24plus",
      33321: "r8unorm",
      33323: "rg8unorm",
      33325: "r16float",
      33326: "r32float",
      33327: "rg16float",
      33328: "rg32float",
      33329: "r8sint",
      33330: "r8uint",
      33331: "r16sint",
      33332: "r16uint",
      33333: "r32sint",
      33334: "r32uint",
      33335: "rg8sint",
      33336: "rg8uint",
      33337: "rg16sint",
      33338: "rg16uint",
      33339: "rg32sint",
      33340: "rg32uint",
      33778: "bc2-rgba-unorm",
      33779: "bc3-rgba-unorm",
      34836: "rgba32float",
      34842: "rgba16float",
      35056: "depth24plus-stencil8",
      35898: "rg11b10ufloat",
      35901: "rgb9e5ufloat",
      35907: "rgba8unorm-srgb",
      // bgra8unorm-srgb
      36012: "depth32float",
      36013: "depth32float-stencil8",
      36168: "stencil8",
      36208: "rgba32uint",
      36214: "rgba16uint",
      36220: "rgba8uint",
      36226: "rgba32sint",
      36232: "rgba16sint",
      36238: "rgba8sint",
      36492: "bc7-rgba-unorm",
      36756: "r8snorm",
      36757: "rg8snorm",
      36759: "rgba8snorm",
      37496: "etc2-rgba8unorm",
      37808: "astc-4x4-unorm"
    };
    function glFormatToGPUFormat(glInternalFormat) {
      const format = glFormatToGPUFormatMap[glInternalFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported glInternalFormat: \${glInternalFormat}\`);
    }

    const vkFormatToGPUFormatMap = {
      23: "rgb8unorm",
      // VK_FORMAT_R8G8B8_UNORM
      37: "rgba8unorm",
      // VK_FORMAT_R8G8B8A8_UNORM
      43: "rgba8unorm-srgb"
      // VK_FORMAT_R8G8B8A8_SRGB
      // TODO add more!
    };
    function vkFormatToGPUFormat(vkFormat) {
      const format = vkFormatToGPUFormatMap[vkFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported VkFormat: \${vkFormat}\`);
    }

    function getTextureFormatFromKTXTexture(ktxTexture) {
      if (ktxTexture.classId === 2) {
        return vkFormatToGPUFormat(ktxTexture.vkFormat);
      }
      return glFormatToGPUFormat(ktxTexture.glInternalformat);
    }

    const gpuFormatToBasisTranscoderFormatMap = {
      "bc3-rgba-unorm": "BC3_RGBA",
      "bc7-rgba-unorm": "BC7_M5_RGBA",
      "etc2-rgba8unorm": "ETC2_RGBA",
      "astc-4x4-unorm": "ASTC_4x4_RGBA",
      // Uncompressed
      rgba8unorm: "RGBA32",
      rg11b10ufloat: "R11F_G11F_B10F"
    };
    function gpuFormatToKTXBasisTranscoderFormat(transcoderFormat) {
      const format = gpuFormatToBasisTranscoderFormatMap[transcoderFormat];
      if (format) {
        return format;
      }
      throw new Error(\`Unsupported transcoderFormat: \${transcoderFormat}\`);
    }

    const settings = {
      jsUrl: "",
      wasmUrl: ""
    };
    let basisTranscoderFormat;
    let basisTranscodedTextureFormat;
    let ktxPromise;
    async function getKTX() {
      if (!ktxPromise) {
        const absoluteJsUrl = new URL(settings.jsUrl, location.origin).href;
        const absoluteWasmUrl = new URL(settings.wasmUrl, location.origin).href;
        importScripts(absoluteJsUrl);
        ktxPromise = new Promise((resolve) => {
          LIBKTX({
            locateFile: (_file) => absoluteWasmUrl
          }).then((libktx) => {
            resolve(libktx);
          });
        });
      }
      return ktxPromise;
    }
    async function fetchKTXTexture(url, ktx) {
      const ktx2Response = await fetch(url);
      if (ktx2Response.ok) {
        const ktx2ArrayBuffer = await ktx2Response.arrayBuffer();
        return new ktx.ktxTexture(new Uint8Array(ktx2ArrayBuffer));
      }
      throw new Error(\`Failed to load KTX(2) texture: \${url}\`);
    }
    const preferredTranscodedFormat = [
      "bc7-rgba-unorm",
      "astc-4x4-unorm",
      "etc2-rgba8unorm",
      "bc3-rgba-unorm",
      "rgba8unorm"
    ];
    async function load(url) {
      const ktx = await getKTX();
      const ktxTexture = await fetchKTXTexture(url, ktx);
      let format;
      if (ktxTexture.needsTranscoding) {
        format = basisTranscodedTextureFormat;
        const transcodeFormat = ktx.TranscodeTarget[basisTranscoderFormat];
        const result = ktxTexture.transcodeBasis(transcodeFormat, 0);
        if (result !== ktx.ErrorCode.SUCCESS) {
          throw new Error("Unable to transcode basis texture.");
        }
      } else {
        format = getTextureFormatFromKTXTexture(ktxTexture);
      }
      const levelBuffers = createLevelBuffersFromKTX(ktxTexture);
      const textureOptions = {
        width: ktxTexture.baseWidth,
        height: ktxTexture.baseHeight,
        format,
        mipLevelCount: ktxTexture.numLevels,
        resource: levelBuffers,
        alphaMode: "no-premultiply-alpha"
      };
      convertFormatIfRequired(textureOptions);
      return textureOptions;
    }
    async function init(jsUrl, wasmUrl, supportedTextures) {
      if (jsUrl)
        settings.jsUrl = jsUrl;
      if (wasmUrl)
        settings.wasmUrl = wasmUrl;
      basisTranscodedTextureFormat = preferredTranscodedFormat.filter((format) => supportedTextures.includes(format))[0];
      basisTranscoderFormat = gpuFormatToKTXBasisTranscoderFormat(basisTranscodedTextureFormat);
      await getKTX();
    }
    const messageHandlers = {
      init: async (data) => {
        const { jsUrl, wasmUrl, supportedTextures } = data;
        await init(jsUrl, wasmUrl, supportedTextures);
      },
      load: async (data) => {
        try {
          const textureOptions = await load(data.url);
          return {
            type: "load",
            url: data.url,
            success: true,
            textureOptions,
            transferables: textureOptions.resource?.map((arr) => arr.buffer)
          };
        } catch (e) {
          throw e;
        }
      }
    };
    self.onmessage = async (messageEvent) => {
      const message = messageEvent.data;
      const response = await messageHandlers[message.type]?.(message);
      if (response) {
        self.postMessage(response, response.transferables);
      }
    };

})();
`;let du=null;class bI{constructor(){du||(du=URL.createObjectURL(new Blob([fee],{type:"application/javascript"}))),this.worker=new Worker(du)}}bI.revokeObjectURL=function(){du&&(URL.revokeObjectURL(du),du=null)};const xp={jsUrl:"https://files.pixijs.download/transcoders/ktx/libktx.js",wasmUrl:"https://files.pixijs.download/transcoders/ktx/libktx.wasm"};function dee(t){Object.assign(xp,t)}let jl;const xI={};function hee(t){return jl||(jl=new bI().worker,jl.onmessage=e=>{const{success:r,url:n,textureOptions:i}=e.data;r||console.warn("Failed to load KTX texture",n),xI[n](i)},jl.postMessage({type:"init",jsUrl:xp.jsUrl,wasmUrl:xp.wasmUrl,supportedTextures:t})),jl}function SI(t,e){const r=hee(e);return new Promise(n=>{xI[t]=n,r.postMessage({type:"load",url:t})})}const pee={extension:{type:O.LoadParser,priority:_n.High,name:"loadKTX2"},name:"loadKTX2",test(t){return Ln(t,".ktx2")},async load(t,e,r){const n=await qf(),i=await SI(t,n),s=new Xf(i);return co(s,r,t)},async unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}},D0={rgb8unorm:{convertedFormat:"rgba8unorm",convertFunction:fA},"rgb8unorm-srgb":{convertedFormat:"rgba8unorm-srgb",convertFunction:fA}};function mee(t){const e=t.format;if(D0[e]){const r=D0[e].convertFunction,n=t.resource;for(let i=0;i<n.length;i++)n[i]=r(n[i]);t.format=D0[e].convertedFormat}}function fA(t){const e=t.byteLength/3,r=new Uint32Array(e);for(let n=0;n<e;++n)r[n]=t[n*3]+(t[n*3+1]<<8)+(t[n*3+2]<<16)+4278190080;return new Uint8Array(r.buffer)}function gee(t){const e=[];for(let r=0;r<t.numLevels;r++){const n=t.getImageData(r,0,0),i=new Uint8Array(n.byteLength);i.set(n),e.push(i)}return e}const vee={6408:"rgba8unorm",32856:"bgra8unorm",32857:"rgb10a2unorm",33189:"depth16unorm",33190:"depth24plus",33321:"r8unorm",33323:"rg8unorm",33325:"r16float",33326:"r32float",33327:"rg16float",33328:"rg32float",33329:"r8sint",33330:"r8uint",33331:"r16sint",33332:"r16uint",33333:"r32sint",33334:"r32uint",33335:"rg8sint",33336:"rg8uint",33337:"rg16sint",33338:"rg16uint",33339:"rg32sint",33340:"rg32uint",33778:"bc2-rgba-unorm",33779:"bc3-rgba-unorm",34836:"rgba32float",34842:"rgba16float",35056:"depth24plus-stencil8",35898:"rg11b10ufloat",35901:"rgb9e5ufloat",35907:"rgba8unorm-srgb",36012:"depth32float",36013:"depth32float-stencil8",36168:"stencil8",36208:"rgba32uint",36214:"rgba16uint",36220:"rgba8uint",36226:"rgba32sint",36232:"rgba16sint",36238:"rgba8sint",36492:"bc7-rgba-unorm",36756:"r8snorm",36757:"rg8snorm",36759:"rgba8snorm",37496:"etc2-rgba8unorm",37808:"astc-4x4-unorm"};function wI(t){const e=vee[t];if(e)return e;throw new Error(`Unsupported glInternalFormat: ${t}`)}const yee={23:"rgb8unorm",37:"rgba8unorm",43:"rgba8unorm-srgb"};function EI(t){const e=yee[t];if(e)return e;throw new Error(`Unsupported VkFormat: ${t}`)}function _ee(t){return t.classId===2?EI(t.vkFormat):wI(t.glInternalformat)}const bee={"bc3-rgba-unorm":"BC3_RGBA","bc7-rgba-unorm":"BC7_M5_RGBA","etc2-rgba8unorm":"ETC2_RGBA","astc-4x4-unorm":"ASTC_4x4_RGBA",rgba8unorm:"RGBA32",rg11b10ufloat:"R11F_G11F_B10F"};function xee(t){const e=bee[t];if(e)return e;throw new Error(`Unsupported transcoderFormat: ${t}`)}const Sp=["basis","bc7","bc6h","astc","etc2","bc5","bc4","bc3","bc2","bc1","eac"],See={extension:O.ResolveParser,test:t=>Ln(t,[".ktx",".ktx2",".dds"]),parse:t=>{var n;let e;const r=t.split(".");if(r.length>2){const i=r[r.length-2];Sp.includes(i)&&(e=i)}else e=r[r.length-1];return{resolution:parseFloat(((n=lo.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e,src:t}}};let jd;const wee={extension:{type:O.DetectionParser,priority:2},test:async()=>!!(await Hf()||jf()),add:async t=>{const e=await D2();return jd=Eee(e),[...jd,...t]},remove:async t=>jd?t.filter(e=>!(e in jd)):t};function Eee(t){const e=["basis"],r={};return t.forEach(n=>{const i=n.split("-")[0];i&&!r[i]&&(r[i]=!0,e.push(i))}),e.sort((n,i)=>{const s=Sp.indexOf(n),o=Sp.indexOf(i);return s===-1?1:o===-1?-1:s-o}),e}const Cee=new Ut,lb=class{cull(e,r,n=!0){this._cullRecursive(e,r,n)}_cullRecursive(e,r,n=!0){if(e.cullable&&e.measurable&&e.includeInBuild){const i=e.cullArea??zf(e,n,Cee);e.culled=i.x>=r.x+r.width||i.y>=r.y+r.height||i.x+i.width<=r.x||i.y+i.height<=r.y}else e.culled=!1;if(!(!e.cullableChildren||e.culled||!e.renderable||!e.measurable||!e.includeInBuild))for(let i=0;i<e.children.length;i++)this._cullRecursive(e.children[i],r,n)}};lb.shared=new lb;let CI=lb;class TI{static init(){this._renderRef=this.render.bind(this),this.render=()=>{CI.shared.cull(this.stage,this.renderer.screen),this.renderer.render({container:this.stage})}}static destroy(){this.render=this._renderRef}}TI.extension={priority:10,type:O.Application,name:"culler"};class Tee extends Ni{constructor(e={}){const{element:r,anchor:n,...i}=e;super({label:"DOMContainer",...i}),this.renderPipeId="dom",this.batched=!1,this._anchor=new Le(0,0),n&&(this.anchor=n),this.element=e.element||document.createElement("div")}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set element(e){this._element!==e&&(this._element=e,this.onViewUpdate())}get element(){return this._element}updateBounds(){const e=this._bounds,r=this._element;if(!r){e.minX=0,e.minY=0,e.maxX=0,e.maxY=0;return}const{offsetWidth:n,offsetHeight:i}=r;e.minX=0,e.maxX=n,e.minY=0,e.maxY=i}destroy(e=!1){var r,n;super.destroy(e),(n=(r=this._element)==null?void 0:r.parentNode)==null||n.removeChild(this._element),this._element=null,this._anchor=null}}class F2{constructor(e){this._destroyRenderableBound=this.destroyRenderable.bind(this),this._attachedDomElements=[],this._renderer=e,this._renderer.runners.postrender.add(this),this._domElement=document.createElement("div"),this._domElement.style.position="absolute",this._domElement.style.top="0",this._domElement.style.left="0",this._domElement.style.pointerEvents="none",this._domElement.style.zIndex="1000"}addRenderable(e,r){this._attachedDomElements.includes(e)||(this._attachedDomElements.push(e),e.on("destroyed",this._destroyRenderableBound))}updateRenderable(e){}validateRenderable(e){return!0}destroyRenderable(e){const r=this._attachedDomElements.indexOf(e);r!==-1&&this._attachedDomElements.splice(r,1),e.off("destroyed",this._destroyRenderableBound)}postrender(){var n;const e=this._attachedDomElements;if(e.length===0){this._domElement.remove();return}const r=this._renderer.view.canvas;this._domElement.parentNode!==r.parentNode&&((n=r.parentNode)==null||n.appendChild(this._domElement)),this._domElement.style.transform=`translate(${r.offsetLeft}px, ${r.offsetTop}px)`;for(let i=0;i<e.length;i++){const s=e[i],o=s.element;if(!s.parent||s.globalDisplayStatus<7)o.remove(),e.splice(i,1),i--;else{this._domElement.contains(o)||(o.style.position="absolute",o.style.pointerEvents="auto",this._domElement.appendChild(o));const a=s.worldTransform,u=s._anchor,l=s.width*u.x,c=s.height*u.y;o.style.transformOrigin=`${l}px ${c}px`,o.style.transform=`matrix(${a.a}, ${a.b}, ${a.c}, ${a.d}, ${a.tx-l}, ${a.ty-c})`,o.style.opacity=s.groupAlpha.toString()}}}destroy(){this._renderer.runners.postrender.remove(this);for(let e=0;e<this._attachedDomElements.length;e++){const r=this._attachedDomElements[e];r.off("destroyed",this._destroyRenderableBound),r.element.remove()}this._attachedDomElements.length=0,this._domElement.remove(),this._renderer=null}}F2.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"dom"};var fo={},ds={};function Aee(t,e,r){if(r===void 0&&(r=Array.prototype),t&&typeof r.find=="function")return r.find.call(t,e);for(var n=0;n<t.length;n++)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];if(e.call(void 0,i,n,t))return i}}function L2(t,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(t):t}function Pee(t,e){if(t===null||typeof t!="object")throw new TypeError("target is not an object");for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}var AI=L2({HTML:"text/html",isHTML:function(t){return t===AI.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),PI=L2({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===PI.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ds.assign=Pee;ds.find=Aee;ds.freeze=L2;ds.MIME_TYPE=AI;ds.NAMESPACE=PI;var RI=ds,Ti=RI.find,pf=RI.NAMESPACE;function Ree(t){return t!==""}function Oee(t){return t?t.split(/[\t\n\f\r ]+/).filter(Ree):[]}function Bee(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function dA(t){if(!t)return[];var e=Oee(t);return Object.keys(e.reduce(Bee,{}))}function kee(t){return function(e){return t&&t.indexOf(e)!==-1}}function Yf(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Kr(t,e){var r=t.prototype;if(!(r instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,Yf(r,n),t.prototype=r=n}r.constructor!=t&&(typeof t!="function"&&console.error("unknown Class:"+t),r.constructor=t)}var Zr={},Yn=Zr.ELEMENT_NODE=1,Pu=Zr.ATTRIBUTE_NODE=2,wp=Zr.TEXT_NODE=3,OI=Zr.CDATA_SECTION_NODE=4,BI=Zr.ENTITY_REFERENCE_NODE=5,Dee=Zr.ENTITY_NODE=6,kI=Zr.PROCESSING_INSTRUCTION_NODE=7,DI=Zr.COMMENT_NODE=8,MI=Zr.DOCUMENT_NODE=9,II=Zr.DOCUMENT_TYPE_NODE=10,is=Zr.DOCUMENT_FRAGMENT_NODE=11,Mee=Zr.NOTATION_NODE=12,yr={},Yt={};yr.INDEX_SIZE_ERR=(Yt[1]="Index size error",1);yr.DOMSTRING_SIZE_ERR=(Yt[2]="DOMString size error",2);var Lr=yr.HIERARCHY_REQUEST_ERR=(Yt[3]="Hierarchy request error",3);yr.WRONG_DOCUMENT_ERR=(Yt[4]="Wrong document",4);yr.INVALID_CHARACTER_ERR=(Yt[5]="Invalid character",5);yr.NO_DATA_ALLOWED_ERR=(Yt[6]="No data allowed",6);yr.NO_MODIFICATION_ALLOWED_ERR=(Yt[7]="No modification allowed",7);var FI=yr.NOT_FOUND_ERR=(Yt[8]="Not found",8);yr.NOT_SUPPORTED_ERR=(Yt[9]="Not supported",9);var hA=yr.INUSE_ATTRIBUTE_ERR=(Yt[10]="Attribute in use",10);yr.INVALID_STATE_ERR=(Yt[11]="Invalid state",11);yr.SYNTAX_ERR=(Yt[12]="Syntax error",12);yr.INVALID_MODIFICATION_ERR=(Yt[13]="Invalid modification",13);yr.NAMESPACE_ERR=(Yt[14]="Invalid namespace",14);yr.INVALID_ACCESS_ERR=(Yt[15]="Invalid access",15);function Tt(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,Yt[t]),this.message=Yt[t],Error.captureStackTrace&&Error.captureStackTrace(this,Tt);return r.code=t,e&&(this.message=this.message+": "+e),r}Tt.prototype=Error.prototype;Yf(yr,Tt);function Zi(){}Zi.prototype={length:0,item:function(t){return t>=0&&t<this.length?this[t]:null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)ja(this[n],r,t,e);return r.join("")},filter:function(t){return Array.prototype.filter.call(this,t)},indexOf:function(t){return Array.prototype.indexOf.call(this,t)}};function Ru(t,e){this._node=t,this._refresh=e,N2(this)}function N2(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!==e){var r=t._refresh(t._node);if(qI(t,"length",r.length),!t.$$length||r.length<t.$$length)for(var n=r.length;n in t;n++)Object.prototype.hasOwnProperty.call(t,n)&&delete t[n];Yf(r,t),t._inc=e}}Ru.prototype.item=function(t){return N2(this),this[t]||null};Kr(Ru,Zi);function Ep(){}function LI(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function pA(t,e,r,n){if(n?e[LI(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var i=t.ownerDocument;i&&(n&&GI(i,t,n),Iee(i,t,r))}}function mA(t,e,r){var n=LI(e,r);if(n>=0){for(var i=e.length-1;n<i;)e[n]=e[++n];if(e.length=i,t){var s=t.ownerDocument;s&&(GI(s,t,r),r.ownerElement=null)}}else throw new Tt(FI,new Error(t.tagName+"@"+r))}Ep.prototype={length:0,item:Zi.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new Tt(hA);var r=this.getNamedItem(t.nodeName);return pA(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e=t.ownerElement,r;if(e&&e!=this._ownerElement)throw new Tt(hA);return r=this.getNamedItemNS(t.namespaceURI,t.localName),pA(this._ownerElement,this,t,r),r},removeNamedItem:function(t){var e=this.getNamedItem(t);return mA(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return mA(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}};function NI(){}NI.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,r){var n=new Kf;if(n.implementation=this,n.childNodes=new Zi,n.doctype=r||null,r&&n.appendChild(r),e){var i=n.createElementNS(t,e);n.appendChild(i)}return n},createDocumentType:function(t,e,r){var n=new Zm;return n.name=t,n.nodeName=t,n.publicId=e||"",n.systemId=r||"",n}};function Ue(){}Ue.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Cp(this,t,e)},replaceChild:function(t,e){Cp(this,t,e,$I),e&&this.removeChild(e)},removeChild:function(t){return zI(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(t){return cb(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==wp&&t.nodeType==wp?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r){for(var n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&r[n]===t)return n}e=e.nodeType==Pu?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&Object.prototype.hasOwnProperty.call(r,t))return r[t];e=e.nodeType==Pu?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){var e=this.lookupPrefix(t);return e==null}};function UI(t){return t=="<"&&"&lt;"||t==">"&&"&gt;"||t=="&"&&"&amp;"||t=='"'&&"&quot;"||"&#"+t.charCodeAt()+";"}Yf(Zr,Ue);Yf(Zr,Ue.prototype);function mf(t,e){if(e(t))return!0;if(t=t.firstChild)do if(mf(t,e))return!0;while(t=t.nextSibling)}function Kf(){this.ownerDocument=this}function Iee(t,e,r){t&&t._inc++;var n=r.namespaceURI;n===pf.XMLNS&&(e._nsMap[r.prefix?r.localName:""]=r.value)}function GI(t,e,r,n){t&&t._inc++;var i=r.namespaceURI;i===pf.XMLNS&&delete e._nsMap[r.prefix?r.localName:""]}function U2(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var i=e.firstChild,s=0;i;)n[s++]=i,i=i.nextSibling;n.length=s,delete n[n.length]}}}function zI(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,U2(t.ownerDocument,t),e}function Fee(t){return t&&(t.nodeType===Ue.DOCUMENT_NODE||t.nodeType===Ue.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ue.ELEMENT_NODE)}function Lee(t){return t&&(Ai(t)||G2(t)||ss(t)||t.nodeType===Ue.DOCUMENT_FRAGMENT_NODE||t.nodeType===Ue.COMMENT_NODE||t.nodeType===Ue.PROCESSING_INSTRUCTION_NODE)}function ss(t){return t&&t.nodeType===Ue.DOCUMENT_TYPE_NODE}function Ai(t){return t&&t.nodeType===Ue.ELEMENT_NODE}function G2(t){return t&&t.nodeType===Ue.TEXT_NODE}function gA(t,e){var r=t.childNodes||[];if(Ti(r,Ai)||ss(e))return!1;var n=Ti(r,ss);return!(e&&n&&r.indexOf(n)>r.indexOf(e))}function vA(t,e){var r=t.childNodes||[];function n(s){return Ai(s)&&s!==e}if(Ti(r,n))return!1;var i=Ti(r,ss);return!(e&&i&&r.indexOf(i)>r.indexOf(e))}function Nee(t,e,r){if(!Fee(t))throw new Tt(Lr,"Unexpected parent node type "+t.nodeType);if(r&&r.parentNode!==t)throw new Tt(FI,"child not in parent");if(!Lee(e)||ss(e)&&t.nodeType!==Ue.DOCUMENT_NODE)throw new Tt(Lr,"Unexpected node type "+e.nodeType+" for parent node type "+t.nodeType)}function Uee(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Ue.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Ai);if(s.length>1||Ti(i,G2))throw new Tt(Lr,"More than one element or text in fragment");if(s.length===1&&!gA(t,r))throw new Tt(Lr,"Element in fragment can not be inserted before doctype")}if(Ai(e)&&!gA(t,r))throw new Tt(Lr,"Only one element can be added and only after doctype");if(ss(e)){if(Ti(n,ss))throw new Tt(Lr,"Only one doctype is allowed");var o=Ti(n,Ai);if(r&&n.indexOf(o)<n.indexOf(r))throw new Tt(Lr,"Doctype can only be inserted before an element");if(!r&&o)throw new Tt(Lr,"Doctype can not be appended since element is present")}}function $I(t,e,r){var n=t.childNodes||[],i=e.childNodes||[];if(e.nodeType===Ue.DOCUMENT_FRAGMENT_NODE){var s=i.filter(Ai);if(s.length>1||Ti(i,G2))throw new Tt(Lr,"More than one element or text in fragment");if(s.length===1&&!vA(t,r))throw new Tt(Lr,"Element in fragment can not be inserted before doctype")}if(Ai(e)&&!vA(t,r))throw new Tt(Lr,"Only one element can be added and only after doctype");if(ss(e)){if(Ti(n,function(u){return ss(u)&&u!==r}))throw new Tt(Lr,"Only one doctype is allowed");var o=Ti(n,Ai);if(r&&n.indexOf(o)<n.indexOf(r))throw new Tt(Lr,"Doctype can only be inserted before an element")}}function Cp(t,e,r,n){Nee(t,e,r),t.nodeType===Ue.DOCUMENT_NODE&&(n||Uee)(t,e,r);var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===is){var s=e.firstChild;if(s==null)return e;var o=e.lastChild}else s=o=e;var a=r?r.previousSibling:t.lastChild;s.previousSibling=a,o.nextSibling=r,a?a.nextSibling=s:t.firstChild=s,r==null?t.lastChild=o:r.previousSibling=o;do s.parentNode=t;while(s!==o&&(s=s.nextSibling));return U2(t.ownerDocument||t,t),e.nodeType==is&&(e.firstChild=e.lastChild=null),e}function Gee(t,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=t,e.previousSibling=t.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:t.firstChild=e,t.lastChild=e,U2(t.ownerDocument,t,e),e}Kf.prototype={nodeName:"#document",nodeType:MI,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==is){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return Cp(this,t,e),t.ownerDocument=this,this.documentElement===null&&t.nodeType===Yn&&(this.documentElement=t),t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),zI(this,t)},replaceChild:function(t,e){Cp(this,t,e,$I),t.ownerDocument=this,e&&this.removeChild(e),Ai(t)&&(this.documentElement=t)},importNode:function(t,e){return XI(this,t,e)},getElementById:function(t){var e=null;return mf(this.documentElement,function(r){if(r.nodeType==Yn&&r.getAttribute("id")==t)return e=r,!0}),e},getElementsByClassName:function(t){var e=dA(t);return new Ru(this,function(r){var n=[];return e.length>0&&mf(r.documentElement,function(i){if(i!==r&&i.nodeType===Yn){var s=i.getAttribute("class");if(s){var o=t===s;if(!o){var a=dA(s);o=e.every(kee(a))}o&&n.push(i)}}}),n})},createElement:function(t){var e=new qo;e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new Zi;var r=e.attributes=new Ep;return r._ownerElement=e,e},createDocumentFragment:function(){var t=new Qm;return t.ownerDocument=this,t.childNodes=new Zi,t},createTextNode:function(t){var e=new z2;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new $2;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new j2;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new V2;return r.ownerDocument=this,r.tagName=r.nodeName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new Tp;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new H2;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new qo,n=e.split(":"),i=r.attributes=new Ep;return r.childNodes=new Zi,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,i._ownerElement=r,r},createAttributeNS:function(t,e){var r=new Tp,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,n.length==2?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}};Kr(Kf,Ue);function qo(){this._nsMap={}}qo.prototype={nodeType:Yn,hasAttribute:function(t){return this.getAttributeNode(t)!=null},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===is?this.insertBefore(t,null):Gee(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return this.getAttributeNodeNS(t,e)!=null},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new Ru(this,function(e){var r=[];return mf(e,function(n){n!==e&&n.nodeType==Yn&&(t==="*"||n.tagName==t)&&r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new Ru(this,function(r){var n=[];return mf(r,function(i){i!==r&&i.nodeType===Yn&&(t==="*"||i.namespaceURI===t)&&(e==="*"||i.localName==e)&&n.push(i)}),n})}};Kf.prototype.getElementsByTagName=qo.prototype.getElementsByTagName;Kf.prototype.getElementsByTagNameNS=qo.prototype.getElementsByTagNameNS;Kr(qo,Ue);function Tp(){}Tp.prototype.nodeType=Pu;Kr(Tp,Ue);function Zf(){}Zf.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(Yt[Lr])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){var n=this.data.substring(0,t),i=this.data.substring(t+e);r=n+r+i,this.nodeValue=this.data=r,this.length=r.length}};Kr(Zf,Ue);function z2(){}z2.prototype={nodeName:"#text",nodeType:wp,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Kr(z2,Zf);function $2(){}$2.prototype={nodeName:"#comment",nodeType:DI};Kr($2,Zf);function j2(){}j2.prototype={nodeName:"#cdata-section",nodeType:OI};Kr(j2,Zf);function Zm(){}Zm.prototype.nodeType=II;Kr(Zm,Ue);function jI(){}jI.prototype.nodeType=Mee;Kr(jI,Ue);function HI(){}HI.prototype.nodeType=Dee;Kr(HI,Ue);function H2(){}H2.prototype.nodeType=BI;Kr(H2,Ue);function Qm(){}Qm.prototype.nodeName="#document-fragment";Qm.prototype.nodeType=is;Kr(Qm,Ue);function V2(){}V2.prototype.nodeType=kI;Kr(V2,Ue);function VI(){}VI.prototype.serializeToString=function(t,e,r){return WI.call(t,e,r)};Ue.prototype.toString=WI;function WI(t,e){var r=[],n=this.nodeType==9&&this.documentElement||this,i=n.prefix,s=n.namespaceURI;if(s&&i==null){var i=n.lookupPrefix(s);if(i==null)var o=[{namespace:s,prefix:null}]}return ja(this,r,t,e,o),r.join("")}function yA(t,e,r){var n=t.prefix||"",i=t.namespaceURI;if(!i||n==="xml"&&i===pf.XML||i===pf.XMLNS)return!1;for(var s=r.length;s--;){var o=r[s];if(o.prefix===n)return o.namespace!==i}return!0}function M0(t,e,r){t.push(" ",e,'="',r.replace(/[<>&"\t\n\r]/g,UI),'"')}function ja(t,e,r,n,i){if(i||(i=[]),n)if(t=n(t),t){if(typeof t=="string"){e.push(t);return}}else return;switch(t.nodeType){case Yn:var s=t.attributes,o=s.length,v=t.firstChild,a=t.tagName;r=pf.isHTML(t.namespaceURI)||r;var u=a;if(!r&&!t.prefix&&t.namespaceURI){for(var l,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){l=s.item(c).value;break}if(!l)for(var f=i.length-1;f>=0;f--){var d=i[f];if(d.prefix===""&&d.namespace===t.namespaceURI){l=d.namespace;break}}if(l!==t.namespaceURI)for(var f=i.length-1;f>=0;f--){var d=i[f];if(d.namespace===t.namespaceURI){d.prefix&&(u=d.prefix+":"+a);break}}}e.push("<",u);for(var h=0;h<o;h++){var p=s.item(h);p.prefix=="xmlns"?i.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&i.push({prefix:"",namespace:p.value})}for(var h=0;h<o;h++){var p=s.item(h);if(yA(p,r,i)){var m=p.prefix||"",g=p.namespaceURI;M0(e,m?"xmlns:"+m:"xmlns",g),i.push({prefix:m,namespace:g})}ja(p,e,r,n,i)}if(a===u&&yA(t,r,i)){var m=t.prefix||"",g=t.namespaceURI;M0(e,m?"xmlns:"+m:"xmlns",g),i.push({prefix:m,namespace:g})}if(v||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(a)){if(e.push(">"),r&&/^script$/i.test(a))for(;v;)v.data?e.push(v.data):ja(v,e,r,n,i.slice()),v=v.nextSibling;else for(;v;)ja(v,e,r,n,i.slice()),v=v.nextSibling;e.push("</",u,">")}else e.push("/>");return;case MI:case is:for(var v=t.firstChild;v;)ja(v,e,r,n,i.slice()),v=v.nextSibling;return;case Pu:return M0(e,t.name,t.value);case wp:return e.push(t.data.replace(/[<&>]/g,UI));case OI:return e.push("<![CDATA[",t.data,"]]>");case DI:return e.push("<!--",t.data,"-->");case II:var y=t.publicId,b=t.systemId;if(e.push("<!DOCTYPE ",t.name),y)e.push(" PUBLIC ",y),b&&b!="."&&e.push(" ",b),e.push(">");else if(b&&b!=".")e.push(" SYSTEM ",b,">");else{var _=t.internalSubset;_&&e.push(" [",_,"]"),e.push(">")}return;case kI:return e.push("<?",t.target," ",t.data,"?>");case BI:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function XI(t,e,r){var n;switch(e.nodeType){case Yn:n=e.cloneNode(!1),n.ownerDocument=t;case is:break;case Pu:r=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=t,n.parentNode=null,r)for(var i=e.firstChild;i;)n.appendChild(XI(t,i,r)),i=i.nextSibling;return n}function cb(t,e,r){var n=new e.constructor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s!="object"&&s!=n[i]&&(n[i]=s)}switch(e.childNodes&&(n.childNodes=new Zi),n.ownerDocument=t,n.nodeType){case Yn:var o=e.attributes,a=n.attributes=new Ep,u=o.length;a._ownerElement=n;for(var l=0;l<u;l++)n.setAttributeNode(cb(t,o.item(l),!0));break;case Pu:r=!0}if(r)for(var c=e.firstChild;c;)n.appendChild(cb(t,c,r)),c=c.nextSibling;return n}function qI(t,e,r){t[e]=r}try{if(Object.defineProperty){let t=function(e){switch(e.nodeType){case Yn:case is:var r=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}};Object.defineProperty(Ru.prototype,"length",{get:function(){return N2(this),this.$$length}}),Object.defineProperty(Ue.prototype,"textContent",{get:function(){return t(this)},set:function(e){switch(this.nodeType){case Yn:case is:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),qI=function(e,r,n){e["$$"+r]=n}}}catch{}fo.DocumentType=Zm;fo.DOMException=Tt;fo.DOMImplementation=NI;fo.Element=qo;fo.Node=Ue;fo.NodeList=Zi;fo.XMLSerializer=VI;var Jm={},YI={};(function(t){var e=ds.freeze;t.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),t.entityMap=t.HTML_ENTITIES})(YI);var W2={},gf=ds.NAMESPACE,fb=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_A=new RegExp("[\\-\\.0-9"+fb.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),bA=new RegExp("^"+fb.source+_A.source+"*(?::"+fb.source+_A.source+"*)?$"),Hl=0,vs=1,ba=2,Vl=3,xa=4,Sa=5,Wl=6,Hd=7;function Ou(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Ou)}Ou.prototype=new Error;Ou.prototype.name=Ou.name;function KI(){}KI.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),ZI(e,e={}),zee(t,e,r,n,this.errorHandler),n.endDocument()}};function zee(t,e,r,n,i){function s(U){if(U>65535){U-=65536;var z=55296+(U>>10),pe=56320+(U&1023);return String.fromCharCode(z,pe)}else return String.fromCharCode(U)}function o(U){var z=U.slice(1,-1);return Object.hasOwnProperty.call(r,z)?r[z]:z.charAt(0)==="#"?s(parseInt(z.substr(1).replace("x","0x"))):(i.error("entity not found:"+U),U)}function a(U){if(U>m){var z=t.substring(m,U).replace(/&#?\w+;/g,o);d&&u(m),n.characters(z,0,U-m),m=U}}function u(U,z){for(;U>=c&&(z=f.exec(t));)l=z.index,c=l+z[0].length,d.lineNumber++;d.columnNumber=U-l+1}for(var l=0,c=0,f=/.*(?:\r\n?|\n)|.*$/g,d=n.locator,h=[{currentNSMap:e}],p={},m=0;;){try{var g=t.indexOf("<",m);if(g<0){if(!t.substr(m).match(/^\s*$/)){var v=n.doc,y=v.createTextNode(t.substr(m));v.appendChild(y),n.currentElement=y}return}switch(g>m&&a(g),t.charAt(g+1)){case"/":var F=t.indexOf(">",g+3),b=t.substring(g+2,F).replace(/[ \t\n\r]+$/g,""),_=h.pop();F<0?(b=t.substring(g+2).replace(/[\s<].*/,""),i.error("end tag name: "+b+" is not complete:"+_.tagName),F=g+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),i.error("end tag name: "+b+" maybe not complete"),F=g+1+b.length);var x=_.localNSMap,S=_.tagName==b,w=S||_.tagName&&_.tagName.toLowerCase()==b.toLowerCase();if(w){if(n.endElement(_.uri,_.localName,b),x)for(var P in x)Object.prototype.hasOwnProperty.call(x,P)&&n.endPrefixMapping(P);S||i.fatalError("end tag name: "+b+" is not match the current start tagName:"+_.tagName)}else h.push(_);F++;break;case"?":d&&u(g),F=Wee(t,g,n);break;case"!":d&&u(g),F=Vee(t,g,n,i);break;default:d&&u(g);var C=new QI,R=h[h.length-1].currentNSMap,F=$ee(t,g,C,R,o,i),N=C.length;if(!C.closed&&Hee(t,F,C.tagName,p)&&(C.closed=!0,r.nbsp||i.warning("unclosed xml attribute")),d&&N){for(var G=xA(d,{}),j=0;j<N;j++){var re=C[j];u(re.offset),re.locator=xA(d,{})}n.locator=G,SA(C,n,R)&&h.push(C),n.locator=d}else SA(C,n,R)&&h.push(C);gf.isHTML(C.uri)&&!C.closed?F=jee(t,F,C.tagName,o,n):F++}}catch(U){if(U instanceof Ou)throw U;i.error("element parse error: "+U),F=-1}F>m?m=F:a(Math.max(g,m)+1)}}function xA(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function $ee(t,e,r,n,i,s){function o(d,h,p){r.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),r.addValue(d,h.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,i),p)}for(var a,u,l=++e,c=Hl;;){var f=t.charAt(l);switch(f){case"=":if(c===vs)a=t.slice(e,l),c=Vl;else if(c===ba)c=Vl;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===Vl||c===vs)if(c===vs&&(s.warning('attribute value must after "="'),a=t.slice(e,l)),e=l+1,l=t.indexOf(f,e),l>0)u=t.slice(e,l),o(a,u,e-1),c=Sa;else throw new Error("attribute value no end '"+f+"' match");else if(c==xa)u=t.slice(e,l),o(a,u,e),s.warning('attribute "'+a+'" missed start quot('+f+")!!"),e=l+1,c=Sa;else throw new Error('attribute value must after "="');break;case"/":switch(c){case Hl:r.setTagName(t.slice(e,l));case Sa:case Wl:case Hd:c=Hd,r.closed=!0;case xa:case vs:break;case ba:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==Hl&&r.setTagName(t.slice(e,l)),l;case">":switch(c){case Hl:r.setTagName(t.slice(e,l));case Sa:case Wl:case Hd:break;case xa:case vs:u=t.slice(e,l),u.slice(-1)==="/"&&(r.closed=!0,u=u.slice(0,-1));case ba:c===ba&&(u=a),c==xa?(s.warning('attribute "'+u+'" missed quot(")!'),o(a,u,e)):((!gf.isHTML(n[""])||!u.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+u+'" missed value!! "'+u+'" instead!!'),o(u,u,e));break;case Vl:throw new Error("attribute value missed!!")}return l;case"":f=" ";default:if(f<=" ")switch(c){case Hl:r.setTagName(t.slice(e,l)),c=Wl;break;case vs:a=t.slice(e,l),c=ba;break;case xa:var u=t.slice(e,l);s.warning('attribute "'+u+'" missed quot(")!!'),o(a,u,e);case Sa:c=Wl;break}else switch(c){case ba:r.tagName,(!gf.isHTML(n[""])||!a.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),o(a,a,e),e=l,c=vs;break;case Sa:s.warning('attribute space is required"'+a+'"!!');case Wl:c=vs,e=l;break;case Vl:c=xa,e=l;break;case Hd:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function SA(t,e,r){for(var n=t.tagName,i=null,f=t.length;f--;){var s=t[f],o=s.qName,a=s.value,d=o.indexOf(":");if(d>0)var u=s.prefix=o.slice(0,d),l=o.slice(d+1),c=u==="xmlns"&&l;else l=o,u=null,c=o==="xmlns"&&"";s.localName=l,c!==!1&&(i==null&&(i={},ZI(r,r={})),r[c]=i[c]=a,s.uri=gf.XMLNS,e.startPrefixMapping(c,a))}for(var f=t.length;f--;){s=t[f];var u=s.prefix;u&&(u==="xml"&&(s.uri=gf.XML),u!=="xmlns"&&(s.uri=r[u||""]))}var d=n.indexOf(":");d>0?(u=t.prefix=n.slice(0,d),l=t.localName=n.slice(d+1)):(u=null,l=t.localName=n);var h=t.uri=r[u||""];if(e.startElement(h,l,n,t),t.closed){if(e.endElement(h,l,n),i)for(u in i)Object.prototype.hasOwnProperty.call(i,u)&&e.endPrefixMapping(u)}else return t.currentNSMap=r,t.localNSMap=i,!0}function jee(t,e,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var s=t.indexOf("</"+r+">",e),o=t.substring(e+1,s);if(/[&<]/.test(o))return/^script$/i.test(r)?(i.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,n),i.characters(o,0,o.length),s)}return e+1}function Hee(t,e,r,n){var i=n[r];return i==null&&(i=t.lastIndexOf("</"+r+">"),i<e&&(i=t.lastIndexOf("</"+r)),n[r]=i),i<e}function ZI(t,e){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}function Vee(t,e,r,n){var i=t.charAt(e+2);switch(i){case"-":if(t.charAt(e+3)==="-"){var s=t.indexOf("-->",e+4);return s>e?(r.comment(t,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(t.substr(e+3,6)=="CDATA["){var s=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,s-e-9),r.endCDATA(),s+3}var o=Xee(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var u=o[1][0],l=!1,c=!1;a>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],c=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(c=o[3][0]));var f=o[a-1];return r.startDTD(u,l,c),r.endDTD(),f.index+f[0].length}}return-1}function Wee(t,e,r){var n=t.indexOf("?>",e);if(n){var i=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return i?(i[0].length,r.processingInstruction(i[1],i[2]),n+2):-1}return-1}function QI(){this.attributeNames={}}QI.prototype={setTagName:function(t){if(!bA.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,r){if(!bA.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}};function Xee(t,e){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=e,i.exec(t);r=i.exec(t);)if(n.push(r),r[1])return n}W2.XMLReader=KI;W2.ParseError=Ou;var qee=ds,Yee=fo,wA=YI,JI=W2,Kee=Yee.DOMImplementation,EA=qee.NAMESPACE,Zee=JI.ParseError,Qee=JI.XMLReader;function eF(t){return t.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function tF(t){this.options=t||{locator:{}}}tF.prototype.parseFromString=function(t,e){var r=this.options,n=new Qee,i=r.domBuilder||new Qf,s=r.errorHandler,o=r.locator,a=r.xmlns||{},u=/\/x?html?$/.test(e),l=u?wA.HTML_ENTITIES:wA.XML_ENTITIES;o&&i.setDocumentLocator(o),n.errorHandler=Jee(s,i,o),n.domBuilder=r.domBuilder||i,u&&(a[""]=EA.HTML),a.xml=a.xml||EA.XML;var c=r.normalizeLineEndings||eF;return t&&typeof t=="string"?n.parse(c(t),a,l):n.errorHandler.error("invalid doc source"),i.doc};function Jee(t,e,r){if(!t){if(e instanceof Qf)return e;t=e}var n={},i=t instanceof Function;r=r||{};function s(o){var a=t[o];!a&&i&&(a=t.length==2?function(u){t(o,u)}:t),n[o]=a&&function(u){a("[xmldom "+o+"]	"+u+db(r))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function Qf(){this.cdata=!1}function wa(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}Qf.prototype={startDocument:function(){this.doc=new Kee().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var i=this.doc,s=i.createElementNS(t,r||e),o=n.length;Vd(this,s),this.currentElement=s,this.locator&&wa(this.locator,s);for(var a=0;a<o;a++){var t=n.getURI(a),u=n.getValue(a),r=n.getQName(a),l=i.createAttributeNS(t,r);this.locator&&wa(n.getLocator(a),l),l.value=l.nodeValue=u,s.setAttributeNode(l)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&wa(this.locator,r),Vd(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=CA.apply(this,arguments),t){if(this.cdata)var n=this.doc.createCDATASection(t);else var n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&wa(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=CA.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&wa(this.locator,n),Vd(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(t,e,r);this.locator&&wa(this.locator,i),Vd(this,i),this.doc.doctype=i}},warning:function(t){console.warn("[xmldom warning]	"+t,db(this.locator))},error:function(t){console.error("[xmldom error]	"+t,db(this.locator))},fatalError:function(t){throw new Zee(t,this.locator)}};function db(t){if(t)return`
@`+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function CA(t,e,r){return typeof t=="string"?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){Qf.prototype[t]=function(){return null}});function Vd(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}Jm.__DOMHandler=Qf;Jm.normalizeLineEndings=eF;Jm.DOMParser=tF;var ete=Jm.DOMParser;const tte={createCanvas:(t,e)=>new OffscreenCanvas(t??0,e??0),getCanvasRenderingContext2D:()=>OffscreenCanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>globalThis.location.href,getFontFaceSet:()=>globalThis.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new ete().parseFromString(t,"text/xml")};class rte{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this._tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this._tickerAdded||!this.domElement||(nr.system.add(this._tickerUpdate,this,rs.INTERACTION),this._tickerAdded=!0)}removeTickerListener(){this._tickerAdded&&(nr.system.remove(this._tickerUpdate,this),this._tickerAdded=!1)}pointerMoved(){this._didMove=!0}_update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events._rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY,pointerType:e.pointerType,pointerId:e.pointerId}))}_tickerUpdate(e){this._deltaTime+=e.deltaTime,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this._update())}}const Wi=new rte;class vf extends sl{constructor(){super(...arguments),this.client=new Le,this.movement=new Le,this.offset=new Le,this.global=new Le,this.screen=new Le}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,a,u,l,c,f,d,h,p,m){throw new Error("Method not implemented.")}}class wn extends vf{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Yo extends vf{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Yo.DOM_DELTA_PIXEL=0;Yo.DOM_DELTA_LINE=1;Yo.DOM_DELTA_PAGE=2;const nte=2048,ite=new Le,Xl=new Le;class rF{constructor(e){this.dispatch=new Yr,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else he(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Wi.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,ite.set(e,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<nte&&e!==this.rootTarget&&e.parent;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Wi.pauseUpdate=!1),e.interactiveChildren&&e.children){const c=e.children;for(let f=c.length-1;f>=0;f--){const d=c[f],h=this.hitTestMoveRecursive(d,this._isInteractive(r)?r:d.eventMode,n,i,s,o||s(e,n));if(h){if(h.length>0&&!h[h.length-1].parent)continue;const p=e.isInteractive();(h.length>0||p)&&(p&&this._allInteractiveElements.push(e),h.push(e)),this._hitElements.length===0&&(this._hitElements=h),a=!0}}}const u=this._isInteractive(r),l=e.isInteractive();return l&&l&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:u&&!s(e,n)&&i(e,n)?l?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Wi.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children,l=n;for(let c=u.length-1;c>=0;c--){const f=u[c],d=this.hitTestRecursive(f,this._isInteractive(r)?r:f.eventMode,l,i,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!e||!e.visible||!e.renderable||!e.measurable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren}hitPruneFn(e,r){if(e.hitArea&&(e.worldTransform.applyInverse(r,Xl),!e.hitArea.contains(Xl.x,Xl.y)))return!0;if(e.effects&&e.effects.length)for(let n=0;n<e.effects.length;n++){const i=e.effects[n];if(i.containsPoint&&!i.containsPoint(r,this.hitTestFn))return!0}return!1}hitTestFn(e,r){return e.hitArea?!0:e!=null&&e.containsPoint?(e.worldTransform.applyInverse(r,Xl),e.containsPoint(Xl)):!1}notifyTarget(e,r){var s,o;if(!e.currentTarget.isInteractive())return;r??(r=e.type);const n=`on${r}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this._notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this._notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var u,l;if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((u=i.overTargets)==null?void 0:u.length)>0&&s!==r.target){const c=e.type==="mousemove"?"mouseout":"pointerout",f=this.createPointerEvent(e,c,s);if(this.dispatchEvent(f,"pointerout"),n&&this.dispatchEvent(f,"mouseout"),!r.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!r.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(f)}if(s!==r.target){const c=e.type==="mousemove"?"mouseover":"pointerover",f=this.clonePointerEvent(r,c);this.dispatchEvent(f,"pointerover"),n&&this.dispatchEvent(f,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(r,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(f)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(l=r.target)==null?void 0:l.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const u=n.button===2;this.notifyTarget(n,u?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const u=i.clicksByButton[e.button];if(u.target===a.target&&r-u.timeStamp<200?++u.clickCount:u.clickCount=1,u.target=a.target,u.timeStamp=r,a.detail=u.clickCount,a.pointerType==="mouse"){const l=a.button===2;this.dispatchEvent(a,l?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof wn)){he("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Yo)){he("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(wn);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(Yo);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(wn);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof wn&&r instanceof wn&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof vf&&r instanceof vf&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.defaultPrevented=!1,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}_notifyListeners(e,r){const n=e.currentTarget._events[r];if(n)if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const ste=1,ote={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},X2=class hb{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new rF(null),Wi.init(this),this.autoPreventDefault=!0,this._eventsAdded=!1,this._rootPointerEvent=new wn(null),this._rootWheelEvent=new Yo(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...hb.defaultEventFeatures},{set:(r,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),r[n]=i,!0)}),this._onPointerDown=this._onPointerDown.bind(this),this._onPointerMove=this._onPointerMove.bind(this),this._onPointerUp=this._onPointerUp.bind(this),this._onPointerOverOut=this._onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{canvas:r,resolution:n}=this.renderer;this.setTargetElement(r),this.resolution=n,hb._defaultEventMode=e.eventMode??"passive",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null,this._currentCursor=null}setCursor(e){e||(e="default");let r=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(r=!1),this._currentCursor===e)return;this._currentCursor=e;const n=this.cursorStyles[e];if(n)switch(typeof n){case"string":r&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":r&&Object.assign(this.domElement.style,n);break}else r&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this._rootPointerEvent}_onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this._normalizeToPointerData(e);this.autoPreventDefault&&r[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=r.length;n<i;n++){const s=r[n],o=this._bootstrapEvent(this._rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}_onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,Wi.pointerMoved();const r=this._normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}_onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let r=e.target;e.composedPath&&e.composedPath().length>0&&(r=e.composedPath()[0]);const n=r!==this.domElement?"outside":"",i=this._normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this._bootstrapEvent(this._rootPointerEvent,i[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}_onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const r=this._normalizeToPointerData(e);for(let n=0,i=r.length;n<i;n++){const s=this._bootstrapEvent(this._rootPointerEvent,r[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const r=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(r)}setTargetElement(e){this._removeEvents(),this.domElement=e,Wi.domElement=e,this._addEvents()}_addEvents(){if(this._eventsAdded||!this.domElement)return;Wi.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this._onPointerMove,!0),this.domElement.addEventListener("pointerdown",this._onPointerDown,!0),this.domElement.addEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this._onPointerOverOut,!0),globalThis.addEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this._onPointerMove,!0),this.domElement.addEventListener("mousedown",this._onPointerDown,!0),this.domElement.addEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this._onPointerOverOut,!0),globalThis.addEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this._onPointerDown,!0),this.domElement.addEventListener("touchend",this._onPointerUp,!0),this.domElement.addEventListener("touchmove",this._onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this._eventsAdded=!0}_removeEvents(){if(!this._eventsAdded||!this.domElement)return;Wi.removeTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction="")),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this._onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this._onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this._onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this._onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this._onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this._onPointerMove,!0),this.domElement.removeEventListener("mousedown",this._onPointerDown,!0),this.domElement.removeEventListener("mouseout",this._onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this._onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this._onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this._onPointerDown,!0),this.domElement.removeEventListener("touchend",this._onPointerUp,!0),this.domElement.removeEventListener("touchmove",this._onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this._eventsAdded=!1}mapPositionToPoint(e,r,n){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(r-i.left)*(this.domElement.width/i.width)*s,e.y=(n-i.top)*(this.domElement.height/i.height)*s}_normalizeToPointerData(e){const r=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){const s=e.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,r.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=ste),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,r.push(n)}else r.push(e);return r}normalizeWheelEvent(e){const r=this._rootWheelEvent;return this._transferMouseData(r,e),r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ,r.deltaMode=e.deltaMode,this.mapPositionToPoint(r.screen,e.clientX,e.clientY),r.global.copyFrom(r.screen),r.offset.copyFrom(r.screen),r.nativeEvent=e,r.type=e.type,r}_bootstrapEvent(e,r){return e.originalEvent=null,e.nativeEvent=r,e.pointerId=r.pointerId,e.width=r.width,e.height=r.height,e.isPrimary=r.isPrimary,e.pointerType=r.pointerType,e.pressure=r.pressure,e.tangentialPressure=r.tangentialPressure,e.tiltX=r.tiltX,e.tiltY=r.tiltY,e.twist=r.twist,this._transferMouseData(e,r),this.mapPositionToPoint(e.screen,r.clientX,r.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=r.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=ote[e.type]||e.type),e}_transferMouseData(e,r){e.isTrusted=r.isTrusted,e.srcElement=r.srcElement,e.timeStamp=performance.now(),e.type=r.type,e.altKey=r.altKey,e.button=r.button,e.buttons=r.buttons,e.client.x=r.clientX,e.client.y=r.clientY,e.ctrlKey=r.ctrlKey,e.metaKey=r.metaKey,e.movement.x=r.movementX,e.movement.y=r.movementY,e.page.x=r.pageX,e.page.y=r.pageY,e.relatedTarget=null,e.shiftKey=r.shiftKey}};X2.extension={name:"events",type:[O.WebGLSystem,O.CanvasSystem,O.WebGPUSystem],priority:-1};X2.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let q2=X2;const nF={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,get interactive(){return this.eventMode==="dynamic"||this.eventMode==="static"},set interactive(t){this.eventMode=t?"static":"passive"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??q2.defaultEventMode},set eventMode(t){this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof r=="object"?r.signal:void 0,s=typeof r=="object"?r.once===!0:!1,o=typeof e=="function"?void 0:e;t=n?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,u=this;i&&i.addEventListener("abort",()=>{u.off(t,a,o)}),s?u.once(t,a,o):u.on(t,a,o)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof sl))throw new Error("Container cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};var eg=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,iF=`
in vec2 vTextureCoord;

out vec4 finalColor;

uniform float uAlpha;
uniform sampler2D uTexture;

void main()
{
    finalColor =  texture(uTexture, vTextureCoord) * uAlpha;
}
`,pb=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct AlphaUniforms {
  uAlpha:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> alphaUniforms : AlphaUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
 
    var sample = textureSample(uTexture, uSampler, uv);
    
    return sample * alphaUniforms.uAlpha;
}`;const sF=class oF extends Rt{constructor(e){e={...oF.defaultOptions,...e};const r=qe.from({vertex:{source:pb,entryPoint:"mainVertex"},fragment:{source:pb,entryPoint:"mainFragment"}}),n=et.from({vertex:eg,fragment:iF,name:"alpha-filter"}),{alpha:i,...s}=e,o=new Pt({uAlpha:{value:i,type:"f32"}});super({...s,gpuProgram:r,glProgram:n,resources:{alphaUniforms:o}})}get alpha(){return this.resources.alphaUniforms.uniforms.uAlpha}set alpha(e){this.resources.alphaUniforms.uniforms.uAlpha=e}};sF.defaultOptions={alpha:1};let ate=sF;const Y2={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},ute=["in vec2 vBlurTexCoords[%size%];","uniform sampler2D uTexture;","out vec4 finalColor;","void main(void)","{","    finalColor = vec4(0.0);","    %blur%","}"].join(`
`);function aF(t){const e=Y2[t],r=e.length;let n=ute,i="";const s="finalColor += texture(uTexture, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let u=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),u=u.replace("%value%",e[o].toString()),i+=u,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const lte=`
    in vec2 aPosition;

    uniform float uStrength;

    out vec2 vBlurTexCoords[%size%];

    uniform vec4 uInputSize;
    uniform vec4 uOutputFrame;
    uniform vec4 uOutputTexture;

    vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

    vec2 filterTextureCoord( void )
    {
        return aPosition * (uOutputFrame.zw * uInputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        float pixelStrength = uInputSize.%dimension% * uStrength;

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function uF(t,e){const r=Math.ceil(t/2);let n=lte,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * pixelStrength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * pixelStrength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n=n.replace("%dimension%",e?"z":"w"),n}function lF(t,e){const r=uF(e,t),n=aF(e);return et.from({vertex:r,fragment:n,name:`blur-${t?"horizontal":"vertical"}-pass-filter`})}var cF=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct BlurUniforms {
  uStrength:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> blurUniforms : BlurUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    %blur-struct%
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}


@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {

  let filteredCord = filterTextureCoord(aPosition);

  let pixelStrength = gfu.uInputSize.%dimension% * blurUniforms.uStrength;

  return VSOutput(
   filterVertexPosition(aPosition),
    %blur-vertex-out%
  );
}

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  %blur-fragment-in%
) -> @location(0) vec4<f32> {

    var   finalColor = vec4(0.0);

    %blur-sampling%

    return finalColor;
}`;function fF(t,e){const r=Y2[e],n=r.length,i=[],s=[],o=[];for(let f=0;f<e;f++){i[f]=`@location(${f}) offset${f}: vec2<f32>,`,t?s[f]=`filteredCord + vec2(${f-n+1} * pixelStrength, 0.0),`:s[f]=`filteredCord + vec2(0.0, ${f-n+1} * pixelStrength),`;const d=f<n?f:e-f-1,h=r[d].toString();o[f]=`finalColor += textureSample(uTexture, uSampler, offset${f}) * ${h};`}const a=i.join(`
`),u=s.join(`
`),l=o.join(`
`),c=cF.replace("%blur-struct%",a).replace("%blur-vertex-out%",u).replace("%blur-fragment-in%",a).replace("%blur-sampling%",l).replace("%dimension%",t?"z":"w");return qe.from({vertex:{source:c,entryPoint:"mainVertex"},fragment:{source:c,entryPoint:"mainFragment"}})}const dF=class hF extends Rt{constructor(e){e={...hF.defaultOptions,...e};const r=lF(e.horizontal,e.kernelSize),n=fF(e.horizontal,e.kernelSize);super({glProgram:r,gpuProgram:n,resources:{blurUniforms:{uStrength:{value:0,type:"f32"}}},...e}),this.horizontal=e.horizontal,this._quality=0,this.quality=e.quality,this.blur=e.strength,this._uniforms=this.resources.blurUniforms.uniforms}apply(e,r,n,i){if(this._uniforms.uStrength=this.strength/this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=Ct.getSameSizeTexture(r);let o=r,a=s;this._state.blend=!1;const u=e.renderer.type===Wr.WEBGPU;for(let l=0;l<this.passes-1;l++){e.applyFilter(this,o,a,l===0?!0:u);const c=a;a=o,o=c}this._state.blend=!0,e.applyFilter(this,o,n,i),Ct.returnTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};dF.defaultOptions={strength:8,quality:4,kernelSize:5};let wh=dF;class pF extends Rt{constructor(...e){let r=e[0]??{};typeof r=="number"&&(oe(_e,"BlurFilter constructor params are now options object. See params: { strength, quality, resolution, kernelSize }"),r={strength:r},e[1]!==void 0&&(r.quality=e[1]),e[2]!==void 0&&(r.resolution=e[2]||"inherit"),e[3]!==void 0&&(r.kernelSize=e[3])),r={...wh.defaultOptions,...r};const{strength:n,strengthX:i,strengthY:s,quality:o,...a}=r;super({...a,compatibleRenderers:Wr.BOTH,resources:{}}),this._repeatEdgePixels=!1,this.blurXFilter=new wh({horizontal:!0,...r}),this.blurYFilter=new wh({horizontal:!1,...r}),this.quality=o,this.strengthX=i??n,this.strengthY=s??n,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=Ct.getSameSizeTexture(r);this.blurXFilter.blendMode="normal",this.blurXFilter.apply(e,r,a,!0),this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,a,n,i),Ct.returnTexture(a)}else o?(this.blurYFilter.blendMode=this.blendMode,this.blurYFilter.apply(e,r,n,i)):(this.blurXFilter.blendMode=this.blendMode,this.blurXFilter.apply(e,r,n,i))}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.blur),Math.abs(this.blurYFilter.blur))*2}get strength(){if(this.strengthX!==this.strengthY)throw new Error("BlurFilter's strengthX and strengthY are different");return this.strengthX}set strength(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get strengthX(){return this.blurXFilter.blur}set strengthX(e){this.blurXFilter.blur=e,this.updatePadding()}get strengthY(){return this.blurYFilter.blur}set strengthY(e){this.blurYFilter.blur=e,this.updatePadding()}get blur(){return oe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength}set blur(e){oe("8.3.0","BlurFilter.blur is deprecated, please use BlurFilter.strength instead."),this.strength=e}get blurX(){return oe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX}set blurX(e){oe("8.3.0","BlurFilter.blurX is deprecated, please use BlurFilter.strengthX instead."),this.strengthX=e}get blurY(){return oe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY}set blurY(e){oe("8.3.0","BlurFilter.blurY is deprecated, please use BlurFilter.strengthY instead."),this.strengthY=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}pF.defaultOptions={strength:8,quality:4,kernelSize:5};var mF=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uColorMatrix[20];
uniform float uAlpha;

uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * 0.2);
    float diff = (randomValue - 0.5) *  0.5;

    if (uAlpha == 0.0) {
        finalColor = color;
        return;
    }

    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    vec4 result;

    result.r = (uColorMatrix[0] * color.r);
        result.r += (uColorMatrix[1] * color.g);
        result.r += (uColorMatrix[2] * color.b);
        result.r += (uColorMatrix[3] * color.a);
        result.r += uColorMatrix[4];

    result.g = (uColorMatrix[5] * color.r);
        result.g += (uColorMatrix[6] * color.g);
        result.g += (uColorMatrix[7] * color.b);
        result.g += (uColorMatrix[8] * color.a);
        result.g += uColorMatrix[9];

    result.b = (uColorMatrix[10] * color.r);
       result.b += (uColorMatrix[11] * color.g);
       result.b += (uColorMatrix[12] * color.b);
       result.b += (uColorMatrix[13] * color.a);
       result.b += uColorMatrix[14];

    result.a = (uColorMatrix[15] * color.r);
       result.a += (uColorMatrix[16] * color.g);
       result.a += (uColorMatrix[17] * color.b);
       result.a += (uColorMatrix[18] * color.a);
       result.a += uColorMatrix[19];

    vec3 rgb = mix(color.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    finalColor = vec4(rgb, result.a);
}
`,mb=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct ColorMatrixUniforms {
  uColorMatrix:array<vec4<f32>, 5>,
  uAlpha:f32,
};


@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;
@group(1) @binding(0) var<uniform> colorMatrixUniforms : ColorMatrixUniforms;


struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
  };
  
fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
  );
}


@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
) -> @location(0) vec4<f32> {


  var c = textureSample(uTexture, uSampler, uv);
  
  if (colorMatrixUniforms.uAlpha == 0.0) {
    return c;
  }

 
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.r /= c.a;
      c.g /= c.a;
      c.b /= c.a;
    }

    var cm = colorMatrixUniforms.uColorMatrix;


    var result = vec4<f32>(0.);

    result.r = (cm[0][0] * c.r);
    result.r += (cm[0][1] * c.g);
    result.r += (cm[0][2] * c.b);
    result.r += (cm[0][3] * c.a);
    result.r += cm[1][0];

    result.g = (cm[1][1] * c.r);
    result.g += (cm[1][2] * c.g);
    result.g += (cm[1][3] * c.b);
    result.g += (cm[2][0] * c.a);
    result.g += cm[2][1];

    result.b = (cm[2][2] * c.r);
    result.b += (cm[2][3] * c.g);
    result.b += (cm[3][0] * c.b);
    result.b += (cm[3][1] * c.a);
    result.b += cm[3][2];

    result.a = (cm[3][3] * c.r);
    result.a += (cm[4][0] * c.g);
    result.a += (cm[4][1] * c.b);
    result.a += (cm[4][2] * c.a);
    result.a += cm[4][3];

    var rgb = mix(c.rgb, result.rgb, colorMatrixUniforms.uAlpha);

    rgb.r *= result.a;
    rgb.g *= result.a;
    rgb.b *= result.a;

    return vec4(rgb, result.a);
}`;class cte extends Rt{constructor(e={}){const r=new Pt({uColorMatrix:{value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],type:"f32",size:20},uAlpha:{value:1,type:"f32"}}),n=qe.from({vertex:{source:mb,entryPoint:"mainVertex"},fragment:{source:mb,entryPoint:"mainFragment"}}),i=et.from({vertex:eg,fragment:mF,name:"color-matrix-filter"});super({...e,gpuProgram:n,glProgram:i,resources:{colorMatrixUniforms:r}}),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.matrix,e),n=this._colorMatrix(n)),this.resources.colorMatrixUniforms.uniforms.uColorMatrix=n,this.resources.colorMatrixUniforms.update()}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=Re.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}grayscale(e,r){this.greyscale(e,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),u=n+(1-n)*o,l=o*(1-n)-a*i,c=o*(1-n)+a*i,f=o*(1-n)+a*i,d=n+o*(1-n),h=o*(1-n)-a*i,p=o*(1-n)-a*i,m=o*(1-n)+a*i,g=n+o*(1-n),v=[u,l,c,0,0,f,d,h,0,0,p,m,g,0,0,0,0,0,1,0];this._loadMatrix(v,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e||(e=.2),r||(r=.15),n||(n=16770432),i||(i=3375104);const o=Re.shared,[a,u,l]=o.setValue(n).toArray(),[c,f,d]=o.setValue(i).toArray(),h=[.3,.59,.11,0,0,a,u,l,e,0,c,f,d,r,0,a-c,u-f,l-d,0,0];this._loadMatrix(h,s)}night(e,r){e||(e=.1);const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.resources.colorMatrixUniforms.uniforms.uColorMatrix}set matrix(e){this.resources.colorMatrixUniforms.uniforms.uColorMatrix=e}get alpha(){return this.resources.colorMatrixUniforms.uniforms.uAlpha}set alpha(e){this.resources.colorMatrixUniforms.uniforms.uAlpha=e}}var gF=`
in vec2 vTextureCoord;
in vec2 vFilterUv;

out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uMapTexture;

uniform vec4 uInputClamp;
uniform highp vec4 uInputSize;
uniform mat2 uRotation;
uniform vec2 uScale;

void main()
{
    vec4 map = texture(uMapTexture, vFilterUv);
    
    vec2 offset = uInputSize.zw * (uRotation * (map.xy - 0.5)) * uScale; 

    finalColor = texture(uTexture, clamp(vTextureCoord + offset, uInputClamp.xy, uInputClamp.zw));
}
`,vF=`in vec2 aPosition;
out vec2 vTextureCoord;
out vec2 vFilterUv;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

uniform mat3 uFilterMatrix;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( void )
{
  return ( uFilterMatrix * vec3( filterTextureCoord(), 1.0)  ).xy;
}


void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
    vFilterUv = getFilterCoord();
}
`,gb=`
struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct DisplacementUniforms {
  uFilterMatrix:mat3x3<f32>,
  uScale:vec2<f32>,
  uRotation:mat2x2<f32>
};



@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : DisplacementUniforms;
@group(1) @binding(1) var uMapTexture: texture_2d<f32>;
@group(1) @binding(2) var uMapSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{

  
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var map = textureSample(uMapTexture, uMapSampler, filterUv);

    var offset =  gfu.uInputSize.zw * (filterUniforms.uRotation * (map.xy - 0.5)) * filterUniforms.uScale; 
   
    return textureSample(uTexture, uSampler, clamp(uv + offset, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
}`;class fte extends Rt{constructor(...e){let r=e[0];r instanceof Zn&&(e[1]&&oe(_e,"DisplacementFilter now uses options object instead of params. {sprite, scale}"),r={sprite:r,scale:e[1]});const{sprite:n,scale:i,...s}=r;let o=i??20;typeof o=="number"&&(o=new Le(o,o));const a=new Pt({uFilterMatrix:{value:new ce,type:"mat3x3<f32>"},uScale:{value:o,type:"vec2<f32>"},uRotation:{value:new Float32Array([0,0,0,0]),type:"mat2x2<f32>"}}),u=et.from({vertex:vF,fragment:gF,name:"displacement-filter"}),l=qe.from({vertex:{source:gb,entryPoint:"mainVertex"},fragment:{source:gb,entryPoint:"mainFragment"}}),c=n.texture.source;super({...s,gpuProgram:l,glProgram:u,resources:{filterUniforms:a,uMapTexture:c,uMapSampler:c.style}}),this._sprite=r.sprite,this._sprite.renderable=!1}apply(e,r,n,i){const s=this.resources.filterUniforms.uniforms;e.calculateSpriteMatrix(s.uFilterMatrix,this._sprite);const o=this._sprite.worldTransform,a=Math.sqrt(o.a*o.a+o.b*o.b),u=Math.sqrt(o.c*o.c+o.d*o.d);a!==0&&u!==0&&(s.uRotation[0]=o.a/a,s.uRotation[1]=o.b/a,s.uRotation[2]=o.c/u,s.uRotation[3]=o.d/u),this.resources.uMapTexture=this._sprite.texture.source,e.applyFilter(this,r,n,i)}get scale(){return this.resources.filterUniforms.uniforms.uScale}}var yF=`
in vec2 vTextureCoord;
in vec4 vColor;

out vec4 finalColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uTexture;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture(uTexture, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) *  uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    finalColor = color;
}
`,vb=`

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct NoiseUniforms {
  uNoise:f32,
  uSeed:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> noiseUniforms : NoiseUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}

fn rand(co:vec2<f32>) -> f32
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}



@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var pixelPosition =  globalTextureCoord(position.xy);// / (getSize());//-  gfu.uOutputFrame.xy);
  
    
    var sample = textureSample(uTexture, uSampler, uv);
    var randomValue =  rand(pixelPosition.xy * noiseUniforms.uSeed);
    var diff = (randomValue - 0.5) * noiseUniforms.uNoise;
  
    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (sample.a > 0.0) {
      sample.r /= sample.a;
      sample.g /= sample.a;
      sample.b /= sample.a;
    }

    sample.r += diff;
    sample.g += diff;
    sample.b += diff;

    // Premultiply alpha again.
    sample.r *= sample.a;
    sample.g *= sample.a;
    sample.b *= sample.a;
    
    return sample;
}`;const _F=class bF extends Rt{constructor(e={}){e={...bF.defaultOptions,...e};const r=qe.from({vertex:{source:vb,entryPoint:"mainVertex"},fragment:{source:vb,entryPoint:"mainFragment"}}),n=et.from({vertex:eg,fragment:yF,name:"noise-filter"}),{noise:i,seed:s,...o}=e;super({...o,gpuProgram:r,glProgram:n,resources:{noiseUniforms:new Pt({uNoise:{value:1,type:"f32"},uSeed:{value:1,type:"f32"}})}}),this.noise=i,this.seed=s??Math.random()}get noise(){return this.resources.noiseUniforms.uniforms.uNoise}set noise(e){this.resources.noiseUniforms.uniforms.uNoise=e}get seed(){return this.resources.noiseUniforms.uniforms.uSeed}set seed(e){this.resources.noiseUniforms.uniforms.uSeed=e}};_F.defaultOptions={noise:.5};let dte=_F;class K2{constructor(e){this._renderer=e}push(e,r,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",canBundle:!1,action:"pushFilter",container:r,filterEffect:e})}pop(e,r,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}execute(e){e.action==="pushFilter"?this._renderer.filter.push(e):e.action==="popFilter"&&this._renderer.filter.pop()}destroy(){this._renderer=null}}K2.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"filter"};function xF(t,e){e.clear();const r=e.matrix;for(let n=0;n<t.length;n++){const i=t[n];i.globalDisplayStatus<7||(e.matrix=i.worldTransform,e.addBounds(i.bounds))}return e.matrix=r,e}const hte=new aa({attributes:{aPosition:{buffer:new Float32Array([0,0,1,0,1,1,0,1]),format:"float32x2",stride:2*4,offset:0}},indexBuffer:new Uint32Array([0,1,2,0,2,3])});class Z2{constructor(e){this._filterStackIndex=0,this._filterStack=[],this._filterGlobalUniforms=new Pt({uInputSize:{value:new Float32Array(4),type:"vec4<f32>"},uInputPixel:{value:new Float32Array(4),type:"vec4<f32>"},uInputClamp:{value:new Float32Array(4),type:"vec4<f32>"},uOutputFrame:{value:new Float32Array(4),type:"vec4<f32>"},uGlobalFrame:{value:new Float32Array(4),type:"vec4<f32>"},uOutputTexture:{value:new Float32Array(4),type:"vec4<f32>"}}),this._globalFilterBindGroup=new Ei({}),this.renderer=e}get activeBackTexture(){var e;return(e=this._activeFilterData)==null?void 0:e.backTexture}push(e){var h;const r=this.renderer,n=e.filterEffect.filters;this._filterStack[this._filterStackIndex]||(this._filterStack[this._filterStackIndex]=this._getFilterData());const i=this._filterStack[this._filterStackIndex];if(this._filterStackIndex++,n.length===0){i.skip=!0;return}const s=i.bounds;if(e.renderables?xF(e.renderables,s):e.filterEffect.filterArea?(s.clear(),s.addRect(e.filterEffect.filterArea),s.applyMatrix(e.container.worldTransform)):e.container.getFastGlobalBounds(!0,s),e.container){const m=(e.container.renderGroup||e.container.parentRenderGroup).cacheToLocalTransform;m&&s.applyMatrix(m)}const o=r.renderTarget.renderTarget.colorTexture.source;let a=1/0,u=0,l=!0,c=!1,f=!1,d=!0;for(let p=0;p<n.length;p++){const m=n[p];if(a=Math.min(a,m.resolution==="inherit"?o._resolution:m.resolution),u+=m.padding,m.antialias==="off"?l=!1:m.antialias==="inherit"&&l&&(l=o.antialias),m.clipToViewport||(d=!1),!!!(m.compatibleRenderers&r.type)){f=!1;break}if(m.blendRequired&&!(((h=r.backBuffer)==null?void 0:h.useBackBuffer)??!0)){he("Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options."),f=!1;break}f=m.enabled||f,c||(c=m.blendRequired)}if(!f){i.skip=!0;return}if(d){const p=r.renderTarget.rootViewPort,m=r.renderTarget.renderTarget.resolution;s.fitBounds(0,p.width/m,0,p.height/m)}if(s.scale(a).ceil().scale(1/a).pad(u|0),!s.isPositive){i.skip=!0;return}i.skip=!1,i.bounds=s,i.blendRequired=c,i.container=e.container,i.filterEffect=e.filterEffect,i.previousRenderSurface=r.renderTarget.renderSurface,i.inputTexture=Ct.getOptimalTexture(s.width,s.height,a,l),r.renderTarget.bind(i.inputTexture,!0),r.globalUniforms.push({offset:s})}pop(){const e=this.renderer;this._filterStackIndex--;const r=this._filterStack[this._filterStackIndex];if(r.skip)return;this._activeFilterData=r;const n=r.inputTexture,i=r.bounds;let s=ne.EMPTY;if(e.renderTarget.finishRenderPass(),r.blendRequired){const a=this._filterStackIndex>0?this._filterStack[this._filterStackIndex-1].bounds:null,u=e.renderTarget.getRenderTarget(r.previousRenderSurface);s=this.getBackTexture(u,i,a)}r.backTexture=s;const o=r.filterEffect.filters;if(this._globalFilterBindGroup.setResource(n.source.style,2),this._globalFilterBindGroup.setResource(s.source,3),e.globalUniforms.pop(),o.length===1)o[0].apply(this,n,r.previousRenderSurface,!1),Ct.returnTexture(n);else{let a=r.inputTexture,u=Ct.getOptimalTexture(i.width,i.height,a.source._resolution,!1),l=0;for(l=0;l<o.length-1;++l){o[l].apply(this,a,u,!0);const f=a;a=u,u=f}o[l].apply(this,a,r.previousRenderSurface,!1),Ct.returnTexture(a),Ct.returnTexture(u)}r.blendRequired&&Ct.returnTexture(s)}getBackTexture(e,r,n){const i=e.colorTexture.source._resolution,s=Ct.getOptimalTexture(r.width,r.height,i,!1);let o=r.minX,a=r.minY;n&&(o-=n.minX,a-=n.minY),o=Math.floor(o*i),a=Math.floor(a*i);const u=Math.ceil(r.width*i),l=Math.ceil(r.height*i);return this.renderer.renderTarget.copyToTexture(e,s,{x:o,y:a},{width:u,height:l},{x:0,y:0}),s}applyFilter(e,r,n,i){const s=this.renderer,o=this._filterStack[this._filterStackIndex],a=o.bounds,u=Le.shared,c=o.previousRenderSurface===n;let f=this.renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution,d=this._filterStackIndex-1;for(;d>0&&this._filterStack[d].skip;)--d;d>0&&(f=this._filterStack[d].inputTexture.source._resolution);const h=this._filterGlobalUniforms,p=h.uniforms,m=p.uOutputFrame,g=p.uInputSize,v=p.uInputPixel,y=p.uInputClamp,b=p.uGlobalFrame,_=p.uOutputTexture;if(c){let w=this._filterStackIndex;for(;w>0;){w--;const P=this._filterStack[this._filterStackIndex-1];if(!P.skip){u.x=P.bounds.minX,u.y=P.bounds.minY;break}}m[0]=a.minX-u.x,m[1]=a.minY-u.y}else m[0]=0,m[1]=0;m[2]=r.frame.width,m[3]=r.frame.height,g[0]=r.source.width,g[1]=r.source.height,g[2]=1/g[0],g[3]=1/g[1],v[0]=r.source.pixelWidth,v[1]=r.source.pixelHeight,v[2]=1/v[0],v[3]=1/v[1],y[0]=.5*v[2],y[1]=.5*v[3],y[2]=r.frame.width*g[2]-.5*v[2],y[3]=r.frame.height*g[3]-.5*v[3];const x=this.renderer.renderTarget.rootRenderTarget.colorTexture;b[0]=u.x*f,b[1]=u.y*f,b[2]=x.source.width*f,b[3]=x.source.height*f;const S=this.renderer.renderTarget.getRenderTarget(n);if(s.renderTarget.bind(n,!!i),n instanceof ne?(_[0]=n.frame.width,_[1]=n.frame.height):(_[0]=S.width,_[1]=S.height),_[2]=S.isRoot?-1:1,h.update(),s.renderPipes.uniformBatch){const w=s.renderPipes.uniformBatch.getUboResource(h);this._globalFilterBindGroup.setResource(w,0)}else this._globalFilterBindGroup.setResource(h,0);this._globalFilterBindGroup.setResource(r.source,1),this._globalFilterBindGroup.setResource(r.source.style,2),e.groups[0]=this._globalFilterBindGroup,s.encoder.draw({geometry:hte,shader:e,state:e._state,topology:"triangle-list"}),s.type===Wr.WEBGL&&s.renderTarget.finishRenderPass()}_getFilterData(){return{skip:!1,inputTexture:null,bounds:new Ut,container:null,filterEffect:null,blendRequired:!1,previousRenderSurface:null}}calculateSpriteMatrix(e,r){const n=this._activeFilterData,i=e.set(n.inputTexture._source.width,0,0,n.inputTexture._source.height,n.bounds.minX,n.bounds.minY),s=r.worldTransform.copyTo(ce.shared),o=r.renderGroup||r.parentRenderGroup;return o&&o.cacheToLocalTransform&&s.prepend(o.cacheToLocalTransform),s.invert(),i.prepend(s),i.scale(1/r.texture.frame.width,1/r.texture.frame.height),i.translate(r.anchor.x,r.anchor.y),i}}Z2.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"filter"};var SF=`in vec2 vMaskCoord;
in vec2 vTextureCoord;

uniform sampler2D uTexture;
uniform sampler2D uMaskTexture;

uniform float uAlpha;
uniform vec4 uMaskClamp;
uniform float uInverse;

out vec4 finalColor;

void main(void)
{
    float clip = step(3.5,
        step(uMaskClamp.x, vMaskCoord.x) +
        step(uMaskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, uMaskClamp.z) +
        step(vMaskCoord.y, uMaskClamp.w));

    // TODO look into why this is needed
    float npmAlpha = uAlpha;
    vec4 original = texture(uTexture, vTextureCoord);
    vec4 masky = texture(uMaskTexture, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    float a = alphaMul * masky.r * npmAlpha * clip;

    if (uInverse == 1.0) {
        a = 1.0 - a;
    }

    finalColor = original * a;
}
`,wF=`in vec2 aPosition;

out vec2 vTextureCoord;
out vec2 vMaskCoord;


uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;
uniform mat3 uFilterMatrix;

vec4 filterVertexPosition(  vec2 aPosition )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
       
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord(  vec2 aPosition )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

vec2 getFilterCoord( vec2 aPosition )
{
    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}   

void main(void)
{
    gl_Position = filterVertexPosition(aPosition);
    vTextureCoord = filterTextureCoord(aPosition);
    vMaskCoord = getFilterCoord(aPosition);
}
`,yb=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

struct MaskUniforms {
  uFilterMatrix:mat3x3<f32>,
  uMaskClamp:vec4<f32>,
  uAlpha:f32,
  uInverse:f32,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;
@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler : sampler;

@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;
@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) filterUv : vec2<f32>,
};

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);
}

fn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>
{
  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}

@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>,
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition),
   getFilterCoord(aPosition)
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) filterUv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {

    var maskClamp = filterUniforms.uMaskClamp;
    var uAlpha = filterUniforms.uAlpha;

    var clip = step(3.5,
      step(maskClamp.x, filterUv.x) +
      step(maskClamp.y, filterUv.y) +
      step(filterUv.x, maskClamp.z) +
      step(filterUv.y, maskClamp.w));

    var mask = textureSample(uMaskTexture, uSampler, filterUv);
    var source = textureSample(uTexture, uSampler, uv);
    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);

    var a: f32 = alphaMul * mask.r * uAlpha * clip;

    if (filterUniforms.uInverse == 1.0) {
        a = 1.0 - a;
    }

    return source * a;
}
`;class EF extends Rt{constructor(e){const{sprite:r,...n}=e,i=new G1(r.texture),s=new Pt({uFilterMatrix:{value:new ce,type:"mat3x3<f32>"},uMaskClamp:{value:i.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:e.inverse?1:0,type:"f32"}}),o=qe.from({vertex:{source:yb,entryPoint:"mainVertex"},fragment:{source:yb,entryPoint:"mainFragment"}}),a=et.from({vertex:wF,fragment:SF,name:"mask-filter"});super({...n,gpuProgram:o,glProgram:a,resources:{filterUniforms:s,uMaskTexture:r.texture.source}}),this.sprite=r,this._textureMatrix=i}set inverse(e){this.resources.filterUniforms.uniforms.uInverse=e?1:0}get inverse(){return this.resources.filterUniforms.uniforms.uInverse===1}apply(e,r,n,i){this._textureMatrix.texture=this.sprite.texture,e.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,e.applyFilter(this,r,n,i)}}var pte=`fn getLuminosity(c: vec3<f32>) -> f32 {
  return 0.3 * c.r + 0.59 * c.g + 0.11 * c.b;
}

fn setLuminosity(c: vec3<f32>, lum: f32) -> vec3<f32> {
  let d: f32 = lum - getLuminosity(c);
  let newColor: vec3<f32> = c.rgb + vec3<f32>(d, d, d);

  // clip back into legal range
  let newLum: f32 = getLuminosity(newColor);
  let cMin: f32 = min(newColor.r, min(newColor.g, newColor.b));
  let cMax: f32 = max(newColor.r, max(newColor.g, newColor.b));

  let t1: f32 = newLum / (newLum - cMin);
  let t2: f32 = (1.0 - newLum) / (cMax - newLum);

  let finalColor = mix(vec3<f32>(newLum, newLum, newLum), newColor, select(select(1.0, t2, cMax > 1.0), t1, cMin < 0.0));

  return finalColor;
}

fn getSaturation(c: vec3<f32>) -> f32 {
  return max(c.r, max(c.g, c.b)) - min(c.r, min(c.g, c.b));
}

// Set saturation if color components are sorted in ascending order.
fn setSaturationMinMidMax(cSorted: vec3<f32>, s: f32) -> vec3<f32> {
  var result: vec3<f32>;
  if (cSorted.z > cSorted.x) {
    let newY = (((cSorted.y - cSorted.x) * s) / (cSorted.z - cSorted.x));
    result = vec3<f32>(0.0, newY, s);
  } else {
    result = vec3<f32>(0.0, 0.0, 0.0);
  }
  return vec3<f32>(result.x, result.y, result.z);
}

fn setSaturation(c: vec3<f32>, s: f32) -> vec3<f32> {
    var result: vec3<f32> = c;

    if (c.r <= c.g && c.r <= c.b) {
        if (c.g <= c.b) {
            result = setSaturationMinMidMax(result, s);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.r, result.b, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.r, temp.b, temp.g);
        }
    } else if (c.g <= c.r && c.g <= c.b) {
        if (c.r <= c.b) {
            var temp: vec3<f32> = vec3<f32>(result.g, result.r, result.b);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.r, temp.b);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.g, result.b, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.g, temp.b, temp.r);
        }
    } else {
        if (c.r <= c.g) {
            var temp: vec3<f32> = vec3<f32>(result.b, result.r, result.g);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.r, temp.g);
        } else {
            var temp: vec3<f32> = vec3<f32>(result.b, result.g, result.r);
            temp = setSaturationMinMidMax(temp, s);
            result = vec3<f32>(temp.b, temp.g, temp.r);
        }
    }

    return result;
}`;function _b(t,e,r,n,i,s,o,a){const u=o-r,l=a-n,c=i-r,f=s-n,d=t-r,h=e-n,p=u*u+l*l,m=u*c+l*f,g=u*d+l*h,v=c*c+f*f,y=c*d+f*h,b=1/(p*v-m*m),_=(v*g-m*y)*b,x=(p*y-m*g)*b;return _>=0&&x>=0&&_+x<1}class Q2{constructor(e=0,r=0,n=0,i=0,s=0,o=0){this.type="triangle",this.x=e,this.y=r,this.x2=n,this.y2=i,this.x3=s,this.y3=o}contains(e,r){const n=(this.x-this.x3)*(r-this.y3)-(this.y-this.y3)*(e-this.x3),i=(this.x2-this.x)*(r-this.y)-(this.y2-this.y)*(e-this.x);if(n<0!=i<0&&n!==0&&i!==0)return!1;const s=(this.x3-this.x2)*(r-this.y2)-(this.y3-this.y2)*(e-this.x2);return s===0||s<0==n+i<=0}strokeContains(e,r,n,i=.5){const s=n/2,o=s*s,{x:a,x2:u,x3:l,y:c,y2:f,y3:d}=this;return Ac(e,r,a,c,u,d)<=o||Ac(e,r,u,f,l,d)<=o||Ac(e,r,l,d,a,c)<=o}clone(){return new Q2(this.x,this.y,this.x2,this.y2,this.x3,this.y3)}copyFrom(e){return this.x=e.x,this.y=e.y,this.x2=e.x2,this.y2=e.y2,this.x3=e.x3,this.y3=e.y3,this}copyTo(e){return e.copyFrom(this),e}getBounds(e){e||(e=new Ie);const r=Math.min(this.x,this.x2,this.x3),n=Math.max(this.x,this.x2,this.x3),i=Math.min(this.y,this.y2,this.y3),s=Math.max(this.y,this.y2,this.y3);return e.x=r,e.y=i,e.width=n-r,e.height=s-i,e}}const CF=class TF{constructor(e){this._tick=()=>{this.timeout=setTimeout(this._processQueue,0)},this._processQueue=()=>{const{queue:r}=this;let n=0;for(;r.length&&n<TF.uploadsPerFrame;){const i=r.shift();this.uploadQueueItem(i),n++}r.length?nr.system.addOnce(this._tick,this,rs.UTILITY):this._resolve()},this.renderer=e,this.queue=[],this.resolves=[]}getQueue(){return[...this.queue]}add(e){const r=Array.isArray(e)?e:[e];for(const n of r)n instanceof ar?this._addContainer(n):this.resolveQueueItem(n,this.queue);return this}_addContainer(e){this.resolveQueueItem(e,this.queue);for(const r of e.children)this._addContainer(r)}upload(e){return e&&this.add(e),new Promise(r=>{this.queue.length?(this.resolves.push(r),this.dedupeQueue(),nr.system.addOnce(this._tick,this,rs.UTILITY)):r()})}dedupeQueue(){const e=Object.create(null);let r=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];e[i.uid]||(e[i.uid]=!0,this.queue[r++]=i)}this.queue.length=r}_resolve(){const{resolves:e}=this,r=e.slice(0);e.length=0;for(const n of r)n()}};CF.uploadsPerFrame=4;let AF=CF;class Bu extends Ni{constructor(e){e instanceof wr&&(e={context:e});const{context:r,roundPixels:n,...i}=e||{};super({label:"Graphics",...i}),this.renderPipeId="graphics",r?this._context=r:this._context=this._ownedContext=new wr,this._context.on("update",this.onViewUpdate,this),this.allowChildren=!1,this.roundPixels=n??!1}set context(e){e!==this._context&&(this._context.off("update",this.onViewUpdate,this),this._context=e,this._context.on("update",this.onViewUpdate,this),this.onViewUpdate())}get context(){return this._context}get bounds(){return this._context.bounds}updateBounds(){}containsPoint(e){return this._context.containsPoint(e)}destroy(e){this._ownedContext&&!e?this._ownedContext.destroy(e):(e===!0||(e==null?void 0:e.context)===!0)&&this._context.destroy(e),this._ownedContext=null,this._context=null,super.destroy(e)}_callContextMethod(e,r){return this.context[e](...r),this}setFillStyle(...e){return this._callContextMethod("setFillStyle",e)}setStrokeStyle(...e){return this._callContextMethod("setStrokeStyle",e)}fill(...e){return this._callContextMethod("fill",e)}stroke(...e){return this._callContextMethod("stroke",e)}texture(...e){return this._callContextMethod("texture",e)}beginPath(){return this._callContextMethod("beginPath",[])}cut(){return this._callContextMethod("cut",[])}arc(...e){return this._callContextMethod("arc",e)}arcTo(...e){return this._callContextMethod("arcTo",e)}arcToSvg(...e){return this._callContextMethod("arcToSvg",e)}bezierCurveTo(...e){return this._callContextMethod("bezierCurveTo",e)}closePath(){return this._callContextMethod("closePath",[])}ellipse(...e){return this._callContextMethod("ellipse",e)}circle(...e){return this._callContextMethod("circle",e)}path(...e){return this._callContextMethod("path",e)}lineTo(...e){return this._callContextMethod("lineTo",e)}moveTo(...e){return this._callContextMethod("moveTo",e)}quadraticCurveTo(...e){return this._callContextMethod("quadraticCurveTo",e)}rect(...e){return this._callContextMethod("rect",e)}roundRect(...e){return this._callContextMethod("roundRect",e)}poly(...e){return this._callContextMethod("poly",e)}regularPoly(...e){return this._callContextMethod("regularPoly",e)}roundPoly(...e){return this._callContextMethod("roundPoly",e)}roundShape(...e){return this._callContextMethod("roundShape",e)}filletRect(...e){return this._callContextMethod("filletRect",e)}chamferRect(...e){return this._callContextMethod("chamferRect",e)}star(...e){return this._callContextMethod("star",e)}svg(...e){return this._callContextMethod("svg",e)}restore(...e){return this._callContextMethod("restore",e)}save(){return this._callContextMethod("save",[])}getTransform(){return this.context.getTransform()}resetTransform(){return this._callContextMethod("resetTransform",[])}rotateTransform(...e){return this._callContextMethod("rotate",e)}scaleTransform(...e){return this._callContextMethod("scale",e)}setTransform(...e){return this._callContextMethod("setTransform",e)}transform(...e){return this._callContextMethod("transform",e)}translateTransform(...e){return this._callContextMethod("translate",e)}clear(){return this._callContextMethod("clear",[])}get fillStyle(){return this._context.fillStyle}set fillStyle(e){this._context.fillStyle=e}get strokeStyle(){return this._context.strokeStyle}set strokeStyle(e){this._context.strokeStyle=e}clone(e=!1){return e?new Bu(this._context.clone()):(this._ownedContext=null,new Bu(this._context))}lineStyle(e,r,n){oe(_e,"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.");const i={};return e&&(i.width=e),r&&(i.color=r),n&&(i.alpha=n),this.context.strokeStyle=i,this}beginFill(e,r){oe(_e,"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.");const n={};return e!==void 0&&(n.color=e),r!==void 0&&(n.alpha=r),this.context.fillStyle=n,this}endFill(){oe(_e,"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style."),this.context.fill();const e=this.context.strokeStyle;return(e.width!==wr.defaultStrokeStyle.width||e.color!==wr.defaultStrokeStyle.color||e.alpha!==wr.defaultStrokeStyle.alpha)&&this.context.stroke(),this}drawCircle(...e){return oe(_e,"Graphics#drawCircle has been renamed to Graphics#circle"),this._callContextMethod("circle",e)}drawEllipse(...e){return oe(_e,"Graphics#drawEllipse has been renamed to Graphics#ellipse"),this._callContextMethod("ellipse",e)}drawPolygon(...e){return oe(_e,"Graphics#drawPolygon has been renamed to Graphics#poly"),this._callContextMethod("poly",e)}drawRect(...e){return oe(_e,"Graphics#drawRect has been renamed to Graphics#rect"),this._callContextMethod("rect",e)}drawRoundedRect(...e){return oe(_e,"Graphics#drawRoundedRect has been renamed to Graphics#roundRect"),this._callContextMethod("roundRect",e)}drawStar(...e){return oe(_e,"Graphics#drawStar has been renamed to Graphics#star"),this._callContextMethod("star",e)}}const PF=class RF extends aa{constructor(...e){let r=e[0]??{};r instanceof Float32Array&&(oe(_e,"use new MeshGeometry({ positions, uvs, indices }) instead"),r={positions:r,uvs:e[1],indices:e[2]}),r={...RF.defaultOptions,...r};const n=r.positions||new Float32Array([0,0,1,0,1,1,0,1]);let i=r.uvs;i||(r.positions?i=new Float32Array(n.length):i=new Float32Array([0,0,1,0,1,1,0,1]));const s=r.indices||new Uint32Array([0,1,2,0,2,3]),o=r.shrinkBuffersToFit,a=new Tr({data:n,label:"attribute-mesh-positions",shrinkToFit:o,usage:Ce.VERTEX|Ce.COPY_DST}),u=new Tr({data:i,label:"attribute-mesh-uvs",shrinkToFit:o,usage:Ce.VERTEX|Ce.COPY_DST}),l=new Tr({data:s,label:"index-mesh-buffer",shrinkToFit:o,usage:Ce.INDEX|Ce.COPY_DST});super({attributes:{aPosition:{buffer:a,format:"float32x2",stride:2*4,offset:0},aUV:{buffer:u,format:"float32x2",stride:2*4,offset:0}},indexBuffer:l,topology:r.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(e){this.attributes.aPosition.buffer.data=e}get uvs(){return this.attributes.aUV.buffer.data}set uvs(e){this.attributes.aUV.buffer.data=e}get indices(){return this.indexBuffer.data}set indices(e){this.indexBuffer.data=e}};PF.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let ho=PF;class cl extends Ni{constructor(...e){let r=e[0];r instanceof aa&&(oe(_e,"Mesh: use new Mesh({ geometry, shader }) instead"),r={geometry:r,shader:e[1]},e[3]&&(oe(_e,"Mesh: drawMode argument has been removed, use geometry.topology instead"),r.geometry.topology=e[3]));const{geometry:n,shader:i,texture:s,roundPixels:o,state:a,...u}=r;super({label:"Mesh",...u}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=i??null,this.texture=s??(i==null?void 0:i.texture)??ne.WHITE,this.state=a??dn.for2d(),this._geometry=n,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=o??!1}get material(){return oe(_e,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(e){this._shader!==e&&(this._shader=e,this.onViewUpdate())}get shader(){return this._shader}set geometry(e){var r;this._geometry!==e&&((r=this._geometry)==null||r.off("update",this.onViewUpdate,this),e.on("update",this.onViewUpdate,this),this._geometry=e,this.onViewUpdate())}get geometry(){return this._geometry}set texture(e){e||(e=ne.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=e),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}get batched(){return this._shader||this.state.data&12?!1:this._geometry instanceof ho?this._geometry.batchMode==="auto"?this._geometry.positions.length/2<=100:this._geometry.batchMode==="batch":!1}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(e){const{x:r,y:n}=e;if(!this.bounds.containsPoint(r,n))return!1;const i=this.geometry.getBuffer("aPosition").data,s=this.geometry.topology==="triangle-strip"?3:1;if(this.geometry.getIndex()){const o=this.geometry.getIndex().data,a=o.length;for(let u=0;u+2<a;u+=s){const l=o[u]*2,c=o[u+1]*2,f=o[u+2]*2;if(_b(r,n,i[l],i[l+1],i[c],i[c+1],i[f],i[f+1]))return!0}}else{const o=i.length/2;for(let a=0;a+2<o;a+=s){const u=a*2,l=(a+1)*2,c=(a+2)*2;if(_b(r,n,i[u],i[u+1],i[l],i[l+1],i[c],i[c+1]))return!0}}return!1}destroy(e){var n;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(i)}(n=this._geometry)==null||n.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}class yf extends Zn{constructor(...e){let r=e[0];Array.isArray(e[0])&&(r={textures:e[0],autoUpdate:e[1]});const{animationSpeed:n=1,autoPlay:i=!1,autoUpdate:s=!0,loop:o=!0,onComplete:a=null,onFrameChange:u=null,onLoop:l=null,textures:c,updateAnchor:f=!1,...d}=r,[h]=c;super({...d,texture:h instanceof ne?h:h.texture}),this._textures=null,this._durations=null,this._autoUpdate=s,this._isConnectedToTicker=!1,this.animationSpeed=n,this.loop=o,this.updateAnchor=f,this.onComplete=a,this.onFrameChange=u,this.onLoop=l,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=c,i&&this.play()}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(nr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(nr.shared.add(this.update,this,rs.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const r=e.deltaTime,n=this.animationSpeed*r,i=this.currentFrame;if(this._durations!==null){let s=this._currentTime%1*this._durations[this.currentFrame];for(s+=n/60*1e3;s<0;)this._currentTime--,s+=this._durations[this.currentFrame];const o=Math.sign(this.animationSpeed*r);for(this._currentTime=Math.floor(this._currentTime);s>=this._durations[this.currentFrame];)s-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=s/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this._updateTexture())}_updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this.texture=this._textures[e],this.updateAnchor&&this.texture.defaultAnchor&&this.anchor.copyFrom(this.texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(){this.stop(),super.destroy(),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const r=[];for(let n=0;n<e.length;++n)r.push(ne.from(e[n]));return new yf(r)}static fromImages(e){const r=[];for(let n=0;n<e.length;++n)r.push(ne.from(e[n]));return new yf(r)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof ne)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let r=0;r<e.length;r++)this._textures.push(e[r].texture),this._durations.push(e[r].time)}this._previousFrame=null,this.gotoAndStop(0),this._updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const r=this.currentFrame;this._currentTime=e,r!==this.currentFrame&&this._updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(nr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(nr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}class OF{constructor({matrix:e,observer:r}={}){this.dirty=!0,this._matrix=e??new ce,this.observer=r,this.position=new Et(this,0,0),this.scale=new Et(this,1,1),this.pivot=new Et(this,0,0),this.skew=new Et(this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1}get matrix(){const e=this._matrix;return this.dirty&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this.dirty=!1),e}_onUpdate(e){var r;this.dirty=!0,e===this.skew&&this.updateSkew(),(r=this.observer)==null||r._onUpdate(this)}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this.dirty=!0}toString(){return`[pixi.js/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}setFromMatrix(e){e.decompose(this),this.dirty=!0}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this._onUpdate(this.skew))}}const BF=class Eh extends Ni{constructor(...e){let r=e[0]||{};r instanceof ne&&(r={texture:r}),e.length>1&&(oe(_e,"use new TilingSprite({ texture, width:100, height:100 }) instead"),r.width=e[1],r.height=e[2]),r={...Eh.defaultOptions,...r};const{texture:n,anchor:i,tilePosition:s,tileScale:o,tileRotation:a,width:u,height:l,applyAnchorToTexture:c,roundPixels:f,...d}=r??{};super({label:"TilingSprite",...d}),this.renderPipeId="tilingSprite",this.batched=!0,this.allowChildren=!1,this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),this.applyAnchorToTexture=c,this.texture=n,this._width=u??n.width,this._height=l??n.height,this._tileTransform=new OF({observer:{_onUpdate:()=>this.onViewUpdate()}}),i&&(this.anchor=i),this.tilePosition=s,this.tileScale=o,this.tileRotation=a,this.roundPixels=f??!1}static from(e,r={}){return typeof e=="string"?new Eh({texture:He.get(e),...r}):new Eh({texture:e,...r})}get uvRespectAnchor(){return he("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture}set uvRespectAnchor(e){he("uvRespectAnchor is deprecated, please use applyAnchorToTexture instead"),this.applyAnchorToTexture=e}get clampMargin(){return this._texture.textureMatrix.clampMargin}set clampMargin(e){this._texture.textureMatrix.clampMargin=e}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get tilePosition(){return this._tileTransform.position}set tilePosition(e){this._tileTransform.position.copyFrom(e)}get tileScale(){return this._tileTransform.scale}set tileScale(e){typeof e=="number"?this._tileTransform.scale.set(e):this._tileTransform.scale.copyFrom(e)}set tileRotation(e){this._tileTransform.rotation=e}get tileRotation(){return this._tileTransform.rotation}get tileTransform(){return this._tileTransform}set texture(e){e||(e=ne.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get texture(){return this._texture}set width(e){this._width=e,this.onViewUpdate()}get width(){return this._width}set height(e){this._height=e,this.onViewUpdate()}get height(){return this._height}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}updateBounds(){const e=this._bounds,r=this._anchor,n=this._width,i=this._height;e.minX=-r._x*n,e.maxX=e.minX+n,e.minY=-r._y*i,e.maxY=e.minY+i}containsPoint(e){const r=this._width,n=this._height,i=-r*this._anchor._x;let s=0;return e.x>=i&&e.x<=i+r&&(s=-n*this._anchor._y,e.y>=s&&e.y<=s+n)}destroy(e=!1){if(super.destroy(e),this._anchor=null,this._tileTransform=null,this._bounds=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null}};BF.defaultOptions={texture:ne.EMPTY,anchor:{x:0,y:0},tilePosition:{x:0,y:0},tileScale:{x:1,y:1},tileRotation:0,applyAnchorToTexture:!1};let kF=BF;class tg extends Ni{constructor(e,r){const{text:n,resolution:i,style:s,anchor:o,width:a,height:u,roundPixels:l,...c}=e;super({...c}),this.batched=!0,this._resolution=null,this._autoResolution=!0,this._didTextUpdate=!0,this._styleClass=r,this.text=n??"",this.style=s,this.resolution=i??null,this.allowChildren=!1,this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),o&&(this.anchor=o),this.roundPixels=l??!1,a!==void 0&&(this.width=a),u!==void 0&&(this.height=u)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}set text(e){e=e.toString(),this._text!==e&&(this._text=e,this.onViewUpdate())}get text(){return this._text}set resolution(e){this._autoResolution=e===null,this._resolution=e,this.onViewUpdate()}get resolution(){return this._resolution}get style(){return this._style}set style(e){var r;e||(e={}),(r=this._style)==null||r.off("update",this.onViewUpdate,this),e instanceof this._styleClass?this._style=e:this._style=new this._styleClass(e),this._style.on("update",this.onViewUpdate,this),this.onViewUpdate()}get width(){return Math.abs(this.scale.x)*this.bounds.width}set width(e){this._setWidth(e,this.bounds.width)}get height(){return Math.abs(this.scale.y)*this.bounds.height}set height(e){this._setHeight(e,this.bounds.height)}getSize(e){return e||(e={}),e.width=Math.abs(this.scale.x)*this.bounds.width,e.height=Math.abs(this.scale.y)*this.bounds.height,e}setSize(e,r){typeof e=="object"?(r=e.height??e.width,e=e.width):r??(r=e),e!==void 0&&this._setWidth(e,this.bounds.width),r!==void 0&&this._setHeight(r,this.bounds.height)}containsPoint(e){const r=this.bounds.width,n=this.bounds.height,i=-r*this.anchor.x;let s=0;return e.x>=i&&e.x<=i+r&&(s=-n*this.anchor.y,e.y>=s&&e.y<=s+n)}onViewUpdate(){this.didViewUpdate||(this._didTextUpdate=!0),super.onViewUpdate()}_getKey(){return`${this.text}:${this._style.styleKey}:${this._resolution}`}destroy(e=!1){super.destroy(e),this.owner=null,this._bounds=null,this._anchor=null,(typeof e=="boolean"?e:e!=null&&e.style)&&this._style.destroy(e),this._style=null,this._text=null}}function rg(t,e){let r=t[0]??{};return(typeof r=="string"||t[1])&&(oe(_e,`use new ${e}({ text: "hi!", style }) instead`),r={text:r,style:t[1]}),r}class J2 extends tg{constructor(...e){const r=rg(e,"Text");super(r,hn),this.renderPipeId="text"}updateBounds(){const e=this._bounds,r=this._anchor,n=li.measureText(this._text,this._style),{width:i,height:s}=n;e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*s,e.maxY=e.minY+s}}class DF extends AF{resolveQueueItem(e,r){return e instanceof ar?this.resolveContainerQueueItem(e,r):e instanceof yt||e instanceof ne?r.push(e.source):e instanceof wr&&r.push(e),null}resolveContainerQueueItem(e,r){e instanceof Zn||e instanceof kF||e instanceof cl?r.push(e.texture.source):e instanceof J2?r.push(e):e instanceof Bu?r.push(e.context):e instanceof yf&&e.textures.forEach(n=>{n.source?r.push(n.source):r.push(n.texture.source)})}resolveGraphicsContextQueueItem(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const n of r)if(n.action==="texture"){const{image:i}=n.data;return i.source}else if(n.action==="fill"){const{texture:i}=n.data.style;return i.source}return null}}class MF extends tg{constructor(...e){var r;const n=rg(e,"BitmapText");n.style??(n.style=n.style||{}),(r=n.style).fill??(r.fill=16777215),super(n,hn),this.renderPipeId="bitmapText"}updateBounds(){const e=this._bounds,r=this._anchor,n=hf.measureText(this.text,this._style),i=n.scale,s=n.offsetY*i;let o=n.width*i,a=n.height*i;const u=this._style._stroke;u&&(o+=u.width,a+=u.width),e.minX=-r._x*o,e.maxX=e.minX+o,e.minY=-r._y*(a+s),e.maxY=e.minY+a}set resolution(e){e!==null&&he("[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.")}get resolution(){return this._resolution}}function IF(t){const e=t._stroke,r=t._fill,i=[`div { ${[`color: ${Re.shared.setValue(r.color).toHex()}`,`font-size: ${t.fontSize}px`,`font-family: ${t.fontFamily}`,`font-weight: ${t.fontWeight}`,`font-style: ${t.fontStyle}`,`font-variant: ${t.fontVariant}`,`letter-spacing: ${t.letterSpacing}px`,`text-align: ${t.align}`,`padding: ${t.padding}px`,`white-space: ${t.whiteSpace==="pre"&&t.wordWrap?"pre-wrap":t.whiteSpace}`,...t.lineHeight?[`line-height: ${t.lineHeight}px`]:[],...t.wordWrap?[`word-wrap: ${t.breakWords?"break-all":"break-word"}`,`max-width: ${t.wordWrapWidth}px`]:[],...e?[LF(e)]:[],...t.dropShadow?[FF(t.dropShadow)]:[],...t.cssOverrides].join(";")} }`];return mte(t.tagStyles,i),i.join(" ")}function FF(t){const e=Re.shared.setValue(t.color).setAlpha(t.alpha).toHexa(),r=Math.round(Math.cos(t.angle)*t.distance),n=Math.round(Math.sin(t.angle)*t.distance),i=`${r}px ${n}px`;return t.blur>0?`text-shadow: ${i} ${t.blur}px ${e}`:`text-shadow: ${i} ${e}`}function LF(t){return[`-webkit-text-stroke-width: ${t.width}px`,`-webkit-text-stroke-color: ${Re.shared.setValue(t.color).toHex()}`,`text-stroke-width: ${t.width}px`,`text-stroke-color: ${Re.shared.setValue(t.color).toHex()}`,"paint-order: stroke"].join(";")}const TA={fontSize:"font-size: {{VALUE}}px",fontFamily:"font-family: {{VALUE}}",fontWeight:"font-weight: {{VALUE}}",fontStyle:"font-style: {{VALUE}}",fontVariant:"font-variant: {{VALUE}}",letterSpacing:"letter-spacing: {{VALUE}}px",align:"text-align: {{VALUE}}",padding:"padding: {{VALUE}}px",whiteSpace:"white-space: {{VALUE}}",lineHeight:"line-height: {{VALUE}}px",wordWrapWidth:"max-width: {{VALUE}}px"},AA={fill:t=>`color: ${Re.shared.setValue(t).toHex()}`,breakWords:t=>`word-wrap: ${t?"break-all":"break-word"}`,stroke:LF,dropShadow:FF};function mte(t,e){for(const r in t){const n=t[r],i=[];for(const s in n)AA[s]?i.push(AA[s](n[s])):TA[s]&&i.push(TA[s].replace("{{VALUE}}",n[s]));e.push(`${r} { ${i.join(";")} }`)}}class Ko extends hn{constructor(e={}){super(e),this._cssOverrides=[],this.cssOverrides??(this.cssOverrides=e.cssOverrides),this.tagStyles=e.tagStyles??{}}set cssOverrides(e){this._cssOverrides=e instanceof Array?e:[e],this.update()}get cssOverrides(){return this._cssOverrides}_generateKey(){return this._styleKey=C2(this)+this._cssOverrides.join("-"),this._styleKey}update(){this._cssStyle=null,super.update()}clone(){return new Ko({align:this.align,breakWords:this.breakWords,dropShadow:this.dropShadow?{...this.dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,cssOverrides:this.cssOverrides})}get cssStyle(){return this._cssStyle||(this._cssStyle=IF(this)),this._cssStyle}addOverride(...e){const r=e.filter(n=>!this.cssOverrides.includes(n));r.length>0&&(this.cssOverrides.push(...r),this.update())}removeOverride(...e){const r=e.filter(n=>this.cssOverrides.includes(n));r.length>0&&(this.cssOverrides=this.cssOverrides.filter(n=>!r.includes(n)),this.update())}set fill(e){typeof e!="string"&&typeof e!="number"&&he("[HTMLTextStyle] only color fill is not supported by HTMLText"),super.fill=e}set stroke(e){e&&typeof e!="string"&&typeof e!="number"&&he("[HTMLTextStyle] only color stroke is not supported by HTMLText"),super.stroke=e}}const bb="http://www.w3.org/2000/svg",xb="http://www.w3.org/1999/xhtml";class eS{constructor(){this.svgRoot=document.createElementNS(bb,"svg"),this.foreignObject=document.createElementNS(bb,"foreignObject"),this.domElement=document.createElementNS(xb,"div"),this.styleElement=document.createElementNS(xb,"style"),this.image=new Image;const{foreignObject:e,svgRoot:r,styleElement:n,domElement:i}=this;e.setAttribute("width","10000"),e.setAttribute("height","10000"),e.style.overflow="hidden",r.appendChild(e),e.appendChild(n),e.appendChild(i)}}let PA;function tS(t,e,r,n){n||(n=PA||(PA=new eS));const{domElement:i,styleElement:s,svgRoot:o}=n;i.innerHTML=`<style>${e.cssStyle};</style><div style='padding:0'>${t}</div>`,i.setAttribute("style","transform-origin: top left; display: inline-block"),r&&(s.textContent=r),document.body.appendChild(o);const a=i.getBoundingClientRect();o.remove();const u=e.padding*2;return{width:a.width-u,height:a.height-u}}class NF extends tg{constructor(...e){const r=rg(e,"HtmlText");super(r,Ko),this.renderPipeId="htmlText"}updateBounds(){const e=this._bounds,r=this._anchor,n=tS(this.text,this._style),{width:i,height:s}=n;e.minX=-r._x*i,e.maxX=e.minX+i,e.minY=-r._y*s,e.maxY=e.minY+s}}class UF extends DF{uploadQueueItem(e){e instanceof yt?this.uploadTextureSource(e):e instanceof J2?this.uploadText(e):e instanceof NF?this.uploadHTMLText(e):e instanceof MF?this.uploadBitmapText(e):e instanceof wr&&this.uploadGraphicsContext(e)}uploadTextureSource(e){this.renderer.texture.initSource(e)}uploadText(e){this.renderer.renderPipes.text.initGpuText(e)}uploadBitmapText(e){this.renderer.renderPipes.bitmapText.initGpuText(e)}uploadHTMLText(e){this.renderer.renderPipes.htmlText.initGpuText(e)}uploadGraphicsContext(e){this.renderer.graphicsContext.getGpuContext(e);const{instructions:r}=e;for(const n of r)if(n.action==="texture"){const{image:i}=n.data;this.uploadTextureSource(i.source)}else if(n.action==="fill"){const{texture:i}=n.data.style;this.uploadTextureSource(i.source)}return null}}class GF extends UF{destroy(){clearTimeout(this.timeout),this.renderer=null,this.queue=null,this.resolves=null}}GF.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"prepare"};class rS{constructor(){this._tempState=dn.for2d(),this._didUploadHash={}}init(e){e.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(e,r,n){const i=e.renderer,s=this._didUploadHash[n.uid];i.shader.bind(n,s),s||(this._didUploadHash[n.uid]=!0),i.shader.updateUniformGroup(i.globalUniforms.uniformGroup),i.geometry.bind(r,n.glProgram)}execute(e,r){const n=e.renderer;this._tempState.blendMode=r.blendMode,n.state.set(this._tempState);const i=r.textures.textures;for(let s=0;s<r.textures.count;s++)n.texture.bind(i[s],s);n.geometry.draw(r.topology,r.size,r.start)}}rS.extension={type:[O.WebGLPipesAdaptor],name:"batch"};function gte(t){const e=[];let r=0;for(let n=0;n<t;n++)e[r]={texture:{sampleType:"float",viewDimension:"2d",multisampled:!1},binding:r,visibility:GPUShaderStage.FRAGMENT},r++,e[r]={sampler:{type:"filtering"},binding:r,visibility:GPUShaderStage.FRAGMENT},r++;return e}function vte(t){const e={};let r=0;for(let n=0;n<t;n++)e[`textureSource${n+1}`]=r++,e[`textureSampler${n+1}`]=r++;return e}const Wd=dn.for2d();class nS{start(e,r,n){const i=e.renderer,s=i.encoder,o=n.gpuProgram;this._shader=n,this._geometry=r,s.setGeometry(r,o),Wd.blendMode="normal",i.pipeline.getPipeline(r,o,Wd);const a=i.globalUniforms.bindGroup;s.resetBindGroup(1),s.setBindGroup(0,a,o)}execute(e,r){const n=this._shader.gpuProgram,i=e.renderer,s=i.encoder;if(!r.bindGroup){const u=r.textures;r.bindGroup=Um(u.textures,u.count)}Wd.blendMode=r.blendMode;const o=i.bindGroup.getBindGroup(r.bindGroup,n,1),a=i.pipeline.getPipeline(this._geometry,n,Wd,r.topology);r.bindGroup._touch(i.textureGC.count),s.setPipeline(a),s.renderPassEncoder.setBindGroup(1,o),s.renderPassEncoder.drawIndexed(r.size,1,r.start)}}nS.extension={type:[O.WebGPUPipesAdaptor],name:"batch"};const iS=class zF{constructor(e,r){var n,i;this.state=dn.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=e,this._adaptor=r,(i=(n=this._adaptor).init)==null||i.call(n,this)}static getBatcher(e){return new this._availableBatchers[e]}buildStart(e){let r=this._batchersByInstructionSet[e.uid];r||(r=this._batchersByInstructionSet[e.uid]=Object.create(null),r.default||(r.default=new Vm)),this._activeBatches=r,this._activeBatch=this._activeBatches.default;for(const n in this._activeBatches)this._activeBatches[n].begin()}addToBatch(e,r){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(r);let n=this._activeBatches[e.batcherName];n||(n=this._activeBatches[e.batcherName]=zF.getBatcher(e.batcherName),n.begin()),this._activeBatch=n}this._activeBatch.add(e)}break(e){this._activeBatch.break(e)}buildEnd(e){this._activeBatch.break(e);const r=this._activeBatches;for(const n in r){const i=r[n],s=i.geometry;s.indexBuffer.setDataWithSize(i.indexBuffer,i.indexSize,!0),s.buffers[0].setDataWithSize(i.attributeBuffer.float32View,i.attributeSize,!1)}}upload(e){const r=this._batchersByInstructionSet[e.uid];for(const n in r){const i=r[n],s=i.geometry;i.dirty&&(i.dirty=!1,s.buffers[0].update(i.attributeSize*4))}}execute(e){if(e.action==="startBatch"){const r=e.batcher,n=r.geometry,i=r.shader;this._adaptor.start(this,n,i)}this._adaptor.execute(this,e)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const e in this._activeBatches)this._activeBatches[e].destroy();this._activeBatches=null}};iS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"batch"};iS._availableBatchers=Object.create(null);let sS=iS;me.handleByMap(O.Batcher,sS._availableBatchers);me.add(Vm);function yte(t){const e=t.split(/([\n{}])/g).map(i=>i.trim()).filter(i=>i.length);let r="";return e.map(i=>{let s=r+i;return i==="{"?r+="    ":i==="}"&&(r=r.substr(0,r.length-4),s=r+i),s}).join(`
`)}const hu={name:"local-uniform-bit",vertex:{header:`

            struct LocalUniforms {
                uTransformMatrix:mat3x3<f32>,
                uColor:vec4<f32>,
                uRound:f32,
            }

            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `}},$F={...hu,vertex:{...hu.vertex,header:hu.vertex.header.replace("group(1)","group(2)")}},ng={name:"local-uniform-bit",vertex:{header:`

            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix = uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `}},jF={name:"texture-bit",vertex:{header:`

        struct TextureUniforms {
            uTextureMatrix:mat3x3<f32>,
        }

        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;
        `,main:`
            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
            @group(2) @binding(0) var uTexture: texture_2d<f32>;
            @group(2) @binding(1) var uSampler: sampler;

         
        `,main:`
            outColor = textureSample(uTexture, uSampler, vUV);
        `}},HF={name:"texture-bit",vertex:{header:`
            uniform mat3 uTextureMatrix;
        `,main:`
            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;
        `},fragment:{header:`
        uniform sampler2D uTexture;

         
        `,main:`
            outColor = texture(uTexture, vUV);
        `}},_te=new Ut;class bte extends tf{constructor(){super(),this.filters=[new EF({sprite:new Zn(ne.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(e){this.filters[0].sprite=e}get inverse(){return this.filters[0].inverse}set inverse(e){this.filters[0].inverse=e}}class oS{constructor(e){this._activeMaskStage=[],this._renderer=e}push(e,r,n){const i=this._renderer;if(i.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:e,inverse:r._maskOptions.inverse,canBundle:!1,maskedContainer:r}),e.inverse=r._maskOptions.inverse,e.renderMaskToTexture){const s=e.mask;s.includeInBuild=!0,s.collectRenderables(n,i,null),s.includeInBuild=!1}i.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:e,maskedContainer:r,inverse:r._maskOptions.inverse,canBundle:!1})}pop(e,r,n){this._renderer.renderPipes.batch.break(n),n.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:e,inverse:r._maskOptions.inverse,canBundle:!1})}execute(e){const r=this._renderer,n=e.mask.renderMaskToTexture;if(e.action==="pushMaskBegin"){const i=Te.get(bte);if(i.inverse=e.inverse,n){e.mask.mask.measurable=!0;const s=zf(e.mask.mask,!0,_te);e.mask.mask.measurable=!1,s.ceil();const o=r.renderTarget.renderTarget.colorTexture.source,a=Ct.getOptimalTexture(s.width,s.height,o._resolution,o.antialias);r.renderTarget.push(a,!0),r.globalUniforms.push({offset:s,worldColor:4294967295});const u=i.sprite;u.texture=a,u.worldTransform.tx=s.minX,u.worldTransform.ty=s.minY,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer,filterTexture:a})}else i.sprite=e.mask.mask,this._activeMaskStage.push({filterEffect:i,maskedContainer:e.maskedContainer})}else if(e.action==="pushMaskEnd"){const i=this._activeMaskStage[this._activeMaskStage.length-1];n&&(r.type===Wr.WEBGL&&r.renderTarget.finishRenderPass(),r.renderTarget.pop(),r.globalUniforms.pop()),r.filter.push({renderPipeId:"filter",action:"pushFilter",container:i.maskedContainer,filterEffect:i.filterEffect,canBundle:!1})}else if(e.action==="popMaskEnd"){r.filter.pop();const i=this._activeMaskStage.pop();n&&Ct.returnTexture(i.filterTexture),Te.return(i.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}oS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"alphaMask"};class aS{constructor(e){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=e}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(e,r,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;s[this._colorStackIndex]=s[this._colorStackIndex-1]&e.mask;const o=this._colorStack[this._colorStackIndex];o!==this._currentColor&&(this._currentColor=o,n.add({renderPipeId:"colorMask",colorMask:o,canBundle:!1})),this._colorStackIndex++}pop(e,r,n){this._renderer.renderPipes.batch.break(n);const s=this._colorStack;this._colorStackIndex--;const o=s[this._colorStackIndex-1];o!==this._currentColor&&(this._currentColor=o,n.add({renderPipeId:"colorMask",colorMask:o,canBundle:!1}))}execute(e){this._renderer.colorMask.setMask(e.colorMask)}destroy(){this._colorStack=null}}aS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"colorMask"};class xte{constructor(e){this.priority=0,this.pipe="scissorMask",this.mask=e,this.mask.renderable=!1,this.mask.measurable=!1}addBounds(e,r){Rm(this.mask,e,r)}addLocalBounds(e,r){Om(this.mask,e,r)}containsPoint(e,r){const n=this.mask;return r(n,e)}reset(){this.mask.measurable=!0,this.mask=null}destroy(){this.reset()}}class uS{constructor(e){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=e}push(e,r,n){var i;const s=e,o=this._renderer;o.renderPipes.batch.break(n),o.renderPipes.blendMode.setBlendMode(s.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:e,inverse:r._maskOptions.inverse,canBundle:!1});const a=s.mask;a.includeInBuild=!0,this._maskHash.has(s)||this._maskHash.set(s,{instructionsStart:0,instructionsLength:0});const u=this._maskHash.get(s);u.instructionsStart=n.instructionSize,a.collectRenderables(n,o,null),a.includeInBuild=!1,o.renderPipes.batch.break(n),n.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:e,inverse:r._maskOptions.inverse,canBundle:!1});const l=n.instructionSize-u.instructionsStart-1;u.instructionsLength=l;const c=o.renderTarget.renderTarget.uid;(i=this._maskStackHash)[c]??(i[c]=0)}pop(e,r,n){const i=e,s=this._renderer;s.renderPipes.batch.break(n),s.renderPipes.blendMode.setBlendMode(i.mask,"none",n),n.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:r._maskOptions.inverse,canBundle:!1});const o=this._maskHash.get(e);for(let a=0;a<o.instructionsLength;a++)n.instructions[n.instructionSize++]=n.instructions[o.instructionsStart++];n.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(e){var r;const n=this._renderer,i=n.renderTarget.renderTarget.uid;let s=(r=this._maskStackHash)[i]??(r[i]=0);e.action==="pushMaskBegin"?(n.renderTarget.ensureDepthStencil(),n.stencil.setStencilMode(mt.RENDERING_MASK_ADD,s),s++,n.colorMask.setMask(0)):e.action==="pushMaskEnd"?(e.inverse?n.stencil.setStencilMode(mt.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(mt.MASK_ACTIVE,s),n.colorMask.setMask(15)):e.action==="popMaskBegin"?(n.colorMask.setMask(0),s!==0?n.stencil.setStencilMode(mt.RENDERING_MASK_REMOVE,s):(n.renderTarget.clear(null,Nr.STENCIL),n.stencil.setStencilMode(mt.DISABLED,s)),s--):e.action==="popMaskEnd"&&(e.inverse?n.stencil.setStencilMode(mt.INVERSE_MASK_ACTIVE,s):n.stencil.setStencilMode(mt.MASK_ACTIVE,s),n.colorMask.setMask(15)),this._maskStackHash[i]=s}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}uS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"stencilMask"};var Rc=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Rc||{});class VF{constructor(e,r){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.type=r}}class lS{constructor(e){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){const e=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=e.MAX_UNIFORM_BUFFER_BINDINGS?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(e){return this._gpuBuffers[e.uid]||this.createGLBuffer(e)}bind(e){const{_gl:r}=this,n=this.getGlBuffer(e);r.bindBuffer(n.type,n.buffer)}bindBufferBase(e,r){const{_gl:n}=this;this._boundBufferBases[r]!==e&&(this._boundBufferBases[r]=e,e._lastBindBaseLocation=r,n.bindBufferBase(n.UNIFORM_BUFFER,r,e.buffer))}nextBindBase(e){this._bindCallId++,this._minBaseLocation=0,e&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(e){let r=this.getLastBindBaseLocation(e);if(r>=this._minBaseLocation)return e._lastBindCallId=this._bindCallId,r;let n=0,i=this._nextBindBaseIndex;for(;n<2;){i>=this._maxBindings&&(i=this._minBaseLocation,n++);const s=this._boundBufferBases[i];if(s&&s._lastBindCallId===this._bindCallId){i++;continue}break}return r=i,this._nextBindBaseIndex=i+1,n>=2?-1:(e._lastBindCallId=this._bindCallId,this._boundBufferBases[r]=null,r)}getLastBindBaseLocation(e){const r=e._lastBindBaseLocation;return this._boundBufferBases[r]===e?r:-1}bindBufferRange(e,r,n,i){const{_gl:s}=this;n||(n=0),r||(r=0),this._boundBufferBases[r]=null,s.bindBufferRange(s.UNIFORM_BUFFER,r||0,e.buffer,n*256,i||256)}updateBuffer(e){const{_gl:r}=this,n=this.getGlBuffer(e);if(e._updateID===n.updateID)return n;n.updateID=e._updateID,r.bindBuffer(n.type,n.buffer);const i=e.data,s=e.descriptor.usage&Ce.STATIC?r.STATIC_DRAW:r.DYNAMIC_DRAW;return i?n.byteLength>=i.byteLength?r.bufferSubData(n.type,0,i,0,e._updateSize/i.BYTES_PER_ELEMENT):(n.byteLength=i.byteLength,r.bufferData(n.type,i,s)):(n.byteLength=e.descriptor.size,r.bufferData(n.type,n.byteLength,s)),n}destroyAll(){const e=this._gl;for(const r in this._gpuBuffers)e.deleteBuffer(this._gpuBuffers[r].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(e,r){const n=this._gpuBuffers[e.uid],i=this._gl;r||i.deleteBuffer(n.buffer),this._gpuBuffers[e.uid]=null}createGLBuffer(e){const{_gl:r}=this;let n=Rc.ARRAY_BUFFER;e.descriptor.usage&Ce.INDEX?n=Rc.ELEMENT_ARRAY_BUFFER:e.descriptor.usage&Ce.UNIFORM&&(n=Rc.UNIFORM_BUFFER);const i=new VF(r.createBuffer(),n);return this._gpuBuffers[e.uid]=i,e.on("destroy",this.onBufferDestroy,this),i}resetState(){this._boundBufferBases=Object.create(null)}}lS.extension={type:[O.WebGLSystem],name:"buffer"};const cS=class WF{constructor(e){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=e,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this._renderer.gl=e}init(e){e={...WF.defaultOptions,...e};let r=this.multiView=e.multiView;if(e.context&&r&&(he("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),r=!1),r?this.canvas=Ae.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this.canvas=this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const n=this._renderer.background.alpha<1,i=e.premultipliedAlpha??!0,s=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:n,premultipliedAlpha:i,antialias:s,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(e){if(!this.multiView){e!==this.canvas&&he("multiView is disabled, but targetCanvas is not the main canvas");return}const{canvas:r}=this;(r.width<e.width||r.height<e.height)&&(r.width=Math.max(e.width,e.width),r.height=Math.max(e.height,e.height))}initFromContext(e){this.gl=e,this.webGLVersion=e instanceof Ae.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(e),this._renderer.runners.contextChange.emit(e);const r=this._renderer.view.canvas;r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(e,r){let n;const i=this.canvas;if(e===2&&(n=i.getContext("webgl2",r)),!n&&(n=i.getContext("webgl",r),!n))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=n,this.initFromContext(this.gl)}getExtensions(){const{gl:e}=this,r={anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc"),rgtc:e.getExtension("EXT_texture_compression_rgtc"),loseContext:e.getExtension("WEBGL_lose_context")};if(this.webGLVersion===1)this.extensions={...r,drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:e.getExtension("ANGLE_instanced_arrays"),srgb:e.getExtension("EXT_sRGB")};else{this.extensions={...r,colorBufferFloat:e.getExtension("EXT_color_buffer_float")};const n=e.getExtension("WEBGL_provoking_vertex");n&&n.provokingVertexWEBGL(n.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(e){e.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{var r;this.gl.isContextLost()&&((r=this.extensions.loseContext)==null||r.restoreContext())},0))}handleContextRestored(){this.getExtensions(),this._renderer.runners.contextChange.emit(this.gl)}destroy(){var r;const e=this._renderer.view.canvas;this._renderer=null,e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),(r=this.extensions.loseContext)==null||r.loseContext()}forceContextLoss(){var e;(e=this.extensions.loseContext)==null||e.loseContext(),this._contextLossForced=!0}validateContext(e){const r=e.getContextAttributes();r&&!r.stencil&&he("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=this.supports,i=this.webGLVersion===2,s=this.extensions;n.uint32Indices=i||!!s.uint32ElementIndex,n.uniformBufferObject=i,n.vertexArrayObject=i||!!s.vertexArrayObject,n.srgbTextures=i||!!s.srgb,n.nonPowOf2wrapping=i,n.nonPowOf2mipmaps=i,n.msaa=i,n.uint32Indices||he("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};cS.extension={type:[O.WebGLSystem],name:"context"};cS.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let XF=cS;function fS(t,e){for(const r in t.attributes){const n=t.attributes[r],i=e[r];i?(n.format??(n.format=i.format),n.offset??(n.offset=i.offset),n.instance??(n.instance=i.instance)):he(`Attribute ${r} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}Ste(t)}function Ste(t){const{buffers:e,attributes:r}=t,n={},i={};for(const s in e){const o=e[s];n[o.uid]=0,i[o.uid]=0}for(const s in r){const o=r[s];n[o.buffer.uid]+=ns(o.format).stride}for(const s in r){const o=r[s];o.stride??(o.stride=n[o.buffer.uid]),o.start??(o.start=i[o.buffer.uid]),i[o.buffer.uid]+=ns(o.format).stride}}var Ap=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Ap||{}),dS=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(dS||{}),qF=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(qF||{}),Be=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Be||{});const RA={uint8x2:Be.UNSIGNED_BYTE,uint8x4:Be.UNSIGNED_BYTE,sint8x2:Be.BYTE,sint8x4:Be.BYTE,unorm8x2:Be.UNSIGNED_BYTE,unorm8x4:Be.UNSIGNED_BYTE,snorm8x2:Be.BYTE,snorm8x4:Be.BYTE,uint16x2:Be.UNSIGNED_SHORT,uint16x4:Be.UNSIGNED_SHORT,sint16x2:Be.SHORT,sint16x4:Be.SHORT,unorm16x2:Be.UNSIGNED_SHORT,unorm16x4:Be.UNSIGNED_SHORT,snorm16x2:Be.SHORT,snorm16x4:Be.SHORT,float16x2:Be.HALF_FLOAT,float16x4:Be.HALF_FLOAT,float32:Be.FLOAT,float32x2:Be.FLOAT,float32x3:Be.FLOAT,float32x4:Be.FLOAT,uint32:Be.UNSIGNED_INT,uint32x2:Be.UNSIGNED_INT,uint32x3:Be.UNSIGNED_INT,uint32x4:Be.UNSIGNED_INT,sint32:Be.INT,sint32x2:Be.INT,sint32x3:Be.INT,sint32x4:Be.INT};function YF(t){return RA[t]??RA.float32}const wte={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class hS{constructor(e){this._geometryVaoHash=Object.create(null),this._renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const e=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const r=this._renderer.context.extensions.vertexArrayObject;r&&(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i));const n=this._renderer.context.extensions.vertexAttribDivisorANGLE;n&&(e.drawArraysInstanced=(i,s,o,a)=>{n.drawArraysInstancedANGLE(i,s,o,a)},e.drawElementsInstanced=(i,s,o,a,u)=>{n.drawElementsInstancedANGLE(i,s,o,a,u)},e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(e,r){const n=this.gl;this._activeGeometry=e;const i=this.getVao(e,r);this._activeVao!==i&&(this._activeVao=i,n.bindVertexArray(i)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this._renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.updateBuffer(i)}}checkCompatibility(e,r){const n=e.attributes,i=r._attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r._attributeData,s=["g",e.uid];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}getVao(e,r){var n;return((n=this._geometryVaoHash[e.uid])==null?void 0:n[r._key])||this.initGeometryVao(e,r)}initGeometryVao(e,r,n=!0){const i=this._renderer.gl,s=this._renderer.buffer;this._renderer.shader._getProgramData(r),this.checkCompatibility(e,r);const o=this.getSignature(e,r);this._geometryVaoHash[e.uid]||(this._geometryVaoHash[e.uid]=Object.create(null),e.on("destroy",this.onGeometryDestroy,this));const a=this._geometryVaoHash[e.uid];let u=a[o];if(u)return a[r._key]=u,u;fS(e,r._attributeData);const l=e.buffers;u=i.createVertexArray(),i.bindVertexArray(u);for(let c=0;c<l.length;c++){const f=l[c];s.bind(f)}return this.activateVao(e,r),a[r._key]=u,a[o]=u,i.bindVertexArray(null),u}onGeometryDestroy(e,r){const n=this._geometryVaoHash[e.uid],i=this.gl;if(n){if(r)for(const s in n)this._activeVao!==n[s]&&this.unbind(),i.deleteVertexArray(n[s]);this._geometryVaoHash[e.uid]=null}}destroyAll(e=!1){const r=this.gl;for(const n in this._geometryVaoHash){if(e)for(const i in this._geometryVaoHash[n]){const s=this._geometryVaoHash[n];this._activeVao!==s&&this.unbind(),r.deleteVertexArray(s[i])}this._geometryVaoHash[n]=null}}activateVao(e,r){var a;const n=this._renderer.gl,i=this._renderer.buffer,s=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);let o=null;for(const u in s){const l=s[u],c=l.buffer,f=i.getGlBuffer(c),d=r._attributeData[u];if(d){o!==f&&(i.bind(c),o=f);const h=d.location;n.enableVertexAttribArray(h);const p=ns(l.format),m=YF(l.format);if(((a=d.format)==null?void 0:a.substring(1,4))==="int"?n.vertexAttribIPointer(h,p.size,m,l.stride,l.offset):n.vertexAttribPointer(h,p.size,m,p.normalised,l.stride,l.offset),l.instance)if(this.hasInstance){const g=l.divisor??1;n.vertexAttribDivisor(h,g)}else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this._renderer,o=this._activeGeometry,a=wte[e||o.topology];if(i??(i=o.instanceCount),o.indexBuffer){const u=o.indexBuffer.data.BYTES_PER_ELEMENT,l=u===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;i>1?s.drawElementsInstanced(a,r||o.indexBuffer.data.length,l,(n||0)*u,i):s.drawElements(a,r||o.indexBuffer.data.length,l,(n||0)*u)}else i>1?s.drawArraysInstanced(a,n||0,r||o.getSize(),i):s.drawArrays(a,n||0,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}hS.extension={type:[O.WebGLSystem],name:"geometry"};const Ete=new aa({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),pS=class KF{constructor(e){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=e}init(e={}){const{useBackBuffer:r,antialias:n}={...KF.defaultOptions,...e};this.useBackBuffer=r,this._antialias=n,this._renderer.context.supports.msaa||(he("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=dn.for2d();const i=new et({vertex:`
                attribute vec2 aPosition;
                out vec2 vUv;

                void main() {
                    gl_Position = vec4(aPosition, 0.0, 1.0);

                    vUv = (aPosition + 1.0) / 2.0;

                    // flip dem UVs
                    vUv.y = 1.0 - vUv.y;
                }`,fragment:`
                in vec2 vUv;
                out vec4 finalColor;

                uniform sampler2D uTexture;

                void main() {
                    finalColor = texture(uTexture, vUv);
                }`,name:"big-triangle"});this._bigTriangleShader=new bn({glProgram:i,resources:{uTexture:ne.WHITE.source}})}renderStart(e){const r=this._renderer.renderTarget.getRenderTarget(e.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!r.isRoot,this._useBackBufferThisRender){const n=this._renderer.renderTarget.getRenderTarget(e.target);this._targetTexture=n.colorTexture,e.target=this._getBackBufferTexture(n.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const e=this._renderer;e.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(e.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,e.encoder.draw({geometry:Ete,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(e){return this._backBufferTexture=this._backBufferTexture||new ne({source:new yt({width:e.width,height:e.height,resolution:e._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(e.width,e.height,e._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};pS.extension={type:[O.WebGLSystem],name:"backBuffer",priority:1};pS.defaultOptions={useBackBuffer:!1};let ZF=pS;class mS{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.gl.colorMask(!!(e&8),!!(e&4),!!(e&2),!!(e&1)))}}mS.extension={type:[O.WebGLSystem],name:"colorMask"};class gS{constructor(e){this.commandFinished=Promise.resolve(),this._renderer=e}setGeometry(e,r){this._renderer.geometry.bind(e,r.glProgram)}finishRenderPass(){}draw(e){const r=this._renderer,{geometry:n,shader:i,state:s,skipSync:o,topology:a,size:u,start:l,instanceCount:c}=e;r.shader.bind(i,o),r.geometry.bind(n,r.shader._activeProgram),s&&r.state.set(s),r.geometry.draw(a,u,l,c??n.instanceCount)}destroy(){this._renderer=null}}gS.extension={type:[O.WebGLSystem],name:"encoder"};class QF{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}const hs=[];hs[mt.NONE]=void 0;hs[mt.DISABLED]={stencilWriteMask:0,stencilReadMask:0};hs[mt.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}};hs[mt.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}};hs[mt.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}};hs[mt.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};class vS{constructor(e){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:mt.NONE},this._renderTargetStencilState=Object.create(null),e.renderTarget.onRenderTargetChange.add(this)}contextChange(e){this._gl=e,this._comparisonFuncMapping={always:e.ALWAYS,never:e.NEVER,equal:e.EQUAL,"not-equal":e.NOTEQUAL,less:e.LESS,"less-equal":e.LEQUAL,greater:e.GREATER,"greater-equal":e.GEQUAL},this._stencilOpsMapping={keep:e.KEEP,zero:e.ZERO,replace:e.REPLACE,invert:e.INVERT,"increment-clamp":e.INCR,"decrement-clamp":e.DECR,"increment-wrap":e.INCR_WRAP,"decrement-wrap":e.DECR_WRAP},this.resetState()}onRenderTargetChange(e){if(this._activeRenderTarget===e)return;this._activeRenderTarget=e;let r=this._renderTargetStencilState[e.uid];r||(r=this._renderTargetStencilState[e.uid]={stencilMode:mt.DISABLED,stencilReference:0}),this.setStencilMode(r.stencilMode,r.stencilReference)}resetState(){this._stencilCache.enabled=!1,this._stencilCache.stencilMode=mt.NONE,this._stencilCache.stencilReference=0}setStencilMode(e,r){const n=this._renderTargetStencilState[this._activeRenderTarget.uid],i=this._gl,s=hs[e],o=this._stencilCache;if(n.stencilMode=e,n.stencilReference=r,e===mt.DISABLED){this._stencilCache.enabled&&(this._stencilCache.enabled=!1,i.disable(i.STENCIL_TEST));return}this._stencilCache.enabled||(this._stencilCache.enabled=!0,i.enable(i.STENCIL_TEST)),(e!==o.stencilMode||o.stencilReference!==r)&&(o.stencilMode=e,o.stencilReference=r,i.stencilFunc(this._comparisonFuncMapping[s.stencilBack.compare],r,255),i.stencilOp(i.KEEP,i.KEEP,this._stencilOpsMapping[s.stencilBack.passOp]))}}vS.extension={type:[O.WebGLSystem],name:"stencil"};class yS{constructor(e){this._syncFunctionHash=Object.create(null),this._adaptor=e,this._systemCheck()}_systemCheck(){if(!n2())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(e){const r=this.getUniformGroupData(e);e.buffer||(e.buffer=new Tr({data:new Float32Array(r.layout.size/4),usage:Ce.UNIFORM|Ce.COPY_DST}))}getUniformGroupData(e){return this._syncFunctionHash[e._signature]||this._initUniformGroup(e)}_initUniformGroup(e){const r=e._signature;let n=this._syncFunctionHash[r];if(!n){const i=Object.keys(e.uniformStructures).map(a=>e.uniformStructures[a]),s=this._adaptor.createUboElements(i),o=this._generateUboSync(s.uboElements);n=this._syncFunctionHash[r]={layout:s,syncFunction:o}}return this._syncFunctionHash[r]}_generateUboSync(e){return this._adaptor.generateUboSync(e)}syncUniformGroup(e,r,n){const i=this.getUniformGroupData(e);e.buffer||(e.buffer=new Tr({data:new Float32Array(i.layout.size/4),usage:Ce.UNIFORM|Ce.COPY_DST}));let s=null;return r||(r=e.buffer.data,s=e.buffer.dataInt32),n||(n=0),i.syncFunction(e.uniforms,r,s,n),!0}updateUniformGroup(e){if(e.isStatic&&!e._dirtyId)return!1;e._dirtyId=0;const r=this.syncUniformGroup(e);return e.buffer.update(),r}destroy(){this._syncFunctionHash=null}}const _S={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":16*2,"mat3x3<f32>":16*3,"mat4x4<f32>":16*4};function JF(t){const e=t.map(s=>({data:s,offset:0,size:0})),r=16;let n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=_S[o.data.type],!n)throw new Error(`Unknown type ${o.data.type}`);o.data.size>1&&(n=Math.max(n,r)*o.data.size);const a=n===12?16:n;o.size=n;const u=i%r;u>0&&r-u<a?i+=(r-u)%16:i+=(n-u%n)%n,o.offset=i,i+=n}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}const Bs=[{type:"mat3x3<f32>",test:t=>t.value.a!==void 0,ubo:`
            var matrix = uv[name].toArray(true);
            data[offset] = matrix[0];
            data[offset + 1] = matrix[1];
            data[offset + 2] = matrix[2];
            data[offset + 4] = matrix[3];
            data[offset + 5] = matrix[4];
            data[offset + 6] = matrix[5];
            data[offset + 8] = matrix[6];
            data[offset + 9] = matrix[7];
            data[offset + 10] = matrix[8];
        `,uniform:`
            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.width!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
            data[offset + 2] = v.width;
            data[offset + 3] = v.height;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {
                cv[0] = v.x;
                cv[1] = v.y;
                cv[2] = v.width;
                cv[3] = v.height;
                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);
            }
        `},{type:"vec2<f32>",test:t=>t.type==="vec2<f32>"&&t.size===1&&t.value.x!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.x;
            data[offset + 1] = v.y;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.x || cv[1] !== v.y) {
                cv[0] = v.x;
                cv[1] = v.y;
                gl.uniform2f(ud[name].location, v.x, v.y);
            }
        `},{type:"vec4<f32>",test:t=>t.type==="vec4<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
            data[offset + 3] = v.alpha;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                cv[3] = v.alpha;
                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);
            }
        `},{type:"vec3<f32>",test:t=>t.type==="vec3<f32>"&&t.size===1&&t.value.red!==void 0,ubo:`
            v = uv[name];
            data[offset] = v.red;
            data[offset + 1] = v.green;
            data[offset + 2] = v.blue;
        `,uniform:`
            cv = ud[name].value;
            v = uv[name];
            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {
                cv[0] = v.red;
                cv[1] = v.green;
                cv[2] = v.blue;
                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);
            }
        `}];function bS(t,e,r,n){const i=[`
        var v = null;
        var v2 = null;
        var t = 0;
        var index = 0;
        var name = null;
        var arrayOffset = null;
    `];let s=0;for(let a=0;a<t.length;a++){const u=t[a],l=u.data.name;let c=!1,f=0;for(let d=0;d<Bs.length;d++)if(Bs[d].test(u.data)){f=u.offset/4,i.push(`name = "${l}";`,`offset += ${f-s};`,Bs[d][e]||Bs[d].ubo),c=!0;break}if(!c)if(u.data.size>1)f=u.offset/4,i.push(r(u,f-s));else{const d=n[u.data.type];f=u.offset/4,i.push(`
                    v = uv.${l};
                    offset += ${f-s};
                    ${d};
                `)}s=f}const o=i.join(`
`);return new Function("uv","data","dataInt32","offset",o)}function Ea(t,e){return`
        for (let i = 0; i < ${t*e}; i++) {
            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];
        }
    `}const xS={f32:`
        data[offset] = v;`,i32:`
        dataInt32[offset] = v;`,"vec2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];`,"vec3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];`,"vec4<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];`,"vec2<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];`,"vec3<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];`,"vec4<i32>":`
        dataInt32[offset] = v[0];
        dataInt32[offset + 1] = v[1];
        dataInt32[offset + 2] = v[2];
        dataInt32[offset + 3] = v[3];`,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 4] = v[2];
        data[offset + 5] = v[3];`,"mat3x3<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];
        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];`,"mat4x4<f32>":`
        for (let i = 0; i < 16; i++) {
            data[offset + i] = v[i];
        }`,"mat3x2<f32>":Ea(3,2),"mat4x2<f32>":Ea(4,2),"mat2x3<f32>":Ea(2,3),"mat4x3<f32>":Ea(4,3),"mat2x4<f32>":Ea(2,4),"mat3x4<f32>":Ea(3,4)},eL={...xS,"mat2x2<f32>":`
        data[offset] = v[0];
        data[offset + 1] = v[1];
        data[offset + 2] = v[2];
        data[offset + 3] = v[3];
    `};function tL(t,e){const r=Math.max(_S[t.data.type]/16,1),n=t.data.value.length/t.data.size,i=(4-n%4)%4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
        v = uv.${t.data.name};
        offset += ${e};

        arrayOffset = offset;

        t = 0;

        for(var i=0; i < ${t.data.size*r}; i++)
        {
            for(var j = 0; j < ${n}; j++)
            {
                ${s}[arrayOffset++] = v[t++];
            }
            ${i!==0?`arrayOffset += ${i};`:""}
        }
    `}function rL(t){return bS(t,"uboStd40",tL,xS)}class SS extends yS{constructor(){super({createUboElements:JF,generateUboSync:rL})}}SS.extension={type:[O.WebGLSystem],name:"ubo"};class nL{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ie}init(e,r){this._renderer=e,this._renderTargetSystem=r,e.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new Ie}copyToTexture(e,r,n,i,s){const o=this._renderTargetSystem,a=this._renderer,u=o.getGpuRenderTarget(e),l=a.gl;return this.finishRenderPass(e),l.bindFramebuffer(l.FRAMEBUFFER,u.resolveTargetFramebuffer),a.texture.bind(r,0),l.copyTexSubImage2D(l.TEXTURE_2D,0,s.x,s.y,n.x,n.y,i.width,i.height),r}startRenderPass(e,r=!0,n,i){const s=this._renderTargetSystem,o=e.colorTexture,a=s.getGpuRenderTarget(e);let u=i.y;e.isRoot&&(u=o.pixelHeight-i.height),e.colorTextures.forEach(f=>{this._renderer.texture.unbind(f)});const l=this._renderer.gl;l.bindFramebuffer(l.FRAMEBUFFER,a.framebuffer);const c=this._viewPortCache;(c.x!==i.x||c.y!==u||c.width!==i.width||c.height!==i.height)&&(c.x=i.x,c.y=u,c.width=i.width,c.height=i.height,l.viewport(i.x,u,i.width,i.height)),!a.depthStencilRenderBuffer&&(e.stencil||e.depth)&&this._initStencil(a),this.clear(e,r,n)}finishRenderPass(e){const n=this._renderTargetSystem.getGpuRenderTarget(e);if(!n.msaa)return;const i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,n.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,n.framebuffer),i.blitFramebuffer(0,0,n.width,n.height,0,0,n.width,n.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,n.framebuffer)}initGpuRenderTarget(e){const n=this._renderer.gl,i=new QF,s=e.colorTexture;return wi.test(s.resource)?(this._renderer.context.ensureCanvasSize(e.colorTexture.resource),i.framebuffer=null,i):(this._initColor(e,i),n.bindFramebuffer(n.FRAMEBUFFER,null),i)}destroyGpuRenderTarget(e){const r=this._renderer.gl;e.framebuffer&&(r.deleteFramebuffer(e.framebuffer),e.framebuffer=null),e.resolveTargetFramebuffer&&(r.deleteFramebuffer(e.resolveTargetFramebuffer),e.resolveTargetFramebuffer=null),e.depthStencilRenderBuffer&&(r.deleteRenderbuffer(e.depthStencilRenderBuffer),e.depthStencilRenderBuffer=null),e.msaaRenderBuffer.forEach(n=>{r.deleteRenderbuffer(n)}),e.msaaRenderBuffer=null}clear(e,r,n){if(!r)return;const i=this._renderTargetSystem;typeof r=="boolean"&&(r=r?Nr.ALL:Nr.NONE);const s=this._renderer.gl;if(r&Nr.COLOR){n??(n=i.defaultClearColor);const o=this._clearColorCache,a=n;(o[0]!==a[0]||o[1]!==a[1]||o[2]!==a[2]||o[3]!==a[3])&&(o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],s.clearColor(a[0],a[1],a[2],a[3]))}s.clear(r)}resizeGpuRenderTarget(e){if(e.isRoot)return;const n=this._renderTargetSystem.getGpuRenderTarget(e);this._resizeColor(e,n),(e.stencil||e.depth)&&this._resizeStencil(n)}_initColor(e,r){const n=this._renderer,i=n.gl,s=i.createFramebuffer();if(r.resolveTargetFramebuffer=s,i.bindFramebuffer(i.FRAMEBUFFER,s),r.width=e.colorTexture.source.pixelWidth,r.height=e.colorTexture.source.pixelHeight,e.colorTextures.forEach((o,a)=>{const u=o.source;u.antialias&&(n.context.supports.msaa?r.msaa=!0:he("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),n.texture.bindSource(u,0);const c=n.texture.getGlSource(u).texture;i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,3553,c,0)}),r.msaa){const o=i.createFramebuffer();r.framebuffer=o,i.bindFramebuffer(i.FRAMEBUFFER,o),e.colorTextures.forEach((a,u)=>{const l=i.createRenderbuffer();r.msaaRenderBuffer[u]=l})}else r.framebuffer=s;this._resizeColor(e,r)}_resizeColor(e,r){const n=e.colorTexture.source;if(r.width=n.pixelWidth,r.height=n.pixelHeight,e.colorTextures.forEach((i,s)=>{s!==0&&i.source.resize(n.width,n.height,n._resolution)}),r.msaa){const i=this._renderer,s=i.gl,o=r.framebuffer;s.bindFramebuffer(s.FRAMEBUFFER,o),e.colorTextures.forEach((a,u)=>{const l=a.source;i.texture.bindSource(l,0);const f=i.texture.getGlSource(l).internalFormat,d=r.msaaRenderBuffer[u];s.bindRenderbuffer(s.RENDERBUFFER,d),s.renderbufferStorageMultisample(s.RENDERBUFFER,4,f,l.pixelWidth,l.pixelHeight),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+u,s.RENDERBUFFER,d)})}}_initStencil(e){if(e.framebuffer===null)return;const r=this._renderer.gl,n=r.createRenderbuffer();e.depthStencilRenderBuffer=n,r.bindRenderbuffer(r.RENDERBUFFER,n),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,n),this._resizeStencil(e)}_resizeStencil(e){const r=this._renderer.gl;r.bindRenderbuffer(r.RENDERBUFFER,e.depthStencilRenderBuffer),e.msaa?r.renderbufferStorageMultisample(r.RENDERBUFFER,4,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,this._renderer.context.webGLVersion===2?r.DEPTH24_STENCIL8:r.DEPTH_STENCIL,e.width,e.height)}prerender(e){const r=e.colorTexture.resource;this._renderer.context.multiView&&wi.test(r)&&this._renderer.context.ensureCanvasSize(r)}postrender(e){if(this._renderer.context.multiView&&wi.test(e.colorTexture.resource)){const r=this._renderer.context.canvas,n=e.colorTexture;n.context2D.drawImage(r,0,n.pixelHeight-r.height)}}}function iL(t,e,r,n,i,s){const o=s?1:-1;return t.identity(),t.a=1/n*2,t.d=o*(1/i*2),t.tx=-1-e*t.a,t.ty=-o-r*t.d,t}const Da=new Map;function wS(t,e){if(!Da.has(t)){const r=new ne({source:new wi({resource:t,...e})}),n=()=>{Da.get(t)===r&&Da.delete(t)};r.once("destroy",n),r.source.once("destroy",n),Da.set(t,r)}return Da.get(t)}function Cte(t){return Da.has(t)}function sL(t){const e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}const oL=class aL{constructor(e={}){if(this.uid=Je("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...aL.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,typeof e.colorTextures=="number"){this._managedColorTextures=!0;for(let r=0;r<e.colorTextures;r++)this.colorTextures.push(new yt({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(n=>n.source)];const r=this.colorTexture.source;this.resize(r.width,r.height,r._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof ne||e.depthStencilTexture instanceof yt?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const e=this._size;return e[0]=this.pixelWidth,e[1]=this.pixelHeight,e}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(e){this.resize(e.width,e.height,e._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new yt({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(e,r,n=this.resolution,i=!1){this.dirtyId++,this.colorTextures.forEach((s,o)=>{i&&o===0||s.source.resize(e,r,n)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(e,r,n)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(e=>{e.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};oL.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let Pp=oL;class ES{constructor(e){this.rootViewPort=new Ie,this.viewport=new Ie,this.onRenderTargetChange=new s2("onRenderTargetChange"),this.projectionMatrix=new ce,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:e,clear:r,clearColor:n,frame:i}){var s,o;this._renderTargetStack.length=0,this.push(e,r,n,i),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=sL(this.rootRenderTarget),(o=(s=this.adaptor).prerender)==null||o.call(s,this.rootRenderTarget)}postrender(){var e,r;(r=(e=this.adaptor).postrender)==null||r.call(e,this.rootRenderTarget)}bind(e,r=!0,n,i){const s=this.getRenderTarget(e),o=this.renderTarget!==s;this.renderTarget=s,this.renderSurface=e;const a=this.getGpuRenderTarget(s);(s.pixelWidth!==a.width||s.pixelHeight!==a.height)&&(this.adaptor.resizeGpuRenderTarget(s),a.width=s.pixelWidth,a.height=s.pixelHeight);const u=s.colorTexture,l=this.viewport,c=u.pixelWidth,f=u.pixelHeight;if(!i&&e instanceof ne&&(i=e.frame),i){const d=u._resolution;l.x=i.x*d+.5|0,l.y=i.y*d+.5|0,l.width=i.width*d+.5|0,l.height=i.height*d+.5|0}else l.x=0,l.y=0,l.width=c,l.height=f;return iL(this.projectionMatrix,0,0,l.width/u.resolution,l.height/u.resolution,!s.isRoot),this.adaptor.startRenderPass(s,r,n,l),o&&this.onRenderTargetChange.emit(s),s}clear(e,r=Nr.ALL,n){r&&(e&&(e=this.getRenderTarget(e)),this.adaptor.clear(e||this.renderTarget,r,n,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(e,r=Nr.ALL,n,i){const s=this.bind(e,r,n,i);return this._renderTargetStack.push({renderTarget:s,frame:i}),s}pop(){this._renderTargetStack.pop();const e=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(e.renderTarget,!1,null,e.frame)}getRenderTarget(e){return e.isTexture&&(e=e.source),this._renderSurfaceToRenderTargetHash.get(e)??this._initRenderTarget(e)}copyToTexture(e,r,n,i,s){n.x<0&&(i.width+=n.x,s.x-=n.x,n.x=0),n.y<0&&(i.height+=n.y,s.y-=n.y,n.y=0);const{pixelWidth:o,pixelHeight:a}=e;return i.width=Math.min(i.width,o-n.x),i.height=Math.min(i.height,a-n.y),this.adaptor.copyToTexture(e,r,n,i,s)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((e,r)=>{e!==r&&e.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(e){let r=null;return wi.test(e)&&(e=wS(e).source),e instanceof Pp?r=e:e instanceof yt&&(r=new Pp({colorTextures:[e]}),wi.test(e.source.resource)&&(r.isRoot=!0),e.once("destroy",()=>{r.destroy(),this._renderSurfaceToRenderTargetHash.delete(e);const n=this._gpuRenderTargetHash[r.uid];n&&(this._gpuRenderTargetHash[r.uid]=null,this.adaptor.destroyGpuRenderTarget(n))})),this._renderSurfaceToRenderTargetHash.set(e,r),r}getGpuRenderTarget(e){return this._gpuRenderTargetHash[e.uid]||(this._gpuRenderTargetHash[e.uid]=this.adaptor.initGpuRenderTarget(e))}resetState(){this.renderTarget=null,this.renderSurface=null}}class CS extends ES{constructor(e){super(e),this.adaptor=new nL,this.adaptor.init(e,this)}}CS.extension={type:[O.WebGLSystem],name:"renderTarget"};class ig extends Yr{constructor({buffer:e,offset:r,size:n}){super(),this.uid=Je("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=Je("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=e,this.offset=r|0,this.size=n,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=Je("resource"),this.emit("change",this)}destroy(e=!1){this.destroyed=!0,e&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}function uL(t,e){const r=[],n=[`
        var g = s.groups;
        var sS = r.shader;
        var p = s.glProgram;
        var ugS = r.uniformGroup;
        var resources;
    `];let i=!1,s=0;const o=e._getProgramData(t.glProgram);for(const u in t.groups){const l=t.groups[u];r.push(`
            resources = g[${u}].resources;
        `);for(const c in l.resources){const f=l.resources[c];if(f instanceof Pt)if(f.ubo){const d=t._uniformBindMap[u][Number(c)];r.push(`
                        sS.bindUniformBlock(
                            resources[${c}],
                            '${d}',
                            ${t.glProgram._uniformBlockData[d].index}
                        );
                    `)}else r.push(`
                        ugS.updateUniformGroup(resources[${c}], p, sD);
                    `);else if(f instanceof ig){const d=t._uniformBindMap[u][Number(c)];r.push(`
                    sS.bindUniformBlock(
                        resources[${c}],
                        '${d}',
                        ${t.glProgram._uniformBlockData[d].index}
                    );
                `)}else if(f instanceof yt){const d=t._uniformBindMap[u][c],h=o.uniformData[d];h&&(i||(i=!0,n.push(`
                        var tS = r.texture;
                        `)),e._gl.uniform1i(h.location,s),r.push(`
                        tS.bind(resources[${c}], ${s});
                    `),s++)}}}const a=[...n,...r].join(`
`);return new Function("r","s","sD",a)}class Tte{}class lL{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function Sb(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function I0(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function TS(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return I0(2*e);case"bvec3":return I0(3*e);case"bvec4":return I0(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let Xd=null;const OA={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},Ate={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function AS(t,e){if(!Xd){const r=Object.keys(OA);Xd={};for(let n=0;n<r.length;++n){const i=r[n];Xd[t[i]]=OA[i]}}return Xd[e]}function cL(t,e){const r=AS(t,e);return Ate[r]||"float32"}function fL(t,e,r=!1){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const a=e.getActiveAttrib(t,o);if(a.name.startsWith("gl_"))continue;const u=cL(e,a.type);n[a.name]={location:0,format:u,stride:ns(u).stride,offset:0,instance:!1,start:0}}const s=Object.keys(n);if(r){s.sort((o,a)=>o>a?1:-1);for(let o=0;o<s.length;o++)n[s[o]].location=o,e.bindAttribLocation(t,o,s[o]);e.linkProgram(t)}else for(let o=0;o<s.length;o++)n[s[o]].location=e.getAttribLocation(t,s[o]);return n}function dL(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let i=0;i<n;i++){const s=e.getActiveUniformBlockName(t,i),o=e.getUniformBlockIndex(t,s),a=e.getActiveUniformBlockParameter(t,i,e.UNIFORM_BLOCK_DATA_SIZE);r[s]={name:s,index:o,size:a}}return r}function hL(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),u=AS(e,s.type);r[o]={name:o,index:i,type:u,size:s.size,isArray:a,value:TS(u,s.size)}}return r}function BA(t,e){const r=t.getShaderSource(e).split(`
`).map((l,c)=>`${c}: ${l}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(l=>parseFloat(l.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(l=>l&&!s[l]?(s[l]=!0,!0):!1),a=[""];o.forEach(l=>{r[l-1]=`%c${r[l-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const u=r.join(`
`);a[0]=u,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function pL(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||BA(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||BA(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}function mL(t,e){const r=Sb(t,t.VERTEX_SHADER,e.vertex),n=Sb(t,t.FRAGMENT_SHADER,e.fragment),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=e.transformFeedbackVaryings;s&&(typeof t.transformFeedbackVaryings!="function"?he("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||pL(t,i,r,n),e._attributeData=fL(i,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=hL(i,t),e._uniformBlockData=dL(i,t),t.deleteShader(r),t.deleteShader(n);const o={};for(const u in e._uniformData){const l=e._uniformData[u];o[u]={location:t.getUniformLocation(i,u),value:TS(l.type,l.size)}}return new lL(i,o)}const qd={textureCount:0,blockIndex:0};class PS{constructor(e){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(e){this._gl=e,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=oa()}bind(e,r){if(this._setProgram(e.glProgram),r)return;qd.textureCount=0,qd.blockIndex=0;let n=this._shaderSyncFunctions[e.glProgram._key];n||(n=this._shaderSyncFunctions[e.glProgram._key]=this._generateShaderSync(e,this)),this._renderer.buffer.nextBindBase(!!e.glProgram.transformFeedbackVaryings),n(this._renderer,e,qd)}updateUniformGroup(e){this._renderer.uniformGroup.updateUniformGroup(e,this._activeProgram,qd)}bindUniformBlock(e,r,n=0){const i=this._renderer.buffer,s=this._getProgramData(this._activeProgram),o=e._bufferResource;o||this._renderer.ubo.updateUniformGroup(e);const a=e.buffer,u=i.updateBuffer(a),l=i.freeLocationForBufferBase(u);if(o){const{offset:f,size:d}=e;f===0&&d===a.data.byteLength?i.bindBufferBase(u,l):i.bindBufferRange(u,l,f)}else i.getLastBindBaseLocation(u)!==l&&i.bindBufferBase(u,l);const c=this._activeProgram._uniformBlockData[r].index;s.uniformBlockBindings[n]!==l&&(s.uniformBlockBindings[n]=l,this._renderer.gl.uniformBlockBinding(s.program,c,l))}_setProgram(e){if(this._activeProgram===e)return;this._activeProgram=e;const r=this._getProgramData(e);this._gl.useProgram(r.program)}_getProgramData(e){return this._programDataHash[e._key]||this._createProgramData(e)}_createProgramData(e){const r=e._key;return this._programDataHash[r]=mL(this._gl,e),this._programDataHash[r]}destroy(){for(const e of Object.keys(this._programDataHash))this._programDataHash[e].destroy(),this._programDataHash[e]=null;this._programDataHash=null}_generateShaderSync(e,r){return uL(e,r)}resetState(){this._activeProgram=null}}PS.extension={type:[O.WebGLSystem],name:"shader"};const gL={f32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1f(location, v);
        }`,"vec2<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2f(location, v[0], v[1]);
        }`,"vec3<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3f(location, v[0], v[1], v[2]);
        }`,"vec4<f32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4f(location, v[0], v[1], v[2], v[3]);
        }`,i32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<i32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,u32:`if (cv !== v) {
            cu.value = v;
            gl.uniform1ui(location, v);
        }`,"vec2<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2ui(location, v[0], v[1]);
        }`,"vec3<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3ui(location, v[0], v[1], v[2]);
        }`,"vec4<u32>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
        }`,bool:`if (cv !== v) {
            cu.value = v;
            gl.uniform1i(location, v);
        }`,"vec2<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1]) {
            cv[0] = v[0];
            cv[1] = v[1];
            gl.uniform2i(location, v[0], v[1]);
        }`,"vec3<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            gl.uniform3i(location, v[0], v[1], v[2]);
        }`,"vec4<bool>":`if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {
            cv[0] = v[0];
            cv[1] = v[1];
            cv[2] = v[2];
            cv[3] = v[3];
            gl.uniform4i(location, v[0], v[1], v[2], v[3]);
        }`,"mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},vL={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};function yL(t,e){const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
        var name = null;
    `];for(const n in t.uniforms){if(!e[n]){t.uniforms[n]instanceof Pt?t.uniforms[n].ubo?r.push(`
                        renderer.shader.bindUniformBlock(uv.${n}, "${n}");
                    `):r.push(`
                        renderer.shader.updateUniformGroup(uv.${n});
                    `):t.uniforms[n]instanceof ig&&r.push(`
                        renderer.shader.bindBufferResource(uv.${n}, "${n}");
                    `);continue}const i=t.uniformStructures[n];let s=!1;for(let o=0;o<Bs.length;o++){const a=Bs[o];if(i.type===a.type&&a.test(i)){r.push(`name = "${n}";`,Bs[o].uniform),s=!0;break}}if(!s){const a=(i.size===1?gL:vL)[i.type].replace("location",`ud["${n}"].location`);r.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}class RS{constructor(e){this._cache={},this._uniformGroupSyncHash={},this._renderer=e,this.gl=null,this._cache={}}contextChange(e){this.gl=e}updateUniformGroup(e,r,n){const i=this._renderer.shader._getProgramData(r);(!e.isStatic||e._dirtyId!==i.uniformDirtyGroups[e.uid])&&(i.uniformDirtyGroups[e.uid]=e._dirtyId,this._getUniformSyncFunction(e,r)(i.uniformData,e.uniforms,this._renderer,n))}_getUniformSyncFunction(e,r){var n;return((n=this._uniformGroupSyncHash[e._signature])==null?void 0:n[r._key])||this._createUniformSyncFunction(e,r)}_createUniformSyncFunction(e,r){const n=this._uniformGroupSyncHash[e._signature]||(this._uniformGroupSyncHash[e._signature]={}),i=this._getSignature(e,r._uniformData,"u");return this._cache[i]||(this._cache[i]=this._generateUniformsSync(e,r._uniformData)),n[r._key]=this._cache[i],n[r._key]}_generateUniformsSync(e,r){return yL(e,r)}_getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}destroy(){this._renderer=null,this._cache=null}}RS.extension={type:[O.WebGLSystem],name:"uniformGroup"};function Pte(t){return t=t.replaceAll("texture2D","texture").replaceAll("gl_FragColor","finalColor").replaceAll("varying","in"),t=`
        out vec4 finalColor;
    ${t}
    `,t}const Rte={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Ote(t){return Rte[t]}function _L(t){const e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],!(t instanceof Ae.get().getWebGLRenderingContext()))e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];else{const n=t.getExtension("EXT_blend_minmax");n&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,n.MIN_EXT,n.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,n.MAX_EXT,n.MAX_EXT])}return e}const Bte=0,kte=1,Dte=2,Mte=3,Ite=4,Fte=5,bL=class wb{constructor(e){this._invertFrontFace=!1,this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[Bte]=this.setBlend,this.map[kte]=this.setOffset,this.map[Dte]=this.setCullFace,this.map[Mte]=this.setDepthTest,this.map[Ite]=this.setFrontFace,this.map[Fte]=this.setDepthMask,this.checks=[],this.defaultState=dn.for2d(),e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){this._invertFrontFace=!e.isRoot,this._cullFace?this.setFrontFace(this._frontFace):this._frontFaceDirty=!0}contextChange(e){this.gl=e,this.blendModesMap=_L(e),this.resetState()}set(e){if(e||(e=this.defaultState),this.stateId!==e.data){let r=this.stateId^e.data,n=0;for(;r;)r&1&&this.map[n].call(this,!!(e.data&1<<n)),r>>=1,n++;this.stateId=e.data}for(let r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e||(e=this.defaultState);for(let r=0;r<this.map.length;r++)this.map[r].call(this,!!(e.data&1<<r));for(let r=0;r<this.checks.length;r++)this.checks[r](this,e);this.stateId=e.data}setBlend(e){this._updateCheck(wb._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(wb._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this._cullFace=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE),this._cullFace&&this._frontFaceDirty&&this.setFrontFace(this._frontFace)}setFrontFace(e){this._frontFace=e,this._frontFaceDirty=!1;const r=this._invertFrontFace?!e:e;this._glFrontFace!==r&&(this._glFrontFace=r,this.gl.frontFace(this.gl[r?"CW":"CCW"]))}setBlendMode(e){if(this.blendModesMap[e]||(e="normal"),e===this.blendMode)return;this.blendMode=e;const r=this.blendModesMap[e],n=this.gl;r.length===2?n.blendFunc(r[0],r[1]):n.blendFuncSeparate(r[0],r[1],r[2],r[3]),r.length===6?(this._blendEq=!0,n.blendEquationSeparate(r[4],r[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,r){this.gl.polygonOffset(e,r)}resetState(){this._glFrontFace=!1,this._frontFace=!1,this._cullFace=!1,this._frontFaceDirty=!1,this._invertFrontFace=!1,this.gl.frontFace(this.gl.CCW),this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(e,r){const n=this.checks.indexOf(e);r&&n===-1?this.checks.push(e):!r&&n!==-1&&this.checks.splice(n,1)}static _checkBlendMode(e,r){e.setBlendMode(r.blendMode)}static _checkPolygonOffset(e,r){e.setPolygonOffset(1,r.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};bL.extension={type:[O.WebGLSystem],name:"state"};let xL=bL;class SL{constructor(e){this.target=dS.TEXTURE_2D,this.texture=e,this.width=-1,this.height=-1,this.type=Be.UNSIGNED_BYTE,this.internalFormat=Ap.RGBA,this.format=Ap.RGBA,this.samplerType=0}}const wL={id:"buffer",upload(t,e,r){e.width===t.width||e.height===t.height?r.texSubImage2D(r.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}},Lte={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},EL={id:"compressed",upload(t,e,r){r.pixelStorei(r.UNPACK_ALIGNMENT,4);let n=t.pixelWidth,i=t.pixelHeight;const s=!!Lte[t.format];for(let o=0;o<t.resource.length;o++){const a=t.resource[o];s?r.compressedTexImage2D(r.TEXTURE_2D,o,e.internalFormat,n,i,0,a):r.texImage2D(r.TEXTURE_2D,o,e.internalFormat,n,i,0,e.format,e.type,a),n=Math.max(n>>1,1),i=Math.max(i>>1,1)}}},OS={id:"image",upload(t,e,r,n){const i=e.width,s=e.height,o=t.pixelWidth,a=t.pixelHeight,u=t.resourceWidth,l=t.resourceHeight;u<o||l<a?((i!==o||s!==a)&&r.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,null),n===2?r.texSubImage2D(r.TEXTURE_2D,0,0,0,u,l,e.format,e.type,t.resource):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):i===o&&s===a?r.texSubImage2D(r.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):n===2?r.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,t.resource):r.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=o,e.height=a}},CL={id:"video",upload(t,e,r,n){if(!t.isValid){r.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null);return}OS.upload(t,e,r,n)}},Eb={linear:9729,nearest:9728},TL={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},Ch={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},AL={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function Cb(t,e,r,n,i,s,o,a){const u=s;if(!a||t.addressModeU!=="repeat"||t.addressModeV!=="repeat"||t.addressModeW!=="repeat"){const l=Ch[o?"clamp-to-edge":t.addressModeU],c=Ch[o?"clamp-to-edge":t.addressModeV],f=Ch[o?"clamp-to-edge":t.addressModeW];e[i](u,e.TEXTURE_WRAP_S,l),e[i](u,e.TEXTURE_WRAP_T,c),e.TEXTURE_WRAP_R&&e[i](u,e.TEXTURE_WRAP_R,f)}if((!a||t.magFilter!=="linear")&&e[i](u,e.TEXTURE_MAG_FILTER,Eb[t.magFilter]),r){if(!a||t.mipmapFilter!=="linear"){const l=TL[t.minFilter][t.mipmapFilter];e[i](u,e.TEXTURE_MIN_FILTER,l)}}else e[i](u,e.TEXTURE_MIN_FILTER,Eb[t.minFilter]);if(n&&t.maxAnisotropy>1){const l=Math.min(t.maxAnisotropy,e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[i](u,n.TEXTURE_MAX_ANISOTROPY_EXT,l)}t.compare&&e[i](u,e.TEXTURE_COMPARE_FUNC,AL[t.compare])}function PL(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}function RL(t,e){let r={},n=t.RGBA;return t instanceof Ae.get().getWebGLRenderingContext()?e.srgb&&(r={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(r={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},n=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...r,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:n,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}function OL(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}function Nte(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const n=t[r+3];if(n!==0){const i=255.001/n;t[r]=t[r]*i+.5,t[r+1]=t[r+1]*i+.5,t[r+2]=t[r+2]*i+.5}}}const Ute=4;class BS{constructor(e){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:OS,buffer:wL,video:CL,compressed:EL},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(e){this._gl=e,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=RL(e,this._renderer.context.extensions),this._mapFormatToType=OL(e),this._mapFormatToFormat=PL(e)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let r=0;r<16;r++)this.bind(ne.EMPTY,r)}initSource(e){this.bind(e)}bind(e,r=0){const n=e.source;e?(this.bindSource(n,r),this._useSeparateSamplers&&this._bindSampler(n.style,r)):(this.bindSource(null,r),this._useSeparateSamplers&&this._bindSampler(null,r))}bindSource(e,r=0){const n=this._gl;if(e._touched=this._renderer.textureGC.count,this._boundTextures[r]!==e){this._boundTextures[r]=e,this._activateLocation(r),e||(e=ne.EMPTY.source);const i=this.getGlSource(e);n.bindTexture(i.target,i.texture)}}_bindSampler(e,r=0){const n=this._gl;if(!e){this._boundSamplers[r]=null,n.bindSampler(r,null);return}const i=this._getGlSampler(e);this._boundSamplers[r]!==i&&(this._boundSamplers[r]=i,n.bindSampler(r,i))}unbind(e){const r=e.source,n=this._boundTextures,i=this._gl;for(let s=0;s<n.length;s++)if(n[s]===r){this._activateLocation(s);const o=this.getGlSource(r);i.bindTexture(o.target,null),n[s]=null}}_activateLocation(e){this._activeTextureLocation!==e&&(this._activeTextureLocation=e,this._gl.activeTexture(this._gl.TEXTURE0+e))}_initSource(e){const r=this._gl,n=new SL(r.createTexture());if(n.type=this._mapFormatToType[e.format],n.internalFormat=this._mapFormatToInternalFormat[e.format],n.format=this._mapFormatToFormat[e.format],e.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||e.isPowerOfTwo)){const i=Math.max(e.width,e.height);e.mipLevelCount=Math.floor(Math.log2(i))+1}return this._glTextures[e.uid]=n,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceUpdate,this),e.on("styleChange",this.onStyleChange,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),this.updateStyle(e,!1),n}onStyleChange(e){this.updateStyle(e,!1)}updateStyle(e,r){const n=this._gl,i=this.getGlSource(e);n.bindTexture(n.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=e,Cb(e.style,n,e.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",n.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!e.isPowerOfTwo,r)}onSourceUnload(e){const r=this._glTextures[e.uid];r&&(this.unbind(e),this._glTextures[e.uid]=null,this._gl.deleteTexture(r.texture))}onSourceUpdate(e){const r=this._gl,n=this.getGlSource(e);r.bindTexture(r.TEXTURE_2D,n.texture),this._boundTextures[this._activeTextureLocation]=e;const i=e.alphaMode==="premultiply-alpha-on-upload";this._premultiplyAlpha!==i&&(this._premultiplyAlpha=i,r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i)),this._uploads[e.uploadMethodId]?this._uploads[e.uploadMethodId].upload(e,n,r,this._renderer.context.webGLVersion):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,e.pixelWidth,e.pixelHeight,0,r.RGBA,r.UNSIGNED_BYTE,null),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e,!1)}onUpdateMipmaps(e,r=!0){r&&this.bindSource(e,0);const n=this.getGlSource(e);this._gl.generateMipmap(n.target)}onSourceDestroy(e){e.off("destroy",this.onSourceDestroy,this),e.off("update",this.onSourceUpdate,this),e.off("resize",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("styleChange",this.onStyleChange,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}_initSampler(e){const r=this._gl,n=this._gl.createSampler();return this._glSamplers[e._resourceId]=n,Cb(e,r,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",n,!1,!0),this._glSamplers[e._resourceId]}_getGlSampler(e){return this._glSamplers[e._resourceId]||this._initSampler(e)}getGlSource(e){return this._glTextures[e.uid]||this._initSource(e)}generateCanvas(e){const{pixels:r,width:n,height:i}=this.getPixels(e),s=Ae.get().createCanvas();s.width=n,s.height=i;const o=s.getContext("2d");if(o){const a=o.createImageData(n,i);a.data.set(r),o.putImageData(a,0,0)}return s}getPixels(e){const r=e.source.resolution,n=e.frame,i=Math.max(Math.round(n.width*r),1),s=Math.max(Math.round(n.height*r),1),o=new Uint8Array(Ute*i*s),a=this._renderer,u=a.renderTarget.getRenderTarget(e),l=a.renderTarget.getGpuRenderTarget(u),c=a.gl;return c.bindFramebuffer(c.FRAMEBUFFER,l.resolveTargetFramebuffer),c.readPixels(Math.round(n.x*r),Math.round(n.y*r),i,s,c.RGBA,c.UNSIGNED_BYTE,o),{pixels:new Uint8ClampedArray(o.buffer),width:i,height:s}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(ne.EMPTY.source),this._boundSamplers=Object.create(null);const e=this._gl;this._premultiplyAlpha=!1,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha)}}BS.extension={type:[O.WebGLSystem],name:"texture"};class kS{init(){const e=new Pt({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),r=oa(),n=al({name:"graphics",bits:[zm,jm(r),ng,ll]});this.shader=new bn({glProgram:n,resources:{localUniforms:e,batchSamplers:Hm(r)}})}execute(e,r){const n=r.context,i=n.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:a,instructions:u}=o.getContextRenderData(n);i.groups[0]=s.globalUniforms.bindGroup,s.state.set(e.state),s.shader.bind(i),s.geometry.bind(a.geometry,i.glProgram);const l=u.instructions;for(let c=0;c<u.instructionSize;c++){const f=l[c];if(f.size){for(let d=0;d<f.textures.count;d++)s.texture.bind(f.textures.textures[d],d);s.geometry.draw(f.topology,f.size,f.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}kS.extension={type:[O.WebGLPipesAdaptor],name:"graphics"};class DS{init(){const e=al({name:"mesh",bits:[ng,HF,ll]});this._shader=new bn({glProgram:e,resources:{uTexture:ne.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ce}}}})}execute(e,r){const n=e.renderer;let i=r._shader;if(i){if(!i.glProgram){he("Mesh shader has no glProgram",r.shader);return}}else{i=this._shader;const s=r.texture,o=s.source;i.resources.uTexture=o,i.resources.uSampler=o.style,i.resources.textureUniforms.uniforms.uTextureMatrix=s.textureMatrix.mapCoord}i.groups[100]=n.globalUniforms.bindGroup,i.groups[101]=e.localUniformsBindGroup,n.encoder.draw({geometry:r._geometry,shader:i,state:r.state})}destroy(){this._shader.destroy(!0),this._shader=null}}DS.extension={type:[O.WebGLPipesAdaptor],name:"mesh"};class MS{constructor(e){this._renderer=e}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(e,r){this._renderer.renderPipes.batch.break(r),r.add(e)}execute(e){e.isRenderable&&e.render(this._renderer)}destroy(){this._renderer=null}}MS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"customRender"};class Jf{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}function Rp(t,e){const r=t.instructionSet,n=r.instructions;for(let i=0;i<r.instructionSize;i++){const s=n[i];e[s.renderPipeId].execute(s)}}const Gte=new ce;class IS{constructor(e){this._renderer=e}addRenderGroup(e,r){e.isCachedAsTexture?this._addRenderableCacheAsTexture(e,r):this._addRenderableDirect(e,r)}execute(e){e.isRenderable&&(e.isCachedAsTexture?this._executeCacheAsTexture(e):this._executeDirect(e))}destroy(){this._renderer=null}_addRenderableDirect(e,r){this._renderer.renderPipes.batch.break(r),e._batchableRenderGroup&&(Te.return(e._batchableRenderGroup),e._batchableRenderGroup=null),r.add(e)}_addRenderableCacheAsTexture(e,r){const n=e._batchableRenderGroup??(e._batchableRenderGroup=Te.get(Jf));n.renderable=e.root,n.transform=e.root.relativeGroupTransform,n.texture=e.texture,n.bounds=e._textureBounds,r.add(e),this._renderer.renderPipes.batch.addToBatch(n,r)}_executeCacheAsTexture(e){if(e.textureNeedsUpdate){e.textureNeedsUpdate=!1;const r=Gte.identity().translate(-e._textureBounds.x,-e._textureBounds.y);this._renderer.renderTarget.push(e.texture,!0,null,e.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:r,worldColor:4294967295}),Rp(e,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}e._batchableRenderGroup._batcher.updateElement(e._batchableRenderGroup),e._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(e){this._renderer.globalUniforms.push({worldTransformMatrix:e.inverseParentTextureTransform,worldColor:e.worldColorAlpha}),Rp(e,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}IS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"renderGroup"};function Op(t,e){e||(e=0);for(let r=e;r<t.length&&t[r];r++)t[r]=null}const zte=new ar,kA=au|nf|Pm;function FS(t,e=!1){BL(t);const r=t.childrenToUpdate,n=t.updateTick++;for(const i in r){const s=Number(i),o=r[i],a=o.list,u=o.index;for(let l=0;l<u;l++){const c=a[l];c.parentRenderGroup===t&&c.relativeRenderGroupDepth===s&&LS(c,n,0)}Op(a,u),o.index=0}if(e)for(let i=0;i<t.renderGroupChildren.length;i++)FS(t.renderGroupChildren[i],e)}function BL(t){const e=t.root;let r;if(t.renderGroupParent){const n=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,n.worldTransform),t.worldColor=rf(e.groupColor,n.worldColor),r=e.groupAlpha*n.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,r=e.localAlpha;r=r<0?0:r>1?1:r,t.worldAlpha=r,t.worldColorAlpha=t.worldColor+((r*255|0)<<24)}function LS(t,e,r){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;const n=t.localTransform;t.updateLocalTransform();const i=t.parent;if(i&&!i.renderGroup?(r|=t._updateFlags,t.relativeGroupTransform.appendFrom(n,i.relativeGroupTransform),r&kA&&DA(t,i,r)):(r=t._updateFlags,t.relativeGroupTransform.copyFrom(n),r&kA&&DA(t,zte,r)),!t.renderGroup){const s=t.children,o=s.length;for(let l=0;l<o;l++)LS(s[l],e,r);const a=t.parentRenderGroup,u=t;u.renderPipeId&&!a.structureDidChange&&a.updateRenderable(u)}}function DA(t,e,r){if(r&nf){t.groupColor=rf(t.localColor,e.groupColor);let n=t.localAlpha*e.groupAlpha;n=n<0?0:n>1?1:n,t.groupAlpha=n,t.groupColorAlpha=t.groupColor+((n*255|0)<<24)}r&Pm&&(t.groupBlendMode=t.localBlendMode==="inherit"?e.groupBlendMode:t.localBlendMode),r&au&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}function kL(t,e){const{list:r,index:n}=t.childrenRenderablesToUpdate;let i=!1;for(let s=0;s<n;s++){const o=r[s];if(i=e[o.renderPipeId].validateRenderable(o),i)break}return t.structureDidChange=i,i}const $te=new ce;class NS{constructor(e){this._renderer=e}render({container:e,transform:r}){const n=e.parent,i=e.renderGroup.renderGroupParent;e.parent=null,e.renderGroup.renderGroupParent=null;const s=this._renderer;let o=$te;r&&(o=o.copyFrom(e.renderGroup.localTransform),e.renderGroup.localTransform.copyFrom(r));const a=s.renderPipes;this._updateCachedRenderGroups(e.renderGroup,null),this._updateRenderGroups(e.renderGroup),s.globalUniforms.start({worldTransformMatrix:r?e.renderGroup.localTransform:e.renderGroup.worldTransform,worldColor:e.renderGroup.worldColorAlpha}),Rp(e.renderGroup,a),a.uniformBatch&&a.uniformBatch.renderEnd(),r&&e.renderGroup.localTransform.copyFrom(o),e.parent=n,e.renderGroup.renderGroupParent=i}destroy(){this._renderer=null}_updateCachedRenderGroups(e,r){if(e.isCachedAsTexture){if(!e.updateCacheTexture)return;r=e}e._parentCacheAsTextureRenderGroup=r;for(let n=e.renderGroupChildren.length-1;n>=0;n--)this._updateCachedRenderGroups(e.renderGroupChildren[n],r);if(e.invalidateMatrices(),e.isCachedAsTexture){if(e.textureNeedsUpdate){const n=e.root.getLocalBounds();n.ceil();const i=e.texture;e.texture&&Ct.returnTexture(e.texture);const s=this._renderer,o=e.textureOptions.resolution||s.view.resolution,a=e.textureOptions.antialias??s.view.antialias;e.texture=Ct.getOptimalTexture(n.width,n.height,o,a),e._textureBounds||(e._textureBounds=new Ut),e._textureBounds.copyFrom(n),i!==e.texture&&e.renderGroupParent&&(e.renderGroupParent.structureDidChange=!0)}}else e.texture&&(Ct.returnTexture(e.texture),e.texture=null)}_updateRenderGroups(e){const r=this._renderer,n=r.renderPipes;if(e.runOnRender(r),e.instructionSet.renderPipes=n,e.structureDidChange?Op(e.childrenRenderablesToUpdate.list,0):kL(e,n),FS(e),e.structureDidChange?(e.structureDidChange=!1,this._buildInstructions(e,r)):this._updateRenderables(e),e.childrenRenderablesToUpdate.index=0,r.renderPipes.batch.upload(e.instructionSet),!(e.isCachedAsTexture&&!e.textureNeedsUpdate))for(let i=0;i<e.renderGroupChildren.length;i++)this._updateRenderGroups(e.renderGroupChildren[i])}_updateRenderables(e){const{list:r,index:n}=e.childrenRenderablesToUpdate;for(let i=0;i<n;i++){const s=r[i];s.didViewUpdate&&e.updateRenderable(s)}Op(r,n)}_buildInstructions(e,r){const n=e.root,i=e.instructionSet;i.reset();const s=r.renderPipes?r:r.batch.renderer,o=s.renderPipes;o.batch.buildStart(i),o.blendMode.buildStart(),o.colorMask.buildStart(),n.sortableChildren&&n.sortChildren(),n.collectRenderablesWithEffects(i,s,null),o.batch.buildEnd(i),o.blendMode.buildEnd(i)}}NS.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"renderGroup"};class US{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,r){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,r)}updateRenderable(e){const r=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,r),r._batcher.updateElement(r)}validateRenderable(e){const r=this._getGpuSprite(e);return!r._batcher.checkAndUpdateTexture(r,e._texture)}destroyRenderable(e){const r=this._gpuSpriteHash[e.uid];Te.return(r),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,r){r.bounds=e.visualBounds,r.texture=e._texture}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const r=Te.get(Jf);return r.renderable=e,r.transform=e.groupTransform,r.texture=e._texture,r.bounds=e.visualBounds,r.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=r,e.on("destroyed",this._destroyRenderableBound),r}destroy(){for(const e in this._gpuSpriteHash)Te.return(this._gpuSpriteHash[e]);this._gpuSpriteHash=null,this._renderer=null}}US.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"sprite"};const GS=class DL{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Re(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...DL.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};GS.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"background",priority:0};GS.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let ML=GS;const Oc={};me.handle(O.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");Oc[t.name]=t.ref},t=>{delete Oc[t.name]});class zS{constructor(e){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=e,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(e,r,n){if(this._activeBlendMode===r){this._isAdvanced&&this._renderableList.push(e);return}this._activeBlendMode=r,this._isAdvanced&&this._endAdvancedBlendMode(n),this._isAdvanced=!!Oc[r],this._isAdvanced&&(this._beginAdvancedBlendMode(n),this._renderableList.push(e))}_beginAdvancedBlendMode(e){this._renderer.renderPipes.batch.break(e);const r=this._activeBlendMode;if(!Oc[r]){he(`Unable to assign BlendMode: '${r}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);return}let n=this._filterHash[r];n||(n=this._filterHash[r]=new tf,n.filters=[new Oc[r]]);const i={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:n,canBundle:!1};this._renderableList=i.renderables,e.add(i)}_endAdvancedBlendMode(e){this._renderableList=null,this._renderer.renderPipes.batch.break(e),e.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(e){this._isAdvanced&&this._endAdvancedBlendMode(e)}destroy(){this._renderer=null,this._renderableList=null;for(const e in this._filterHash)this._filterHash[e].destroy();this._filterHash=null}}zS.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"blendMode"};const F0={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},$S=class IL{constructor(e){this._renderer=e}_normalizeOptions(e,r={}){return e instanceof ar||e instanceof ne?{target:e,...r}:{...r,...e}}async image(e){const r=new Image;return r.src=await this.base64(e),r}async base64(e){e=this._normalizeOptions(e,IL.defaultImageOptions);const{format:r,quality:n}=e,i=this.canvas(e);if(i.toBlob!==void 0)return new Promise((s,o)=>{i.toBlob(a=>{if(!a){o(new Error("ICanvas.toBlob failed!"));return}const u=new FileReader;u.onload=()=>s(u.result),u.onerror=o,u.readAsDataURL(a)},F0[r],n)});if(i.toDataURL!==void 0)return i.toDataURL(F0[r],n);if(i.convertToBlob!==void 0){const s=await i.convertToBlob({type:F0[r],quality:n});return new Promise((o,a)=>{const u=new FileReader;u.onload=()=>o(u.result),u.onerror=a,u.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e){e=this._normalizeOptions(e);const r=e.target,n=this._renderer;if(r instanceof ne)return n.texture.generateCanvas(r);const i=n.textureGenerator.generateTexture(e),s=n.texture.generateCanvas(i);return i.destroy(!0),s}pixels(e){e=this._normalizeOptions(e);const r=e.target,n=this._renderer,i=r instanceof ne?r:n.textureGenerator.generateTexture(e),s=n.texture.getPixels(i);return r instanceof ar&&i.destroy(!0),s}texture(e){return e=this._normalizeOptions(e),e.target instanceof ne?e.target:this._renderer.textureGenerator.generateTexture(e)}download(e){e=this._normalizeOptions(e);const r=this.canvas(e),n=document.createElement("a");n.download=e.filename??"image.png",n.href=r.toDataURL("image/png"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}log(e){const r=e.width??200;e=this._normalizeOptions(e);const n=this.canvas(e),i=n.toDataURL();console.log(`[Pixi Texture] ${n.width}px ${n.height}px`);const s=["font-size: 1px;",`padding: ${r}px 300px;`,`background: url(${i}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}destroy(){this._renderer=null}};$S.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"extract"};$S.defaultImageOptions={format:"png",quality:1};let FL=$S;class sg extends ne{static create(e){return new sg({source:new yt(e)})}resize(e,r,n){return this.source.resize(e,r,n),this}}const jte=new Ie,Hte=new Ut,Vte=[0,0,0,0];class jS{constructor(e){this._renderer=e}generateTexture(e){var l;e instanceof ar&&(e={target:e,frame:void 0,textureSourceOptions:{},resolution:void 0});const r=e.resolution||this._renderer.resolution,n=e.antialias||this._renderer.view.antialias,i=e.target;let s=e.clearColor;s?s=Array.isArray(s)&&s.length===4?s:Re.shared.setValue(s).toArray():s=Vte;const o=((l=e.frame)==null?void 0:l.copyTo(jte))||Am(i,Hte).rectangle;o.width=Math.max(o.width,1/r)|0,o.height=Math.max(o.height,1/r)|0;const a=sg.create({...e.textureSourceOptions,width:o.width,height:o.height,resolution:r,antialias:n}),u=ce.shared.translate(-o.x,-o.y);return this._renderer.render({container:i,transform:u,target:a,clearColor:s}),a.source.updateMipmaps(),a}destroy(){this._renderer=null}}jS.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"textureGenerator"};function Wte(t,e,r,n){r[n++]=(t>>16&255)/255,r[n++]=(t>>8&255)/255,r[n++]=(t&255)/255,r[n++]=e}function fl(t,e,r){const n=(t>>24&255)/255;e[r++]=(t&255)/255*n,e[r++]=(t>>8&255)/255*n,e[r++]=(t>>16&255)/255*n,e[r++]=n}class HS{constructor(e){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=e}reset(){this._stackIndex=0;for(let e=0;e<this._activeUniforms.length;e++)this._uniformsPool.push(this._activeUniforms[e]);for(let e=0;e<this._activeBindGroups.length;e++)this._bindGroupPool.push(this._activeBindGroups[e]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(e){this.reset(),this.push(e)}bind({size:e,projectionMatrix:r,worldTransformMatrix:n,worldColor:i,offset:s}){const o=this._renderer.renderTarget.renderTarget,a=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:o,worldTransformMatrix:new ce,worldColor:4294967295,offset:new Le},u={projectionMatrix:r||this._renderer.renderTarget.projectionMatrix,resolution:e||o.size,worldTransformMatrix:n||a.worldTransformMatrix,worldColor:i||a.worldColor,offset:s||a.offset,bindGroup:null},l=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(l);const c=l.uniforms;c.uProjectionMatrix=u.projectionMatrix,c.uResolution=u.resolution,c.uWorldTransformMatrix.copyFrom(u.worldTransformMatrix),c.uWorldTransformMatrix.tx-=u.offset.x,c.uWorldTransformMatrix.ty-=u.offset.y,fl(u.worldColor,c.uWorldColorAlpha,0),l.update();let f;this._renderer.renderPipes.uniformBatch?f=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(l,!1):(f=this._bindGroupPool.pop()||new Ei,this._activeBindGroups.push(f),f.setResource(l,0)),u.bindGroup=f,this._currentGlobalUniformData=u}push(e){this.bind(e),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===Wr.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new Pt({uProjectionMatrix:{value:new ce,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}HS.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"globalUniforms"};let Xte=1;class VS{constructor(){this._tasks=[],this._offset=0}init(){nr.system.add(this._update,this)}repeat(e,r,n=!0){const i=Xte++;let s=0;return n&&(this._offset+=1e3,s=this._offset),this._tasks.push({func:e,duration:r,start:performance.now(),offset:s,last:performance.now(),repeat:!0,id:i}),i}cancel(e){for(let r=0;r<this._tasks.length;r++)if(this._tasks[r].id===e){this._tasks.splice(r,1);return}}_update(){const e=performance.now();for(let r=0;r<this._tasks.length;r++){const n=this._tasks[r];if(e-n.offset-n.last>=n.duration){const i=e-n.start;n.func(i),n.last=e}}}destroy(){nr.system.remove(this._update,this),this._tasks.length=0}}VS.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"scheduler",priority:0};let MA=!1;function LL(t){if(!MA){if(Ae.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${lf} (${t}) http://www.pixijs.com/

`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${lf} - ${t} - http://www.pixijs.com/`);MA=!0}}class og{constructor(e){this._renderer=e}init(e){if(e.hello){let r=this._renderer.name;this._renderer.type===Wr.WEBGL&&(r+=` ${this._renderer.context.webGLVersion}`),LL(r)}}}og.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"hello",priority:-2};og.defaultOptions={hello:!1};function NL(t){let e=!1;for(const n in t)if(t[n]==null){e=!0;break}if(!e)return t;const r=Object.create(null);for(const n in t){const i=t[n];i&&(r[n]=i)}return r}function UL(t){let e=0;for(let r=0;r<t.length;r++)t[r]==null?e++:t[r-e]=t[r];return t.length-=e,t}let qte=0;const WS=class GL{constructor(e){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=e}init(e){e={...GL.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(e){this.enabled!==e&&(e?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const r of this._managedHashes)r.context[r.hash]=NL(r.context[r.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const r of this._managedArrays)UL(r.context[r.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(e,r){this._managedHashes.push({context:e,hash:r})}addManagedArray(e,r){this._managedArrays.push({context:e,hash:r})}prerender({container:e}){this._now=performance.now(),e.renderGroup.gcTick=qte++,this._updateInstructionGCTick(e.renderGroup,e.renderGroup.gcTick)}addRenderable(e){this.enabled&&(e._lastUsed===-1&&(this._managedRenderables.push(e),e.once("destroyed",this._removeRenderable,this)),e._lastUsed=this._now)}run(){var s;const e=this._now,r=this._managedRenderables,n=this._renderer.renderPipes;let i=0;for(let o=0;o<r.length;o++){const a=r[o];if(a===null){i++;continue}const u=a.renderGroup??a.parentRenderGroup,l=((s=u==null?void 0:u.instructionSet)==null?void 0:s.gcTick)??-1;if(((u==null?void 0:u.gcTick)??0)===l&&(a._lastUsed=e),e-a._lastUsed>this.maxUnusedTime){if(!a.destroyed){const c=n;u&&(u.structureDidChange=!0),c[a.renderPipeId].destroyRenderable(a)}a._lastUsed=-1,i++,a.off("destroyed",this._removeRenderable,this)}else r[o-i]=a}r.length-=i}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(e){const r=this._managedRenderables.indexOf(e);r>=0&&(e.off("destroyed",this._removeRenderable,this),this._managedRenderables[r]=null)}_updateInstructionGCTick(e,r){e.instructionSet.gcTick=r;for(const n of e.renderGroupChildren)this._updateInstructionGCTick(n,r)}};WS.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"renderableGC",priority:0};WS.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let zL=WS;const XS=class $L{constructor(e){this._renderer=e,this.count=0,this.checkCount=0}init(e){e={...$L.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this._renderer.texture.managedTextures;for(let r=0;r<e.length;r++){const n=e[r];n.autoGarbageCollect&&n.resource&&n._touched>-1&&this.count-n._touched>this.maxIdle&&(n._touched=-1,n.unload())}}destroy(){this._renderer=null}};XS.extension={type:[O.WebGLSystem,O.WebGPUSystem],name:"textureGC"};XS.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:60*60,textureGCCheckCountMax:600};let jL=XS;const qS=class HL{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(e){this.texture.source.autoDensity=e}get resolution(){return this.texture.source._resolution}set resolution(e){this.texture.source.resize(this.texture.source.width,this.texture.source.height,e)}init(e){e={...HL.defaultOptions,...e},e.view&&(oe(_e,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new Ie(0,0,e.width,e.height),this.canvas=e.canvas||Ae.get().createCanvas(),this.antialias=!!e.antialias,this.texture=wS(this.canvas,e),this.renderTarget=new Pp({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(e,r,n){this.texture.source.resize(e,r,n),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(e=!1){(typeof e=="boolean"?e:!!(e!=null&&e.removeView))&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};qS.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"view",priority:0};qS.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};let VL=qS;const YS=[ML,HS,og,VL,NS,jL,jS,FL,a2,zL,VS],KS=[zS,sS,US,IS,oS,uS,aS,MS],Yte=[...YS,SS,ZF,XF,lS,BS,CS,hS,RS,PS,gS,xL,vS,mS],Kte=[...KS],Zte=[rS,DS,kS],WL=[],XL=[],qL=[];me.handleByNamedList(O.WebGLSystem,WL);me.handleByNamedList(O.WebGLPipes,XL);me.handleByNamedList(O.WebGLPipesAdaptor,qL);me.add(...Yte,...Kte,...Zte);class YL extends $f{constructor(){const e={name:"webgl",type:Wr.WEBGL,systems:WL,renderPipes:XL,renderPipeAdaptors:qL};super(e)}}const Qte=Object.freeze(Object.defineProperty({__proto__:null,WebGLRenderer:YL},Symbol.toStringTag,{value:"Module"}));class ZS{constructor(e){this._hash=Object.create(null),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_hash")}contextChange(e){this._gpu=e}getBindGroup(e,r,n){return e._updateKey(),this._hash[e._key]||this._createBindGroup(e,r,n)}_createBindGroup(e,r,n){const i=this._gpu.device,s=r.layout[n],o=[],a=this._renderer;for(const c in s){const f=e.resources[c]??e.resources[s[c]];let d;if(f._resourceType==="uniformGroup"){const h=f;a.ubo.updateUniformGroup(h);const p=h.buffer;d={buffer:a.buffer.getGPUBuffer(p),offset:0,size:p.descriptor.size}}else if(f._resourceType==="buffer"){const h=f;d={buffer:a.buffer.getGPUBuffer(h),offset:0,size:h.descriptor.size}}else if(f._resourceType==="bufferResource"){const h=f;d={buffer:a.buffer.getGPUBuffer(h.buffer),offset:h.offset,size:h.size}}else if(f._resourceType==="textureSampler"){const h=f;d=a.texture.getGpuSampler(h)}else if(f._resourceType==="textureSource"){const h=f;d=a.texture.getGpuSource(h).createView({})}o.push({binding:s[c],resource:d})}const u=a.shader.getProgramData(r).bindGroups[n],l=i.createBindGroup({layout:u,entries:o});return this._hash[e._key]=l,l}destroy(){for(const e of Object.keys(this._hash))this._hash[e]=null;this._hash=null,this._renderer=null}}ZS.extension={type:[O.WebGPUSystem],name:"bindGroup"};class QS{constructor(e){this._gpuBuffers=Object.create(null),this._managedBuffers=[],e.renderableGC.addManagedHash(this,"_gpuBuffers")}contextChange(e){this._gpu=e}getGPUBuffer(e){return this._gpuBuffers[e.uid]||this.createGPUBuffer(e)}updateBuffer(e){const r=this._gpuBuffers[e.uid]||this.createGPUBuffer(e),n=e.data;return e._updateID&&n&&(e._updateID=0,this._gpu.device.queue.writeBuffer(r,0,n.buffer,0,(e._updateSize||n.byteLength)+3&-4)),r}destroyAll(){for(const e in this._gpuBuffers)this._gpuBuffers[e].destroy();this._gpuBuffers={}}createGPUBuffer(e){this._gpuBuffers[e.uid]||(e.on("update",this.updateBuffer,this),e.on("change",this.onBufferChange,this),e.on("destroy",this.onBufferDestroy,this),this._managedBuffers.push(e));const r=this._gpu.device.createBuffer(e.descriptor);return e._updateID=0,e.data&&(_p(e.data.buffer,r.getMappedRange()),r.unmap()),this._gpuBuffers[e.uid]=r,r}onBufferChange(e){this._gpuBuffers[e.uid].destroy(),e._updateID=0,this._gpuBuffers[e.uid]=this.createGPUBuffer(e)}onBufferDestroy(e){this._managedBuffers.splice(this._managedBuffers.indexOf(e),1),this._destroyBuffer(e)}destroy(){this._managedBuffers.forEach(e=>this._destroyBuffer(e)),this._managedBuffers=null,this._gpuBuffers=null}_destroyBuffer(e){this._gpuBuffers[e.uid].destroy(),e.off("update",this.updateBuffer,this),e.off("change",this.onBufferChange,this),e.off("destroy",this.onBufferDestroy,this),this._gpuBuffers[e.uid]=null}}QS.extension={type:[O.WebGPUSystem],name:"buffer"};function Jte(t,e){const r=t.descriptor.size,n=e.gpu.device,i=new Tr({data:new Float32Array(24e5),usage:Ce.MAP_READ|Ce.COPY_DST}),s=e.buffer.createGPUBuffer(i),o=n.createCommandEncoder();o.copyBufferToBuffer(e.buffer.getGPUBuffer(t),0,s,0,r),n.queue.submit([o.finish()]),s.mapAsync(GPUMapMode.READ,0,r).then(()=>{s.getMappedRange(0,r),s.unmap()})}class KL{constructor({minUniformOffsetAlignment:e}){this._minUniformOffsetAlignment=256,this.byteIndex=0,this._minUniformOffsetAlignment=e,this.data=new Float32Array(65535)}clear(){this.byteIndex=0}addEmptyGroup(e){if(e>this._minUniformOffsetAlignment/4)throw new Error(`UniformBufferBatch: array is too large: ${e*4}`);const r=this.byteIndex;let n=r+e*4;if(n=Math.ceil(n/this._minUniformOffsetAlignment)*this._minUniformOffsetAlignment,n>this.data.length*4)throw new Error("UniformBufferBatch: ubo batch got too big");return this.byteIndex=n,r}addGroup(e){const r=this.addEmptyGroup(e.length);for(let n=0;n<e.length;n++)this.data[r/4+n]=e[n];return r}destroy(){this.data=null}}class JS{constructor(e){this._colorMaskCache=15,this._renderer=e}setMask(e){this._colorMaskCache!==e&&(this._colorMaskCache=e,this._renderer.pipeline.setColorMask(e))}destroy(){this._renderer=null,this._colorMaskCache=null}}JS.extension={type:[O.WebGPUSystem],name:"colorMask"};class ag{constructor(e){this._renderer=e}async init(e){return this._initPromise?this._initPromise:(this._initPromise=this._createDeviceAndAdaptor(e).then(r=>{this.gpu=r,this._renderer.runners.contextChange.emit(this.gpu)}),this._initPromise)}contextChange(e){this._renderer.gpu=e}async _createDeviceAndAdaptor(e){const r=await Ae.get().getNavigator().gpu.requestAdapter({powerPreference:e.powerPreference,forceFallbackAdapter:e.forceFallbackAdapter}),n=["texture-compression-bc","texture-compression-astc","texture-compression-etc2"].filter(s=>r.features.has(s)),i=await r.requestDevice({requiredFeatures:n});return{adapter:r,device:i}}destroy(){this.gpu=null,this._renderer=null}}ag.extension={type:[O.WebGPUSystem],name:"device"};ag.defaultOptions={powerPreference:void 0,forceFallbackAdapter:!1};class ew{constructor(e){this._boundBindGroup=Object.create(null),this._boundVertexBuffer=Object.create(null),this._renderer=e}renderStart(){this.commandFinished=new Promise(e=>{this._resolveCommandFinished=e}),this.commandEncoder=this._renderer.gpu.device.createCommandEncoder()}beginRenderPass(e){this.endRenderPass(),this._clearCache(),this.renderPassEncoder=this.commandEncoder.beginRenderPass(e.descriptor)}endRenderPass(){this.renderPassEncoder&&this.renderPassEncoder.end(),this.renderPassEncoder=null}setViewport(e){this.renderPassEncoder.setViewport(e.x,e.y,e.width,e.height,0,1)}setPipelineFromGeometryProgramAndState(e,r,n,i){const s=this._renderer.pipeline.getPipeline(e,r,n,i);this.setPipeline(s)}setPipeline(e){this._boundPipeline!==e&&(this._boundPipeline=e,this.renderPassEncoder.setPipeline(e))}_setVertexBuffer(e,r){this._boundVertexBuffer[e]!==r&&(this._boundVertexBuffer[e]=r,this.renderPassEncoder.setVertexBuffer(e,this._renderer.buffer.updateBuffer(r)))}_setIndexBuffer(e){if(this._boundIndexBuffer===e)return;this._boundIndexBuffer=e;const r=e.data.BYTES_PER_ELEMENT===2?"uint16":"uint32";this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(e),r)}resetBindGroup(e){this._boundBindGroup[e]=null}setBindGroup(e,r,n){if(this._boundBindGroup[e]===r)return;this._boundBindGroup[e]=r,r._touch(this._renderer.textureGC.count);const i=this._renderer.bindGroup.getBindGroup(r,n,e);this.renderPassEncoder.setBindGroup(e,i)}setGeometry(e,r){const n=this._renderer.pipeline.getBufferNamesToBind(e,r);for(const i in n)this._setVertexBuffer(i,e.attributes[n[i]].buffer);e.indexBuffer&&this._setIndexBuffer(e.indexBuffer)}_setShaderBindGroups(e,r){for(const n in e.groups){const i=e.groups[n];r||this._syncBindGroup(i),this.setBindGroup(n,i,e.gpuProgram)}}_syncBindGroup(e){for(const r in e.resources){const n=e.resources[r];n.isUniformGroup&&this._renderer.ubo.updateUniformGroup(n)}}draw(e){const{geometry:r,shader:n,state:i,topology:s,size:o,start:a,instanceCount:u,skipSync:l}=e;this.setPipelineFromGeometryProgramAndState(r,n.gpuProgram,i,s),this.setGeometry(r,n.gpuProgram),this._setShaderBindGroups(n,l),r.indexBuffer?this.renderPassEncoder.drawIndexed(o||r.indexBuffer.data.length,u??r.instanceCount,a||0):this.renderPassEncoder.draw(o||r.getSize(),u??r.instanceCount,a||0)}finishRenderPass(){this.renderPassEncoder&&(this.renderPassEncoder.end(),this.renderPassEncoder=null)}postrender(){this.finishRenderPass(),this._gpu.device.queue.submit([this.commandEncoder.finish()]),this._resolveCommandFinished(),this.commandEncoder=null}restoreRenderPass(){const e=this._renderer.renderTarget.adaptor.getDescriptor(this._renderer.renderTarget.renderTarget,!1,[0,0,0,1]);this.renderPassEncoder=this.commandEncoder.beginRenderPass(e);const r=this._boundPipeline,n={...this._boundVertexBuffer},i=this._boundIndexBuffer,s={...this._boundBindGroup};this._clearCache();const o=this._renderer.renderTarget.viewport;this.renderPassEncoder.setViewport(o.x,o.y,o.width,o.height,0,1),this.setPipeline(r);for(const a in n)this._setVertexBuffer(a,n[a]);for(const a in s)this.setBindGroup(a,s[a],null);this._setIndexBuffer(i)}_clearCache(){for(let e=0;e<16;e++)this._boundBindGroup[e]=null,this._boundVertexBuffer[e]=null;this._boundIndexBuffer=null,this._boundPipeline=null}destroy(){this._renderer=null,this._gpu=null,this._boundBindGroup=null,this._boundVertexBuffer=null,this._boundIndexBuffer=null,this._boundPipeline=null}contextChange(e){this._gpu=e}}ew.extension={type:[O.WebGPUSystem],name:"encoder",priority:1};class tw{constructor(e){this._renderTargetStencilState=Object.create(null),this._renderer=e,e.renderTarget.onRenderTargetChange.add(this)}onRenderTargetChange(e){let r=this._renderTargetStencilState[e.uid];r||(r=this._renderTargetStencilState[e.uid]={stencilMode:mt.DISABLED,stencilReference:0}),this._activeRenderTarget=e,this.setStencilMode(r.stencilMode,r.stencilReference)}setStencilMode(e,r){const n=this._renderTargetStencilState[this._activeRenderTarget.uid];n.stencilMode=e,n.stencilReference=r;const i=this._renderer;i.pipeline.setStencilMode(e),i.encoder.renderPassEncoder.setStencilReference(r)}destroy(){this._renderer.renderTarget.onRenderTargetChange.remove(this),this._renderer=null,this._activeRenderTarget=null,this._renderTargetStencilState=null}}tw.extension={type:[O.WebGPUSystem],name:"stencil"};const Bc={i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},f16:{align:2,size:2},"vec2<i32>":{align:8,size:8},"vec2<u32>":{align:8,size:8},"vec2<f32>":{align:8,size:8},"vec2<f16>":{align:4,size:4},"vec3<i32>":{align:16,size:12},"vec3<u32>":{align:16,size:12},"vec3<f32>":{align:16,size:12},"vec3<f16>":{align:8,size:6},"vec4<i32>":{align:16,size:16},"vec4<u32>":{align:16,size:16},"vec4<f32>":{align:16,size:16},"vec4<f16>":{align:8,size:8},"mat2x2<f32>":{align:8,size:16},"mat2x2<f16>":{align:4,size:8},"mat3x2<f32>":{align:8,size:24},"mat3x2<f16>":{align:4,size:12},"mat4x2<f32>":{align:8,size:32},"mat4x2<f16>":{align:4,size:16},"mat2x3<f32>":{align:16,size:32},"mat2x3<f16>":{align:8,size:16},"mat3x3<f32>":{align:16,size:48},"mat3x3<f16>":{align:8,size:24},"mat4x3<f32>":{align:16,size:64},"mat4x3<f16>":{align:8,size:32},"mat2x4<f32>":{align:16,size:32},"mat2x4<f16>":{align:8,size:16},"mat3x4<f32>":{align:16,size:48},"mat3x4<f16>":{align:8,size:24},"mat4x4<f32>":{align:16,size:64},"mat4x4<f16>":{align:8,size:32}};function ZL(t){const e=t.map(n=>({data:n,offset:0,size:0}));let r=0;for(let n=0;n<e.length;n++){const i=e[n];let s=Bc[i.data.type].size;const o=Bc[i.data.type].align;if(!Bc[i.data.type])throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${i.data.type}`);i.data.size>1&&(s=Math.max(s,o)*i.data.size),r=Math.ceil(r/o)*o,i.size=s,i.offset=r,r+=s}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}function QL(t,e){const{size:r,align:n}=Bc[t.data.type],i=(n-r)/4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`
         v = uv.${t.data.name};
         ${e!==0?`offset += ${e};`:""}

         arrayOffset = offset;

         t = 0;

         for(var i=0; i < ${t.data.size*(r/4)}; i++)
         {
             for(var j = 0; j < ${r/4}; j++)
             {
                 ${s}[arrayOffset++] = v[t++];
             }
             ${i!==0?`arrayOffset += ${i};`:""}
         }
     `}function JL(t){return bS(t,"uboWgsl",QL,eL)}class rw extends yS{constructor(){super({createUboElements:ZL,generateUboSync:JL})}}rw.extension={type:[O.WebGPUSystem],name:"ubo"};const ys=128;class nw{constructor(e){this._bindGroupHash=Object.create(null),this._buffers=[],this._bindGroups=[],this._bufferResources=[],this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_bindGroupHash"),this._batchBuffer=new KL({minUniformOffsetAlignment:ys});const r=256/ys;for(let n=0;n<r;n++){let i=Ce.UNIFORM|Ce.COPY_DST;n===0&&(i|=Ce.COPY_SRC),this._buffers.push(new Tr({data:this._batchBuffer.data,usage:i}))}}renderEnd(){this._uploadBindGroups(),this._resetBindGroups()}_resetBindGroups(){for(const e in this._bindGroupHash)this._bindGroupHash[e]=null;this._batchBuffer.clear()}getUniformBindGroup(e,r){if(!r&&this._bindGroupHash[e.uid])return this._bindGroupHash[e.uid];this._renderer.ubo.ensureUniformGroup(e);const n=e.buffer.data,i=this._batchBuffer.addEmptyGroup(n.length);return this._renderer.ubo.syncUniformGroup(e,this._batchBuffer.data,i/4),this._bindGroupHash[e.uid]=this._getBindGroup(i/ys),this._bindGroupHash[e.uid]}getUboResource(e){this._renderer.ubo.updateUniformGroup(e);const r=e.buffer.data,n=this._batchBuffer.addGroup(r);return this._getBufferResource(n/ys)}getArrayBindGroup(e){const r=this._batchBuffer.addGroup(e);return this._getBindGroup(r/ys)}getArrayBufferResource(e){const n=this._batchBuffer.addGroup(e)/ys;return this._getBufferResource(n)}_getBufferResource(e){if(!this._bufferResources[e]){const r=this._buffers[e%2];this._bufferResources[e]=new ig({buffer:r,offset:(e/2|0)*256,size:ys})}return this._bufferResources[e]}_getBindGroup(e){if(!this._bindGroups[e]){const r=new Ei({0:this._getBufferResource(e)});this._bindGroups[e]=r}return this._bindGroups[e]}_uploadBindGroups(){const e=this._renderer.buffer,r=this._buffers[0];r.update(this._batchBuffer.byteIndex),e.updateBuffer(r);const n=this._renderer.gpu.device.createCommandEncoder();for(let i=1;i<this._buffers.length;i++){const s=this._buffers[i];n.copyBufferToBuffer(e.getGPUBuffer(r),ys,e.getGPUBuffer(s),0,this._batchBuffer.byteIndex)}this._renderer.gpu.device.queue.submit([n.finish()])}destroy(){for(let e=0;e<this._bindGroups.length;e++)this._bindGroups[e].destroy();this._bindGroups=null,this._bindGroupHash=null;for(let e=0;e<this._buffers.length;e++)this._buffers[e].destroy();this._buffers=null;for(let e=0;e<this._bufferResources.length;e++)this._bufferResources[e].destroy();this._bufferResources=null,this._batchBuffer.destroy(),this._bindGroupHash=null,this._renderer=null}}nw.extension={type:[O.WebGPUPipes],name:"uniformBatch"};const ere={"point-list":0,"line-list":1,"line-strip":2,"triangle-list":3,"triangle-strip":4};function tre(t,e,r,n,i){return t<<24|e<<16|r<<10|n<<5|i}function rre(t,e,r,n){return r<<6|t<<3|n<<1|e}class iw{constructor(e){this._moduleCache=Object.create(null),this._bufferLayoutsCache=Object.create(null),this._bindingNamesCache=Object.create(null),this._pipeCache=Object.create(null),this._pipeStateCaches=Object.create(null),this._colorMask=15,this._multisampleCount=1,this._renderer=e}contextChange(e){this._gpu=e,this.setStencilMode(mt.DISABLED),this._updatePipeHash()}setMultisampleCount(e){this._multisampleCount!==e&&(this._multisampleCount=e,this._updatePipeHash())}setRenderTarget(e){this._multisampleCount=e.msaaSamples,this._depthStencilAttachment=e.descriptor.depthStencilAttachment?1:0,this._updatePipeHash()}setColorMask(e){this._colorMask!==e&&(this._colorMask=e,this._updatePipeHash())}setStencilMode(e){this._stencilMode!==e&&(this._stencilMode=e,this._stencilState=hs[e],this._updatePipeHash())}setPipeline(e,r,n,i){const s=this.getPipeline(e,r,n);i.setPipeline(s)}getPipeline(e,r,n,i){e._layoutKey||(fS(e,r.attributeData),this._generateBufferKey(e)),i||(i=e.topology);const s=tre(e._layoutKey,r._layoutKey,n.data,n._blendModeId,ere[i]);return this._pipeCache[s]?this._pipeCache[s]:(this._pipeCache[s]=this._createPipeline(e,r,n,i),this._pipeCache[s])}_createPipeline(e,r,n,i){const s=this._gpu.device,o=this._createVertexBufferLayouts(e,r),a=this._renderer.state.getColorTargets(n);a[0].writeMask=this._stencilMode===mt.RENDERING_MASK_ADD?0:this._colorMask;const u=this._renderer.shader.getProgramData(r).pipeline,l={vertex:{module:this._getModule(r.vertex.source),entryPoint:r.vertex.entryPoint,buffers:o},fragment:{module:this._getModule(r.fragment.source),entryPoint:r.fragment.entryPoint,targets:a},primitive:{topology:i,cullMode:n.cullMode},layout:u,multisample:{count:this._multisampleCount},label:"PIXI Pipeline"};return this._depthStencilAttachment&&(l.depthStencil={...this._stencilState,format:"depth24plus-stencil8",depthWriteEnabled:n.depthTest,depthCompare:n.depthTest?"less":"always"}),s.createRenderPipeline(l)}_getModule(e){return this._moduleCache[e]||this._createModule(e)}_createModule(e){const r=this._gpu.device;return this._moduleCache[e]=r.createShaderModule({code:e}),this._moduleCache[e]}_generateBufferKey(e){const r=[];let n=0;const i=Object.keys(e.attributes).sort();for(let o=0;o<i.length;o++){const a=e.attributes[i[o]];r[n++]=a.offset,r[n++]=a.format,r[n++]=a.stride,r[n++]=a.instance}const s=r.join("|");return e._layoutKey=Tu(s,"geometry"),e._layoutKey}_generateAttributeLocationsKey(e){const r=[];let n=0;const i=Object.keys(e.attributeData).sort();for(let o=0;o<i.length;o++){const a=e.attributeData[i[o]];r[n++]=a.location}const s=r.join("|");return e._attributeLocationsKey=Tu(s,"programAttributes"),e._attributeLocationsKey}getBufferNamesToBind(e,r){const n=e._layoutKey<<16|r._attributeLocationsKey;if(this._bindingNamesCache[n])return this._bindingNamesCache[n];const i=this._createVertexBufferLayouts(e,r),s=Object.create(null),o=r.attributeData;for(let a=0;a<i.length;a++){const l=Object.values(i[a].attributes)[0].shaderLocation;for(const c in o)if(o[c].location===l){s[a]=c;break}}return this._bindingNamesCache[n]=s,s}_createVertexBufferLayouts(e,r){r._attributeLocationsKey||this._generateAttributeLocationsKey(r);const n=e._layoutKey<<16|r._attributeLocationsKey;if(this._bufferLayoutsCache[n])return this._bufferLayoutsCache[n];const i=[];return e.buffers.forEach(s=>{const o={arrayStride:0,stepMode:"vertex",attributes:[]},a=o.attributes;for(const u in r.attributeData){const l=e.attributes[u];(l.divisor??1)!==1&&he(`Attribute ${u} has an invalid divisor value of '${l.divisor}'. WebGPU only supports a divisor value of 1`),l.buffer===s&&(o.arrayStride=l.stride,o.stepMode=l.instance?"instance":"vertex",a.push({shaderLocation:r.attributeData[u].location,offset:l.offset,format:l.format}))}a.length&&i.push(o)}),this._bufferLayoutsCache[n]=i,i}_updatePipeHash(){const e=rre(this._stencilMode,this._multisampleCount,this._colorMask,this._depthStencilAttachment);this._pipeStateCaches[e]||(this._pipeStateCaches[e]=Object.create(null)),this._pipeCache=this._pipeStateCaches[e]}destroy(){this._renderer=null,this._bufferLayoutsCache=null}}iw.extension={type:[O.WebGPUSystem],name:"pipeline"};class e5{constructor(){this.contexts=[],this.msaaTextures=[],this.msaaSamples=1}}class t5{init(e,r){this._renderer=e,this._renderTargetSystem=r}copyToTexture(e,r,n,i,s){const o=this._renderer,a=this._getGpuColorTexture(e),u=o.texture.getGpuSource(r.source);return o.encoder.commandEncoder.copyTextureToTexture({texture:a,origin:n},{texture:u,origin:s},i),r}startRenderPass(e,r=!0,n,i){const o=this._renderTargetSystem.getGpuRenderTarget(e),a=this.getDescriptor(e,r,n);o.descriptor=a,this._renderer.pipeline.setRenderTarget(o),this._renderer.encoder.beginRenderPass(o),this._renderer.encoder.setViewport(i)}finishRenderPass(){this._renderer.encoder.endRenderPass()}_getGpuColorTexture(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);return r.contexts[0]?r.contexts[0].getCurrentTexture():this._renderer.texture.getGpuSource(e.colorTextures[0].source)}getDescriptor(e,r,n){typeof r=="boolean"&&(r=r?Nr.ALL:Nr.NONE);const i=this._renderTargetSystem,s=i.getGpuRenderTarget(e),o=e.colorTextures.map((l,c)=>{const f=s.contexts[c];let d,h;f?d=f.getCurrentTexture().createView():d=this._renderer.texture.getGpuSource(l).createView({mipLevelCount:1}),s.msaaTextures[c]&&(h=d,d=this._renderer.texture.getTextureView(s.msaaTextures[c]));const p=r&Nr.COLOR?"clear":"load";return n??(n=i.defaultClearColor),{view:d,resolveTarget:h,clearValue:n,storeOp:"store",loadOp:p}});let a;if((e.stencil||e.depth)&&!e.depthStencilTexture&&(e.ensureDepthStencilTexture(),e.depthStencilTexture.source.sampleCount=s.msaa?4:1),e.depthStencilTexture){const l=r&Nr.STENCIL?"clear":"load",c=r&Nr.DEPTH?"clear":"load";a={view:this._renderer.texture.getGpuSource(e.depthStencilTexture.source).createView(),stencilStoreOp:"store",stencilLoadOp:l,depthClearValue:1,depthLoadOp:c,depthStoreOp:"store"}}return{colorAttachments:o,depthStencilAttachment:a}}clear(e,r=!0,n,i){if(!r)return;const{gpu:s,encoder:o}=this._renderer,a=s.device;if(o.commandEncoder===null){const l=a.createCommandEncoder(),c=this.getDescriptor(e,r,n),f=l.beginRenderPass(c);f.setViewport(i.x,i.y,i.width,i.height,0,1),f.end();const d=l.finish();a.queue.submit([d])}else this.startRenderPass(e,r,n,i)}initGpuRenderTarget(e){e.isRoot=!0;const r=new e5;return e.colorTextures.forEach((n,i)=>{if(wi.test(n.resource)){const s=n.resource.getContext("webgpu"),o=n.transparent?"premultiplied":"opaque";try{s.configure({device:this._renderer.gpu.device,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,format:"bgra8unorm",alphaMode:o})}catch(a){console.error(a)}r.contexts[i]=s}if(r.msaa=n.source.antialias,n.source.antialias){const s=new yt({width:0,height:0,sampleCount:4});r.msaaTextures[i]=s}}),r.msaa&&(r.msaaSamples=4,e.depthStencilTexture&&(e.depthStencilTexture.source.sampleCount=4)),r}destroyGpuRenderTarget(e){e.contexts.forEach(r=>{r.unconfigure()}),e.msaaTextures.forEach(r=>{r.destroy()}),e.msaaTextures.length=0,e.contexts.length=0}ensureDepthStencilTexture(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);e.depthStencilTexture&&r.msaa&&(e.depthStencilTexture.source.sampleCount=4)}resizeGpuRenderTarget(e){const r=this._renderTargetSystem.getGpuRenderTarget(e);r.width=e.width,r.height=e.height,r.msaa&&e.colorTextures.forEach((n,i)=>{const s=r.msaaTextures[i];s==null||s.resize(n.source.width,n.source.height,n.source._resolution)})}}class sw extends ES{constructor(e){super(e),this.adaptor=new t5,this.adaptor.init(e,this)}}sw.extension={type:[O.WebGPUSystem],name:"renderTarget"};class ow{constructor(){this._gpuProgramData=Object.create(null)}contextChange(e){this._gpu=e,this.maxTextures=e.device.limits.maxSampledTexturesPerShaderStage}getProgramData(e){return this._gpuProgramData[e._layoutKey]||this._createGPUProgramData(e)}_createGPUProgramData(e){const r=this._gpu.device,n=e.gpuLayout.map(s=>r.createBindGroupLayout({entries:s})),i={bindGroupLayouts:n};return this._gpuProgramData[e._layoutKey]={bindGroups:n,pipeline:r.createPipelineLayout(i)},this._gpuProgramData[e._layoutKey]}destroy(){this._gpu=null,this._gpuProgramData=null}}ow.extension={type:[O.WebGPUSystem],name:"shader"};const Ar={};Ar.normal={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"}};Ar.add={alpha:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one",operation:"add"}};Ar.multiply={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"dst",dstFactor:"one-minus-src-alpha",operation:"add"}};Ar.screen={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Ar.overlay={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"one",dstFactor:"one-minus-src",operation:"add"}};Ar.none={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"zero",operation:"add"}};Ar["normal-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src-alpha",operation:"add"}};Ar["add-npm"]={alpha:{srcFactor:"one",dstFactor:"one",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one",operation:"add"}};Ar["screen-npm"]={alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"src-alpha",dstFactor:"one-minus-src",operation:"add"}};Ar.erase={alpha:{srcFactor:"zero",dstFactor:"one-minus-src-alpha",operation:"add"},color:{srcFactor:"zero",dstFactor:"one-minus-src",operation:"add"}};Ar.min={alpha:{srcFactor:"one",dstFactor:"one",operation:"min"},color:{srcFactor:"one",dstFactor:"one",operation:"min"}};Ar.max={alpha:{srcFactor:"one",dstFactor:"one",operation:"max"},color:{srcFactor:"one",dstFactor:"one",operation:"max"}};class aw{constructor(){this.defaultState=new dn,this.defaultState.blend=!0}contextChange(e){this.gpu=e}getColorTargets(e){return[{format:"bgra8unorm",writeMask:0,blend:Ar[e.blendMode]||Ar.normal}]}destroy(){this.gpu=null}}aw.extension={type:[O.WebGPUSystem],name:"state"};const r5={type:"image",upload(t,e,r){const n=t.resource,i=(t.pixelWidth|0)*(t.pixelHeight|0),s=n.byteLength/i;r.device.queue.writeTexture({texture:e},n,{offset:0,rowsPerImage:t.pixelHeight,bytesPerRow:t.pixelHeight*s},{width:t.pixelWidth,height:t.pixelHeight,depthOrArrayLayers:1})}},uw={"bc1-rgba-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"bc2-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc3-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"bc7-rgba-unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"etc1-rgb-unorm":{blockBytes:8,blockWidth:4,blockHeight:4},"etc2-rgba8unorm":{blockBytes:16,blockWidth:4,blockHeight:4},"astc-4x4-unorm":{blockBytes:16,blockWidth:4,blockHeight:4}},nre={blockBytes:4,blockWidth:1,blockHeight:1},n5={type:"compressed",upload(t,e,r){let n=t.pixelWidth,i=t.pixelHeight;const s=uw[t.format]||nre;for(let o=0;o<t.resource.length;o++){const a=t.resource[o],u=Math.ceil(n/s.blockWidth)*s.blockBytes;r.device.queue.writeTexture({texture:e,mipLevel:o},a,{offset:0,bytesPerRow:u},{width:Math.ceil(n/s.blockWidth)*s.blockWidth,height:Math.ceil(i/s.blockHeight)*s.blockHeight,depthOrArrayLayers:1}),n=Math.max(n>>1,1),i=Math.max(i>>1,1)}}},lw={type:"image",upload(t,e,r){const n=t.resource;if(!n)return;const i=Math.min(e.width,t.resourceWidth||t.pixelWidth),s=Math.min(e.height,t.resourceHeight||t.pixelHeight),o=t.alphaMode==="premultiply-alpha-on-upload";r.device.queue.copyExternalImageToTexture({source:n},{texture:e,premultipliedAlpha:o},{width:i,height:s})}},i5={type:"video",upload(t,e,r){lw.upload(t,e,r)}};class s5{constructor(e){this.device=e,this.sampler=e.createSampler({minFilter:"linear"}),this.pipelines={}}_getMipmapPipeline(e){let r=this.pipelines[e];return r||(this.mipmapShaderModule||(this.mipmapShaderModule=this.device.createShaderModule({code:`
                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(
                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));

                        struct VertexOutput {
                        @builtin(position) position : vec4<f32>,
                        @location(0) texCoord : vec2<f32>,
                        };

                        @vertex
                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {
                        var output : VertexOutput;
                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);
                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);
                        return output;
                        }

                        @group(0) @binding(0) var imgSampler : sampler;
                        @group(0) @binding(1) var img : texture_2d<f32>;

                        @fragment
                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {
                        return textureSample(img, imgSampler, texCoord);
                        }
                    `})),r=this.device.createRenderPipeline({layout:"auto",vertex:{module:this.mipmapShaderModule,entryPoint:"vertexMain"},fragment:{module:this.mipmapShaderModule,entryPoint:"fragmentMain",targets:[{format:e}]}}),this.pipelines[e]=r),r}generateMipmap(e){const r=this._getMipmapPipeline(e.format);if(e.dimension==="3d"||e.dimension==="1d")throw new Error("Generating mipmaps for non-2d textures is currently unsupported!");let n=e;const i=e.depthOrArrayLayers||1,s=e.usage&GPUTextureUsage.RENDER_ATTACHMENT;if(!s){const u={size:{width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i},format:e.format,usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_SRC|GPUTextureUsage.RENDER_ATTACHMENT,mipLevelCount:e.mipLevelCount-1};n=this.device.createTexture(u)}const o=this.device.createCommandEncoder({}),a=r.getBindGroupLayout(0);for(let u=0;u<i;++u){let l=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:"2d",baseArrayLayer:u,arrayLayerCount:1}),c=s?1:0;for(let f=1;f<e.mipLevelCount;++f){const d=n.createView({baseMipLevel:c++,mipLevelCount:1,dimension:"2d",baseArrayLayer:u,arrayLayerCount:1}),h=o.beginRenderPass({colorAttachments:[{view:d,storeOp:"store",loadOp:"clear",clearValue:{r:0,g:0,b:0,a:0}}]}),p=this.device.createBindGroup({layout:a,entries:[{binding:0,resource:this.sampler},{binding:1,resource:l}]});h.setPipeline(r),h.setBindGroup(0,p),h.draw(3,1,0,0),h.end(),l=d}}if(!s){const u={width:Math.ceil(e.width/2),height:Math.ceil(e.height/2),depthOrArrayLayers:i};for(let l=1;l<e.mipLevelCount;++l)o.copyTextureToTexture({texture:n,mipLevel:l-1},{texture:e,mipLevel:l},u),u.width=Math.ceil(u.width/2),u.height=Math.ceil(u.height/2)}return this.device.queue.submit([o.finish()]),s||n.destroy(),e}}class cw{constructor(e){this.managedTextures=[],this._gpuSources=Object.create(null),this._gpuSamplers=Object.create(null),this._bindGroupHash=Object.create(null),this._textureViewHash=Object.create(null),this._uploads={image:lw,buffer:r5,video:i5,compressed:n5},this._renderer=e,e.renderableGC.addManagedHash(this,"_gpuSources"),e.renderableGC.addManagedHash(this,"_gpuSamplers"),e.renderableGC.addManagedHash(this,"_bindGroupHash"),e.renderableGC.addManagedHash(this,"_textureViewHash")}contextChange(e){this._gpu=e}initSource(e){if(e.autoGenerateMipmaps){const u=Math.max(e.pixelWidth,e.pixelHeight);e.mipLevelCount=Math.floor(Math.log2(u))+1}let r=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST;e.uploadMethodId!=="compressed"&&(r|=GPUTextureUsage.RENDER_ATTACHMENT,r|=GPUTextureUsage.COPY_SRC);const n=uw[e.format]||{blockBytes:4,blockWidth:1,blockHeight:1},i=Math.ceil(e.pixelWidth/n.blockWidth)*n.blockWidth,s=Math.ceil(e.pixelHeight/n.blockHeight)*n.blockHeight,o={label:e.label,size:{width:i,height:s},format:e.format,sampleCount:e.sampleCount,mipLevelCount:e.mipLevelCount,dimension:e.dimension,usage:r},a=this._gpu.device.createTexture(o);return this._gpuSources[e.uid]=a,this.managedTextures.includes(e)||(e.on("update",this.onSourceUpdate,this),e.on("resize",this.onSourceResize,this),e.on("destroy",this.onSourceDestroy,this),e.on("unload",this.onSourceUnload,this),e.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(e)),this.onSourceUpdate(e),a}onSourceUpdate(e){const r=this.getGpuSource(e);r&&(this._uploads[e.uploadMethodId]&&this._uploads[e.uploadMethodId].upload(e,r,this._gpu),e.autoGenerateMipmaps&&e.mipLevelCount>1&&this.onUpdateMipmaps(e))}onSourceUnload(e){const r=this._gpuSources[e.uid];r&&(this._gpuSources[e.uid]=null,r.destroy())}onUpdateMipmaps(e){this._mipmapGenerator||(this._mipmapGenerator=new s5(this._gpu.device));const r=this.getGpuSource(e);this._mipmapGenerator.generateMipmap(r)}onSourceDestroy(e){e.off("update",this.onSourceUpdate,this),e.off("unload",this.onSourceUnload,this),e.off("destroy",this.onSourceDestroy,this),e.off("resize",this.onSourceResize,this),e.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(e),1),this.onSourceUnload(e)}onSourceResize(e){const r=this._gpuSources[e.uid];r?(r.width!==e.pixelWidth||r.height!==e.pixelHeight)&&(this._textureViewHash[e.uid]=null,this._bindGroupHash[e.uid]=null,this.onSourceUnload(e),this.initSource(e)):this.initSource(e)}_initSampler(e){return this._gpuSamplers[e._resourceId]=this._gpu.device.createSampler(e),this._gpuSamplers[e._resourceId]}getGpuSampler(e){return this._gpuSamplers[e._resourceId]||this._initSampler(e)}getGpuSource(e){return this._gpuSources[e.uid]||this.initSource(e)}getTextureBindGroup(e){return this._bindGroupHash[e.uid]??this._createTextureBindGroup(e)}_createTextureBindGroup(e){const r=e.source;return this._bindGroupHash[e.uid]=new Ei({0:r,1:r.style,2:new Pt({uTextureMatrix:{type:"mat3x3<f32>",value:e.textureMatrix.mapCoord}})}),this._bindGroupHash[e.uid]}getTextureView(e){const r=e.source;return this._textureViewHash[r.uid]??this._createTextureView(r)}_createTextureView(e){return this._textureViewHash[e.uid]=this.getGpuSource(e).createView(),this._textureViewHash[e.uid]}generateCanvas(e){const r=this._renderer,n=r.gpu.device.createCommandEncoder(),i=Ae.get().createCanvas();i.width=e.source.pixelWidth,i.height=e.source.pixelHeight;const s=i.getContext("webgpu");return s.configure({device:r.gpu.device,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC,format:Ae.get().getNavigator().gpu.getPreferredCanvasFormat(),alphaMode:"premultiplied"}),n.copyTextureToTexture({texture:r.texture.getGpuSource(e.source),origin:{x:0,y:0}},{texture:s.getCurrentTexture()},{width:i.width,height:i.height}),r.gpu.device.queue.submit([n.finish()]),i}getPixels(e){const r=this.generateCanvas(e),n=Ci.getOptimalCanvasAndContext(r.width,r.height),i=n.context;i.drawImage(r,0,0);const{width:s,height:o}=r,a=i.getImageData(0,0,s,o),u=new Uint8ClampedArray(a.data.buffer);return Ci.returnCanvasAndContext(n),{pixels:u,width:s,height:o}}destroy(){this.managedTextures.slice().forEach(e=>this.onSourceDestroy(e)),this.managedTextures=null;for(const e of Object.keys(this._bindGroupHash)){const r=Number(e),n=this._bindGroupHash[r];n==null||n.destroy(),this._bindGroupHash[r]=null}this._gpu=null,this._mipmapGenerator=null,this._gpuSources=null,this._bindGroupHash=null,this._textureViewHash=null,this._gpuSamplers=null}}cw.extension={type:[O.WebGPUSystem],name:"texture"};class fw{init(){const e=new Pt({uTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),r=ol({name:"graphics",bits:[Gm,$m(oa()),$F,ul]});this.shader=new bn({gpuProgram:r,resources:{localUniforms:e}})}execute(e,r){const n=r.context,i=n.customShader||this.shader,s=e.renderer,o=s.graphicsContext,{batcher:a,instructions:u}=o.getContextRenderData(n),l=s.encoder;l.setGeometry(a.geometry,i.gpuProgram);const c=s.globalUniforms.bindGroup;l.setBindGroup(0,c,i.gpuProgram);const f=s.renderPipes.uniformBatch.getUniformBindGroup(i.resources.localUniforms,!0);l.setBindGroup(2,f,i.gpuProgram);const d=u.instructions;let h=null;for(let p=0;p<u.instructionSize;p++){const m=d[p];if(m.topology!==h&&(h=m.topology,l.setPipelineFromGeometryProgramAndState(a.geometry,i.gpuProgram,e.state,m.topology)),i.groups[1]=m.bindGroup,!m.gpuBindGroup){const g=m.textures;m.bindGroup=Um(g.textures,g.count),m.gpuBindGroup=s.bindGroup.getBindGroup(m.bindGroup,i.gpuProgram,1)}l.setBindGroup(1,m.bindGroup,i.gpuProgram),l.renderPassEncoder.drawIndexed(m.size,1,m.start)}}destroy(){this.shader.destroy(!0),this.shader=null}}fw.extension={type:[O.WebGPUPipesAdaptor],name:"graphics"};class dw{init(){const e=ol({name:"mesh",bits:[hu,jF,ul]});this._shader=new bn({gpuProgram:e,resources:{uTexture:ne.EMPTY._source,uSampler:ne.EMPTY._source.style,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new ce}}}})}execute(e,r){const n=e.renderer;let i=r._shader;if(!i)i=this._shader,i.groups[2]=n.texture.getTextureBindGroup(r.texture);else if(!i.gpuProgram){he("Mesh shader has no gpuProgram",r.shader);return}const s=i.gpuProgram;if(s.autoAssignGlobalUniforms&&(i.groups[0]=n.globalUniforms.bindGroup),s.autoAssignLocalUniforms){const o=e.localUniforms;i.groups[1]=n.renderPipes.uniformBatch.getUniformBindGroup(o,!0)}n.encoder.draw({geometry:r._geometry,shader:i,state:r.state})}destroy(){this._shader.destroy(!0),this._shader=null}}dw.extension={type:[O.WebGPUPipesAdaptor],name:"mesh"};const ire=[...YS,rw,ew,ag,QS,cw,sw,ow,aw,iw,JS,tw,ZS],sre=[...KS,nw],ore=[nS,dw,fw],o5=[],a5=[],u5=[];me.handleByNamedList(O.WebGPUSystem,o5);me.handleByNamedList(O.WebGPUPipes,a5);me.handleByNamedList(O.WebGPUPipesAdaptor,u5);me.add(...ire,...sre,...ore);class l5 extends $f{constructor(){const e={name:"webgpu",type:Wr.WEBGPU,systems:o5,renderPipes:a5,renderPipeAdaptors:u5};super(e)}}const are=Object.freeze(Object.defineProperty({__proto__:null,WebGPURenderer:l5},Symbol.toStringTag,{value:"Module"})),IA={POINTS:"point-list",LINES:"line-list",LINE_STRIP:"line-strip",TRIANGLES:"triangle-list",TRIANGLE_STRIP:"triangle-strip"},ure=new Proxy(IA,{get(t,e){return oe(_e,`DRAW_MODES.${e} is deprecated, use '${IA[e]}' instead`),t[e]}}),lre=new Ie(0,0,1,1);function cre(t,e,r){r||(r=lre);const n=e.pixelWidth,i=e.pixelHeight;return t.x=r.x*n|0,t.y=r.y*i|0,t.width=r.width*n|0,t.height=r.height*i|0,t}var c5=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(c5||{}),Bp=(t=>(t.CLAMP="clamp-to-edge",t.REPEAT="repeat",t.MIRRORED_REPEAT="mirror-repeat",t))(Bp||{});const fre=new Proxy(Bp,{get(t,e){return oe(_e,`DRAW_MODES.${e} is deprecated, use '${Bp[e]}' instead`),t[e]}});var kp=(t=>(t.NEAREST="nearest",t.LINEAR="linear",t))(kp||{});const dre=new Proxy(kp,{get(t,e){return oe(_e,`DRAW_MODES.${e} is deprecated, use '${kp[e]}' instead`),t[e]}});class hre{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,a=e.height/2/s,u=e.x/i+o,l=e.y/s+a;n=Ee.add(n,Ee.NW),this.x0=u+o*Ee.uX(n),this.y0=l+a*Ee.uY(n),n=Ee.add(n,2),this.x1=u+o*Ee.uX(n),this.y1=l+a*Ee.uY(n),n=Ee.add(n,2),this.x2=u+o*Ee.uX(n),this.y2=l+a*Ee.uY(n),n=Ee.add(n,2),this.x3=u+o*Ee.uX(n),this.y3=l+a*Ee.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[pixi.js/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}let pre=0;function mre(){return pre++}function gre(t){const e=t.toString(),r=e.indexOf("{"),n=e.lastIndexOf("}");if(r===-1||n===-1)throw new Error("getFunctionBody: No body found in function definition");return e.slice(r+1,n).trim()}function vre(t,e){return oe("8.7.0","Use container.getFastGlobalBounds() instead"),t.getFastGlobalBounds(!0,e)}class yre extends Ni{constructor(e){typeof e=="function"&&(e={render:e});const{render:r,...n}=e;super({label:"RenderContainer",...n}),this.renderPipeId="customRender",this.batched=!1,r&&(this.render=r),this.containsPoint=e.containsPoint??(()=>!1),this.addBounds=e.addBounds??(()=>!1)}updateBounds(){this._bounds.clear(),this.addBounds(this._bounds)}render(e){}}function _re(t,e,r){oe("8.7.0","Please use container.collectRenderables instead.");const n=r.renderPipes?r:r.batch.renderer;return t.collectRenderables(e,n,null)}function bre(t,e,r){const n=t>>16&255,i=t>>8&255,s=t&255,o=e>>16&255,a=e>>8&255,u=e&255,l=n+(o-n)*r,c=i+(a-i)*r,f=s+(u-s)*r;return(l<<16)+(c<<8)+f}function xre(t,e){const r=e._scale,n=e._pivot,i=e._position,s=r._x,o=r._y,a=n._x,u=n._y;t.a=e._cx*s,t.b=e._sx*s,t.c=e._cy*o,t.d=e._sy*o,t.tx=i._x-(a*t.a+u*t.c),t.ty=i._y-(a*t.b+u*t.d)}function Sre(t,e,r){const n=t.a,i=t.b,s=t.c,o=t.d,a=t.tx,u=t.ty,l=e.a,c=e.b,f=e.c,d=e.d;r.a=n*l+i*f,r.b=n*c+i*d,r.c=s*l+o*f,r.d=s*c+o*d,r.tx=a*l+u*f+e.tx,r.ty=a*c+u*d+e.ty}class hw{constructor(e,r){this.state=dn.for2d(),this._graphicsBatchesHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=r,this._adaptor.init(),this.renderer.renderableGC.addManagedHash(this,"_graphicsBatchesHash")}validateRenderable(e){const r=e.context,n=!!this._graphicsBatchesHash[e.uid],i=this.renderer.graphicsContext.updateGpuContext(r);return!!(i.isBatchable||n!==i.isBatchable)}addRenderable(e,r){const n=this.renderer.graphicsContext.updateGpuContext(e.context);e.didViewUpdate&&this._rebuild(e),n.isBatchable?this._addToBatcher(e,r):(this.renderer.renderPipes.batch.break(r),r.add(e))}updateRenderable(e){const r=this._graphicsBatchesHash[e.uid];if(r)for(let n=0;n<r.length;n++){const i=r[n];i._batcher.updateElement(i)}}destroyRenderable(e){this._graphicsBatchesHash[e.uid]&&this._removeBatchForRenderable(e.uid),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;const r=this.renderer,n=e.context;if(!r.graphicsContext.getGpuContext(n).batches.length)return;const s=n.customShader||this._adaptor.shader;this.state.blendMode=e.groupBlendMode;const o=s.resources.localUniforms.uniforms;o.uTransformMatrix=e.groupTransform,o.uRound=r._roundPixels|e._roundPixels,fl(e.groupColorAlpha,o.uColor,0),this._adaptor.execute(this,e)}_rebuild(e){const r=!!this._graphicsBatchesHash[e.uid],n=this.renderer.graphicsContext.updateGpuContext(e.context);r&&this._removeBatchForRenderable(e.uid),n.isBatchable&&this._initBatchesForRenderable(e),e.batched=n.isBatchable}_addToBatcher(e,r){const n=this.renderer.renderPipes.batch,i=this._getBatchesForRenderable(e);for(let s=0;s<i.length;s++){const o=i[s];n.addToBatch(o,r)}}_getBatchesForRenderable(e){return this._graphicsBatchesHash[e.uid]||this._initBatchesForRenderable(e)}_initBatchesForRenderable(e){const r=e.context,n=this.renderer.graphicsContext.getGpuContext(r),i=this.renderer._roundPixels|e._roundPixels,s=n.batches.map(o=>{const a=Te.get(Xm);return o.copyTo(a),a.renderable=e,a.roundPixels=i,a});return this._graphicsBatchesHash[e.uid]===void 0&&e.on("destroyed",this._destroyRenderableBound),this._graphicsBatchesHash[e.uid]=s,s}_removeBatchForRenderable(e){this._graphicsBatchesHash[e].forEach(r=>{Te.return(r)}),this._graphicsBatchesHash[e]=null}destroy(){this.renderer=null,this._adaptor.destroy(),this._adaptor=null,this.state=null;for(const e in this._graphicsBatchesHash)this._removeBatchForRenderable(e);this._graphicsBatchesHash=null}}hw.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"graphics"};const wre={rectangle:y2,polygon:v2,triangle:_2,circle:Ki,ellipse:Ki,roundedRectangle:Ki};function Ere(t){t instanceof to&&(t={path:t,textureMatrix:null,out:null});const e=[],r=[],n=[],i=t.path.shapePath,s=t.textureMatrix;i.shapePrimitives.forEach(({shape:u,transform:l})=>{const c=n.length,f=e.length/2,d=[],h=wre[u.type];h.build(u,d),l&&Wm(d,l),h.triangulate(d,e,2,f,n,c);const p=r.length/2;s?(l&&s.append(l.clone().invert()),h2(e,2,f,r,p,2,e.length/2-f,s)):p2(r,p,2,e.length/2-f)});const o=t.out;return o?(o.positions=new Float32Array(e),o.uvs=new Float32Array(r),o.indices=new Uint32Array(n),o):new ho({positions:new Float32Array(e),uvs:new Float32Array(r),indices:new Uint32Array(n)})}const f5=class d5 extends ar{constructor(e={}){e={...d5.defaultOptions,...e},super(),this.renderLayerChildren=[],this.sortableChildren=e.sortableChildren,this.sortFunction=e.sortFunction}attach(...e){for(let r=0;r<e.length;r++){const n=e[r];if(n.parentRenderLayer){if(n.parentRenderLayer===this)continue;n.parentRenderLayer.detach(n)}this.renderLayerChildren.push(n),n.parentRenderLayer=this;const i=this.renderGroup||this.parentRenderGroup;i&&(i.structureDidChange=!0)}return e[0]}detach(...e){for(let r=0;r<e.length;r++){const n=e[r],i=this.renderLayerChildren.indexOf(n);i!==-1&&this.renderLayerChildren.splice(i,1),n.parentRenderLayer=null;const s=this.renderGroup||this.parentRenderGroup;s&&(s.structureDidChange=!0)}return e[0]}detachAll(){const e=this.renderLayerChildren;for(let r=0;r<e.length;r++)e[r].parentRenderLayer=null;this.renderLayerChildren.length=0}collectRenderables(e,r,n){const i=this.renderLayerChildren,s=i.length;this.sortableChildren&&this.sortRenderLayerChildren();for(let o=0;o<s;o++)i[o].parent||he("Container must be added to both layer and scene graph. Layers only handle render order - the scene graph is required for transforms (addChild)",i[o]),i[o].collectRenderables(e,r,this)}sortRenderLayerChildren(){this.renderLayerChildren.sort(this.sortFunction)}_getGlobalBoundsRecursive(e,r,n){if(!e)return;const i=this.renderLayerChildren;for(let s=0;s<i.length;s++)i[s]._getGlobalBoundsRecursive(!0,r,this)}};f5.defaultOptions={sortableChildren:!1,sortFunction:(t,e)=>t.zIndex-e.zIndex};let h5=f5;const Cre=h5,p5=class m5 extends ho{constructor(...e){super({});let r=e[0]??{};typeof r=="number"&&(oe(_e,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),r={width:r,height:e[1],verticesX:e[2],verticesY:e[3]}),this.build(r)}build(e){e={...m5.defaultOptions,...e},this.verticesX=this.verticesX??e.verticesX,this.verticesY=this.verticesY??e.verticesY,this.width=this.width??e.width,this.height=this.height??e.height;const r=this.verticesX*this.verticesY,n=[],i=[],s=[],o=this.verticesX-1,a=this.verticesY-1,u=this.width/o,l=this.height/a;for(let f=0;f<r;f++){const d=f%this.verticesX,h=f/this.verticesX|0;n.push(d*u,h*l),i.push(d/o,h/a)}const c=o*a;for(let f=0;f<c;f++){const d=f%o,h=f/o|0,p=h*this.verticesX+d,m=h*this.verticesX+d+1,g=(h+1)*this.verticesX+d,v=(h+1)*this.verticesX+d+1;s.push(p,m,g,m,v,g)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint32Array(s),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}};p5.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let ug=p5;function g5(t,e,r,n){const i=r.buffers[0],s=i.data,{verticesX:o,verticesY:a}=r,u=t/(o-1),l=e/(a-1);let c=0;const f=n[0],d=n[1],h=n[2],p=n[3],m=n[4],g=n[5],v=n[6],y=n[7],b=n[8];for(let _=0;_<s.length;_+=2){const x=c%o*u,S=(c/o|0)*l,w=f*x+d*S+h,P=p*x+m*S+g,C=v*x+y*S+b;s[_]=w/C,s[_+1]=P/C,c++}i.update()}function v5(t,e){const r=e[0],n=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7],c=e[8];return t[0]=o*c-a*l,t[1]=i*l-n*c,t[2]=n*a-i*o,t[3]=a*u-s*c,t[4]=r*c-i*u,t[5]=i*s-r*a,t[6]=s*l-o*u,t[7]=n*u-r*l,t[8]=r*o-n*s,t}function y5(t,e,r){const n=e[0],i=e[1],s=e[2],o=e[3],a=e[4],u=e[5],l=e[6],c=e[7],f=e[8],d=r[0],h=r[1],p=r[2],m=r[3],g=r[4],v=r[5],y=r[6],b=r[7],_=r[8];return t[0]=d*n+h*o+p*l,t[1]=d*i+h*a+p*c,t[2]=d*s+h*u+p*f,t[3]=m*n+g*o+v*l,t[4]=m*i+g*a+v*c,t[5]=m*s+g*u+v*f,t[6]=y*n+b*o+_*l,t[7]=y*i+b*a+_*c,t[8]=y*s+b*u+_*f,t}function Tre(t,e,r){const n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n+e[1]*i+e[2]*s,t[1]=e[3]*n+e[4]*i+e[5]*s,t[2]=e[6]*n+e[7]*i+e[8]*s,t}const Are=[0,0,0,0,0,0,0,0,0],Pre=[0,0,0],Yd=[0,0,0];function FA(t,e,r,n,i,s,o,a,u){const l=Are;l[0]=e,l[1]=n,l[2]=s,l[3]=r,l[4]=i,l[5]=o,l[6]=1,l[7]=1,l[8]=1;const c=v5(t,l);Yd[0]=a,Yd[1]=u,Yd[2]=1;const f=Tre(Pre,c,Yd),d=t;return t[0]=f[0],t[1]=0,t[2]=0,t[3]=0,t[4]=f[1],t[5]=0,t[6]=0,t[7]=0,t[8]=f[2],y5(t,d,l)}const Rre=[0,0,0,0,0,0,0,0,0],Ore=[0,0,0,0,0,0,0,0,0];function _5(t,e,r,n,i,s,o,a,u,l,c,f,d,h,p,m,g){const v=FA(Rre,e,r,s,o,l,c,h,p),y=FA(Ore,n,i,a,u,f,d,m,g);return y5(t,v5(v,v),y)}class b5 extends ug{constructor(e){super(e),this._projectionMatrix=[0,0,0,0,0,0,0,0,0];const{width:r,height:n}=e;this.corners=[0,0,r,0,r,n,0,n]}setCorners(e,r,n,i,s,o,a,u){const l=this.corners;l[0]=e,l[1]=r,l[2]=n,l[3]=i,l[4]=s,l[5]=o,l[6]=a,l[7]=u,this.updateProjection()}updateProjection(){const{width:e,height:r}=this,n=this.corners,i=_5(this._projectionMatrix,0,0,n[0],n[1],e,0,n[2],n[3],e,r,n[4],n[5],0,r,n[6],n[7]);g5(e,r,this,i)}}const x5=class S5 extends cl{constructor(e){e={...S5.defaultOptions,...e};const{texture:r,verticesX:n,verticesY:i,...s}=e,o=new b5(Kn({width:r.width,height:r.height,verticesX:n,verticesY:i}));super(Kn({...s,geometry:o})),this._texture=r,this.geometry.setCorners(e.x0,e.y0,e.x1,e.y1,e.x2,e.y2,e.x3,e.y3)}textureUpdated(){const e=this.geometry;if(!e)return;const{width:r,height:n}=this.texture;(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,e.updateProjection())}set texture(e){this._texture!==e&&(super.texture=e,this.textureUpdated())}get texture(){return this._texture}setCorners(e,r,n,i,s,o,a,u){this.geometry.setCorners(e,r,n,i,s,o,a,u)}};x5.defaultOptions={texture:ne.WHITE,verticesX:10,verticesY:10,x0:0,y0:0,x1:100,y1:0,x2:100,y2:100,x3:0,y3:100};let Bre=x5;class kre extends cl{constructor(e){const{texture:r,verticesX:n,verticesY:i,...s}=e,o=new ug(Kn({width:r.width,height:r.height,verticesX:n,verticesY:i}));super(Kn({...s,geometry:o,texture:r})),this.texture=r,this.autoResize=!0}textureUpdated(){const e=this.geometry,{width:r,height:n}=this.texture;this.autoResize&&(e.width!==r||e.height!==n)&&(e.width=r,e.height=n,e.build({}))}set texture(e){var r;(r=this._texture)==null||r.off("update",this.textureUpdated,this),super.texture=e,e.on("update",this.textureUpdated,this),this.textureUpdated()}get texture(){return this._texture}destroy(e){this.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const w5=class E5 extends ho{constructor(e){const{width:r,points:n,textureScale:i}={...E5.defaultOptions,...e};super({positions:new Float32Array(n.length*4),uvs:new Float32Array(n.length*4),indices:new Uint32Array((n.length-1)*6)}),this.points=n,this._width=r,this.textureScale=i,this._build()}get width(){return this._width}_build(){const e=this.points;if(!e)return;const r=this.getBuffer("aPosition"),n=this.getBuffer("aUV"),i=this.getIndex();if(e.length<1)return;r.data.length/4!==e.length&&(r.data=new Float32Array(e.length*4),n.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=n.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,u=e[0];const l=this._width*this.textureScale,c=e.length;for(let d=0;d<c;d++){const h=d*4;if(this.textureScale>0){const p=u.x-e[d].x,m=u.y-e[d].y,g=Math.sqrt(p*p+m*m);u=e[d],a+=g/l}else a=d/(c-1);s[h]=a,s[h+1]=0,s[h+2]=a,s[h+3]=1}let f=0;for(let d=0;d<c-1;d++){const h=d*2;o[f++]=h,o[f++]=h+1,o[f++]=h+2,o[f++]=h+2,o[f++]=h+1,o[f++]=h+3}n.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let r=e[0],n,i=0,s=0;const o=this.buffers[0].data,a=e.length,u=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let l=0;l<a;l++){const c=e[l],f=l*4;l<e.length-1?n=e[l+1]:n=c,s=-(n.x-r.x),i=n.y-r.y;const d=Math.sqrt(i*i+s*s);d<1e-6?(i=0,s=0):(i/=d,s/=d,i*=u,s*=u),o[f]=c.x+i,o[f+1]=c.y+s,o[f+2]=c.x-i,o[f+3]=c.y-s,r=c}this.buffers[0].update()}update(){this.textureScale>0?this._build():this.updateVertices()}};w5.defaultOptions={width:200,points:[],textureScale:0};let C5=w5;const T5=class A5 extends cl{constructor(e){const{texture:r,points:n,textureScale:i,...s}={...A5.defaultOptions,...e},o=new C5(Kn({width:r.height,points:n,textureScale:i}));i>0&&(r.source.style.addressMode="repeat"),super(Kn({...s,texture:r,geometry:o})),this.autoUpdate=!0,this.onRender=this._render}_render(){const e=this.geometry;(this.autoUpdate||e._width!==this.texture.height)&&(e._width=this.texture.height,e.update())}};T5.defaultOptions={textureScale:0};let Dre=T5;class Mre extends cl{constructor(e){const{texture:r,vertices:n,uvs:i,indices:s,topology:o,...a}=e,u=new ho(Kn({positions:n,uvs:i,indices:s,topology:o}));super(Kn({...a,texture:r,geometry:u})),this.autoUpdate=!0,this.onRender=this._render}get vertices(){return this.geometry.getBuffer("aPosition").data}set vertices(e){this.geometry.getBuffer("aPosition").data=e}_render(){this.autoUpdate&&this.geometry.getBuffer("aPosition").update()}}class lg{constructor(){this.batcherName="default",this.packAsQuad=!1,this.indexOffset=0,this.attributeOffset=0,this.roundPixels=0,this._batcher=null,this._batch=null,this._textureMatrixUpdateId=-1,this._uvUpdateId=-1}get blendMode(){return this.renderable.groupBlendMode}get topology(){return this._topology||this.geometry.topology}set topology(e){this._topology=e}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.geometry=null,this._uvUpdateId=-1,this._textureMatrixUpdateId=-1}setTexture(e){this.texture!==e&&(this.texture=e,this._textureMatrixUpdateId=-1)}get uvs(){const r=this.geometry.getBuffer("aUV"),n=r.data;let i=n;const s=this.texture.textureMatrix;return s.isSimple||(i=this._transformedUvs,(this._textureMatrixUpdateId!==s._updateID||this._uvUpdateId!==r._updateID)&&((!i||i.length<n.length)&&(i=this._transformedUvs=new Float32Array(n.length)),this._textureMatrixUpdateId=s._updateID,this._uvUpdateId=r._updateID,s.multiplyUvs(n,i))),i}get positions(){return this.geometry.positions}get indices(){return this.geometry.indices}get color(){return this.renderable.groupColorAlpha}get groupTransform(){return this.renderable.groupTransform}get attributeSize(){return this.geometry.positions.length/2}get indexSize(){return this.geometry.indices.length}}function Ire(t,e){const{width:r,height:n}=t.frame;return e.scale(1/r,1/n),e}class pw{constructor(e,r){this.localUniforms=new Pt({uTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),this.localUniformsBindGroup=new Ei({0:this.localUniforms}),this._meshDataHash=Object.create(null),this._gpuBatchableMeshHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.renderer=e,this._adaptor=r,this._adaptor.init(),e.renderableGC.addManagedHash(this,"_gpuBatchableMeshHash"),e.renderableGC.addManagedHash(this,"_meshDataHash")}validateRenderable(e){const r=this._getMeshData(e),n=r.batched,i=e.batched;if(r.batched=i,n!==i)return!0;if(i){const s=e._geometry;if(s.indices.length!==r.indexSize||s.positions.length!==r.vertexSize)return r.indexSize=s.indices.length,r.vertexSize=s.positions.length,!0;const o=this._getBatchableMesh(e);return o.texture.uid!==e._texture.uid&&(o._textureMatrixUpdateId=-1),!o._batcher.checkAndUpdateTexture(o,e._texture)}return!1}addRenderable(e,r){const n=this.renderer.renderPipes.batch,{batched:i}=this._getMeshData(e);if(i){const s=this._getBatchableMesh(e);s.setTexture(e._texture),s.geometry=e._geometry,n.addToBatch(s,r)}else n.break(r),r.add(e)}updateRenderable(e){if(e.batched){const r=this._gpuBatchableMeshHash[e.uid];r.setTexture(e._texture),r.geometry=e._geometry,r._batcher.updateElement(r)}}destroyRenderable(e){this._meshDataHash[e.uid]=null;const r=this._gpuBatchableMeshHash[e.uid];r&&(Te.return(r),this._gpuBatchableMeshHash[e.uid]=null),e.off("destroyed",this._destroyRenderableBound)}execute(e){if(!e.isRenderable)return;e.state.blendMode=Au(e.groupBlendMode,e.texture._source);const r=this.localUniforms;r.uniforms.uTransformMatrix=e.groupTransform,r.uniforms.uRound=this.renderer._roundPixels|e._roundPixels,r.update(),fl(e.groupColorAlpha,r.uniforms.uColor,0),this._adaptor.execute(this,e)}_getMeshData(e){return this._meshDataHash[e.uid]||this._initMeshData(e)}_initMeshData(e){var r,n;return this._meshDataHash[e.uid]={batched:e.batched,indexSize:(r=e._geometry.indices)==null?void 0:r.length,vertexSize:(n=e._geometry.positions)==null?void 0:n.length},e.on("destroyed",this._destroyRenderableBound),this._meshDataHash[e.uid]}_getBatchableMesh(e){return this._gpuBatchableMeshHash[e.uid]||this._initBatchableMesh(e)}_initBatchableMesh(e){const r=Te.get(lg);return r.renderable=e,r.setTexture(e._texture),r.transform=e.groupTransform,r.roundPixels=this.renderer._roundPixels|e._roundPixels,this._gpuBatchableMeshHash[e.uid]=r,r}destroy(){for(const e in this._gpuBatchableMeshHash)this._gpuBatchableMeshHash[e]&&Te.return(this._gpuBatchableMeshHash[e]);this._gpuBatchableMeshHash=null,this._meshDataHash=null,this.localUniforms=null,this.localUniformsBindGroup=null,this._adaptor.destroy(),this._adaptor=null,this.renderer=null}}pw.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"mesh"};class P5{execute(e,r){const n=e.state,i=e.renderer,s=r.shader||e.defaultShader;s.resources.uTexture=r.texture._source,s.resources.uniforms=e.localUniforms;const o=i.gl,a=e.getBuffers(r);i.shader.bind(s),i.state.set(n),i.geometry.bind(a.geometry,s.glProgram);const l=a.geometry.indexBuffer.data.BYTES_PER_ELEMENT===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;o.drawElements(o.TRIANGLES,r.particleChildren.length*6,l,0)}}class R5{execute(e,r){const n=e.renderer,i=r.shader||e.defaultShader;i.groups[0]=n.renderPipes.uniformBatch.getUniformBindGroup(e.localUniforms,!0),i.groups[1]=n.texture.getTextureBindGroup(r.texture);const s=e.state,o=e.getBuffers(r);n.encoder.draw({geometry:o.geometry,shader:r.shader||e.defaultShader,state:s,size:r.particleChildren.length*6})}}function Tb(t,e=null){const r=t*6;if(r>65535?e||(e=new Uint32Array(r)):e||(e=new Uint16Array(r)),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function O5(t){return{dynamicUpdate:LA(t,!0),staticUpdate:LA(t,!1)}}function LA(t,e){const r=[];r.push(`
      
        var index = 0;

        for (let i = 0; i < ps.length; ++i)
        {
            const p = ps[i];

            `);let n=0;for(const s in t){const o=t[s];if(e!==o.dynamic)continue;r.push(`offset = index + ${n}`),r.push(o.code);const a=ns(o.format);n+=a.stride/4}r.push(`
            index += stride * 4;
        }
    `),r.unshift(`
        var stride = ${n};
    `);const i=r.join(`
`);return new Function("ps","f32v","u32v",i)}class B5{constructor(e){this._size=0,this._generateParticleUpdateCache={};const r=this._size=e.size??1e3,n=e.properties;let i=0,s=0;for(const c in n){const f=n[c],d=ns(f.format);f.dynamic?s+=d.stride:i+=d.stride}this._dynamicStride=s/4,this._staticStride=i/4,this.staticAttributeBuffer=new Mo(r*4*i),this.dynamicAttributeBuffer=new Mo(r*4*s),this.indexBuffer=Tb(r);const o=new aa;let a=0,u=0;this._staticBuffer=new Tr({data:new Float32Array(1),label:"static-particle-buffer",shrinkToFit:!1,usage:Ce.VERTEX|Ce.COPY_DST}),this._dynamicBuffer=new Tr({data:new Float32Array(1),label:"dynamic-particle-buffer",shrinkToFit:!1,usage:Ce.VERTEX|Ce.COPY_DST});for(const c in n){const f=n[c],d=ns(f.format);f.dynamic?(o.addAttribute(f.attributeName,{buffer:this._dynamicBuffer,stride:this._dynamicStride*4,offset:a*4,format:f.format}),a+=d.size):(o.addAttribute(f.attributeName,{buffer:this._staticBuffer,stride:this._staticStride*4,offset:u*4,format:f.format}),u+=d.size)}o.addIndex(this.indexBuffer);const l=this.getParticleUpdate(n);this._dynamicUpload=l.dynamicUpdate,this._staticUpload=l.staticUpdate,this.geometry=o}getParticleUpdate(e){const r=Fre(e);return this._generateParticleUpdateCache[r]?this._generateParticleUpdateCache[r]:(this._generateParticleUpdateCache[r]=this.generateParticleUpdate(e),this._generateParticleUpdateCache[r])}generateParticleUpdate(e){return O5(e)}update(e,r){e.length>this._size&&(r=!0,this._size=Math.max(e.length,this._size*1.5|0),this.staticAttributeBuffer=new Mo(this._size*this._staticStride*4*4),this.dynamicAttributeBuffer=new Mo(this._size*this._dynamicStride*4*4),this.indexBuffer=Tb(this._size),this.geometry.indexBuffer.setDataWithSize(this.indexBuffer,this.indexBuffer.byteLength,!0));const n=this.dynamicAttributeBuffer;if(this._dynamicUpload(e,n.float32View,n.uint32View),this._dynamicBuffer.setDataWithSize(this.dynamicAttributeBuffer.float32View,e.length*this._dynamicStride*4,!0),r){const i=this.staticAttributeBuffer;this._staticUpload(e,i.float32View,i.uint32View),this._staticBuffer.setDataWithSize(i.float32View,e.length*this._staticStride*4,!0)}}destroy(){this._staticBuffer.destroy(),this._dynamicBuffer.destroy(),this.geometry.destroy()}}function Fre(t){const e=[];for(const r in t){const n=t[r];e.push(r,n.code,n.dynamic?"d":"s")}return e.join("_")}var k5=`varying vec2 vUV;
varying vec4 vColor;

uniform sampler2D uTexture;

void main(void){
    vec4 color = texture2D(uTexture, vUV) * vColor;
    gl_FragColor = color;
}`,D5=`attribute vec2 aVertex;
attribute vec2 aUV;
attribute vec4 aColor;

attribute vec2 aPosition;
attribute float aRotation;

uniform mat3 uTranslationMatrix;
uniform float uRound;
uniform vec2 uResolution;
uniform vec4 uColor;

varying vec2 vUV;
varying vec4 vColor;

vec2 roundPixels(vec2 position, vec2 targetSize)
{       
    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;
}

void main(void){
    float cosRotation = cos(aRotation);
    float sinRotation = sin(aRotation);
    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;
    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;

    vec2 v = vec2(x, y);
    v = v + aPosition;

    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    if(uRound == 1.0)
    {
        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
    }

    vUV = aUV;
    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;
}
`,Ab=`
struct ParticleUniforms {
  uProjectionMatrix:mat3x3<f32>,
  uColor:vec4<f32>,
  uResolution:vec2<f32>,
  uRoundPixels:f32,
};

@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;

@group(1) @binding(0) var uTexture: texture_2d<f32>;
@group(1) @binding(1) var uSampler : sampler;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>,
    @location(1) color : vec4<f32>,
  };
@vertex
fn mainVertex(
  @location(0) aVertex: vec2<f32>,
  @location(1) aPosition: vec2<f32>,
  @location(2) aUV: vec2<f32>,
  @location(3) aColor: vec4<f32>,
  @location(4) aRotation: f32,
) -> VSOutput {
  
   let v = vec2(
       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),
       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)
   ) + aPosition;

   let position = vec4((uniforms.uProjectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;

  return VSOutput(
   position,
   aUV,
   vColor,
  );
}

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @location(1) color: vec4<f32>,
  @builtin(position) position: vec4<f32>,
) -> @location(0) vec4<f32> {

    var sample = textureSample(uTexture, uSampler, uv) * color;
   
    return sample;
}`;class M5 extends bn{constructor(){const e=et.from({vertex:D5,fragment:k5}),r=qe.from({fragment:{source:Ab,entryPoint:"mainFragment"},vertex:{source:Ab,entryPoint:"mainVertex"}});super({glProgram:e,gpuProgram:r,resources:{uTexture:ne.WHITE.source,uSampler:new U1({}),uniforms:{uTranslationMatrix:{value:new ce,type:"mat3x3<f32>"},uColor:{value:new Re(16777215),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}}})}}class mw{constructor(e,r){this.state=dn.for2d(),this._gpuBufferHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this.localUniforms=new Pt({uTranslationMatrix:{value:new ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array(4),type:"vec4<f32>"},uRound:{value:1,type:"f32"},uResolution:{value:[0,0],type:"vec2<f32>"}}),this.renderer=e,this.adaptor=r,this.defaultShader=new M5,this.state=dn.for2d()}validateRenderable(e){return!1}addRenderable(e,r){this.renderer.renderPipes.batch.break(r),r.add(e)}getBuffers(e){return this._gpuBufferHash[e.uid]||this._initBuffer(e)}_initBuffer(e){return this._gpuBufferHash[e.uid]=new B5({size:e.particleChildren.length,properties:e._properties}),e.on("destroyed",this._destroyRenderableBound),this._gpuBufferHash[e.uid]}updateRenderable(e){}destroyRenderable(e){this._gpuBufferHash[e.uid].destroy(),this._gpuBufferHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}execute(e){const r=e.particleChildren;if(r.length===0)return;const n=this.renderer,i=this.getBuffers(e);e.texture||(e.texture=r[0].texture);const s=this.state;i.update(r,e._childrenDirty),e._childrenDirty=!1,s.blendMode=Au(e.blendMode,e.texture._source);const o=this.localUniforms.uniforms,a=o.uTranslationMatrix;e.worldTransform.copyTo(a),a.prepend(n.globalUniforms.globalUniformData.projectionMatrix),o.uResolution=n.globalUniforms.globalUniformData.resolution,o.uRound=n._roundPixels|e._roundPixels,fl(e.groupColorAlpha,o.uColor,0),this.adaptor.execute(this,e)}destroy(){this.defaultShader&&(this.defaultShader.destroy(),this.defaultShader=null)}}class gw extends mw{constructor(e){super(e,new P5)}}gw.extension={type:[O.WebGLPipes],name:"particle"};class vw extends mw{constructor(e){super(e,new R5)}}vw.extension={type:[O.WebGPUPipes],name:"particle"};const I5=class Pb{constructor(e){if(e instanceof ne)this.texture=e,vp(this,Pb.defaultOptions,{});else{const r={...Pb.defaultOptions,...e};vp(this,r,{})}}get alpha(){return this._alpha}set alpha(e){this._alpha=Math.min(Math.max(e,0),1),this._updateColor()}get tint(){return ou(this._tint)}set tint(e){typeof e=="number"?this._tint=e:this._tint=Re.shared.setValue(e??16777215).toBgrNumber(),this._updateColor()}_updateColor(){this.color=this._tint+((this._alpha*255|0)<<24)}};I5.defaultOptions={anchorX:0,anchorY:0,x:0,y:0,scaleX:1,scaleY:1,rotation:0,tint:16777215,alpha:1};let Lre=I5;const Rb={vertex:{attributeName:"aVertex",format:"float32x2",code:`
            const texture = p.texture;
            const sx = p.scaleX;
            const sy = p.scaleY;
            const ax = p.anchorX;
            const ay = p.anchorY;
            const trim = texture.trim;
            const orig = texture.orig;

            if (trim)
            {
                w1 = trim.x - (ax * orig.width);
                w0 = w1 + trim.width;

                h1 = trim.y - (ay * orig.height);
                h0 = h1 + trim.height;
            }
            else
            {
                w1 = -ax * (orig.width);
                w0 = w1 + orig.width;

                h1 = -ay * (orig.height);
                h0 = h1 + orig.height;
            }

            f32v[offset] = w1 * sx;
            f32v[offset + 1] = h1 * sy;

            f32v[offset + stride] = w0 * sx;
            f32v[offset + stride + 1] = h1 * sy;

            f32v[offset + (stride * 2)] = w0 * sx;
            f32v[offset + (stride * 2) + 1] = h0 * sy;

            f32v[offset + (stride * 3)] = w1 * sx;
            f32v[offset + (stride * 3) + 1] = h0 * sy;
        `,dynamic:!1},position:{attributeName:"aPosition",format:"float32x2",code:`
            var x = p.x;
            var y = p.y;

            f32v[offset] = x;
            f32v[offset + 1] = y;

            f32v[offset + stride] = x;
            f32v[offset + stride + 1] = y;

            f32v[offset + (stride * 2)] = x;
            f32v[offset + (stride * 2) + 1] = y;

            f32v[offset + (stride * 3)] = x;
            f32v[offset + (stride * 3) + 1] = y;
        `,dynamic:!0},rotation:{attributeName:"aRotation",format:"float32",code:`
            var rotation = p.rotation;

            f32v[offset] = rotation;
            f32v[offset + stride] = rotation;
            f32v[offset + (stride * 2)] = rotation;
            f32v[offset + (stride * 3)] = rotation;
        `,dynamic:!1},uvs:{attributeName:"aUV",format:"float32x2",code:`
            var uvs = p.texture.uvs;

            f32v[offset] = uvs.x0;
            f32v[offset + 1] = uvs.y0;

            f32v[offset + stride] = uvs.x1;
            f32v[offset + stride + 1] = uvs.y1;

            f32v[offset + (stride * 2)] = uvs.x2;
            f32v[offset + (stride * 2) + 1] = uvs.y2;

            f32v[offset + (stride * 3)] = uvs.x3;
            f32v[offset + (stride * 3) + 1] = uvs.y3;
        `,dynamic:!1},color:{attributeName:"aColor",format:"unorm8x4",code:`
            const c = p.color;

            u32v[offset] = c;
            u32v[offset + stride] = c;
            u32v[offset + (stride * 2)] = c;
            u32v[offset + (stride * 3)] = c;
        `,dynamic:!1}},Nre=new Ut(0,0,0,0),F5=class Ob extends Ni{constructor(e={}){e={...Ob.defaultOptions,...e,dynamicProperties:{...Ob.defaultOptions.dynamicProperties,...e==null?void 0:e.dynamicProperties}};const{dynamicProperties:r,shader:n,roundPixels:i,texture:s,particles:o,...a}=e;super({label:"ParticleContainer",...a}),this.renderPipeId="particle",this.batched=!1,this._childrenDirty=!1,this.texture=s||null,this.shader=n,this._properties={};for(const u in Rb){const l=Rb[u],c=r[u];this._properties[u]={...l,dynamic:c}}this.allowChildren=!0,this.roundPixels=i??!1,this.particleChildren=o??[]}addParticle(...e){for(let r=0;r<e.length;r++)this.particleChildren.push(e[r]);return this.onViewUpdate(),e[0]}removeParticle(...e){let r=!1;for(let n=0;n<e.length;n++){const i=this.particleChildren.indexOf(e[n]);i>-1&&(this.particleChildren.splice(i,1),r=!0)}return r&&this.onViewUpdate(),e[0]}update(){this._childrenDirty=!0}onViewUpdate(){this._childrenDirty=!0,super.onViewUpdate()}get bounds(){return Nre}updateBounds(){}destroy(e=!1){var n,i;if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const s=typeof e=="boolean"?e:e==null?void 0:e.textureSource,o=this.texture??((n=this.particleChildren[0])==null?void 0:n.texture);o&&o.destroy(s)}this.texture=null,(i=this.shader)==null||i.destroy()}removeParticles(e,r){const n=this.particleChildren.splice(e,r);return this.onViewUpdate(),n}removeParticleAt(e){const r=this.particleChildren.splice(e,1);return this.onViewUpdate(),r[0]}addParticleAt(e,r){return this.particleChildren.splice(r,0,e),this.onViewUpdate(),e}addChild(...e){throw new Error("ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()")}removeChild(...e){throw new Error("ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()")}removeChildren(e,r){throw new Error("ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()")}removeChildAt(e){throw new Error("ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()")}getChildAt(e){throw new Error("ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()")}setChildIndex(e,r){throw new Error("ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()")}getChildIndex(e){throw new Error("ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()")}addChildAt(e,r){throw new Error("ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()")}swapChildren(e,r){throw new Error("ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()")}reparentChild(...e){throw new Error("ParticleContainer.reparentChild() is not available with the particle container")}reparentChildAt(e,r){throw new Error("ParticleContainer.reparentChildAt() is not available with the particle container")}};F5.defaultOptions={dynamicProperties:{vertex:!1,position:!0,rotation:!1,uvs:!1,color:!1},roundPixels:!1};let Ure=F5;const L5=class N5 extends ug{constructor(e={}){e={...N5.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}update(e){var r,n;this.width=e.width??this.width,this.height=e.height??this.height,this._originalWidth=e.originalWidth??this._originalWidth,this._originalHeight=e.originalHeight??this._originalHeight,this._leftWidth=e.leftWidth??this._leftWidth,this._rightWidth=e.rightWidth??this._rightWidth,this._topHeight=e.topHeight??this._topHeight,this._bottomHeight=e.bottomHeight??this._bottomHeight,this._anchorX=(r=e.anchor)==null?void 0:r.x,this._anchorY=(n=e.anchor)==null?void 0:n.y,this.updateUvs(),this.updatePositions()}updatePositions(){const e=this.positions,{width:r,height:n,_leftWidth:i,_rightWidth:s,_topHeight:o,_bottomHeight:a,_anchorX:u,_anchorY:l}=this,c=i+s,f=r>c?1:r/c,d=o+a,h=n>d?1:n/d,p=Math.min(f,h),m=u*r,g=l*n;e[0]=e[8]=e[16]=e[24]=-m,e[2]=e[10]=e[18]=e[26]=i*p-m,e[4]=e[12]=e[20]=e[28]=r-s*p-m,e[6]=e[14]=e[22]=e[30]=r-m,e[1]=e[3]=e[5]=e[7]=-g,e[9]=e[11]=e[13]=e[15]=o*p-g,e[17]=e[19]=e[21]=e[23]=n-a*p-g,e[25]=e[27]=e[29]=e[31]=n-g,this.getBuffer("aPosition").update()}updateUvs(){const e=this.uvs;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1;const r=1/this._originalWidth,n=1/this._originalHeight;e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.getBuffer("aUV").update()}};L5.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let xs=L5;const U5=class G5 extends Ni{constructor(e){var d,h,p,m;e instanceof ne&&(e={texture:e});const{width:r,height:n,anchor:i,leftWidth:s,rightWidth:o,topHeight:a,bottomHeight:u,texture:l,roundPixels:c,...f}=e;super({label:"NineSliceSprite",...f}),this.renderPipeId="nineSliceSprite",this.batched=!0,this._leftWidth=s??((d=l==null?void 0:l.defaultBorders)==null?void 0:d.left)??xs.defaultOptions.leftWidth,this._topHeight=a??((h=l==null?void 0:l.defaultBorders)==null?void 0:h.top)??xs.defaultOptions.topHeight,this._rightWidth=o??((p=l==null?void 0:l.defaultBorders)==null?void 0:p.right)??xs.defaultOptions.rightWidth,this._bottomHeight=u??((m=l==null?void 0:l.defaultBorders)==null?void 0:m.bottom)??xs.defaultOptions.bottomHeight,this._width=r??l.width??xs.defaultOptions.width,this._height=n??l.height??xs.defaultOptions.height,this.allowChildren=!1,this.texture=l??G5.defaultOptions.texture,this.roundPixels=c??!1,this._anchor=new Et({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:this.texture.defaultAnchor&&(this.anchor=this.texture.defaultAnchor)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get width(){return this._width}set width(e){this._width=e,this.onViewUpdate()}get height(){return this._height}set height(e){this._height=e,this.onViewUpdate()}setSize(e,r){typeof e=="object"&&(r=e.height??e.width,e=e.width),this._width=e,this._height=r??e,this.onViewUpdate()}getSize(e){return e||(e={}),e.width=this._width,e.height=this._height,e}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this.onViewUpdate()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this.onViewUpdate()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this.onViewUpdate()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this.onViewUpdate()}get texture(){return this._texture}set texture(e){e||(e=ne.EMPTY);const r=this._texture;r!==e&&(r&&r.dynamic&&r.off("update",this.onViewUpdate,this),e.dynamic&&e.on("update",this.onViewUpdate,this),this._texture=e,this.onViewUpdate())}get originalWidth(){return this._texture.width}get originalHeight(){return this._texture.height}destroy(e){if(super.destroy(e),typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.textureSource;this._texture.destroy(n)}this._texture=null}updateBounds(){const e=this._bounds,r=this._anchor,n=this._width,i=this._height;e.minX=-r._x*n,e.maxX=e.minX+n,e.minY=-r._y*i,e.maxY=e.minY+i}};U5.defaultOptions={texture:ne.EMPTY};let z5=U5;class Gre extends z5{constructor(...e){let r=e[0];r instanceof ne&&(oe(_e,"NineSlicePlane now uses the options object {texture, leftWidth, rightWidth, topHeight, bottomHeight}"),r={texture:r,leftWidth:e[1],topHeight:e[2],rightWidth:e[3],bottomHeight:e[4]}),oe(_e,"NineSlicePlane is deprecated. Use NineSliceSprite instead."),super(r)}}class yw{constructor(e){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(e,r){const n=this._getGpuSprite(e);e.didViewUpdate&&this._updateBatchableSprite(e,n),this._renderer.renderPipes.batch.addToBatch(n,r)}updateRenderable(e){const r=this._gpuSpriteHash[e.uid];e.didViewUpdate&&this._updateBatchableSprite(e,r),r._batcher.updateElement(r)}validateRenderable(e){const r=this._getGpuSprite(e);return!r._batcher.checkAndUpdateTexture(r,e._texture)}destroyRenderable(e){const r=this._gpuSpriteHash[e.uid];Te.return(r.geometry),Te.return(r),this._gpuSpriteHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(e,r){r.geometry.update(e),r.setTexture(e._texture)}_getGpuSprite(e){return this._gpuSpriteHash[e.uid]||this._initGPUSprite(e)}_initGPUSprite(e){const r=Te.get(lg);return r.geometry=Te.get(xs),r.renderable=e,r.transform=e.groupTransform,r.texture=e._texture,r.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuSpriteHash[e.uid]=r,e.didViewUpdate||this._updateBatchableSprite(e,r),e.on("destroyed",this._destroyRenderableBound),r}destroy(){for(const e in this._gpuSpriteHash)this._gpuSpriteHash[e].geometry.destroy();this._gpuSpriteHash=null,this._renderer=null}}yw.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"nineSliceSprite"};const $5={name:"tiling-bit",vertex:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`
            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;

            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;
        `},fragment:{header:`
            struct TilingUniforms {
                uMapCoord:mat3x3<f32>,
                uClampFrame:vec4<f32>,
                uClampOffset:vec2<f32>,
                uTextureTransform:mat3x3<f32>,
                uSizeAnchor:vec4<f32>
            };

            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;
            @group(2) @binding(1) var uTexture: texture_2d<f32>;
            @group(2) @binding(2) var uSampler: sampler;
        `,main:`

            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);
            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;
            var unclamped = coord;
            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);

            var bias = 0.;

            if(unclamped.x == coord.x && unclamped.y == coord.y)
            {
                bias = -32.;
            } 

            outColor = textureSampleBias(uTexture, uSampler, coord, bias);
        `}},j5={name:"tiling-bit",vertex:{header:`
            uniform mat3 uTextureTransform;
            uniform vec4 uSizeAnchor;
        
        `,main:`
            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;

            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;
        `},fragment:{header:`
            uniform sampler2D uTexture;
            uniform mat3 uMapCoord;
            uniform vec4 uClampFrame;
            uniform vec2 uClampOffset;
        `,main:`

        vec2 coord = vUV + ceil(uClampOffset - vUV);
        coord = (uMapCoord * vec3(coord, 1.0)).xy;
        vec2 unclamped = coord;
        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);
        
        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0
    
        `}};let L0,N0;class H5 extends bn{constructor(){L0??(L0=ol({name:"tiling-sprite-shader",bits:[hu,$5,ul]})),N0??(N0=al({name:"tiling-sprite-shader",bits:[ng,j5,ll]}));const e=new Pt({uMapCoord:{value:new ce,type:"mat3x3<f32>"},uClampFrame:{value:new Float32Array([0,0,1,1]),type:"vec4<f32>"},uClampOffset:{value:new Float32Array([0,0]),type:"vec2<f32>"},uTextureTransform:{value:new ce,type:"mat3x3<f32>"},uSizeAnchor:{value:new Float32Array([100,100,.5,.5]),type:"vec4<f32>"}});super({glProgram:N0,gpuProgram:L0,resources:{localUniforms:new Pt({uTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uRound:{value:0,type:"f32"}}),tilingUniforms:e,uTexture:ne.EMPTY.source,uSampler:ne.EMPTY.source.style}})}updateUniforms(e,r,n,i,s,o){const a=this.resources.tilingUniforms,u=o.width,l=o.height,c=o.textureMatrix,f=a.uniforms.uTextureTransform;f.set(n.a*u/e,n.b*u/r,n.c*l/e,n.d*l/r,n.tx/e,n.ty/r),f.invert(),a.uniforms.uMapCoord=c.mapCoord,a.uniforms.uClampFrame=c.uClampFrame,a.uniforms.uClampOffset=c.uClampOffset,a.uniforms.uTextureTransform=f,a.uniforms.uSizeAnchor[0]=e,a.uniforms.uSizeAnchor[1]=r,a.uniforms.uSizeAnchor[2]=i,a.uniforms.uSizeAnchor[3]=s,o&&(this.resources.uTexture=o.source,this.resources.uSampler=o.source.style)}}class V5 extends ho{constructor(){super({positions:new Float32Array([0,0,1,0,1,1,0,1]),uvs:new Float32Array([0,0,1,0,1,1,0,1]),indices:new Uint32Array([0,1,2,0,2,3])})}}function W5(t,e){const r=t.anchor.x,n=t.anchor.y;e[0]=-r*t.width,e[1]=-n*t.height,e[2]=(1-r)*t.width,e[3]=-n*t.height,e[4]=(1-r)*t.width,e[5]=(1-n)*t.height,e[6]=-r*t.width,e[7]=(1-n)*t.height}function X5(t,e,r,n){let i=0;const s=t.length/(e||2),o=n.a,a=n.b,u=n.c,l=n.d,c=n.tx,f=n.ty;for(r*=e;i<s;){const d=t[r],h=t[r+1];t[r]=o*d+u*h+c,t[r+1]=a*d+l*h+f,r+=e,i++}}function q5(t,e){const r=t.texture,n=r.frame.width,i=r.frame.height;let s=0,o=0;t.applyAnchorToTexture&&(s=t.anchor.x,o=t.anchor.y),e[0]=e[6]=-s,e[2]=e[4]=1-s,e[1]=e[3]=-o,e[5]=e[7]=1-o;const a=ce.shared;a.copyFrom(t._tileTransform.matrix),a.tx/=t.width,a.ty/=t.height,a.invert(),a.scale(t.width/n,t.height/i),X5(e,2,0,a)}const Kd=new V5;class _w{constructor(e){this._state=dn.default2d,this._tilingSpriteDataHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_tilingSpriteDataHash")}validateRenderable(e){const r=this._getTilingSpriteData(e),n=r.canBatch;this._updateCanBatch(e);const i=r.canBatch;if(i&&i===n){const{batchableMesh:s}=r;return!s._batcher.checkAndUpdateTexture(s,e.texture)}return n!==i}addRenderable(e,r){const n=this._renderer.renderPipes.batch;this._updateCanBatch(e);const i=this._getTilingSpriteData(e),{geometry:s,canBatch:o}=i;if(o){i.batchableMesh||(i.batchableMesh=new lg);const a=i.batchableMesh;e.didViewUpdate&&(this._updateBatchableMesh(e),a.geometry=s,a.renderable=e,a.transform=e.groupTransform,a.setTexture(e._texture)),a.roundPixels=this._renderer._roundPixels|e._roundPixels,n.addToBatch(a,r)}else n.break(r),i.shader||(i.shader=new H5),this.updateRenderable(e),r.add(e)}execute(e){const{shader:r}=this._tilingSpriteDataHash[e.uid];r.groups[0]=this._renderer.globalUniforms.bindGroup;const n=r.resources.localUniforms.uniforms;n.uTransformMatrix=e.groupTransform,n.uRound=this._renderer._roundPixels|e._roundPixels,fl(e.groupColorAlpha,n.uColor,0),this._state.blendMode=Au(e.groupBlendMode,e.texture._source),this._renderer.encoder.draw({geometry:Kd,shader:r,state:this._state})}updateRenderable(e){const r=this._getTilingSpriteData(e),{canBatch:n}=r;if(n){const{batchableMesh:i}=r;e.didViewUpdate&&this._updateBatchableMesh(e),i._batcher.updateElement(i)}else if(e.didViewUpdate){const{shader:i}=r;i.updateUniforms(e.width,e.height,e._tileTransform.matrix,e.anchor.x,e.anchor.y,e.texture)}}destroyRenderable(e){var n;const r=this._getTilingSpriteData(e);r.batchableMesh=null,(n=r.shader)==null||n.destroy(),this._tilingSpriteDataHash[e.uid]=null,e.off("destroyed",this._destroyRenderableBound)}_getTilingSpriteData(e){return this._tilingSpriteDataHash[e.uid]||this._initTilingSpriteData(e)}_initTilingSpriteData(e){const r=new ho({indices:Kd.indices,positions:Kd.positions.slice(),uvs:Kd.uvs.slice()});return this._tilingSpriteDataHash[e.uid]={canBatch:!0,renderable:e,geometry:r},e.on("destroyed",this._destroyRenderableBound),this._tilingSpriteDataHash[e.uid]}_updateBatchableMesh(e){const r=this._getTilingSpriteData(e),{geometry:n}=r,i=e.texture.source.style;i.addressMode!=="repeat"&&(i.addressMode="repeat",i.update()),q5(e,n.uvs),W5(e,n.positions)}destroy(){for(const e in this._tilingSpriteDataHash)this.destroyRenderable(this._tilingSpriteDataHash[e].renderable);this._tilingSpriteDataHash=null,this._renderer=null}_updateCanBatch(e){const r=this._getTilingSpriteData(e),n=e.texture;let i=!0;return this._renderer.type===Wr.WEBGL&&(i=this._renderer.context.supports.nonPowOf2wrapping),r.canBatch=n.textureMatrix.isSimple&&(i||n.source.isPowerOfTwo),r.canBatch}}_w.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"tilingSprite"};const Y5={name:"local-uniform-msdf-bit",vertex:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32,
                uRound:f32,
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
        `,main:`
            vColor *= localUniforms.uColor;
            modelMatrix *= localUniforms.uTransformMatrix;
        `,end:`
            if(localUniforms.uRound == 1)
            {
                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);
            }
        `},fragment:{header:`
            struct LocalUniforms {
                uColor:vec4<f32>,
                uTransformMatrix:mat3x3<f32>,
                uDistance: f32
            }

            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;
         `,main:` 
            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));
        `}},K5={name:"local-uniform-msdf-bit",vertex:{header:`
            uniform mat3 uTransformMatrix;
            uniform vec4 uColor;
            uniform float uRound;
        `,main:`
            vColor *= uColor;
            modelMatrix *= uTransformMatrix;
        `,end:`
            if(uRound == 1.)
            {
                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);
            }
        `},fragment:{header:`
            uniform float uDistance;
         `,main:` 
            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));
        `}},Z5={name:"msdf-bit",fragment:{header:`
            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {
                
                // MSDF
                var median = msdfColor.r + msdfColor.g + msdfColor.b -
                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));
            
                // SDF
                median = min(median, msdfColor.a);

                var screenPxDistance = distance * (median - 0.5);
                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));
                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);
                var coverage: f32 = pow(shapeColor.a * alpha, gamma);

                return coverage;
             
            }
        `}},Q5={name:"msdf-bit",fragment:{header:`
            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {
                
                // MSDF
                float median = msdfColor.r + msdfColor.g + msdfColor.b -
                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -
                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));
               
                // SDF
                median = min(median, msdfColor.a);
            
                float screenPxDistance = distance * (median - 0.5);
                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);
           
                if (median < 0.01) {
                    alpha = 0.0;
                } else if (median > 0.99) {
                    alpha = 1.0;
                }

                // Gamma correction for coverage-like alpha
                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));
                float gamma = mix(1.0, 1.0 / 2.2, luma);
                float coverage = pow(shapeColor.a * alpha, gamma);  
              
                return coverage;
            }
        `}};let U0,G0;class J5 extends bn{constructor(){const e=new Pt({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new ce,type:"mat3x3<f32>"},uDistance:{value:4,type:"f32"},uRound:{value:0,type:"f32"}}),r=oa();U0??(U0=ol({name:"sdf-shader",bits:[Gm,$m(r),Y5,Z5,ul]})),G0??(G0=al({name:"sdf-shader",bits:[zm,jm(r),K5,Q5,ll]})),super({glProgram:G0,gpuProgram:U0,resources:{localUniforms:e,batchSamplers:Hm(r)}})}}class bw{constructor(e){this._gpuBitmapText={},this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.renderableGC.addManagedHash(this,"_gpuBitmapText")}validateRenderable(e){const r=this._getGpuBitmapText(e);return e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,r)),this._renderer.renderPipes.graphics.validateRenderable(r)}addRenderable(e,r){const n=this._getGpuBitmapText(e);NA(e,n),e._didTextUpdate&&(e._didTextUpdate=!1,this._updateContext(e,n)),this._renderer.renderPipes.graphics.addRenderable(n,r),n.context.customShader&&this._updateDistanceField(e)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableByUid(e.uid)}_destroyRenderableByUid(e){const r=this._gpuBitmapText[e].context;r.customShader&&(Te.return(r.customShader),r.customShader=null),Te.return(this._gpuBitmapText[e]),this._gpuBitmapText[e]=null}updateRenderable(e){const r=this._getGpuBitmapText(e);NA(e,r),this._renderer.renderPipes.graphics.updateRenderable(r),r.context.customShader&&this._updateDistanceField(e)}_updateContext(e,r){const{context:n}=r,i=hf.getFont(e.text,e._style);n.clear(),i.distanceField.type!=="none"&&(n.customShader||(n.customShader=Te.get(J5)));const s=Array.from(e.text),o=e._style;let a=i.baseLineOffset;const u=P2(s,o,i,!0);let l=0;const c=o.padding,f=u.scale;let d=u.width,h=u.height+u.offsetY;o._stroke&&(d+=o._stroke.width/f,h+=o._stroke.width/f),n.translate(-e._anchor._x*d-c,-e._anchor._y*h-c).scale(f,f);const p=i.applyFillAsTint?o._fill.color:16777215;for(let m=0;m<u.lines.length;m++){const g=u.lines[m];for(let v=0;v<g.charPositions.length;v++){const y=s[l++],b=i.chars[y];b!=null&&b.texture&&n.texture(b.texture,p||"black",Math.round(g.charPositions[v]+b.xOffset),Math.round(a+b.yOffset))}a+=i.lineHeight}}_getGpuBitmapText(e){return this._gpuBitmapText[e.uid]||this.initGpuText(e)}initGpuText(e){const r=Te.get(Bu);return this._gpuBitmapText[e.uid]=r,this._updateContext(e,r),e.on("destroyed",this._destroyRenderableBound),this._gpuBitmapText[e.uid]}_updateDistanceField(e){const r=this._getGpuBitmapText(e).context,n=e._style.fontFamily,i=He.get(`${n}-bitmap`),{a:s,b:o,c:a,d:u}=e.groupTransform,l=Math.sqrt(s*s+o*o),c=Math.sqrt(a*a+u*u),f=(Math.abs(l)+Math.abs(c))/2,d=i.baseRenderedFontSize/e._style.fontSize,h=f*i.distanceField.range*(1/d);r.customShader.resources.localUniforms.uniforms.uDistance=h}destroy(){for(const e in this._gpuBitmapText)this._destroyRenderableByUid(e);this._gpuBitmapText=null,this._renderer=null}}bw.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"bitmapText"};function NA(t,e){e.groupTransform=t.groupTransform,e.groupColorAlpha=t.groupColorAlpha,e.groupColor=t.groupColor,e.groupBlendMode=t.groupBlendMode,e.globalDisplayStatus=t.globalDisplayStatus,e.groupTransform=t.groupTransform,e.localDisplayStatus=t.localDisplayStatus,e.groupAlpha=t.groupAlpha,e._roundPixels=t._roundPixels}function Dp(t,e){const{texture:r,bounds:n}=t;z1(n,e._anchor,r);const i=e._style.padding;n.minX-=i,n.minY-=i,n.maxX-=i,n.maxY-=i}class xw{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const e in this._gpuText){const r=this._gpuText[e];if(!r)continue;const n=r.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(e){const r=this._getGpuText(e),n=e._getKey();return r.textureNeedsUploading?(r.textureNeedsUploading=!1,!0):r.currentKey!==n}addRenderable(e,r){const i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const n=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),n._batcher.updateElement(n)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){const r=this._gpuText[e];this._renderer.htmlText.decreaseReferenceCount(r.currentKey),Te.return(r.batchableSprite),this._gpuText[e]=null}_updateText(e){const r=e._getKey(),n=this._getGpuText(e),i=n.batchableSprite;n.currentKey!==r&&this._updateGpuText(e).catch(s=>{console.error(s)}),e._didTextUpdate=!1,Dp(i,e)}async _updateGpuText(e){e._didTextUpdate=!1;const r=this._getGpuText(e);if(r.generatingTexture)return;const n=e._getKey();this._renderer.htmlText.decreaseReferenceCount(r.currentKey),r.generatingTexture=!0,r.currentKey=n;const i=e.resolution??this._renderer.resolution,s=await this._renderer.htmlText.getManagedTexture(e.text,i,e._style,e._getKey()),o=r.batchableSprite;o.texture=r.texture=s,r.generatingTexture=!1,r.textureNeedsUploading=!0,e.onViewUpdate(),Dp(o,e)}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){const r={texture:ne.EMPTY,currentKey:"--",batchableSprite:Te.get(Jf),textureNeedsUploading:!1,generatingTexture:!1},n=r.batchableSprite;return n.renderable=e,n.transform=e.groupTransform,n.texture=ne.EMPTY,n.bounds={minX:0,maxX:1,minY:0,maxY:0},n.roundPixels=this._renderer._roundPixels|e._roundPixels,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._gpuText[e.uid]=r,e.on("destroyed",this._destroyRenderableBound),r}destroy(){for(const e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}}xw.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"htmlText"};function e8(){const{userAgent:t}=Ae.get().getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}const zre=new Ut;function Sw(t,e,r,n){const i=zre;i.minX=0,i.minY=0,i.maxX=t.width/n|0,i.maxY=t.height/n|0;const s=Ct.getOptimalTexture(i.width,i.height,n,!1);return s.source.uploadMethodId="image",s.source.resource=t,s.source.alphaMode="premultiply-alpha-on-upload",s.frame.width=e/n,s.frame.height=r/n,s.source.emit("update",s.source),s.updateUvs(),s}function t8(t,e){const r=e.fontFamily,n=[],i={},s=/font-family:([^;"\s]+)/g,o=t.match(s);function a(u){i[u]||(n.push(u),i[u]=!0)}if(Array.isArray(r))for(let u=0;u<r.length;u++)a(r[u]);else a(r);o&&o.forEach(u=>{const l=u.split(":")[1].trim();a(l)});for(const u in e.tagStyles){const l=e.tagStyles[u].fontFamily;a(l)}return n}async function r8(t){const r=await(await Ae.get().fetch(t)).blob(),n=new FileReader;return await new Promise((s,o)=>{n.onloadend=()=>s(n.result),n.onerror=o,n.readAsDataURL(r)})}async function Bb(t,e){const r=await r8(e);return`@font-face {
        font-family: "${t.fontFamily}";
        src: url('${r}');
        font-weight: ${t.fontWeight};
        font-style: ${t.fontStyle};
    }`}const uc=new Map;async function n8(t,e,r){const n=t.filter(i=>He.has(`${i}-and-url`)).map((i,s)=>{if(!uc.has(i)){const{url:o}=He.get(`${i}-and-url`);s===0?uc.set(i,Bb({fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:i},o)):uc.set(i,Bb({fontWeight:r.fontWeight,fontStyle:r.fontStyle,fontFamily:i},o))}return uc.get(i)});return(await Promise.all(n)).join(`
`)}function i8(t,e,r,n,i){const{domElement:s,styleElement:o,svgRoot:a}=i;s.innerHTML=`<style>${e.cssStyle}</style><div style='padding:0;'>${t}</div>`,s.setAttribute("style",`transform: scale(${r});transform-origin: top left; display: inline-block`),o.textContent=n;const{width:u,height:l}=i.image;return a.setAttribute("width",u.toString()),a.setAttribute("height",l.toString()),new XMLSerializer().serializeToString(a)}function s8(t,e){const r=Ci.getOptimalCanvasAndContext(t.width,t.height,e),{context:n}=r;return n.clearRect(0,0,t.width,t.height),n.drawImage(t,0,0),r}function o8(t,e,r){return new Promise(async n=>{r&&await new Promise(i=>setTimeout(i,100)),t.onload=()=>{n()},t.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(e)}`,t.crossOrigin="anonymous"})}class cg{constructor(e){this._activeTextures={},this._renderer=e,this._createCanvas=e.type===Wr.WEBGPU}getTexture(e){return this._buildTexturePromise(e.text,e.resolution,e.style)}getManagedTexture(e,r,n,i){if(this._activeTextures[i])return this._increaseReferenceCount(i),this._activeTextures[i].promise;const s=this._buildTexturePromise(e,r,n).then(o=>(this._activeTextures[i].texture=o,o));return this._activeTextures[i]={texture:null,promise:s,usageCount:1},s}async _buildTexturePromise(e,r,n){const i=Te.get(eS),s=t8(e,n),o=await n8(s,n,Ko.defaultTextStyle),a=tS(e,n,o,i),u=Math.ceil(Math.ceil(Math.max(1,a.width)+n.padding*2)*r),l=Math.ceil(Math.ceil(Math.max(1,a.height)+n.padding*2)*r),c=i.image,f=2;c.width=(u|0)+f,c.height=(l|0)+f;const d=i8(e,n,r,o,i);await o8(c,d,e8()&&s.length>0);const h=c;let p;this._createCanvas&&(p=s8(c,r));const m=Sw(p?p.canvas:h,c.width-f,c.height-f,r);return this._createCanvas&&(this._renderer.texture.initSource(m.source),Ci.returnCanvasAndContext(p)),Te.return(i),m}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}decreaseReferenceCount(e){const r=this._activeTextures[e];r&&(r.usageCount--,r.usageCount===0&&(r.texture?this._cleanUp(r):r.promise.then(n=>{r.texture=n,this._cleanUp(r)}).catch(()=>{he("HTMLTextSystem: Failed to clean texture")}),this._activeTextures[e]=null))}_cleanUp(e){Ct.returnTexture(e.texture),e.texture.source.resource=null,e.texture.source.uploadMethodId="unknown"}getReferenceCount(e){return this._activeTextures[e].usageCount}destroy(){this._activeTextures=null}}cg.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"htmlText"};cg.defaultFontOptions={fontFamily:"Arial",fontStyle:"normal",fontWeight:"normal"};class ww{constructor(e){this._gpuText=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=e,this._renderer.runners.resolutionChange.add(this),this._renderer.renderableGC.addManagedHash(this,"_gpuText")}resolutionChange(){for(const e in this._gpuText){const r=this._gpuText[e];if(!r)continue;const n=r.batchableSprite.renderable;n._autoResolution&&(n._resolution=this._renderer.resolution,n.onViewUpdate())}}validateRenderable(e){const r=this._getGpuText(e),n=e._getKey();return r.currentKey!==n}addRenderable(e,r){const i=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),this._renderer.renderPipes.batch.addToBatch(i,r)}updateRenderable(e){const n=this._getGpuText(e).batchableSprite;e._didTextUpdate&&this._updateText(e),n._batcher.updateElement(n)}destroyRenderable(e){e.off("destroyed",this._destroyRenderableBound),this._destroyRenderableById(e.uid)}_destroyRenderableById(e){const r=this._gpuText[e];this._renderer.canvasText.decreaseReferenceCount(r.currentKey),Te.return(r.batchableSprite),this._gpuText[e]=null}_updateText(e){const r=e._getKey(),n=this._getGpuText(e),i=n.batchableSprite;n.currentKey!==r&&this._updateGpuText(e),e._didTextUpdate=!1,Dp(i,e)}_updateGpuText(e){const r=this._getGpuText(e),n=r.batchableSprite;r.texture&&this._renderer.canvasText.decreaseReferenceCount(r.currentKey),r.texture=n.texture=this._renderer.canvasText.getManagedTexture(e),r.currentKey=e._getKey(),n.texture=r.texture}_getGpuText(e){return this._gpuText[e.uid]||this.initGpuText(e)}initGpuText(e){const r={texture:null,currentKey:"--",batchableSprite:Te.get(Jf)};return r.batchableSprite.renderable=e,r.batchableSprite.transform=e.groupTransform,r.batchableSprite.bounds={minX:0,maxX:1,minY:0,maxY:0},r.batchableSprite.roundPixels=this._renderer._roundPixels|e._roundPixels,this._gpuText[e.uid]=r,e._resolution=e._autoResolution?this._renderer.resolution:e.resolution,this._updateText(e),e.on("destroyed",this._destroyRenderableBound),r}destroy(){for(const e in this._gpuText)this._destroyRenderableById(e);this._gpuText=null,this._renderer=null}}ww.extension={type:[O.WebGLPipes,O.WebGPUPipes,O.CanvasPipes],name:"text"};function UA(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function GA(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function a8(t,e=1){const{width:r,height:n}=t,i=t.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const o=i.getImageData(0,0,r,n).data;let a=0,u=0,l=r-1,c=n-1;for(;u<n&&UA(o,r,u);)++u;if(u===n)return Ie.EMPTY;for(;UA(o,r,c);)--c;for(;GA(o,r,a,u,c);)++a;for(;GA(o,r,l,u,c);)--l;return++l,++c,new Ie(a/e,u/e,(l-a)/e,(c-u)/e)}class Ew{constructor(e){this._activeTextures={},this._renderer=e}getTextureSize(e,r,n){const i=li.measureText(e||" ",n);let s=Math.ceil(Math.ceil(Math.max(1,i.width)+n.padding*2)*r),o=Math.ceil(Math.ceil(Math.max(1,i.height)+n.padding*2)*r);return s=Math.ceil(s-1e-6),o=Math.ceil(o-1e-6),s=Wo(s),o=Wo(o),{width:s,height:o}}getTexture(e,r,n,i){typeof e=="string"&&(oe("8.0.0","CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments"),e={text:e,style:n,resolution:r}),e.style instanceof hn||(e.style=new hn(e.style));const{texture:s,canvasAndContext:o}=this.createTextureAndCanvas(e);return this._renderer.texture.initSource(s._source),Ci.returnCanvasAndContext(o),s}createTextureAndCanvas(e){const{text:r,style:n}=e,i=e.resolution??this._renderer.resolution,s=li.measureText(r||" ",n),o=Math.ceil(Math.ceil(Math.max(1,s.width)+n.padding*2)*i),a=Math.ceil(Math.ceil(Math.max(1,s.height)+n.padding*2)*i),u=Ci.getOptimalCanvasAndContext(o,a),{canvas:l}=u;this.renderTextToCanvas(r,n,i,u);const c=Sw(l,o,a,i);if(n.trim){const f=a8(l,i);c.frame.copyFrom(f),c.updateUvs()}return{texture:c,canvasAndContext:u}}getManagedTexture(e){e._resolution=e._autoResolution?this._renderer.resolution:e.resolution;const r=e._getKey();if(this._activeTextures[r])return this._increaseReferenceCount(r),this._activeTextures[r].texture;const{texture:n,canvasAndContext:i}=this.createTextureAndCanvas(e);return this._activeTextures[r]={canvasAndContext:i,texture:n,usageCount:1},n}_increaseReferenceCount(e){this._activeTextures[e].usageCount++}returnTexture(e){const r=e.source;r.resource=null,r.uploadMethodId="unknown",r.alphaMode="no-premultiply-alpha",Ct.returnTexture(e)}decreaseReferenceCount(e){const r=this._activeTextures[e];r.usageCount--,r.usageCount===0&&(Ci.returnCanvasAndContext(r.canvasAndContext),this.returnTexture(r.texture),this._activeTextures[e]=null)}getReferenceCount(e){return this._activeTextures[e].usageCount}renderTextToCanvas(e,r,n,i){var y,b,_,x;const{canvas:s,context:o}=i,a=ff(r),u=li.measureText(e||" ",r),l=u.lines,c=u.lineHeight,f=u.lineWidths,d=u.maxLineWidth,h=u.fontProperties,p=s.height;if(o.resetTransform(),o.scale(n,n),o.textBaseline=r.textBaseline,(y=r._stroke)!=null&&y.width){const S=r._stroke;o.lineWidth=S.width,o.miterLimit=S.miterLimit,o.lineJoin=S.join,o.lineCap=S.cap}o.font=a;let m,g;const v=r.dropShadow?2:1;for(let S=0;S<v;++S){const w=r.dropShadow&&S===0,P=w?Math.ceil(Math.max(1,p)+r.padding*2):0,C=P*n;if(w){o.fillStyle="black",o.strokeStyle="black";const N=r.dropShadow,G=N.color,j=N.alpha;o.shadowColor=Re.shared.setValue(G).setAlpha(j).toRgbaString();const re=N.blur*n,U=N.distance*n;o.shadowBlur=re,o.shadowOffsetX=Math.cos(N.angle)*U,o.shadowOffsetY=Math.sin(N.angle)*U+C}else{if(o.fillStyle=r._fill?df(r._fill,o,u):null,(b=r._stroke)!=null&&b.width){const N=r._stroke.width*r._stroke.alignment;o.strokeStyle=df(r._stroke,o,u,N)}o.shadowColor="black"}let R=(c-h.fontSize)/2;c-h.fontSize<0&&(R=0);const F=((_=r._stroke)==null?void 0:_.width)??0;for(let N=0;N<l.length;N++)m=F/2,g=F/2+N*c+h.ascent+R,r.align==="right"?m+=d-f[N]:r.align==="center"&&(m+=(d-f[N])/2),(x=r._stroke)!=null&&x.width&&this._drawLetterSpacing(l[N],r,i,m+r.padding,g+r.padding-P,!0),r._fill!==void 0&&this._drawLetterSpacing(l[N],r,i,m+r.padding,g+r.padding-P)}}_drawLetterSpacing(e,r,n,i,s,o=!1){const{context:a}=n,u=r.letterSpacing;let l=!1;if(li.experimentalLetterSpacingSupported&&(li.experimentalLetterSpacing?(a.letterSpacing=`${u}px`,a.textLetterSpacing=`${u}px`,l=!0):(a.letterSpacing="0px",a.textLetterSpacing="0px")),u===0||l){o?a.strokeText(e,i,s):a.fillText(e,i,s);return}let c=i;const f=li.graphemeSegmenter(e);let d=a.measureText(e).width,h=0;for(let p=0;p<f.length;++p){const m=f[p];o?a.strokeText(m,c,s):a.fillText(m,c,s);let g="";for(let v=p+1;v<f.length;++v)g+=f[v];h=a.measureText(g).width,c+=d-h+u,d=h}}destroy(){this._activeTextures=null}}Ew.extension={type:[O.WebGLSystem,O.WebGPUSystem,O.CanvasSystem],name:"canvasText"};function $re(t,e){return e instanceof hn||e instanceof Ko?e:t==="html"?new Ko(e):new hn(e)}async function jre(t,e,r=200){const n=await e.extract.base64(t);await e.encoder.commandFinished;const i=r;console.log(`logging texture ${t.source.width}px ${t.source.height}px`);const s=["font-size: 1px;",`padding: ${i}px 300px;`,`background: url(${n}) no-repeat;`,"background-size: contain;"].join(" ");console.log("%c ",s)}const Hre=["#000080","#228B22","#8B0000","#4169E1","#008080","#800000","#9400D3","#FF8C00","#556B2F","#8B008B"];let Vre=0;function u8(t,e=0,r={color:"#000000"}){t.renderGroup&&(r.color=Hre[Vre++]);let n="";for(let o=0;o<e;o++)n+="    ";let i=t.label;!i&&t instanceof Zn&&(i=`sprite:${t.texture.label}`);let s=`%c ${n}|- ${i} (worldX:${t.worldTransform.tx}, relativeRenderX:${t.relativeGroupTransform.tx}, renderX:${t.groupTransform.tx}, localX:${t.x})`;t.renderGroup&&(s+=" (RenderGroup)"),t.filters&&(s+="(*filters)"),console.log(s,`color:${r.color}; font-weight:bold;`),e++;for(let o=0;o<t.children.length;o++){const a=t.children[o];u8(a,e,{...r})}}function l8(t,e=0,r={index:0,color:"#000000"}){let n="";for(let s=0;s<e;s++)n+="    ";const i=`%c ${n}- ${r.index}: ${t.root.label} worldX:${t.worldTransform.tx}`;console.log(i,`color:${r.color}; font-weight:bold;`),e++;for(let s=0;s<t.renderGroupChildren.length;s++){const o=t.renderGroupChildren[s];l8(o,e,{...r,index:s})}}me.add(iD,sD);const $0e=Object.freeze(Object.defineProperty({__proto__:null,AbstractBitmapFont:c2,AbstractRenderer:$f,AbstractText:tg,AccessibilitySystem:YD,AlphaFilter:ate,AlphaMask:q1,AlphaMaskPipe:oS,AnimatedSprite:yf,Application:W4,ApplicationInitHook:o2,Assets:ac,AssetsClass:fI,BLEND_TO_NPM:K4,BUFFER_TYPE:Rc,BackgroundLoader:jM,BackgroundSystem:ML,Batch:Q4,BatchGeometry:nM,BatchTextureArray:Z4,BatchableGraphics:Xm,BatchableMesh:lg,BatchableSprite:Jf,Batcher:tM,BatcherPipe:sS,BigPool:Te,BindGroup:Ei,BindGroupSystem:ZS,BitmapFont:R2,BitmapFontManager:hf,BitmapText:MF,BitmapTextPipe:bw,BlendModeFilter:_t,BlendModePipe:zS,BlurFilter:pF,BlurFilterPass:wh,Bounds:Ut,BrowserAdapter:FD,Buffer:Tr,BufferImageSource:Em,BufferResource:ig,BufferUsage:Ce,CLEAR:Nr,Cache:He,CanvasPool:Ci,CanvasPoolClass:NM,CanvasSource:wi,CanvasTextMetrics:li,CanvasTextPipe:ww,CanvasTextSystem:Ew,Circle:Fm,Color:Re,ColorBlend:v4,ColorBurnBlend:y4,ColorDodgeBlend:_4,ColorMask:Y1,ColorMaskPipe:aS,ColorMatrixFilter:cte,CompressedSource:Xf,Container:ar,Culler:CI,CullerPlugin:TI,CustomRenderPipe:MS,D3D10_RESOURCE_DIMENSION:I2,D3DFMT:Mr,DATA_URI:cQ,DDS:ve,DEG_TO_RAD:ef,DEPRECATED_SCALE_MODES:kp,DEPRECATED_WRAP_MODES:Bp,DOMAdapter:Ae,DOMContainer:Tee,DOMPipe:F2,DRAW_MODES:ure,DXGI_FORMAT:M2,DXGI_TO_TEXTURE_FORMAT:Ir,DarkenBlend:b4,DefaultBatcher:Vm,DefaultShader:gM,DifferenceBlend:x4,DisplacementFilter:fte,DivideBlend:S4,DynamicBitmapFont:tb,Ellipse:Lm,EventBoundary:rF,EventEmitter:Yr,EventSystem:q2,EventsTicker:Wi,ExclusionBlend:w4,ExtensionType:O,ExtractSystem:FL,FOURCC_TO_TEXTURE_FORMAT:ub,FederatedContainer:nF,FederatedEvent:sl,FederatedMouseEvent:vf,FederatedPointerEvent:wn,FederatedWheelEvent:Yo,FillGradient:Bi,FillPattern:Vf,Filter:Rt,FilterEffect:tf,FilterPipe:K2,FilterSystem:Z2,FontStylePromiseCache:uc,GAUSSIAN_VALUES:Y2,GL_FORMATS:Ap,GL_INTERNAL_FORMAT:yI,GL_TARGETS:dS,GL_TYPES:Be,GL_WRAP_MODES:qF,GenerateTextureSystem:jS,Geometry:aa,GlBackBufferSystem:ZF,GlBatchAdaptor:rS,GlBuffer:VF,GlBufferSystem:lS,GlColorMaskSystem:mS,GlContextSystem:XF,GlEncoderSystem:gS,GlGeometrySystem:hS,GlGraphicsAdaptor:kS,GlMeshAdaptor:DS,GlParticleContainerAdaptor:P5,GlParticleContainerPipe:gw,GlProgram:et,GlProgramData:lL,GlRenderTarget:QF,GlRenderTargetAdaptor:nL,GlRenderTargetSystem:CS,GlShaderSystem:PS,GlStateSystem:xL,GlStencilSystem:vS,GlTexture:SL,GlTextureSystem:BS,GlUboSystem:SS,GlUniformGroupSystem:RS,GlobalUniformSystem:HS,GpuBatchAdaptor:nS,GpuBlendModesToPixi:Ar,GpuBufferSystem:QS,GpuColorMaskSystem:JS,GpuDeviceSystem:ag,GpuEncoderSystem:ew,GpuGraphicsAdaptor:fw,GpuGraphicsContext:TM,GpuMeshAdapter:dw,GpuMipmapGenerator:s5,GpuParticleContainerAdaptor:R5,GpuParticleContainerPipe:vw,GpuProgram:qe,GpuReadBuffer:Jte,GpuRenderTarget:e5,GpuRenderTargetAdaptor:t5,GpuRenderTargetSystem:sw,GpuShaderSystem:ow,GpuStateSystem:aw,GpuStencilModesToPixi:hs,GpuStencilSystem:tw,GpuTextureSystem:cw,GpuUboSystem:rw,GpuUniformBatchPipe:nw,Graphics:Bu,GraphicsContext:wr,GraphicsContextRenderData:AM,GraphicsContextSystem:qm,GraphicsPath:to,GraphicsPipe:hw,HTMLText:NF,HTMLTextPipe:xw,HTMLTextRenderData:eS,HTMLTextStyle:Ko,HTMLTextSystem:cg,HardLightBlend:E4,HardMixBlend:C4,HelloSystem:og,IGLUniformData:Tte,ImageSource:ts,InstructionSet:W1,KTX:ht,LightenBlend:T4,LinearBurnBlend:A4,LinearDodgeBlend:P4,LinearLightBlend:R4,Loader:ZM,LoaderParserPriority:_n,LuminosityBlend:O4,MSAA_QUALITY:c5,MaskEffectManager:gp,MaskEffectManagerClass:wD,MaskFilter:EF,Matrix:ce,Mesh:cl,MeshGeometry:ho,MeshPipe:pw,MeshPlane:kre,MeshRope:Dre,MeshSimple:Mre,NOOP:N1,NegationBlend:B4,NineSliceGeometry:xs,NineSlicePlane:Gre,NineSliceSprite:z5,NineSliceSpritePipe:yw,NoiseFilter:dte,ObservablePoint:Et,OverlayBlend:k4,PI_2:aD,Particle:Lre,ParticleBuffer:B5,ParticleContainer:Ure,ParticleContainerPipe:mw,ParticleShader:M5,PerspectiveMesh:Bre,PerspectivePlaneGeometry:b5,PinLightBlend:D4,PipelineSystem:iw,PlaneGeometry:ug,Point:Le,Polygon:uu,Pool:Cm,PoolGroupClass:_D,PrepareBase:AF,PrepareQueue:DF,PrepareSystem:GF,PrepareUpload:UF,QuadGeometry:V5,RAD_TO_DEG:uD,Rectangle:Ie,RenderContainer:yre,RenderGroup:ID,RenderGroupPipe:IS,RenderGroupSystem:NS,RenderLayer:Cre,RenderLayerClass:h5,RenderTarget:Pp,RenderTargetSystem:ES,RenderTexture:sg,RenderableGCSystem:zL,RendererInitHook:a2,RendererType:Wr,ResizePlugin:u2,Resolver:lo,RopeGeometry:C5,RoundedRectangle:Nm,SCALE_MODES:dre,STENCIL_MODES:mt,SVGParser:IM,SaturationBlend:M4,SchedulerSystem:VS,ScissorMask:xte,SdfShader:J5,Shader:bn,ShaderStage:za,ShapePath:DM,SharedRenderPipes:KS,SharedSystems:YS,SoftLightBlend:I4,Sprite:Zn,SpritePipe:US,Spritesheet:D_,State:dn,StencilMask:K1,StencilMaskPipe:uS,SubtractBlend:F4,SystemRunner:s2,TEXTURE_FORMAT_BLOCK_SIZE:gI,Text:J2,TextStyle:hn,Texture:ne,TextureGCSystem:jL,TextureMatrix:G1,TexturePool:Ct,TexturePoolClass:MD,TextureSource:yt,TextureStyle:U1,TextureUvs:hre,Ticker:nr,TickerListener:_h,TickerPlugin:l2,TilingSprite:kF,TilingSpritePipe:_w,TilingSpriteShader:H5,Transform:OF,Triangle:Q2,UNIFORM_TO_ARRAY_SETTERS:vL,UNIFORM_TO_SINGLE_SETTERS:gL,UNIFORM_TYPES_MAP:u4,UNIFORM_TYPES_VALUES:t2,UPDATE_BLEND:Pm,UPDATE_COLOR:nf,UPDATE_PRIORITY:rs,UPDATE_TRANSFORM:TZ,UPDATE_VISIBLE:au,UboBatch:KL,UboSystem:yS,UniformGroup:Pt,VERSION:lf,VideoSource:Tc,ViewContainer:Ni,ViewSystem:VL,ViewableBuffer:Mo,VividLightBlend:L4,WGSL_ALIGN_SIZE_DATA:Bc,WGSL_TO_STD40_SIZE:_S,WRAP_MODES:fre,WebGLRenderer:YL,WebGPURenderer:l5,WebWorkerAdapter:tte,WorkerManager:sb,_getGlobalBounds:j1,accessibilityTarget:KD,addBits:H_,addMaskBounds:Rm,addMaskLocalBounds:Om,addProgramDefines:QD,alphaFrag:iF,alphaWgsl:pb,applyMatrix:X5,applyProjectiveTransformationToPlane:g5,applyStyleParams:Cb,assignWithIgnore:vp,autoDetectEnvironment:WZ,autoDetectRenderer:H4,autoDetectSource:RZ,basisTranscoderUrls:bp,bgr2rgb:ou,bitmapFontCachePlugin:zM,bitmapFontTextParser:Sh,bitmapFontXMLParser:rb,bitmapFontXMLStringParser:nb,blendTemplateFrag:p4,blendTemplateVert:m4,blendTemplateWgsl:g4,blockDataMap:uw,blurTemplateWgsl:cF,boundsPool:Si,browserExt:iD,buildAdaptiveBezier:x2,buildAdaptiveQuadratic:PM,buildArc:S2,buildArcTo:RM,buildArcToSvg:OM,buildCircle:Ki,buildContextBatches:CM,buildEllipse:_M,buildGeometryFromPath:Ere,buildLine:SM,buildPixelLine:wM,buildPolygon:v2,buildRectangle:y2,buildRoundedRectangle:bM,buildSimpleUvs:p2,buildTriangle:_2,buildUvs:h2,cacheAsTextureMixin:bD,cacheTextureArray:HM,calculateProjection:iL,checkChildrenDidChange:V1,checkDataUrl:ua,checkExtension:Ln,checkMaxIfStatementsInShader:q4,childrenHelperMixin:xD,cleanArray:UL,cleanHash:NL,clearList:Op,closePointEps:m2,collectAllRenderables:_re,collectRenderablesMixin:SD,color32BitToUniform:fl,colorBit:Gm,colorBitGl:zm,colorMatrixFilterFrag:mF,colorMatrixFilterWgsl:mb,colorToUniform:Wte,compareModeToGlCompare:AL,compileHighShader:oM,compileHighShaderGl:aM,compileHighShaderGlProgram:al,compileHighShaderGpuProgram:ol,compileHooks:V_,compileInputs:W_,compileOutputs:sM,compileShader:Sb,compute2DProjection:_5,convertFormatIfRequired:mee,convertToList:Rn,copySearchParams:yp,createIdFromString:Tu,createIndicesForQuads:Tb,createLevelBuffers:zJ,createLevelBuffersFromKTX:gee,createStringVariations:$D,createTexture:co,createUboElementsSTD40:JF,createUboElementsWGSL:ZL,createUboSyncFunction:bS,createUboSyncFunctionSTD40:rL,createUboSyncFunctionWGSL:JL,crossOrigin:oI,cullingMixin:yD,curveEps:q_,defaultFilterVert:eg,defaultValue:TS,definedProps:Kn,deprecation:oe,detectAvif:VM,detectBasis:FJ,detectCompressed:wee,detectDefaults:WM,detectMp4:XM,detectOgv:qM,detectVideoAlphaMode:Z1,detectWebm:YM,detectWebp:KM,determineCrossOrigin:uI,displacementFrag:gF,displacementVert:vF,displacementWgsl:gb,earcut:z4,effectsMixin:ED,ensureAttributes:fS,ensureIsBuffer:d2,ensurePrecision:JD,ensureTextOptions:rg,ensureTextStyle:$re,executeInstructions:Rp,extensions:me,extractAttributesFromGlProgram:fL,extractAttributesFromGpuProgram:i4,extractFontFamilies:t8,extractStructAndGroups:bh,extractSvgUrlId:Q_,fastCopy:_p,findHooksRx:iM,findMixin:CD,fontStringFromTextStyle:ff,formatShader:yte,fragmentGPUTemplate:fM,fragmentGlTemplate:hM,generateArraySyncSTD40:tL,generateArraySyncWGSL:QL,generateBlurFragSource:aF,generateBlurGlProgram:lF,generateBlurProgram:fF,generateBlurVertSource:uF,generateGPULayout:gte,generateGpuLayoutGroups:s4,generateLayout:vte,generateLayoutHash:o4,generateParticleUpdateFunction:O5,generateProgram:mL,generateShaderSyncCode:uL,generateTextStyleKey:C2,generateTextureBatchBit:$m,generateTextureBatchBitGl:jm,generateTextureMatrix:EM,generateUID:mre,generateUniformsSync:yL,getAdjustedBlendModeBlend:Au,getAttributeInfoFromFormat:ns,getBatchSamplersUniformGroup:Hm,getBitmapTextLayout:P2,getCanvasBoundingBox:a8,getCanvasFillStyle:df,getCanvasTexture:wS,getDefaultUniformValue:l4,getFastGlobalBounds:vre,getFastGlobalBoundsMixin:TD,getFontCss:n8,getFontFamilyName:eI,getGeometryBounds:rM,getGlTypeFromFormat:YF,getGlobalBounds:zf,getGlobalMixin:AD,getGlobalRenderableBounds:xF,getLocalBounds:Am,getMatrixRelativeToParent:X1,getMaxFragmentPrecision:ZD,getMaxTexturesPerBatch:oa,getOrientationOfPoints:xM,getParent:RD,getPo2TextureFromSource:Sw,getResolutionOfUrl:Km,getSVGUrl:i8,getSupportedCompressedTextureFormats:D2,getSupportedGPUCompressedTextureFormats:ab,getSupportedGlCompressedTextureFormats:ob,getSupportedTextureFormats:qf,getTemporaryCanvasFromImage:s8,getTestContext:e2,getTextureBatchBindGroup:Um,getTextureDefaultMatrix:Ire,getTextureFormatFromKTXTexture:_ee,getUboData:dL,getUniformData:hL,getUrlExtension:jD,glFormatToGPUFormat:wI,glUploadBufferImageResource:wL,glUploadCompressedTextureResource:EL,glUploadImageResource:OS,glUploadVideoResource:CL,globalUniformsBit:pM,globalUniformsBitGl:mM,globalUniformsUBOBitGl:OQ,gpuFormatToBasisTranscoderFormat:jJ,gpuFormatToKTXBasisTranscoderFormat:xee,gpuUploadBufferImageResource:r5,gpuUploadCompressedTextureResource:n5,gpuUploadImageResource:lw,gpuUploadVideoResource:i5,groupD8:Ee,hasCachedCanvasTexture:Cte,hslWgsl:pte,hslgl:km,hslgpu:Dm,injectBits:X_,insertVersion:e4,isMobile:XD,isPow2:R_,isRenderingToScreen:sL,isSafari:e8,isSingleItem:sf,isWebGLSupported:jf,isWebGPUSupported:Hf,ktxTranscoderUrls:xp,loadBasis:GJ,loadBasisOnWorker:mI,loadBitmapFont:$M,loadDDS:KJ,loadEnvironmentExtensions:r2,loadFontAsBase64:r8,loadFontCSS:Bb,loadImageBitmap:iI,loadJson:QM,loadKTX:cee,loadKTX2:pee,loadKTX2onWorker:SI,loadSVGImage:o8,loadSvg:rI,loadTextures:B2,loadTxt:JM,loadVideoTextures:lI,loadWebFont:tI,localUniformBit:hu,localUniformBitGl:ng,localUniformBitGroup2:$F,localUniformMSDFBit:Y5,localUniformMSDFBitGl:K5,log2:fZ,logDebugTexture:jre,logProgramError:pL,logRenderGroupScene:l8,logScene:u8,mSDFBit:Z5,mSDFBitGl:Q5,mapFormatToGlFormat:PL,mapFormatToGlInternalFormat:RL,mapFormatToGlType:OL,mapGlToVertexFormat:cL,mapSize:Ote,mapType:AS,mapWebGLBlendModesToPixi:_L,maskFrag:SF,maskVert:wF,maskWgsl:yb,matrixPool:pr,measureHtmlText:tS,measureMixin:OD,migrateFragmentFromV7toV8:Pte,mipmapScaleModeToGlFilter:TL,mixHexColors:bre,multiplyColors:rf,multiplyHexColors:H1,nextPow2:Wo,noiseFrag:yF,noiseWgsl:vb,nonCompressedFormats:dI,normalizeExtensionPriority:ic,nssvg:bb,nsxhtml:xb,onRenderMixin:BD,parseAttribute:eb,parseDDS:vI,parseFunctionBody:gre,parseKTX:_I,parseSVGDefinitions:MM,parseSVGFloatAttribute:at,parseSVGPath:X4,parseSVGStyle:w2,particleData:Rb,particlesFrag:k5,particlesVert:D5,particlesWgsl:Ab,path:zr,pointInTriangle:_b,preloadVideo:aI,removeItems:$1,removeStructAndGroupDuplicates:a4,resetUids:cZ,resolveCharacters:A2,resolveCompressedTextureUrl:See,resolveJsonUrl:cI,resolveTextureUrl:k2,resourceToTexture:UD,roundPixelsBit:ul,roundPixelsBitGl:ll,roundedShapeArc:BM,roundedShapeQuadraticCurve:kM,sayHello:LL,scaleModeToGlFilter:Eb,setBasisTranscoderPath:NJ,setKTXTranscoderPath:dee,setPositions:W5,setProgramName:t4,setUvs:q5,shapeBuilders:Wf,sortMixin:kD,spritesheetAsset:WD,squaredDistanceToLineSegment:Ac,stripVersion:r4,styleAttributes:J_,testImageFormat:O2,testVideoFormat:Ym,textStyleToCSS:IF,textureBit:jF,textureBitGl:HF,textureFrom:GD,tilingBit:$5,tilingBitGl:j5,toFillStyle:Os,toLocalGlobalMixin:DD,toStrokeStyle:cf,transformVertices:Wm,triangulateWithHoles:g2,uboSyncFunctionsSTD40:xS,uboSyncFunctionsWGSL:eL,uid:Je,uniformParsers:Bs,unpremultiplyAlpha:Nte,unsafeEvalSupported:n2,updateLocalTransform:xre,updateQuadBounds:z1,updateRenderGroupTransform:BL,updateRenderGroupTransforms:FS,updateTextBounds:Dp,updateTransformAndChildren:LS,updateTransformBackwards:Tm,updateWorldTransform:Sre,v8_0_0:_e,v8_3_4:cD,validFormats:Sp,validateRenderables:kL,vertexGPUTemplate:cM,vertexGlTemplate:dM,viewportFromFrame:cre,vkFormatToGPUFormat:EI,warn:he,webworkerExt:sD,wrapModeToGlAddress:Ch},Symbol.toStringTag,{value:"Module"}));var Cw={exports:{}},c8=function(e,r){return function(){return e.apply(r,arguments)}},Wre=c8,Tw=Object.prototype.toString,Aw=function(t){return function(e){var r=Tw.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function po(t){return t=t.toLowerCase(),function(r){return Aw(r)===t}}function fg(t){return Array.isArray(t)}function kb(t){return typeof t>"u"}function Xre(t){return t!==null&&!kb(t)&&t.constructor!==null&&!kb(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var f8=po("ArrayBuffer");function qre(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&f8(t.buffer),e}function Yre(t){return typeof t=="string"}function d8(t){return typeof t=="number"}function h8(t){return t!==null&&typeof t=="object"}function Th(t){if(Aw(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function Kre(t){return t&&Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}var Zre=po("Date"),Qre=po("File"),Jre=po("Blob"),ene=po("FileList");function Pw(t){return Tw.call(t)==="[object Function]"}function tne(t){return h8(t)&&Pw(t.pipe)}function rne(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Tw.call(t)===e||Pw(t.toString)&&t.toString()===e)}var nne=po("URLSearchParams");function ine(t){return t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function sne(){var t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Rw(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),fg(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Db(){var t={};function e(i,s){Th(t[s])&&Th(i)?t[s]=Db(t[s],i):Th(i)?t[s]=Db({},i):fg(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Rw(arguments[r],e);return t}function one(t,e,r){return Rw(e,function(i,s){r&&typeof i=="function"?t[s]=Wre(i,r):t[s]=i}),t}function ane(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function une(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function lne(t,e,r,n){var i,s,o,a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!n||n(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function cne(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function fne(t){if(!t)return null;if(fg(t))return t;var e=t.length;if(!d8(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var dne=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array));function hne(t,e){for(var r=t&&t[Symbol.iterator],n=r.call(t),i;(i=n.next())&&!i.done;){var s=i.value;e.call(t,s[0],s[1])}}function pne(t,e){for(var r,n=[];(r=t.exec(e))!==null;)n.push(r);return n}var mne=po("HTMLFormElement"),gne=function(e){return function(r,n){return e.call(r,n)}}(Object.prototype.hasOwnProperty),Gt={isArray:fg,isArrayBuffer:f8,isBuffer:Xre,isFormData:rne,isArrayBufferView:qre,isString:Yre,isNumber:d8,isObject:h8,isPlainObject:Th,isEmptyObject:Kre,isUndefined:kb,isDate:Zre,isFile:Qre,isBlob:Jre,isFunction:Pw,isStream:tne,isURLSearchParams:nne,isStandardBrowserEnv:sne,forEach:Rw,merge:Db,extend:one,trim:ine,stripBOM:ane,inherits:une,toFlatObject:lne,kindOf:Aw,kindOfTest:po,endsWith:cne,toArray:fne,isTypedArray:dne,isFileList:ene,forEachEntry:hne,matchAll:pne,isHTMLForm:mne,hasOwnProperty:gne},p8=Gt;function ku(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}p8.inherits(ku,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var m8=ku.prototype,g8={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(function(t){g8[t]={value:t}});Object.defineProperties(ku,g8);Object.defineProperty(m8,"isAxiosError",{value:!0});ku.from=function(t,e,r,n,i,s){var o=Object.create(m8);return p8.toFlatObject(t,o,function(u){return u!==Error.prototype}),ku.call(o,t.message,e,r,n,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};var la=ku,vne=typeof self=="object"?self.FormData:window.FormData,yne=vne,We=Gt,_ne=la,bne=yne;function Mb(t){return We.isPlainObject(t)||We.isArray(t)}function v8(t){return We.endsWith(t,"[]")?t.slice(0,-2):t}function zA(t,e,r){return t?t.concat(e).map(function(i,s){return i=v8(i),!r&&s?"["+i+"]":i}).join(r?".":""):e}function xne(t){return We.isArray(t)&&!t.some(Mb)}var Sne=We.toFlatObject(We,{},null,function(e){return/^is[A-Z]/.test(e)});function wne(t){return t&&We.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function Ene(t,e,r){if(!We.isObject(t))throw new TypeError("target must be an object");e=e||new(bne||FormData),r=We.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!We.isUndefined(g[m])});var n=r.metaTokens,i=r.visitor||c,s=r.dots,o=r.indexes,a=r.Blob||typeof Blob<"u"&&Blob,u=a&&wne(e);if(!We.isFunction(i))throw new TypeError("visitor must be a function");function l(p){if(p===null)return"";if(We.isDate(p))return p.toISOString();if(!u&&We.isBlob(p))throw new _ne("Blob is not supported. Use a Buffer instead.");return We.isArrayBuffer(p)||We.isTypedArray(p)?u&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function c(p,m,g){var v=p;if(p&&!g&&typeof p=="object"){if(We.endsWith(m,"{}"))m=n?m:m.slice(0,-2),p=JSON.stringify(p);else if(We.isArray(p)&&xne(p)||We.isFileList(p)||We.endsWith(m,"[]")&&(v=We.toArray(p)))return m=v8(m),v.forEach(function(b,_){!We.isUndefined(b)&&e.append(o===!0?zA([m],_,s):o===null?m:m+"[]",l(b))}),!1}return Mb(p)?!0:(e.append(zA(g,m,s),l(p)),!1)}var f=[],d=Object.assign(Sne,{defaultVisitor:c,convertValue:l,isVisitable:Mb});function h(p,m){if(!We.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));f.push(p),We.forEach(p,function(v,y){var b=!We.isUndefined(v)&&i.call(e,v,We.isString(y)?y.trim():y,m,d);b===!0&&h(v,m?m.concat(y):[y])}),f.pop()}}if(!We.isObject(t))throw new TypeError("data must be an object");return h(t),e}var dg=Ene,Cne=dg;function $A(t){var e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'\(\)~]|%20|%00/g,function(n){return e[n]})}function y8(t,e){this._pairs=[],t&&Cne(t,this,e)}var _8=y8.prototype;_8.append=function(e,r){this._pairs.push([e,r])};_8.toString=function(e){var r=e?function(n){return e.call(this,n,$A)}:$A;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};var b8=y8,Tne=Gt,Ane=b8;function Pne(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var x8=function(e,r,n){if(!r)return e;var i=e.indexOf("#");i!==-1&&(e=e.slice(0,i));var s=n&&n.encode||Pne,o=Tne.isURLSearchParams(r)?r.toString():new Ane(r,n).toString(s);return o&&(e+=(e.indexOf("?")===-1?"?":"&")+o),e},Rne=Gt;function ed(){this.handlers=[]}ed.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};ed.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};ed.prototype.clear=function(){this.handlers&&(this.handlers=[])};ed.prototype.forEach=function(e){Rne.forEach(this.handlers,function(n){n!==null&&e(n)})};var One=ed,Bne=Gt,S8=function(e,r){Bne.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},w8={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kne=b8,Dne=typeof URLSearchParams<"u"?URLSearchParams:kne,Mne=FormData,Ine={isBrowser:!0,classes:{URLSearchParams:Dne,FormData:Mne,Blob},protocols:["http","https","file","blob","url","data"]},Ow=Ine,Fne=Gt,Lne=dg,jA=Ow,Nne=function(e,r){return Lne(e,new jA.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,o){return jA.isNode&&Fne.isBuffer(n)?(this.append(i,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},r))},_s=Gt;function Une(t){return _s.matchAll(/\w+|\[(\w*)]/g,t).map(function(e){return e[0]==="[]"?"":e[1]||e[0]})}function Gne(t){var e={},r=Object.keys(t),n,i=r.length,s;for(n=0;n<i;n++)s=r[n],e[s]=t[s];return e}function zne(t){function e(n,i,s,o){var a=n[o++],u=Number.isFinite(+a),l=o>=n.length;if(a=!a&&_s.isArray(s)?s.length:a,l)return _s.hasOwnProperty(s,a)?s[a]=[s[a],i]:s[a]=i,!u;(!s[a]||!_s.isObject(s[a]))&&(s[a]=[]);var c=e(n,i,s[a],o);return c&&_s.isArray(s[a])&&(s[a]=Gne(s[a])),!u}if(_s.isFormData(t)&&_s.isFunction(t.entries)){var r={};return _s.forEachEntry(t,function(n,i){e(Une(n),i,r,0)}),r}return null}var E8=zne,z0,HA;function $ne(){if(HA)return z0;HA=1;var t=la;return z0=function(r,n,i){var s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new t("Request failed with status code "+i.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},z0}var $0,VA;function jne(){if(VA)return $0;VA=1;var t=Gt;return $0=t.isStandardBrowserEnv()?function(){return{write:function(n,i,s,o,a,u){var l=[];l.push(n+"="+encodeURIComponent(i)),t.isNumber(s)&&l.push("expires="+new Date(s).toGMTString()),t.isString(o)&&l.push("path="+o),t.isString(a)&&l.push("domain="+a),u===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),$0}var Hne=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Vne=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},Wne=Hne,Xne=Vne,C8=function(e,r){return e&&!Wne(r)?Xne(e,r):r},j0,WA;function qne(){if(WA)return j0;WA=1;var t=Gt,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return j0=function(n){var i={},s,o,a;return n&&t.forEach(n.split(`
`),function(l){if(a=l.indexOf(":"),s=t.trim(l.slice(0,a)).toLowerCase(),o=t.trim(l.slice(a+1)),s){if(i[s]&&e.indexOf(s)>=0)return;s==="set-cookie"?i[s]=(i[s]?i[s]:[]).concat([o]):i[s]=i[s]?i[s]+", "+o:o}}),i},j0}var H0,XA;function Yne(){if(XA)return H0;XA=1;var t=Gt;return H0=t.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function s(o){var a=o;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(a){var u=t.isString(a)?s(a):a;return u.protocol===i.protocol&&u.host===i.host}}():function(){return function(){return!0}}(),H0}var V0,qA;function hg(){if(qA)return V0;qA=1;var t=la,e=Gt;function r(n,i,s){t.call(this,n??"canceled",t.ERR_CANCELED,i,s),this.name="CanceledError"}return e.inherits(r,t,{__CANCEL__:!0}),V0=r,V0}var W0,YA;function Kne(){return YA||(YA=1,W0=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""}),W0}var X0,KA;function ZA(){if(KA)return X0;KA=1;var t=Gt,e=$ne(),r=jne(),n=x8,i=C8,s=qne(),o=Yne(),a=w8,u=la,l=hg(),c=Kne(),f=Ow;return X0=function(h){return new Promise(function(m,g){var v=h.data,y=h.headers,b=h.responseType,_=h.withXSRFToken,x;function S(){h.cancelToken&&h.cancelToken.unsubscribe(x),h.signal&&h.signal.removeEventListener("abort",x)}t.isFormData(v)&&t.isStandardBrowserEnv()&&delete y["Content-Type"];var w=new XMLHttpRequest;if(h.auth){var P=h.auth.username||"",C=h.auth.password?unescape(encodeURIComponent(h.auth.password)):"";y.Authorization="Basic "+btoa(P+":"+C)}var R=i(h.baseURL,h.url);w.open(h.method.toUpperCase(),n(R,h.params,h.paramsSerializer),!0),w.timeout=h.timeout;function F(){if(w){var j="getAllResponseHeaders"in w?s(w.getAllResponseHeaders()):null,re=!b||b==="text"||b==="json"?w.responseText:w.response,U={data:re,status:w.status,statusText:w.statusText,headers:j,config:h,request:w};e(function(pe){m(pe),S()},function(pe){g(pe),S()},U),w=null}}if("onloadend"in w?w.onloadend=F:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(F)},w.onabort=function(){w&&(g(new u("Request aborted",u.ECONNABORTED,h,w)),w=null)},w.onerror=function(){g(new u("Network Error",u.ERR_NETWORK,h,w)),w=null},w.ontimeout=function(){var re=h.timeout?"timeout of "+h.timeout+"ms exceeded":"timeout exceeded",U=h.transitional||a;h.timeoutErrorMessage&&(re=h.timeoutErrorMessage),g(new u(re,U.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,h,w)),w=null},t.isStandardBrowserEnv()&&(_&&t.isFunction(_)&&(_=_(h)),_||_!==!1&&o(R))){var N=h.xsrfHeaderName&&h.xsrfCookieName&&r.read(h.xsrfCookieName);N&&(y[h.xsrfHeaderName]=N)}"setRequestHeader"in w&&t.forEach(y,function(re,U){typeof v>"u"&&U.toLowerCase()==="content-type"?delete y[U]:w.setRequestHeader(U,re)}),t.isUndefined(h.withCredentials)||(w.withCredentials=!!h.withCredentials),b&&b!=="json"&&(w.responseType=h.responseType),typeof h.onDownloadProgress=="function"&&w.addEventListener("progress",h.onDownloadProgress),typeof h.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",h.onUploadProgress),(h.cancelToken||h.signal)&&(x=function(j){w&&(g(!j||j.type?new l(null,h,req):j),w.abort(),w=null)},h.cancelToken&&h.cancelToken.subscribe(x),h.signal&&(h.signal.aborted?x():h.signal.addEventListener("abort",x))),!v&&v!==!1&&v!==0&&v!==""&&(v=null);var G=c(R);if(G&&f.protocols.indexOf(G)===-1){g(new u("Unsupported protocol "+G+":",u.ERR_BAD_REQUEST,h));return}w.send(v)})},X0}var Ft=Gt,QA=S8,JA=la,Zne=w8,Qne=dg,Jne=Nne,eP=Ow,eie=E8,tie={"Content-Type":"application/x-www-form-urlencoded"};function tP(t,e){!Ft.isUndefined(t)&&Ft.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function rie(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=ZA()),t}function nie(t,e,r){if(Ft.isString(t))try{return(e||JSON.parse)(t),Ft.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var pg={transitional:Zne,adapter:rie(),transformRequest:[function(e,r){QA(r,"Accept"),QA(r,"Content-Type");var n=r&&r["Content-Type"]||"",i=n.indexOf("application/json")>-1,s=Ft.isObject(e);s&&Ft.isHTMLForm(e)&&(e=new FormData(e));var o=Ft.isFormData(e);if(o)return i?JSON.stringify(eie(e)):e;if(Ft.isArrayBuffer(e)||Ft.isBuffer(e)||Ft.isStream(e)||Ft.isFile(e)||Ft.isBlob(e))return e;if(Ft.isArrayBufferView(e))return e.buffer;if(Ft.isURLSearchParams(e))return tP(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var a;if(s){if(n.indexOf("application/x-www-form-urlencoded")!==-1)return Jne(e,this.formSerializer).toString();if((a=Ft.isFileList(e))||n.indexOf("multipart/form-data")>-1){var u=this.env&&this.env.FormData;return Qne(a?{"files[]":e}:e,u&&new u,this.formSerializer)}}return s||i?(tP(r,"application/json"),nie(e)):e}],transformResponse:[function(e){var r=this.transitional||pg.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(e&&Ft.isString(e)&&(n&&!this.responseType||i)){var s=r&&r.silentJSONParsing,o=!s&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?JA.from(a,JA.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:eP.classes.FormData,Blob:eP.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ft.forEach(["delete","get","head"],function(e){pg.headers[e]={}});Ft.forEach(["post","put","patch"],function(e){pg.headers[e]=Ft.merge(tie)});var Bw=pg,iie=Gt,sie=Bw,oie=function(e,r,n,i){var s=this||sie;return iie.forEach(i,function(a){e=a.call(s,e,r,n)}),e},q0,rP;function T8(){return rP||(rP=1,q0=function(e){return!!(e&&e.__CANCEL__)}),q0}var nP=Gt,Y0=oie,aie=T8(),uie=Bw,lie=hg(),iP=S8;function K0(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lie}var cie=function(e){K0(e),e.headers=e.headers||{},e.data=Y0.call(e,e.data,e.headers,null,e.transformRequest),iP(e.headers,"Accept"),iP(e.headers,"Content-Type"),e.headers=nP.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),nP.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||uie.adapter;return r(e).then(function(i){return K0(e),i.data=Y0.call(e,i.data,i.headers,i.status,e.transformResponse),i},function(i){return aie(i)||(K0(e),i&&i.response&&(i.response.data=Y0.call(e,i.response.data,i.response.headers,i.response.status,e.transformResponse))),Promise.reject(i)})},Sr=Gt,A8=function(e,r){r=r||{};var n={};function i(c,f){return Sr.isPlainObject(c)&&Sr.isPlainObject(f)?Sr.merge(c,f):Sr.isEmptyObject(f)?Sr.merge({},c):Sr.isPlainObject(f)?Sr.merge({},f):Sr.isArray(f)?f.slice():f}function s(c){if(Sr.isUndefined(r[c])){if(!Sr.isUndefined(e[c]))return i(void 0,e[c])}else return i(e[c],r[c])}function o(c){if(!Sr.isUndefined(r[c]))return i(void 0,r[c])}function a(c){if(Sr.isUndefined(r[c])){if(!Sr.isUndefined(e[c]))return i(void 0,e[c])}else return i(void 0,r[c])}function u(c){if(c in r)return i(e[c],r[c]);if(c in e)return i(void 0,e[c])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u};return Sr.forEach(Object.keys(e).concat(Object.keys(r)),function(f){var d=l[f]||s,h=d(f);Sr.isUndefined(h)&&d!==u||(n[f]=h)}),n},Z0,sP;function P8(){return sP||(sP=1,Z0={version:"0.28.0"}),Z0}var fie=P8().version,Ss=la,kw={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){kw[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var oP={};kw.transitional=function(e,r,n){function i(s,o){return"[Axios v"+fie+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Ss(i(o," has been removed"+(r?" in "+r:"")),Ss.ERR_DEPRECATED);return r&&!oP[o]&&(oP[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function die(t,e,r){if(typeof t!="object")throw new Ss("options must be an object",Ss.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],u=a===void 0||o(a,s,t);if(u!==!0)throw new Ss("option "+s+" must be "+u,Ss.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Ss("Unknown option "+s,Ss.ERR_BAD_OPTION)}}var hie={assertOptions:die,validators:kw},Dw=Gt,pie=x8,aP=One,uP=cie,mg=A8,mie=C8,R8=hie,Ca=R8.validators;function Du(t){this.defaults=t,this.interceptors={request:new aP,response:new aP}}Du.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=mg(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&R8.assertOptions(n,{silentJSONParsing:Ca.transitional(Ca.boolean),forcedJSONParsing:Ca.transitional(Ca.boolean),clarifyTimeoutError:Ca.transitional(Ca.boolean)},!1);var i=r.paramsSerializer;Dw.isFunction(i)&&(r.paramsSerializer={serialize:i});var s=[],o=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(r)===!1||(o=o&&p.synchronous,s.unshift(p.fulfilled,p.rejected))});var a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});var u;if(!o){var l=[uP,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(a),u=Promise.resolve(r);l.length;)u=u.then(l.shift(),l.shift());return u}for(var c=r;s.length;){var f=s.shift(),d=s.shift();try{c=f(c)}catch(h){d(h);break}}try{u=uP(c)}catch(h){return Promise.reject(h)}for(;a.length;)u=u.then(a.shift(),a.shift());return u};Du.prototype.getUri=function(e){e=mg(this.defaults,e);var r=mie(e.baseURL,e.url);return pie(r,e.params,e.paramsSerializer)};Dw.forEach(["delete","get","head","options"],function(e){Du.prototype[e]=function(r,n){return this.request(mg(n||{},{method:e,url:r,data:(n||{}).data}))}});Dw.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(mg(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Du.prototype[e]=r(),Du.prototype[e+"Form"]=r(!0)});var gie=Du,Q0,lP;function vie(){if(lP)return Q0;lP=1;var t=hg();function e(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(o){n=o});var i=this;this.promise.then(function(s){if(i._listeners){for(var o=i._listeners.length;o-- >0;)i._listeners[o](s);i._listeners=null}}),this.promise.then=function(s){var o,a=new Promise(function(u){i.subscribe(u),o=u}).then(s);return a.cancel=function(){i.unsubscribe(o)},a},r(function(o,a,u){i.reason||(i.reason=new t(o,a,u),n(i.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},e.prototype.unsubscribe=function(n){if(this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},e.source=function(){var n,i=new e(function(o){n=o});return{token:i,cancel:n}},Q0=e,Q0}var J0,cP;function yie(){return cP||(cP=1,J0=function(e){return function(n){return e.apply(null,n)}}),J0}var ey,fP;function _ie(){if(fP)return ey;fP=1;var t=Gt;return ey=function(r){return t.isObject(r)&&r.isAxiosError===!0},ey}var Ib=Gt,bie=c8,Ah=gie,xie=A8,Sie=Bw,wie=E8;function O8(t){var e=new Ah(t),r=bie(Ah.prototype.request,e);return Ib.extend(r,Ah.prototype,e),Ib.extend(r,e),r.create=function(i){return O8(xie(t,i))},r}var Pr=O8(Sie);Pr.Axios=Ah;Pr.CanceledError=hg();Pr.CancelToken=vie();Pr.isCancel=T8();Pr.VERSION=P8().version;Pr.toFormData=dg;Pr.AxiosError=la;Pr.Cancel=Pr.CanceledError;Pr.all=function(e){return Promise.all(e)};Pr.spread=yie();Pr.isAxiosError=_ie();Pr.formToJSON=function(t){return wie(Ib.isHTMLForm(t)?new FormData(t):t)};Cw.exports=Pr;Cw.exports.default=Pr;var Eie=Cw.exports,Cie=Eie;const j0e=Zt(Cie);var Tie="__lodash_hash_undefined__";function Aie(t){return this.__data__.set(t,Tie),this}var Pie=Aie;function Rie(t){return this.__data__.has(t)}var Oie=Rie,Bie=S1,kie=Pie,Die=Oie;function Mp(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Bie;++e<r;)this.add(t[e])}Mp.prototype.add=Mp.prototype.push=kie;Mp.prototype.has=Die;var B8=Mp;function Mie(t,e,r,n){for(var i=t.length,s=r+(n?1:-1);n?s--:++s<i;)if(e(t[s],s,t))return s;return-1}var Iie=Mie;function Fie(t){return t!==t}var Lie=Fie;function Nie(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}var Uie=Nie,Gie=Iie,zie=Lie,$ie=Uie;function jie(t,e,r){return e===e?$ie(t,e,r):Gie(t,zie,r)}var Hie=jie,Vie=Hie;function Wie(t,e){var r=t==null?0:t.length;return!!r&&Vie(t,e,0)>-1}var Xie=Wie;function qie(t,e,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}var Yie=qie;function Kie(t,e){return t.has(e)}var k8=Kie;function Zie(){}var Qie=Zie;function Jie(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var Mw=Jie,ty=Uk,ese=Qie,tse=Mw,rse=1/0,nse=ty&&1/tse(new ty([,-0]))[1]==rse?function(t){return new ty(t)}:ese,ise=nse,sse=B8,ose=Xie,ase=Yie,use=k8,lse=ise,cse=Mw,fse=200;function dse(t,e,r){var n=-1,i=ose,s=t.length,o=!0,a=[],u=a;if(r)o=!1,i=ase;else if(s>=fse){var l=e?null:lse(t);if(l)return cse(l);o=!1,i=use,u=new sse}else u=e?[]:a;e:for(;++n<s;){var c=t[n],f=e?e(c):c;if(c=r||c!==0?c:0,o&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue e;e&&u.push(f),a.push(c)}else i(u,f,r)||(u!==a&&u.push(f),a.push(c))}return a}var hse=dse,pse=hse;function mse(t,e){return e=typeof e=="function"?e:void 0,t&&t.length?pse(t,void 0,e):[]}var gse=mse;const H0e=Zt(gse);function vse(t){return t===null}var yse=vse;const V0e=Zt(yse);function $i(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}/*!
 * GSAP 3.12.7
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var un={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Mu={duration:.5,overwrite:!1,delay:0},Iw,ir,it,Bn=1e8,je=1/Bn,Fb=Math.PI*2,_se=Fb/4,bse=0,M8=Math.sqrt,xse=Math.cos,Sse=Math.sin,Kt=function(e){return typeof e=="string"},vt=function(e){return typeof e=="function"},os=function(e){return typeof e=="number"},Fw=function(e){return typeof e>"u"},ki=function(e){return typeof e=="object"},$r=function(e){return e!==!1},Lw=function(){return typeof window<"u"},Zd=function(e){return vt(e)||Kt(e)},I8=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},gr=Array.isArray,Lb=/(?:-?\.?\d|\.)+/gi,F8=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ha=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ry=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,L8=/[+-]=-?[.\d]+/,N8=/[^,'"\[\]\s]+/gi,wse=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,lt,ui,Nb,Nw,pn={},Ip={},U8,G8=function(e){return(Ip=Iu(e,pn))&&Xr},Uw=function(e,r){return console.warn("Invalid property",e,"set to",r,"Missing plugin? gsap.registerPlugin()")},_f=function(e,r){return!r&&console.warn(e)},z8=function(e,r){return e&&(pn[e]=r)&&Ip&&(Ip[e]=r)||pn},bf=function(){return 0},Ese={suppressEvents:!0,isStart:!0,kill:!1},Ph={suppressEvents:!0,kill:!1},Cse={suppressEvents:!0},Gw={},Vs=[],Ub={},$8,rn={},ny={},dP=30,Rh=[],zw="",$w=function(e){var r=e[0],n,i;if(ki(r)||vt(r)||(e=[e]),!(n=(r._gsap||{}).harness)){for(i=Rh.length;i--&&!Rh[i].targetTest(r););n=Rh[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new dN(e[i],n)))||e.splice(i,1);return e},Lo=function(e){return e._gsap||$w(kn(e))[0]._gsap},j8=function(e,r,n){return(n=e[r])&&vt(n)?e[r]():Fw(n)&&e.getAttribute&&e.getAttribute(r)||n},jr=function(e,r){return(e=e.split(",")).forEach(r)||e},wt=function(e){return Math.round(e*1e5)/1e5||0},kt=function(e){return Math.round(e*1e7)/1e7||0},pu=function(e,r){var n=r.charAt(0),i=parseFloat(r.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},Tse=function(e,r){for(var n=r.length,i=0;e.indexOf(r[i])<0&&++i<n;);return i<n},Fp=function(){var e=Vs.length,r=Vs.slice(0),n,i;for(Ub={},Vs.length=0,n=0;n<e;n++)i=r[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},H8=function(e,r,n,i){Vs.length&&!ir&&Fp(),e.render(r,n,i||ir&&r<0&&(e._initted||e._startAt)),Vs.length&&!ir&&Fp()},V8=function(e){var r=parseFloat(e);return(r||r===0)&&(e+"").match(N8).length<2?r:Kt(e)?e.trim():e},W8=function(e){return e},mn=function(e,r){for(var n in r)n in e||(e[n]=r[n]);return e},Ase=function(e){return function(r,n){for(var i in n)i in r||i==="duration"&&e||i==="ease"||(r[i]=n[i])}},Iu=function(e,r){for(var n in r)e[n]=r[n];return e},hP=function t(e,r){for(var n in r)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=ki(r[n])?t(e[n]||(e[n]={}),r[n]):r[n]);return e},Lp=function(e,r){var n={},i;for(i in e)i in r||(n[i]=e[i]);return n},kc=function(e){var r=e.parent||lt,n=e.keyframes?Ase(gr(e.keyframes)):mn;if($r(e.inherit))for(;r;)n(e,r.vars.defaults),r=r.parent||r._dp;return e},Pse=function(e,r){for(var n=e.length,i=n===r.length;i&&n--&&e[n]===r[n];);return n<0},X8=function(e,r,n,i,s){n===void 0&&(n="_first"),i===void 0&&(i="_last");var o=e[i],a;if(s)for(a=r[s];o&&o[s]>a;)o=o._prev;return o?(r._next=o._next,o._next=r):(r._next=e[n],e[n]=r),r._next?r._next._prev=r:e[i]=r,r._prev=o,r.parent=r._dp=e,r},gg=function(e,r,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var s=r._prev,o=r._next;s?s._next=o:e[n]===r&&(e[n]=o),o?o._prev=s:e[i]===r&&(e[i]=s),r._next=r._prev=r.parent=null},ro=function(e,r){e.parent&&(!r||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},No=function(e,r){if(e&&(!r||r._end>e._dur||r._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},Rse=function(e){for(var r=e.parent;r&&r.parent;)r._dirty=1,r.totalDuration(),r=r.parent;return e},Gb=function(e,r,n,i){return e._startAt&&(ir?e._startAt.revert(Ph):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(r,!0,i))},Ose=function t(e){return!e||e._ts&&t(e.parent)},pP=function(e){return e._repeat?Fu(e._tTime,e=e.duration()+e._rDelay)*e:0},Fu=function(e,r){var n=Math.floor(e=kt(e/r));return e&&n===e?n-1:n},Np=function(e,r){return(e-r._start)*r._ts+(r._ts>=0?0:r._dirty?r.totalDuration():r._tDur)},vg=function(e){return e._end=kt(e._start+(e._tDur/Math.abs(e._ts||e._rts||je)||0))},yg=function(e,r){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=kt(n._time-(e._ts>0?r/e._ts:((e._dirty?e.totalDuration():e._tDur)-r)/-e._ts)),vg(e),n._dirty||No(n,e)),e},q8=function(e,r){var n;if((r._time||!r._dur&&r._initted||r._start<e._time&&(r._dur||!r.add))&&(n=Np(e.rawTime(),r),(!r._dur||td(0,r.totalDuration(),n)-r._tTime>je)&&r.render(n,!0)),No(e,r)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-je}},di=function(e,r,n,i){return r.parent&&ro(r),r._start=kt((os(n)?n:n||e!==lt?En(e,n,r):e._time)+r._delay),r._end=kt(r._start+(r.totalDuration()/Math.abs(r.timeScale())||0)),X8(e,r,"_first","_last",e._sort?"_start":0),zb(r)||(e._recent=r),i||q8(e,r),e._ts<0&&yg(e,e._tTime),e},Y8=function(e,r){return(pn.ScrollTrigger||Uw("scrollTrigger",r))&&pn.ScrollTrigger.create(r,e)},K8=function(e,r,n,i,s){if(Hw(e,r,s),!e._initted)return 1;if(!n&&e._pt&&!ir&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&$8!==nn.frame)return Vs.push(e),e._lazy=[s,i],1},Bse=function t(e){var r=e.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||t(r))},zb=function(e){var r=e.data;return r==="isFromStart"||r==="isStart"},kse=function(e,r,n,i){var s=e.ratio,o=r<0||!r&&(!e._start&&Bse(e)&&!(!e._initted&&zb(e))||(e._ts<0||e._dp._ts<0)&&!zb(e))?0:1,a=e._rDelay,u=0,l,c,f;if(a&&e._repeat&&(u=td(0,e._tDur,r),c=Fu(u,a),e._yoyo&&c&1&&(o=1-o),c!==Fu(e._tTime,a)&&(s=1-o,e.vars.repeatRefresh&&e._initted&&e.invalidate())),o!==s||ir||i||e._zTime===je||!r&&e._zTime){if(!e._initted&&K8(e,r,i,n,u))return;for(f=e._zTime,e._zTime=r||(n?je:0),n||(n=r&&!f),e.ratio=o,e._from&&(o=1-o),e._time=0,e._tTime=u,l=e._pt;l;)l.r(o,l.d),l=l._next;r<0&&Gb(e,r,n,!0),e._onUpdate&&!n&&on(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&on(e,"onRepeat"),(r>=e._tDur||r<0)&&e.ratio===o&&(o&&ro(e,1),!n&&!ir&&(on(e,o?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=r)},Dse=function(e,r,n){var i;if(n>r)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>r)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<r)return i;i=i._prev}},Lu=function(e,r,n,i){var s=e._repeat,o=kt(r)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=o/e._dur),e._dur=o,e._tDur=s?s<0?1e10:kt(o*(s+1)+e._rDelay*s):o,a>0&&!i&&yg(e,e._tTime=e._tDur*a),e.parent&&vg(e),n||No(e.parent,e),e},mP=function(e){return e instanceof Er?No(e):Lu(e,e._dur)},Mse={_start:0,endTime:bf,totalDuration:bf},En=function t(e,r,n){var i=e.labels,s=e._recent||Mse,o=e.duration()>=Bn?s.endTime(!1):e._dur,a,u,l;return Kt(r)&&(isNaN(r)||r in i)?(u=r.charAt(0),l=r.substr(-1)==="%",a=r.indexOf("="),u==="<"||u===">"?(a>=0&&(r=r.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(r.substr(1))||0)*(l?(a<0?s:n).totalDuration()/100:1)):a<0?(r in i||(i[r]=o),i[r]):(u=parseFloat(r.charAt(a-1)+r.substr(a+1)),l&&n&&(u=u/100*(gr(n)?n[0]:n).totalDuration()),a>1?t(e,r.substr(0,a-1),n)+u:o+u)):r==null?o:+r},Dc=function(e,r,n){var i=os(r[1]),s=(i?2:1)+(e<2?0:1),o=r[s],a,u;if(i&&(o.duration=r[1]),o.parent=n,e){for(a=o,u=n;u&&!("immediateRender"in a);)a=u.vars.defaults||{},u=$r(u.vars.inherit)&&u.parent;o.immediateRender=$r(a.immediateRender),e<2?o.runBackwards=1:o.startAt=r[s-1]}return new Bt(r[0],o,r[s+1])},mo=function(e,r){return e||e===0?r(e):r},td=function(e,r,n){return n<e?e:n>r?r:n},dr=function(e,r){return!Kt(e)||!(r=wse.exec(e))?"":r[1]},Ise=function(e,r,n){return mo(n,function(i){return td(e,r,i)})},$b=[].slice,Z8=function(e,r){return e&&ki(e)&&"length"in e&&(!r&&!e.length||e.length-1 in e&&ki(e[0]))&&!e.nodeType&&e!==ui},Fse=function(e,r,n){return n===void 0&&(n=[]),e.forEach(function(i){var s;return Kt(i)&&!r||Z8(i,1)?(s=n).push.apply(s,kn(i)):n.push(i)})||n},kn=function(e,r,n){return it&&!r&&it.selector?it.selector(e):Kt(e)&&!n&&(Nb||!Nu())?$b.call((r||Nw).querySelectorAll(e),0):gr(e)?Fse(e,n):Z8(e)?$b.call(e,0):e?[e]:[]},jb=function(e){return e=kn(e)[0]||_f("Invalid scope")||{},function(r){var n=e.current||e.nativeElement||e;return kn(r,n.querySelectorAll?n:n===e?_f("Invalid scope")||Nw.createElement("div"):e)}},Q8=function(e){return e.sort(function(){return .5-Math.random()})},J8=function(e){if(vt(e))return e;var r=ki(e)?e:{each:e},n=Uo(r.ease),i=r.from||0,s=parseFloat(r.base)||0,o={},a=i>0&&i<1,u=isNaN(i)||a,l=r.axis,c=i,f=i;return Kt(i)?c=f={center:.5,edges:.5,end:1}[i]||0:!a&&u&&(c=i[0],f=i[1]),function(d,h,p){var m=(p||r).length,g=o[m],v,y,b,_,x,S,w,P,C;if(!g){if(C=r.grid==="auto"?0:(r.grid||[1,Bn])[1],!C){for(w=-Bn;w<(w=p[C++].getBoundingClientRect().left)&&C<m;);C<m&&C--}for(g=o[m]=[],v=u?Math.min(C,m)*c-.5:i%C,y=C===Bn?0:u?m*f/C-.5:i/C|0,w=0,P=Bn,S=0;S<m;S++)b=S%C-v,_=y-(S/C|0),g[S]=x=l?Math.abs(l==="y"?_:b):M8(b*b+_*_),x>w&&(w=x),x<P&&(P=x);i==="random"&&Q8(g),g.max=w-P,g.min=P,g.v=m=(parseFloat(r.amount)||parseFloat(r.each)*(C>m?m-1:l?l==="y"?m/C:C:Math.max(C,m/C))||0)*(i==="edges"?-1:1),g.b=m<0?s-m:s,g.u=dr(r.amount||r.each)||0,n=n&&m<0?lN(n):n}return m=(g[d]-g.min)/g.max||0,kt(g.b+(n?n(m):m)*g.v)+g.u}},Hb=function(e){var r=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=kt(Math.round(parseFloat(n)/e)*e*r);return(i-i%1)/r+(os(n)?0:dr(n))}},eN=function(e,r){var n=gr(e),i,s;return!n&&ki(e)&&(i=n=e.radius||Bn,e.values?(e=kn(e.values),(s=!os(e[0]))&&(i*=i)):e=Hb(e.increment)),mo(r,n?vt(e)?function(o){return s=e(o),Math.abs(s-o)<=i?s:o}:function(o){for(var a=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),l=Bn,c=0,f=e.length,d,h;f--;)s?(d=e[f].x-a,h=e[f].y-u,d=d*d+h*h):d=Math.abs(e[f]-a),d<l&&(l=d,c=f);return c=!i||l<=i?e[c]:o,s||c===o||os(o)?c:c+dr(o)}:Hb(e))},tN=function(e,r,n,i){return mo(gr(e)?!r:n===!0?!!(n=0):!i,function(){return gr(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(r-e+n*.99))/n)*n*i)/i})},Lse=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(i){return r.reduce(function(s,o){return o(s)},i)}},Nse=function(e,r){return function(n){return e(parseFloat(n))+(r||dr(n))}},Use=function(e,r,n){return nN(e,r,0,1,n)},rN=function(e,r,n){return mo(n,function(i){return e[~~r(i)]})},Gse=function t(e,r,n){var i=r-e;return gr(e)?rN(e,t(0,e.length),r):mo(n,function(s){return(i+(s-e)%i)%i+e})},zse=function t(e,r,n){var i=r-e,s=i*2;return gr(e)?rN(e,t(0,e.length-1),r):mo(n,function(o){return o=(s+(o-e)%s)%s||0,e+(o>i?s-o:o)})},xf=function(e){for(var r=0,n="",i,s,o,a;~(i=e.indexOf("random(",r));)o=e.indexOf(")",i),a=e.charAt(i+7)==="[",s=e.substr(i+7,o-i-7).match(a?N8:Lb),n+=e.substr(r,i-r)+tN(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),r=o+1;return n+e.substr(r,e.length-r)},nN=function(e,r,n,i,s){var o=r-e,a=i-n;return mo(s,function(u){return n+((u-e)/o*a||0)})},$se=function t(e,r,n,i){var s=isNaN(e+r)?0:function(h){return(1-h)*e+h*r};if(!s){var o=Kt(e),a={},u,l,c,f,d;if(n===!0&&(i=1)&&(n=null),o)e={p:e},r={p:r};else if(gr(e)&&!gr(r)){for(c=[],f=e.length,d=f-2,l=1;l<f;l++)c.push(t(e[l-1],e[l]));f--,s=function(p){p*=f;var m=Math.min(d,~~p);return c[m](p-m)},n=r}else i||(e=Iu(gr(e)?[]:{},e));if(!c){for(u in r)jw.call(a,e,u,"get",r[u]);s=function(p){return Xw(p,a)||(o?e.p:e)}}}return mo(n,s)},gP=function(e,r,n){var i=e.labels,s=Bn,o,a,u;for(o in i)a=i[o]-r,a<0==!!n&&a&&s>(a=Math.abs(a))&&(u=o,s=a);return u},on=function(e,r,n){var i=e.vars,s=i[r],o=it,a=e._ctx,u,l,c;if(s)return u=i[r+"Params"],l=i.callbackScope||e,n&&Vs.length&&Fp(),a&&(it=a),c=u?s.apply(l,u):s.call(l),it=o,c},lc=function(e){return ro(e),e.scrollTrigger&&e.scrollTrigger.kill(!!ir),e.progress()<1&&on(e,"onInterrupt"),e},Va,iN=[],sN=function(e){if(e)if(e=!e.name&&e.default||e,Lw()||e.headless){var r=e.name,n=vt(e),i=r&&!n&&e.init?function(){this._props=[]}:e,s={init:bf,render:Xw,add:jw,kill:ioe,modifier:noe,rawVars:0},o={targetTest:0,get:0,getSetter:Ww,aliases:{},register:0};if(Nu(),e!==i){if(rn[r])return;mn(i,mn(Lp(e,s),o)),Iu(i.prototype,Iu(s,Lp(e,o))),rn[i.prop=r]=i,e.targetTest&&(Rh.push(i),Gw[r]=1),r=(r==="css"?"CSS":r.charAt(0).toUpperCase()+r.substr(1))+"Plugin"}z8(r,i),e.register&&e.register(Xr,i,Hr)}else iN.push(e)},$e=255,cc={aqua:[0,$e,$e],lime:[0,$e,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,$e],navy:[0,0,128],white:[$e,$e,$e],olive:[128,128,0],yellow:[$e,$e,0],orange:[$e,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[$e,0,0],pink:[$e,192,203],cyan:[0,$e,$e],transparent:[$e,$e,$e,0]},iy=function(e,r,n){return e+=e<0?1:e>1?-1:0,(e*6<1?r+(n-r)*e*6:e<.5?n:e*3<2?r+(n-r)*(2/3-e)*6:r)*$e+.5|0},oN=function(e,r,n){var i=e?os(e)?[e>>16,e>>8&$e,e&$e]:0:cc.black,s,o,a,u,l,c,f,d,h,p;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),cc[e])i=cc[e];else if(e.charAt(0)==="#"){if(e.length<6&&(s=e.charAt(1),o=e.charAt(2),a=e.charAt(3),e="#"+s+s+o+o+a+a+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&$e,i&$e,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&$e,e&$e]}else if(e.substr(0,3)==="hsl"){if(i=p=e.match(Lb),!r)u=+i[0]%360/360,l=+i[1]/100,c=+i[2]/100,o=c<=.5?c*(l+1):c+l-c*l,s=c*2-o,i.length>3&&(i[3]*=1),i[0]=iy(u+1/3,s,o),i[1]=iy(u,s,o),i[2]=iy(u-1/3,s,o);else if(~e.indexOf("="))return i=e.match(F8),n&&i.length<4&&(i[3]=1),i}else i=e.match(Lb)||cc.transparent;i=i.map(Number)}return r&&!p&&(s=i[0]/$e,o=i[1]/$e,a=i[2]/$e,f=Math.max(s,o,a),d=Math.min(s,o,a),c=(f+d)/2,f===d?u=l=0:(h=f-d,l=c>.5?h/(2-f-d):h/(f+d),u=f===s?(o-a)/h+(o<a?6:0):f===o?(a-s)/h+2:(s-o)/h+4,u*=60),i[0]=~~(u+.5),i[1]=~~(l*100+.5),i[2]=~~(c*100+.5)),n&&i.length<4&&(i[3]=1),i},aN=function(e){var r=[],n=[],i=-1;return e.split(Ws).forEach(function(s){var o=s.match(Ha)||[];r.push.apply(r,o),n.push(i+=o.length+1)}),r.c=n,r},vP=function(e,r,n){var i="",s=(e+i).match(Ws),o=r?"hsla(":"rgba(",a=0,u,l,c,f;if(!s)return e;if(s=s.map(function(d){return(d=oN(d,r,1))&&o+(r?d[0]+","+d[1]+"%,"+d[2]+"%,"+d[3]:d.join(","))+")"}),n&&(c=aN(e),u=n.c,u.join(i)!==c.c.join(i)))for(l=e.replace(Ws,"1").split(Ha),f=l.length-1;a<f;a++)i+=l[a]+(~u.indexOf(a)?s.shift()||o+"0,0,0,0)":(c.length?c:s.length?s:n).shift());if(!l)for(l=e.split(Ws),f=l.length-1;a<f;a++)i+=l[a]+s[a];return i+l[f]},Ws=function(){var t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in cc)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),jse=/hsl[a]?\(/,uN=function(e){var r=e.join(" "),n;if(Ws.lastIndex=0,Ws.test(r))return n=jse.test(r),e[1]=vP(e[1],n),e[0]=vP(e[0],n,aN(e[1])),!0},Sf,nn=function(){var t=Date.now,e=500,r=33,n=t(),i=n,s=1e3/240,o=s,a=[],u,l,c,f,d,h,p=function m(g){var v=t()-i,y=g===!0,b,_,x,S;if((v>e||v<0)&&(n+=v-r),i+=v,x=i-n,b=x-o,(b>0||y)&&(S=++f.frame,d=x-f.time*1e3,f.time=x=x/1e3,o+=b+(b>=s?4:s-b),_=1),y||(u=l(m)),_)for(h=0;h<a.length;h++)a[h](x,d,S,g)};return f={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(g){return d/(1e3/(g||60))},wake:function(){U8&&(!Nb&&Lw()&&(ui=Nb=window,Nw=ui.document||{},pn.gsap=Xr,(ui.gsapVersions||(ui.gsapVersions=[])).push(Xr.version),G8(Ip||ui.GreenSockGlobals||!ui.gsap&&ui||{}),iN.forEach(sN)),c=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&f.sleep(),l=c||function(g){return setTimeout(g,o-f.time*1e3+1|0)},Sf=1,p(2))},sleep:function(){(c?cancelAnimationFrame:clearTimeout)(u),Sf=0,l=bf},lagSmoothing:function(g,v){e=g||1/0,r=Math.min(v||33,e)},fps:function(g){s=1e3/(g||240),o=f.time*1e3+s},add:function(g,v,y){var b=v?function(_,x,S,w){g(_,x,S,w),f.remove(b)}:g;return f.remove(g),a[y?"unshift":"push"](b),Nu(),b},remove:function(g,v){~(v=a.indexOf(g))&&a.splice(v,1)&&h>=v&&h--},_listeners:a},f}(),Nu=function(){return!Sf&&nn.wake()},Pe={},Hse=/^[\d.\-M][\d.\-,\s]/,Vse=/["']/g,Wse=function(e){for(var r={},n=e.substr(1,e.length-3).split(":"),i=n[0],s=1,o=n.length,a,u,l;s<o;s++)u=n[s],a=s!==o-1?u.lastIndexOf(","):u.length,l=u.substr(0,a),r[i]=isNaN(l)?l.replace(Vse,"").trim():+l,i=u.substr(a+1).trim();return r},Xse=function(e){var r=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",r);return e.substring(r,~i&&i<n?e.indexOf(")",n+1):n)},qse=function(e){var r=(e+"").split("("),n=Pe[r[0]];return n&&r.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Wse(r[1])]:Xse(e).split(",").map(V8)):Pe._CE&&Hse.test(e)?Pe._CE("",e):n},lN=function(e){return function(r){return 1-e(1-r)}},cN=function t(e,r){for(var n=e._first,i;n;)n instanceof Er?t(n,r):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==r&&(n.timeline?t(n.timeline,r):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=r)),n=n._next},Uo=function(e,r){return e&&(vt(e)?e:Pe[e]||qse(e))||r},ca=function(e,r,n,i){n===void 0&&(n=function(u){return 1-r(1-u)}),i===void 0&&(i=function(u){return u<.5?r(u*2)/2:1-r((1-u)*2)/2});var s={easeIn:r,easeOut:n,easeInOut:i},o;return jr(e,function(a){Pe[a]=pn[a]=s,Pe[o=a.toLowerCase()]=n;for(var u in s)Pe[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=Pe[a+"."+u]=s[u]}),s},fN=function(e){return function(r){return r<.5?(1-e(1-r*2))/2:.5+e((r-.5)*2)/2}},sy=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),o=s/Fb*(Math.asin(1/i)||0),a=function(c){return c===1?1:i*Math.pow(2,-10*c)*Sse((c-o)*s)+1},u=e==="out"?a:e==="in"?function(l){return 1-a(1-l)}:fN(a);return s=Fb/s,u.config=function(l,c){return t(e,l,c)},u},oy=function t(e,r){r===void 0&&(r=1.70158);var n=function(o){return o?--o*o*((r+1)*o+r)+1:0},i=e==="out"?n:e==="in"?function(s){return 1-n(1-s)}:fN(n);return i.config=function(s){return t(e,s)},i};jr("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var r=e<5?e+1:e;ca(t+",Power"+(r-1),e?function(n){return Math.pow(n,r)}:function(n){return n},function(n){return 1-Math.pow(1-n,r)},function(n){return n<.5?Math.pow(n*2,r)/2:1-Math.pow((1-n)*2,r)/2})});Pe.Linear.easeNone=Pe.none=Pe.Linear.easeIn;ca("Elastic",sy("in"),sy("out"),sy());(function(t,e){var r=1/e,n=2*r,i=2.5*r,s=function(a){return a<r?t*a*a:a<n?t*Math.pow(a-1.5/e,2)+.75:a<i?t*(a-=2.25/e)*a+.9375:t*Math.pow(a-2.625/e,2)+.984375};ca("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);ca("Expo",function(t){return Math.pow(2,10*(t-1))*t+t*t*t*t*t*t*(1-t)});ca("Circ",function(t){return-(M8(1-t*t)-1)});ca("Sine",function(t){return t===1?1:-xse(t*_se)+1});ca("Back",oy("in"),oy("out"),oy());Pe.SteppedEase=Pe.steps=pn.SteppedEase={config:function(e,r){e===void 0&&(e=1);var n=1/e,i=e+(r?0:1),s=r?1:0,o=1-je;return function(a){return((i*td(0,o,a)|0)+s)*n}}};Mu.ease=Pe["quad.out"];jr("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return zw+=t+","+t+"Params,"});var dN=function(e,r){this.id=bse++,e._gsap=this,this.target=e,this.harness=r,this.get=r?r.get:j8,this.set=r?r.getSetter:Ww},wf=function(){function t(r){this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,Lu(this,+r.duration,1,1),this.data=r.data,it&&(this._ctx=it,it.data.push(this)),Sf||nn.wake()}var e=t.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Lu(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(Nu(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(yg(this,n),!s._dp||s.parent||q8(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&di(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===je||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),H8(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+pP(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+pP(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,i):this._repeat?Fu(this._tTime,s)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-je?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Np(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-je?0:this._rts,this.totalTime(td(-Math.abs(this._delay),this._tDur,s),i!==!1),vg(this),Rse(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Nu(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==je&&(this._tTime-=je)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&di(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+($r(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Np(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=Cse);var i=ir;return ir=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ir=i,this},e.globalTime=function(n){for(var i=this,s=arguments.length?n:i.rawTime();i;)s=i._start+s/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,mP(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,mP(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(En(this,n),$r(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,$r(i)),this._dur||(this._zTime=-je),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-je:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-je,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=i&&s<this.endTime(!0)-je)},e.eventCallback=function(n,i,s){var o=this.vars;return arguments.length>1?(i?(o[n]=i,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=i)):delete o[n],this):o[n]},e.then=function(n){var i=this;return new Promise(function(s){var o=vt(n)?n:W8,a=function(){var l=i.then;i.then=null,vt(o)&&(o=o(i))&&(o.then||o===i)&&(i.then=l),s(o),i.then=l};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?a():i._prom=a})},e.kill=function(){lc(this)},t}();mn(wf.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-je,_prom:0,_ps:!1,_rts:1});var Er=function(t){D8(e,t);function e(n,i){var s;return n===void 0&&(n={}),s=t.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=$r(n.sortChildren),lt&&di(n.parent||lt,$i(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Y8($i(s),n.scrollTrigger),s}var r=e.prototype;return r.to=function(i,s,o){return Dc(0,arguments,this),this},r.from=function(i,s,o){return Dc(1,arguments,this),this},r.fromTo=function(i,s,o,a){return Dc(2,arguments,this),this},r.set=function(i,s,o){return s.duration=0,s.parent=this,kc(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Bt(i,s,En(this,o),1),this},r.call=function(i,s,o){return di(this,Bt.delayedCall(0,i,s),o)},r.staggerTo=function(i,s,o,a,u,l,c){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=l,o.onCompleteParams=c,o.parent=this,new Bt(i,o,En(this,u)),this},r.staggerFrom=function(i,s,o,a,u,l,c){return o.runBackwards=1,kc(o).immediateRender=$r(o.immediateRender),this.staggerTo(i,s,o,a,u,l,c)},r.staggerFromTo=function(i,s,o,a,u,l,c,f){return a.startAt=o,kc(a).immediateRender=$r(a.immediateRender),this.staggerTo(i,s,a,u,l,c,f)},r.render=function(i,s,o){var a=this._time,u=this._dirty?this.totalDuration():this._tDur,l=this._dur,c=i<=0?0:kt(i),f=this._zTime<0!=i<0&&(this._initted||!l),d,h,p,m,g,v,y,b,_,x,S,w;if(this!==lt&&c>u&&i>=0&&(c=u),c!==this._tTime||o||f){if(a!==this._time&&l&&(c+=this._time-a,i+=this._time-a),d=c,_=this._start,b=this._ts,v=!b,f&&(l||(a=this._zTime),(i||!s)&&(this._zTime=i)),this._repeat){if(S=this._yoyo,g=l+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(g*100+i,s,o);if(d=kt(c%g),c===u?(m=this._repeat,d=l):(x=kt(c/g),m=~~x,m&&m===x&&(d=l,m--),d>l&&(d=l)),x=Fu(this._tTime,g),!a&&this._tTime&&x!==m&&this._tTime-x*g-this._dur<=0&&(x=m),S&&m&1&&(d=l-d,w=1),m!==x&&!this._lock){var P=S&&x&1,C=P===(S&&m&1);if(m<x&&(P=!P),a=P?0:c%l?l:c,this._lock=1,this.render(a||(w?0:kt(m*g)),s,!l)._lock=0,this._tTime=c,!s&&this.parent&&on(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),a&&a!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,u=this._tDur,C&&(this._lock=2,a=P?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!v)return this;cN(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=Dse(this,kt(a),kt(d)),y&&(c-=d-(d=y._start))),this._tTime=c,this._time=d,this._act=!b,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,a=0),!a&&d&&!s&&!m&&(on(this,"onStart"),this._tTime!==c))return this;if(d>=a&&i>=0)for(h=this._first;h;){if(p=h._next,(h._act||d>=h._start)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(d-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(d-h._start)*h._ts,s,o),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=-je);break}}h=p}else{h=this._last;for(var R=i<0?i:d;h;){if(p=h._prev,(h._act||R<=h._end)&&h._ts&&y!==h){if(h.parent!==this)return this.render(i,s,o);if(h.render(h._ts>0?(R-h._start)*h._ts:(h._dirty?h.totalDuration():h._tDur)+(R-h._start)*h._ts,s,o||ir&&(h._initted||h._startAt)),d!==this._time||!this._ts&&!v){y=0,p&&(c+=this._zTime=R?-je:je);break}}h=p}}if(y&&!s&&(this.pause(),y.render(d>=a?0:-je)._zTime=d>=a?1:-1,this._ts))return this._start=_,vg(this),this.render(i,s,o);this._onUpdate&&!s&&on(this,"onUpdate",!0),(c===u&&this._tTime>=this.totalDuration()||!c&&a)&&(_===this._start||Math.abs(b)!==Math.abs(this._ts))&&(this._lock||((i||!l)&&(c===u&&this._ts>0||!c&&this._ts<0)&&ro(this,1),!s&&!(i<0&&!a)&&(c||a||!u)&&(on(this,c===u&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(c<u&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(i,s){var o=this;if(os(s)||(s=En(this,s,i)),!(i instanceof wf)){if(gr(i))return i.forEach(function(a){return o.add(a,s)}),this;if(Kt(i))return this.addLabel(i,s);if(vt(i))i=Bt.delayedCall(0,i);else return this}return this!==i?di(this,i,s):this},r.getChildren=function(i,s,o,a){i===void 0&&(i=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-Bn);for(var u=[],l=this._first;l;)l._start>=a&&(l instanceof Bt?s&&u.push(l):(o&&u.push(l),i&&u.push.apply(u,l.getChildren(!0,s,o)))),l=l._next;return u},r.getById=function(i){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===i)return s[o]},r.remove=function(i){return Kt(i)?this.removeLabel(i):vt(i)?this.killTweensOf(i):(i.parent===this&&gg(this,i),i===this._recent&&(this._recent=this._last),No(this))},r.totalTime=function(i,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=kt(nn.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),t.prototype.totalTime.call(this,i,s),this._forcing=0,this):this._tTime},r.addLabel=function(i,s){return this.labels[i]=En(this,s),this},r.removeLabel=function(i){return delete this.labels[i],this},r.addPause=function(i,s,o){var a=Bt.delayedCall(0,s||bf,o);return a.data="isPause",this._hasPause=1,di(this,a,En(this,i))},r.removePause=function(i){var s=this._first;for(i=En(this,i);s;)s._start===i&&s.data==="isPause"&&ro(s),s=s._next},r.killTweensOf=function(i,s,o){for(var a=this.getTweensOf(i,o),u=a.length;u--;)ks!==a[u]&&a[u].kill(i,s);return this},r.getTweensOf=function(i,s){for(var o=[],a=kn(i),u=this._first,l=os(s),c;u;)u instanceof Bt?Tse(u._targets,a)&&(l?(!ks||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(c=u.getTweensOf(a,s)).length&&o.push.apply(o,c),u=u._next;return o},r.tweenTo=function(i,s){s=s||{};var o=this,a=En(o,i),u=s,l=u.startAt,c=u.onStart,f=u.onStartParams,d=u.immediateRender,h,p=Bt.to(o,mn({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale())||je,onStart:function(){if(o.pause(),!h){var g=s.duration||Math.abs((a-(l&&"time"in l?l.time:o._time))/o.timeScale());p._dur!==g&&Lu(p,g,0,1).render(p._time,!0,!0),h=1}c&&c.apply(p,f||[])}},s));return d?p.render(0):p},r.tweenFromTo=function(i,s,o){return this.tweenTo(s,mn({startAt:{time:En(this,i)}},o))},r.recent=function(){return this._recent},r.nextLabel=function(i){return i===void 0&&(i=this._time),gP(this,En(this,i))},r.previousLabel=function(i){return i===void 0&&(i=this._time),gP(this,En(this,i),1)},r.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+je)},r.shiftChildren=function(i,s,o){o===void 0&&(o=0);for(var a=this._first,u=this.labels,l;a;)a._start>=o&&(a._start+=i,a._end+=i),a=a._next;if(s)for(l in u)u[l]>=o&&(u[l]+=i);return No(this)},r.invalidate=function(i){var s=this._first;for(this._lock=0;s;)s.invalidate(i),s=s._next;return t.prototype.invalidate.call(this,i)},r.clear=function(i){i===void 0&&(i=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),No(this)},r.totalDuration=function(i){var s=0,o=this,a=o._last,u=Bn,l,c,f;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-i:i));if(o._dirty){for(f=o.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),c=a._start,c>u&&o._sort&&a._ts&&!o._lock?(o._lock=1,di(o,a,c-a._delay,1)._lock=0):u=c,c<0&&a._ts&&(s-=c,(!f&&!o._dp||f&&f.smoothChildTiming)&&(o._start+=c/o._ts,o._time-=c,o._tTime-=c),o.shiftChildren(-c,!1,-1/0),u=0),a._end>s&&a._ts&&(s=a._end),a=l;Lu(o,o===lt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},e.updateRoot=function(i){if(lt._ts&&(H8(lt,Np(i,lt)),$8=nn.frame),nn.frame>=dP){dP+=un.autoSleep||120;var s=lt._first;if((!s||!s._ts)&&un.autoSleep&&nn._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||nn.sleep()}}},e}(wf);mn(Er.prototype,{_lock:0,_hasPause:0,_forcing:0});var Yse=function(e,r,n,i,s,o,a){var u=new Hr(this._pt,e,r,0,1,yN,null,s),l=0,c=0,f,d,h,p,m,g,v,y;for(u.b=n,u.e=i,n+="",i+="",(v=~i.indexOf("random("))&&(i=xf(i)),o&&(y=[n,i],o(y,e,r),n=y[0],i=y[1]),d=n.match(ry)||[];f=ry.exec(i);)p=f[0],m=i.substring(l,f.index),h?h=(h+1)%5:m.substr(-5)==="rgba("&&(h=1),p!==d[c++]&&(g=parseFloat(d[c-1])||0,u._pt={_next:u._pt,p:m||c===1?m:",",s:g,c:p.charAt(1)==="="?pu(g,p)-g:parseFloat(p)-g,m:h&&h<4?Math.round:0},l=ry.lastIndex);return u.c=l<i.length?i.substring(l,i.length):"",u.fp=a,(L8.test(i)||v)&&(u.e=0),this._pt=u,u},jw=function(e,r,n,i,s,o,a,u,l,c){vt(i)&&(i=i(s||0,e,o));var f=e[r],d=n!=="get"?n:vt(f)?l?e[r.indexOf("set")||!vt(e["get"+r.substr(3)])?r:"get"+r.substr(3)](l):e[r]():f,h=vt(f)?l?eoe:gN:Vw,p;if(Kt(i)&&(~i.indexOf("random(")&&(i=xf(i)),i.charAt(1)==="="&&(p=pu(d,i)+(dr(d)||0),(p||p===0)&&(i=p))),!c||d!==i||Vb)return!isNaN(d*i)&&i!==""?(p=new Hr(this._pt,e,r,+d||0,i-(d||0),typeof f=="boolean"?roe:vN,0,h),l&&(p.fp=l),a&&p.modifier(a,this,e),this._pt=p):(!f&&!(r in e)&&Uw(r,i),Yse.call(this,e,r,d,i,h,u||un.stringFilter,l))},Kse=function(e,r,n,i,s){if(vt(e)&&(e=Mc(e,s,r,n,i)),!ki(e)||e.style&&e.nodeType||gr(e)||I8(e))return Kt(e)?Mc(e,s,r,n,i):e;var o={},a;for(a in e)o[a]=Mc(e[a],s,r,n,i);return o},hN=function(e,r,n,i,s,o){var a,u,l,c;if(rn[e]&&(a=new rn[e]).init(s,a.rawVars?r[e]:Kse(r[e],i,s,o,n),n,i,o)!==!1&&(n._pt=u=new Hr(n._pt,s,e,0,1,a.render,a,0,a.priority),n!==Va))for(l=n._ptLookup[n._targets.indexOf(s)],c=a._props.length;c--;)l[a._props[c]]=u;return a},ks,Vb,Hw=function t(e,r,n){var i=e.vars,s=i.ease,o=i.startAt,a=i.immediateRender,u=i.lazy,l=i.onUpdate,c=i.runBackwards,f=i.yoyoEase,d=i.keyframes,h=i.autoRevert,p=e._dur,m=e._startAt,g=e._targets,v=e.parent,y=v&&v.data==="nested"?v.vars.targets:g,b=e._overwrite==="auto"&&!Iw,_=e.timeline,x,S,w,P,C,R,F,N,G,j,re,U,z;if(_&&(!d||!s)&&(s="none"),e._ease=Uo(s,Mu.ease),e._yEase=f?lN(Uo(f===!0?s:f,Mu.ease)):0,f&&e._yoyo&&!e._repeat&&(f=e._yEase,e._yEase=e._ease,e._ease=f),e._from=!_&&!!i.runBackwards,!_||d&&!i.stagger){if(N=g[0]?Lo(g[0]).harness:0,U=N&&i[N.prop],x=Lp(i,Gw),m&&(m._zTime<0&&m.progress(1),r<0&&c&&a&&!h?m.render(-1,!0):m.revert(c&&p?Ph:Ese),m._lazy=0),o){if(ro(e._startAt=Bt.set(g,mn({data:"isStart",overwrite:!1,parent:v,immediateRender:!0,lazy:!m&&$r(u),startAt:null,delay:0,onUpdate:l&&function(){return on(e,"onUpdate")},stagger:0},o))),e._startAt._dp=0,e._startAt._sat=e,r<0&&(ir||!a&&!h)&&e._startAt.revert(Ph),a&&p&&r<=0&&n<=0){r&&(e._zTime=r);return}}else if(c&&p&&!m){if(r&&(a=!1),w=mn({overwrite:!1,data:"isFromStart",lazy:a&&!m&&$r(u),immediateRender:a,stagger:0,parent:v},x),U&&(w[N.prop]=U),ro(e._startAt=Bt.set(g,w)),e._startAt._dp=0,e._startAt._sat=e,r<0&&(ir?e._startAt.revert(Ph):e._startAt.render(-1,!0)),e._zTime=r,!a)t(e._startAt,je,je);else if(!r)return}for(e._pt=e._ptCache=0,u=p&&$r(u)||u&&!p,S=0;S<g.length;S++){if(C=g[S],F=C._gsap||$w(g)[S]._gsap,e._ptLookup[S]=j={},Ub[F.id]&&Vs.length&&Fp(),re=y===g?S:y.indexOf(C),N&&(G=new N).init(C,U||x,e,re,y)!==!1&&(e._pt=P=new Hr(e._pt,C,G.name,0,1,G.render,G,0,G.priority),G._props.forEach(function(pe){j[pe]=P}),G.priority&&(R=1)),!N||U)for(w in x)rn[w]&&(G=hN(w,x,e,re,C,y))?G.priority&&(R=1):j[w]=P=jw.call(e,C,w,"get",x[w],re,y,0,i.stringFilter);e._op&&e._op[S]&&e.kill(C,e._op[S]),b&&e._pt&&(ks=e,lt.killTweensOf(C,j,e.globalTime(r)),z=!e.parent,ks=0),e._pt&&u&&(Ub[F.id]=1)}R&&_N(e),e._onInit&&e._onInit(e)}e._onUpdate=l,e._initted=(!e._op||e._pt)&&!z,d&&r<=0&&_.render(Bn,!0,!0)},Zse=function(e,r,n,i,s,o,a,u){var l=(e._pt&&e._ptCache||(e._ptCache={}))[r],c,f,d,h;if(!l)for(l=e._ptCache[r]=[],d=e._ptLookup,h=e._targets.length;h--;){if(c=d[h][r],c&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==r&&c.fp!==r;)c=c._next;if(!c)return Vb=1,e.vars[r]="+=0",Hw(e,a),Vb=0,u?_f(r+" not eligible for reset"):1;l.push(c)}for(h=l.length;h--;)f=l[h],c=f._pt||f,c.s=(i||i===0)&&!s?i:c.s+(i||0)+o*c.c,c.c=n-c.s,f.e&&(f.e=wt(n)+dr(f.e)),f.b&&(f.b=c.s+dr(f.b))},Qse=function(e,r){var n=e[0]?Lo(e[0]).harness:0,i=n&&n.aliases,s,o,a,u;if(!i)return r;s=Iu({},r);for(o in i)if(o in s)for(u=i[o].split(","),a=u.length;a--;)s[u[a]]=s[o];return s},Jse=function(e,r,n,i){var s=r.ease||i||"power1.inOut",o,a;if(gr(r))a=n[e]||(n[e]=[]),r.forEach(function(u,l){return a.push({t:l/(r.length-1)*100,v:u,e:s})});else for(o in r)a=n[o]||(n[o]=[]),o==="ease"||a.push({t:parseFloat(e),v:r[o],e:s})},Mc=function(e,r,n,i,s){return vt(e)?e.call(r,n,i,s):Kt(e)&&~e.indexOf("random(")?xf(e):e},pN=zw+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",mN={};jr(pN+",id,stagger,delay,duration,paused,scrollTrigger",function(t){return mN[t]=1});var Bt=function(t){D8(e,t);function e(n,i,s,o){var a;typeof i=="number"&&(s.duration=i,i=s,s=null),a=t.call(this,o?i:kc(i))||this;var u=a.vars,l=u.duration,c=u.delay,f=u.immediateRender,d=u.stagger,h=u.overwrite,p=u.keyframes,m=u.defaults,g=u.scrollTrigger,v=u.yoyoEase,y=i.parent||lt,b=(gr(n)||I8(n)?os(n[0]):"length"in i)?[n]:kn(n),_,x,S,w,P,C,R,F;if(a._targets=b.length?$w(b):_f("GSAP target "+n+" not found. https://gsap.com",!un.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=h,p||d||Zd(l)||Zd(c)){if(i=a.vars,_=a.timeline=new Er({data:"nested",defaults:m||{},targets:y&&y.data==="nested"?y.vars.targets:b}),_.kill(),_.parent=_._dp=$i(a),_._start=0,d||Zd(l)||Zd(c)){if(w=b.length,R=d&&J8(d),ki(d))for(P in d)~pN.indexOf(P)&&(F||(F={}),F[P]=d[P]);for(x=0;x<w;x++)S=Lp(i,mN),S.stagger=0,v&&(S.yoyoEase=v),F&&Iu(S,F),C=b[x],S.duration=+Mc(l,$i(a),x,C,b),S.delay=(+Mc(c,$i(a),x,C,b)||0)-a._delay,!d&&w===1&&S.delay&&(a._delay=c=S.delay,a._start+=c,S.delay=0),_.to(C,S,R?R(x,C,b):0),_._ease=Pe.none;_.duration()?l=c=0:a.timeline=0}else if(p){kc(mn(_.vars.defaults,{ease:"none"})),_._ease=Uo(p.ease||i.ease||"none");var N=0,G,j,re;if(gr(p))p.forEach(function(U){return _.to(b,U,">")}),_.duration();else{S={};for(P in p)P==="ease"||P==="easeEach"||Jse(P,p[P],S,p.easeEach);for(P in S)for(G=S[P].sort(function(U,z){return U.t-z.t}),N=0,x=0;x<G.length;x++)j=G[x],re={ease:j.e,duration:(j.t-(x?G[x-1].t:0))/100*l},re[P]=j.v,_.to(b,re,N),N+=re.duration;_.duration()<l&&_.to({},{duration:l-_.duration()})}}l||a.duration(l=_.duration())}else a.timeline=0;return h===!0&&!Iw&&(ks=$i(a),lt.killTweensOf(b),ks=0),di(y,$i(a),s),i.reversed&&a.reverse(),i.paused&&a.paused(!0),(f||!l&&!p&&a._start===kt(y._time)&&$r(f)&&Ose($i(a))&&y.data!=="nested")&&(a._tTime=-je,a.render(Math.max(0,-c)||0)),g&&Y8($i(a),g),a}var r=e.prototype;return r.render=function(i,s,o){var a=this._time,u=this._tDur,l=this._dur,c=i<0,f=i>u-je&&!c?u:i<je?0:i,d,h,p,m,g,v,y,b,_;if(!l)kse(this,i,s,o);else if(f!==this._tTime||!i||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==c||this._lazy){if(d=f,b=this.timeline,this._repeat){if(m=l+this._rDelay,this._repeat<-1&&c)return this.totalTime(m*100+i,s,o);if(d=kt(f%m),f===u?(p=this._repeat,d=l):(g=kt(f/m),p=~~g,p&&p===g?(d=l,p--):d>l&&(d=l)),v=this._yoyo&&p&1,v&&(_=this._yEase,d=l-d),g=Fu(this._tTime,m),d===a&&!o&&this._initted&&p===g)return this._tTime=f,this;p!==g&&(b&&this._yEase&&cN(b,v),this.vars.repeatRefresh&&!v&&!this._lock&&d!==m&&this._initted&&(this._lock=o=1,this.render(kt(m*p),!0).invalidate()._lock=0))}if(!this._initted){if(K8(this,c?i:d,o,s,f))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&p!==g))return this;if(l!==this._dur)return this.render(i,s,o)}if(this._tTime=f,this._time=d,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(_||this._ease)(d/l),this._from&&(this.ratio=y=1-y),d&&!a&&!s&&!p&&(on(this,"onStart"),this._tTime!==f))return this;for(h=this._pt;h;)h.r(y,h.d),h=h._next;b&&b.render(i<0?i:b._dur*b._ease(d/this._dur),s,o)||this._startAt&&(this._zTime=i),this._onUpdate&&!s&&(c&&Gb(this,i,s,o),on(this,"onUpdate")),this._repeat&&p!==g&&this.vars.onRepeat&&!s&&this.parent&&on(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(c&&!this._onUpdate&&Gb(this,i,!0,!0),(i||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&ro(this,1),!s&&!(c&&!a)&&(f||a||v)&&(on(this,f===u?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom()))}return this},r.targets=function(){return this._targets},r.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),t.prototype.invalidate.call(this,i)},r.resetTo=function(i,s,o,a,u){Sf||nn.wake(),this._ts||this.play();var l=Math.min(this._dur,(this._dp._time-this._start)*this._ts),c;return this._initted||Hw(this,l),c=this._ease(l/this._dur),Zse(this,i,s,o,a,c,l,u)?this.resetTo(i,s,o,a,1):(yg(this,0),this.parent||X8(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(i,s){if(s===void 0&&(s="all"),!i&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?lc(this):this.scrollTrigger&&this.scrollTrigger.kill(!!ir),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(i,s,ks&&ks.vars.overwrite!==!0)._first||lc(this),this.parent&&o!==this.timeline.totalDuration()&&Lu(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,u=i?kn(i):a,l=this._ptLookup,c=this._pt,f,d,h,p,m,g,v;if((!s||s==="all")&&Pse(a,u))return s==="all"&&(this._pt=0),lc(this);for(f=this._op=this._op||[],s!=="all"&&(Kt(s)&&(m={},jr(s,function(y){return m[y]=1}),s=m),s=Qse(a,s)),v=a.length;v--;)if(~u.indexOf(a[v])){d=l[v],s==="all"?(f[v]=s,p=d,h={}):(h=f[v]=f[v]||{},p=s);for(m in p)g=d&&d[m],g&&((!("kill"in g.d)||g.d.kill(m)===!0)&&gg(this,g,"_pt"),delete d[m]),h!=="all"&&(h[m]=1)}return this._initted&&!this._pt&&c&&lc(this),this},e.to=function(i,s){return new e(i,s,arguments[2])},e.from=function(i,s){return Dc(1,arguments)},e.delayedCall=function(i,s,o,a){return new e(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},e.fromTo=function(i,s,o){return Dc(2,arguments)},e.set=function(i,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new e(i,s)},e.killTweensOf=function(i,s,o){return lt.killTweensOf(i,s,o)},e}(wf);mn(Bt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});jr("staggerTo,staggerFrom,staggerFromTo",function(t){Bt[t]=function(){var e=new Er,r=$b.call(arguments,0);return r.splice(t==="staggerFromTo"?5:4,0,0),e[t].apply(e,r)}});var Vw=function(e,r,n){return e[r]=n},gN=function(e,r,n){return e[r](n)},eoe=function(e,r,n,i){return e[r](i.fp,n)},toe=function(e,r,n){return e.setAttribute(r,n)},Ww=function(e,r){return vt(e[r])?gN:Fw(e[r])&&e.setAttribute?toe:Vw},vN=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e6)/1e6,r)},roe=function(e,r){return r.set(r.t,r.p,!!(r.s+r.c*e),r)},yN=function(e,r){var n=r._pt,i="";if(!e&&r.b)i=r.b;else if(e===1&&r.e)i=r.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=r.c}r.set(r.t,r.p,i,r)},Xw=function(e,r){for(var n=r._pt;n;)n.r(e,n.d),n=n._next},noe=function(e,r,n,i){for(var s=this._pt,o;s;)o=s._next,s.p===i&&s.modifier(e,r,n),s=o},ioe=function(e){for(var r=this._pt,n,i;r;)i=r._next,r.p===e&&!r.op||r.op===e?gg(this,r,"_pt"):r.dep||(n=1),r=i;return!n},soe=function(e,r,n,i){i.mSet(e,r,i.m.call(i.tween,n,i.mt),i)},_N=function(e){for(var r=e._pt,n,i,s,o;r;){for(n=r._next,i=s;i&&i.pr>r.pr;)i=i._next;(r._prev=i?i._prev:o)?r._prev._next=r:s=r,(r._next=i)?i._prev=r:o=r,r=n}e._pt=s},Hr=function(){function t(r,n,i,s,o,a,u,l,c){this.t=n,this.s=s,this.c=o,this.p=i,this.r=a||vN,this.d=u||this,this.set=l||Vw,this.pr=c||0,this._next=r,r&&(r._prev=this)}var e=t.prototype;return e.modifier=function(n,i,s){this.mSet=this.mSet||this.set,this.set=soe,this.m=n,this.mt=s,this.tween=i},t}();jr(zw+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return Gw[t]=1});pn.TweenMax=pn.TweenLite=Bt;pn.TimelineLite=pn.TimelineMax=Er;lt=new Er({sortChildren:!1,defaults:Mu,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});un.stringFilter=uN;var Go=[],Oh={},ooe=[],yP=0,aoe=0,ay=function(e){return(Oh[e]||ooe).map(function(r){return r()})},Wb=function(){var e=Date.now(),r=[];e-yP>2&&(ay("matchMediaInit"),Go.forEach(function(n){var i=n.queries,s=n.conditions,o,a,u,l;for(a in i)o=ui.matchMedia(i[a]).matches,o&&(u=1),o!==s[a]&&(s[a]=o,l=1);l&&(n.revert(),u&&r.push(n))}),ay("matchMediaRevert"),r.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),yP=e,ay("matchMedia"))},bN=function(){function t(r,n){this.selector=n&&jb(n),this.data=[],this._r=[],this.isReverted=!1,this.id=aoe++,r&&this.add(r)}var e=t.prototype;return e.add=function(n,i,s){vt(n)&&(s=i,i=n,n=vt);var o=this,a=function(){var l=it,c=o.selector,f;return l&&l!==o&&l.data.push(o),s&&(o.selector=jb(s)),it=o,f=i.apply(o,arguments),vt(f)&&o._r.push(f),it=l,o.selector=c,o.isReverted=!1,f};return o.last=a,n===vt?a(o,function(u){return o.add(null,u)}):n?o[n]=a:a},e.ignore=function(n){var i=it;it=null,n(this),it=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof t?n.push.apply(n,i.getTweens()):i instanceof Bt&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var s=this;if(n?function(){for(var a=s.getTweens(),u=s.data.length,l;u--;)l=s.data[u],l.data==="isFlip"&&(l.revert(),l.getChildren(!0,!0,!1).forEach(function(c){return a.splice(a.indexOf(c),1)}));for(a.map(function(c){return{g:c._dur||c._delay||c._sat&&!c._sat.vars.immediateRender?c.globalTime(0):-1/0,t:c}}).sort(function(c,f){return f.g-c.g||-1/0}).forEach(function(c){return c.t.revert(n)}),u=s.data.length;u--;)l=s.data[u],l instanceof Er?l.data!=="nested"&&(l.scrollTrigger&&l.scrollTrigger.revert(),l.kill()):!(l instanceof Bt)&&l.revert&&l.revert(n);s._r.forEach(function(c){return c(n,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),i)for(var o=Go.length;o--;)Go[o].id===this.id&&Go.splice(o,1)},e.revert=function(n){this.kill(n||{})},t}(),uoe=function(){function t(r){this.contexts=[],this.scope=r,it&&it.data.push(this)}var e=t.prototype;return e.add=function(n,i,s){ki(n)||(n={matches:n});var o=new bN(0,s||this.scope),a=o.conditions={},u,l,c;it&&!o.selector&&(o.selector=it.selector),this.contexts.push(o),i=o.add("onMatch",i),o.queries=n;for(l in n)l==="all"?c=1:(u=ui.matchMedia(n[l]),u&&(Go.indexOf(o)<0&&Go.push(o),(a[l]=u.matches)&&(c=1),u.addListener?u.addListener(Wb):u.addEventListener("change",Wb)));return c&&i(o,function(f){return o.add(null,f)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},t}(),Up={registerPlugin:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(i){return sN(i)})},timeline:function(e){return new Er(e)},getTweensOf:function(e,r){return lt.getTweensOf(e,r)},getProperty:function(e,r,n,i){Kt(e)&&(e=kn(e)[0]);var s=Lo(e||{}).get,o=n?W8:V8;return n==="native"&&(n=""),e&&(r?o((rn[r]&&rn[r].get||s)(e,r,n,i)):function(a,u,l){return o((rn[a]&&rn[a].get||s)(e,a,u,l))})},quickSetter:function(e,r,n){if(e=kn(e),e.length>1){var i=e.map(function(c){return Xr.quickSetter(c,r,n)}),s=i.length;return function(c){for(var f=s;f--;)i[f](c)}}e=e[0]||{};var o=rn[r],a=Lo(e),u=a.harness&&(a.harness.aliases||{})[r]||r,l=o?function(c){var f=new o;Va._pt=0,f.init(e,n?c+n:c,Va,0,[e]),f.render(1,f),Va._pt&&Xw(1,Va)}:a.set(e,u);return o?l:function(c){return l(e,u,n?c+n:c,a,1)}},quickTo:function(e,r,n){var i,s=Xr.to(e,mn((i={},i[r]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),o=function(u,l,c){return s.resetTo(r,u,l,c)};return o.tween=s,o},isTweening:function(e){return lt.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Uo(e.ease,Mu.ease)),hP(Mu,e||{})},config:function(e){return hP(un,e||{})},registerEffect:function(e){var r=e.name,n=e.effect,i=e.plugins,s=e.defaults,o=e.extendTimeline;(i||"").split(",").forEach(function(a){return a&&!rn[a]&&!pn[a]&&_f(r+" effect requires "+a+" plugin.")}),ny[r]=function(a,u,l){return n(kn(a),mn(u||{},s),l)},o&&(Er.prototype[r]=function(a,u,l){return this.add(ny[r](a,ki(u)?u:(l=u)&&{},this),l)})},registerEase:function(e,r){Pe[e]=Uo(r)},parseEase:function(e,r){return arguments.length?Uo(e,r):Pe},getById:function(e){return lt.getById(e)},exportRoot:function(e,r){e===void 0&&(e={});var n=new Er(e),i,s;for(n.smoothChildTiming=$r(e.smoothChildTiming),lt.remove(n),n._dp=0,n._time=n._tTime=lt._time,i=lt._first;i;)s=i._next,(r||!(!i._dur&&i instanceof Bt&&i.vars.onComplete===i._targets[0]))&&di(n,i,i._start-i._delay),i=s;return di(lt,n,0),n},context:function(e,r){return e?new bN(e,r):it},matchMedia:function(e){return new uoe(e)},matchMediaRefresh:function(){return Go.forEach(function(e){var r=e.conditions,n,i;for(i in r)r[i]&&(r[i]=!1,n=1);n&&e.revert()})||Wb()},addEventListener:function(e,r){var n=Oh[e]||(Oh[e]=[]);~n.indexOf(r)||n.push(r)},removeEventListener:function(e,r){var n=Oh[e],i=n&&n.indexOf(r);i>=0&&n.splice(i,1)},utils:{wrap:Gse,wrapYoyo:zse,distribute:J8,random:tN,snap:eN,normalize:Use,getUnit:dr,clamp:Ise,splitColor:oN,toArray:kn,selector:jb,mapRange:nN,pipe:Lse,unitize:Nse,interpolate:$se,shuffle:Q8},install:G8,effects:ny,ticker:nn,updateRoot:Er.updateRoot,plugins:rn,globalTimeline:lt,core:{PropTween:Hr,globals:z8,Tween:Bt,Timeline:Er,Animation:wf,getCache:Lo,_removeLinkedListItem:gg,reverting:function(){return ir},context:function(e){return e&&it&&(it.data.push(e),e._ctx=it),it},suppressOverwrites:function(e){return Iw=e}}};jr("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Up[t]=Bt[t]});nn.add(Er.updateRoot);Va=Up.to({},{duration:0});var loe=function(e,r){for(var n=e._pt;n&&n.p!==r&&n.op!==r&&n.fp!==r;)n=n._next;return n},coe=function(e,r){var n=e._targets,i,s,o;for(i in r)for(s=n.length;s--;)o=e._ptLookup[s][i],o&&(o=o.d)&&(o._pt&&(o=loe(o,i)),o&&o.modifier&&o.modifier(r[i],e,n[s],i))},uy=function(e,r){return{name:e,rawVars:1,init:function(i,s,o){o._onInit=function(a){var u,l;if(Kt(s)&&(u={},jr(s,function(c){return u[c]=1}),s=u),r){u={};for(l in s)u[l]=r(s[l]);s=u}coe(a,s)}}}},Xr=Up.registerPlugin({name:"attr",init:function(e,r,n,i,s){var o,a,u;this.tween=n;for(o in r)u=e.getAttribute(o)||"",a=this.add(e,"setAttribute",(u||0)+"",r[o],i,s,0,0,o),a.op=o,a.b=u,this._props.push(o)},render:function(e,r){for(var n=r._pt;n;)ir?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,r){for(var n=r.length;n--;)this.add(e,n,e[n]||0,r[n],0,0,0,0,0,1)}},uy("roundProps",Hb),uy("modifiers"),uy("snap",eN))||Up;Bt.version=Er.version=Xr.version="3.12.7";U8=1;Lw()&&Nu();Pe.Power0;Pe.Power1;Pe.Power2;Pe.Power3;Pe.Power4;Pe.Linear;Pe.Quad;Pe.Cubic;Pe.Quart;Pe.Quint;Pe.Strong;Pe.Elastic;Pe.Back;Pe.SteppedEase;Pe.Bounce;Pe.Sine;Pe.Expo;Pe.Circ;/*!
 * CSSPlugin 3.12.7
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _P,Ds,mu,qw,Io,bP,Yw,foe=function(){return typeof window<"u"},as={},Po=180/Math.PI,gu=Math.PI/180,Ta=Math.atan2,xP=1e8,Kw=/([A-Z])/g,doe=/(left|right|width|margin|padding|x)/i,hoe=/[\s,\(]\S/,vi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Xb=function(e,r){return r.set(r.t,r.p,Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},poe=function(e,r){return r.set(r.t,r.p,e===1?r.e:Math.round((r.s+r.c*e)*1e4)/1e4+r.u,r)},moe=function(e,r){return r.set(r.t,r.p,e?Math.round((r.s+r.c*e)*1e4)/1e4+r.u:r.b,r)},goe=function(e,r){var n=r.s+r.c*e;r.set(r.t,r.p,~~(n+(n<0?-.5:.5))+r.u,r)},xN=function(e,r){return r.set(r.t,r.p,e?r.e:r.b,r)},SN=function(e,r){return r.set(r.t,r.p,e!==1?r.b:r.e,r)},voe=function(e,r,n){return e.style[r]=n},yoe=function(e,r,n){return e.style.setProperty(r,n)},_oe=function(e,r,n){return e._gsap[r]=n},boe=function(e,r,n){return e._gsap.scaleX=e._gsap.scaleY=n},xoe=function(e,r,n,i,s){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Soe=function(e,r,n,i,s){var o=e._gsap;o[r]=n,o.renderTransform(s,o)},ft="transform",Vr=ft+"Origin",woe=function t(e,r){var n=this,i=this.target,s=i.style,o=i._gsap;if(e in as&&s){if(this.tfm=this.tfm||{},e!=="transform")e=vi[e]||e,~e.indexOf(",")?e.split(",").forEach(function(a){return n.tfm[a]=Hi(i,a)}):this.tfm[e]=o.x?o[e]:Hi(i,e),e===Vr&&(this.tfm.zOrigin=o.zOrigin);else return vi.transform.split(",").forEach(function(a){return t.call(n,a,r)});if(this.props.indexOf(ft)>=0)return;o.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(Vr,r,"")),e=ft}(s||r)&&this.props.push(e,r,s[e])},wN=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},Eoe=function(){var e=this.props,r=this.target,n=r.style,i=r._gsap,s,o;for(s=0;s<e.length;s+=3)e[s+1]?e[s+1]===2?r[e[s]](e[s+2]):r[e[s]]=e[s+2]:e[s+2]?n[e[s]]=e[s+2]:n.removeProperty(e[s].substr(0,2)==="--"?e[s]:e[s].replace(Kw,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)i[o]=this.tfm[o];i.svg&&(i.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),s=Yw(),(!s||!s.isStart)&&!n[ft]&&(wN(n),i.zOrigin&&n[Vr]&&(n[Vr]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},EN=function(e,r){var n={target:e,props:[],revert:Eoe,save:woe};return e._gsap||Xr.core.getCache(e),r&&e.style&&e.nodeType&&r.split(",").forEach(function(i){return n.save(i)}),n},CN,qb=function(e,r){var n=Ds.createElementNS?Ds.createElementNS((r||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Ds.createElement(e);return n&&n.style?n:Ds.createElement(e)},Pi=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(Kw,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,Uu(r)||r,1)||""},SP="O,Moz,ms,Ms,Webkit".split(","),Uu=function(e,r,n){var i=r||Io,s=i.style,o=5;if(e in s&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);o--&&!(SP[o]+e in s););return o<0?null:(o===3?"ms":o>=0?SP[o]:"")+e},Yb=function(){foe()&&window.document&&(_P=window,Ds=_P.document,mu=Ds.documentElement,Io=qb("div")||{style:{}},qb("div"),ft=Uu(ft),Vr=ft+"Origin",Io.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",CN=!!Uu("perspective"),Yw=Xr.core.reverting,qw=1)},wP=function(e){var r=e.ownerSVGElement,n=qb("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),s;i.style.display="block",n.appendChild(i),mu.appendChild(n);try{s=i.getBBox()}catch{}return n.removeChild(i),mu.removeChild(n),s},EP=function(e,r){for(var n=r.length;n--;)if(e.hasAttribute(r[n]))return e.getAttribute(r[n])},TN=function(e){var r,n;try{r=e.getBBox()}catch{r=wP(e),n=1}return r&&(r.width||r.height)||n||(r=wP(e)),r&&!r.width&&!r.x&&!r.y?{x:+EP(e,["x","cx","x1"])||0,y:+EP(e,["y","cy","y1"])||0,width:0,height:0}:r},AN=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&TN(e))},Zo=function(e,r){if(r){var n=e.style,i;r in as&&r!==Vr&&(r=ft),n.removeProperty?(i=r.substr(0,2),(i==="ms"||r.substr(0,6)==="webkit")&&(r="-"+r),n.removeProperty(i==="--"?r:r.replace(Kw,"-$1").toLowerCase())):n.removeAttribute(r)}},Ms=function(e,r,n,i,s,o){var a=new Hr(e._pt,r,n,0,1,o?SN:xN);return e._pt=a,a.b=i,a.e=s,e._props.push(n),a},CP={deg:1,rad:1,turn:1},Coe={grid:1,flex:1},no=function t(e,r,n,i){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",a=Io.style,u=doe.test(r),l=e.tagName.toLowerCase()==="svg",c=(l?"client":"offset")+(u?"Width":"Height"),f=100,d=i==="px",h=i==="%",p,m,g,v;if(i===o||!s||CP[i]||CP[o])return s;if(o!=="px"&&!d&&(s=t(e,r,n,"px")),v=e.getCTM&&AN(e),(h||o==="%")&&(as[r]||~r.indexOf("adius")))return p=v?e.getBBox()[u?"width":"height"]:e[c],wt(h?s/p*f:s/100*p);if(a[u?"width":"height"]=f+(d?o:i),m=i!=="rem"&&~r.indexOf("adius")||i==="em"&&e.appendChild&&!l?e:e.parentNode,v&&(m=(e.ownerSVGElement||{}).parentNode),(!m||m===Ds||!m.appendChild)&&(m=Ds.body),g=m._gsap,g&&h&&g.width&&u&&g.time===nn.time&&!g.uncache)return wt(s/g.width*f);if(h&&(r==="height"||r==="width")){var y=e.style[r];e.style[r]=f+i,p=e[c],y?e.style[r]=y:Zo(e,r)}else(h||o==="%")&&!Coe[Pi(m,"display")]&&(a.position=Pi(e,"position")),m===e&&(a.position="static"),m.appendChild(Io),p=Io[c],m.removeChild(Io),a.position="absolute";return u&&h&&(g=Lo(m),g.time=nn.time,g.width=m[c]),wt(d?p*s/f:p&&s?f/p*s:0)},Hi=function(e,r,n,i){var s;return qw||Yb(),r in vi&&r!=="transform"&&(r=vi[r],~r.indexOf(",")&&(r=r.split(",")[0])),as[r]&&r!=="transform"?(s=Cf(e,i),s=r!=="transformOrigin"?s[r]:s.svg?s.origin:zp(Pi(e,Vr))+" "+s.zOrigin+"px"):(s=e.style[r],(!s||s==="auto"||i||~(s+"").indexOf("calc("))&&(s=Gp[r]&&Gp[r](e,r,n)||Pi(e,r)||j8(e,r)||(r==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?no(e,r,s,n)+n:s},Toe=function(e,r,n,i){if(!n||n==="none"){var s=Uu(r,e,1),o=s&&Pi(e,s,1);o&&o!==n?(r=s,n=o):r==="borderColor"&&(n=Pi(e,"borderTopColor"))}var a=new Hr(this._pt,e.style,r,0,1,yN),u=0,l=0,c,f,d,h,p,m,g,v,y,b,_,x;if(a.b=n,a.e=i,n+="",i+="",i==="auto"&&(m=e.style[r],e.style[r]=i,i=Pi(e,r)||i,m?e.style[r]=m:Zo(e,r)),c=[n,i],uN(c),n=c[0],i=c[1],d=n.match(Ha)||[],x=i.match(Ha)||[],x.length){for(;f=Ha.exec(i);)g=f[0],y=i.substring(u,f.index),p?p=(p+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(p=1),g!==(m=d[l++]||"")&&(h=parseFloat(m)||0,_=m.substr((h+"").length),g.charAt(1)==="="&&(g=pu(h,g)+_),v=parseFloat(g),b=g.substr((v+"").length),u=Ha.lastIndex-b.length,b||(b=b||un.units[r]||_,u===i.length&&(i+=b,a.e+=b)),_!==b&&(h=no(e,r,m,b)||0),a._pt={_next:a._pt,p:y||l===1?y:",",s:h,c:v-h,m:p&&p<4||r==="zIndex"?Math.round:0});a.c=u<i.length?i.substring(u,i.length):""}else a.r=r==="display"&&i==="none"?SN:xN;return L8.test(i)&&(a.e=0),this._pt=a,a},TP={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Aoe=function(e){var r=e.split(" "),n=r[0],i=r[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),r[0]=TP[n]||n,r[1]=TP[i]||i,r.join(" ")},Poe=function(e,r){if(r.tween&&r.tween._time===r.tween._dur){var n=r.t,i=n.style,s=r.u,o=n._gsap,a,u,l;if(s==="all"||s===!0)i.cssText="",u=1;else for(s=s.split(","),l=s.length;--l>-1;)a=s[l],as[a]&&(u=1,a=a==="transformOrigin"?Vr:ft),Zo(n,a);u&&(Zo(n,ft),o&&(o.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",Cf(n,1),o.uncache=1,wN(i)))}},Gp={clearProps:function(e,r,n,i,s){if(s.data!=="isFromStart"){var o=e._pt=new Hr(e._pt,r,n,0,0,Poe);return o.u=i,o.pr=-10,o.tween=s,e._props.push(n),1}}},Ef=[1,0,0,1,0,0],PN={},RN=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},AP=function(e){var r=Pi(e,ft);return RN(r)?Ef:r.substr(7).match(F8).map(wt)},Zw=function(e,r){var n=e._gsap||Lo(e),i=e.style,s=AP(e),o,a,u,l;return n.svg&&e.getAttribute("transform")?(u=e.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Ef:s):(s===Ef&&!e.offsetParent&&e!==mu&&!n.svg&&(u=i.display,i.display="block",o=e.parentNode,(!o||!e.offsetParent&&!e.getBoundingClientRect().width)&&(l=1,a=e.nextElementSibling,mu.appendChild(e)),s=AP(e),u?i.display=u:Zo(e,"display"),l&&(a?o.insertBefore(e,a):o?o.appendChild(e):mu.removeChild(e))),r&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Kb=function(e,r,n,i,s,o){var a=e._gsap,u=s||Zw(e,!0),l=a.xOrigin||0,c=a.yOrigin||0,f=a.xOffset||0,d=a.yOffset||0,h=u[0],p=u[1],m=u[2],g=u[3],v=u[4],y=u[5],b=r.split(" "),_=parseFloat(b[0])||0,x=parseFloat(b[1])||0,S,w,P,C;n?u!==Ef&&(w=h*g-p*m)&&(P=_*(g/w)+x*(-m/w)+(m*y-g*v)/w,C=_*(-p/w)+x*(h/w)-(h*y-p*v)/w,_=P,x=C):(S=TN(e),_=S.x+(~b[0].indexOf("%")?_/100*S.width:_),x=S.y+(~(b[1]||b[0]).indexOf("%")?x/100*S.height:x)),i||i!==!1&&a.smooth?(v=_-l,y=x-c,a.xOffset=f+(v*h+y*m)-v,a.yOffset=d+(v*p+y*g)-y):a.xOffset=a.yOffset=0,a.xOrigin=_,a.yOrigin=x,a.smooth=!!i,a.origin=r,a.originIsAbsolute=!!n,e.style[Vr]="0px 0px",o&&(Ms(o,a,"xOrigin",l,_),Ms(o,a,"yOrigin",c,x),Ms(o,a,"xOffset",f,a.xOffset),Ms(o,a,"yOffset",d,a.yOffset)),e.setAttribute("data-svg-origin",_+" "+x)},Cf=function(e,r){var n=e._gsap||new dN(e);if("x"in n&&!r&&!n.uncache)return n;var i=e.style,s=n.scaleX<0,o="px",a="deg",u=getComputedStyle(e),l=Pi(e,Vr)||"0",c,f,d,h,p,m,g,v,y,b,_,x,S,w,P,C,R,F,N,G,j,re,U,z,pe,ae,we,V,q,ie,ge,be;return c=f=d=m=g=v=y=b=_=0,h=p=1,n.svg=!!(e.getCTM&&AN(e)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(i[ft]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[ft]!=="none"?u[ft]:"")),i.scale=i.rotate=i.translate="none"),w=Zw(e,n.svg),n.svg&&(n.uncache?(pe=e.getBBox(),l=n.xOrigin-pe.x+"px "+(n.yOrigin-pe.y)+"px",z=""):z=!r&&e.getAttribute("data-svg-origin"),Kb(e,z||l,!!z||n.originIsAbsolute,n.smooth!==!1,w)),x=n.xOrigin||0,S=n.yOrigin||0,w!==Ef&&(F=w[0],N=w[1],G=w[2],j=w[3],c=re=w[4],f=U=w[5],w.length===6?(h=Math.sqrt(F*F+N*N),p=Math.sqrt(j*j+G*G),m=F||N?Ta(N,F)*Po:0,y=G||j?Ta(G,j)*Po+m:0,y&&(p*=Math.abs(Math.cos(y*gu))),n.svg&&(c-=x-(x*F+S*G),f-=S-(x*N+S*j))):(be=w[6],ie=w[7],we=w[8],V=w[9],q=w[10],ge=w[11],c=w[12],f=w[13],d=w[14],P=Ta(be,q),g=P*Po,P&&(C=Math.cos(-P),R=Math.sin(-P),z=re*C+we*R,pe=U*C+V*R,ae=be*C+q*R,we=re*-R+we*C,V=U*-R+V*C,q=be*-R+q*C,ge=ie*-R+ge*C,re=z,U=pe,be=ae),P=Ta(-G,q),v=P*Po,P&&(C=Math.cos(-P),R=Math.sin(-P),z=F*C-we*R,pe=N*C-V*R,ae=G*C-q*R,ge=j*R+ge*C,F=z,N=pe,G=ae),P=Ta(N,F),m=P*Po,P&&(C=Math.cos(P),R=Math.sin(P),z=F*C+N*R,pe=re*C+U*R,N=N*C-F*R,U=U*C-re*R,F=z,re=pe),g&&Math.abs(g)+Math.abs(m)>359.9&&(g=m=0,v=180-v),h=wt(Math.sqrt(F*F+N*N+G*G)),p=wt(Math.sqrt(U*U+be*be)),P=Ta(re,U),y=Math.abs(P)>2e-4?P*Po:0,_=ge?1/(ge<0?-ge:ge):0),n.svg&&(z=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!RN(Pi(e,ft)),z&&e.setAttribute("transform",z))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(h*=-1,y+=m<=0?180:-180,m+=m<=0?180:-180):(p*=-1,y+=y<=0?180:-180)),r=r||n.uncache,n.x=c-((n.xPercent=c&&(!r&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-c)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+o,n.y=f-((n.yPercent=f&&(!r&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-f)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+o,n.z=d+o,n.scaleX=wt(h),n.scaleY=wt(p),n.rotation=wt(m)+a,n.rotationX=wt(g)+a,n.rotationY=wt(v)+a,n.skewX=y+a,n.skewY=b+a,n.transformPerspective=_+o,(n.zOrigin=parseFloat(l.split(" ")[2])||!r&&n.zOrigin||0)&&(i[Vr]=zp(l)),n.xOffset=n.yOffset=0,n.force3D=un.force3D,n.renderTransform=n.svg?Ooe:CN?ON:Roe,n.uncache=0,n},zp=function(e){return(e=e.split(" "))[0]+" "+e[1]},ly=function(e,r,n){var i=dr(r);return wt(parseFloat(r)+parseFloat(no(e,"x",n+"px",i)))+i},Roe=function(e,r){r.z="0px",r.rotationY=r.rotationX="0deg",r.force3D=0,ON(e,r)},_o="0deg",ql="0px",bo=") ",ON=function(e,r){var n=r||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,u=n.z,l=n.rotation,c=n.rotationY,f=n.rotationX,d=n.skewX,h=n.skewY,p=n.scaleX,m=n.scaleY,g=n.transformPerspective,v=n.force3D,y=n.target,b=n.zOrigin,_="",x=v==="auto"&&e&&e!==1||v===!0;if(b&&(f!==_o||c!==_o)){var S=parseFloat(c)*gu,w=Math.sin(S),P=Math.cos(S),C;S=parseFloat(f)*gu,C=Math.cos(S),o=ly(y,o,w*C*-b),a=ly(y,a,-Math.sin(S)*-b),u=ly(y,u,P*C*-b+b)}g!==ql&&(_+="perspective("+g+bo),(i||s)&&(_+="translate("+i+"%, "+s+"%) "),(x||o!==ql||a!==ql||u!==ql)&&(_+=u!==ql||x?"translate3d("+o+", "+a+", "+u+") ":"translate("+o+", "+a+bo),l!==_o&&(_+="rotate("+l+bo),c!==_o&&(_+="rotateY("+c+bo),f!==_o&&(_+="rotateX("+f+bo),(d!==_o||h!==_o)&&(_+="skew("+d+", "+h+bo),(p!==1||m!==1)&&(_+="scale("+p+", "+m+bo),y.style[ft]=_||"translate(0, 0)"},Ooe=function(e,r){var n=r||this,i=n.xPercent,s=n.yPercent,o=n.x,a=n.y,u=n.rotation,l=n.skewX,c=n.skewY,f=n.scaleX,d=n.scaleY,h=n.target,p=n.xOrigin,m=n.yOrigin,g=n.xOffset,v=n.yOffset,y=n.forceCSS,b=parseFloat(o),_=parseFloat(a),x,S,w,P,C;u=parseFloat(u),l=parseFloat(l),c=parseFloat(c),c&&(c=parseFloat(c),l+=c,u+=c),u||l?(u*=gu,l*=gu,x=Math.cos(u)*f,S=Math.sin(u)*f,w=Math.sin(u-l)*-d,P=Math.cos(u-l)*d,l&&(c*=gu,C=Math.tan(l-c),C=Math.sqrt(1+C*C),w*=C,P*=C,c&&(C=Math.tan(c),C=Math.sqrt(1+C*C),x*=C,S*=C)),x=wt(x),S=wt(S),w=wt(w),P=wt(P)):(x=f,P=d,S=w=0),(b&&!~(o+"").indexOf("px")||_&&!~(a+"").indexOf("px"))&&(b=no(h,"x",o,"px"),_=no(h,"y",a,"px")),(p||m||g||v)&&(b=wt(b+p-(p*x+m*w)+g),_=wt(_+m-(p*S+m*P)+v)),(i||s)&&(C=h.getBBox(),b=wt(b+i/100*C.width),_=wt(_+s/100*C.height)),C="matrix("+x+","+S+","+w+","+P+","+b+","+_+")",h.setAttribute("transform",C),y&&(h.style[ft]=C)},Boe=function(e,r,n,i,s){var o=360,a=Kt(s),u=parseFloat(s)*(a&&~s.indexOf("rad")?Po:1),l=u-i,c=i+l+"deg",f,d;return a&&(f=s.split("_")[1],f==="short"&&(l%=o,l!==l%(o/2)&&(l+=l<0?o:-o)),f==="cw"&&l<0?l=(l+o*xP)%o-~~(l/o)*o:f==="ccw"&&l>0&&(l=(l-o*xP)%o-~~(l/o)*o)),e._pt=d=new Hr(e._pt,r,n,i,l,poe),d.e=c,d.u="deg",e._props.push(n),d},PP=function(e,r){for(var n in r)e[n]=r[n];return e},koe=function(e,r,n){var i=PP({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,a,u,l,c,f,d,h,p;i.svg?(l=n.getAttribute("transform"),n.setAttribute("transform",""),o[ft]=r,a=Cf(n,1),Zo(n,ft),n.setAttribute("transform",l)):(l=getComputedStyle(n)[ft],o[ft]=r,a=Cf(n,1),o[ft]=l);for(u in as)l=i[u],c=a[u],l!==c&&s.indexOf(u)<0&&(h=dr(l),p=dr(c),f=h!==p?no(n,u,l,p):parseFloat(l),d=parseFloat(c),e._pt=new Hr(e._pt,a,u,f,d-f,Xb),e._pt.u=p||0,e._props.push(u));PP(a,i)};jr("padding,margin,Width,Radius",function(t,e){var r="Top",n="Right",i="Bottom",s="Left",o=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map(function(a){return e<2?t+a:"border"+a+t});Gp[e>1?"border"+t:t]=function(a,u,l,c,f){var d,h;if(arguments.length<4)return d=o.map(function(p){return Hi(a,p,l)}),h=d.join(" "),h.split(d[0]).length===5?d[0]:h;d=(c+"").split(" "),h={},o.forEach(function(p,m){return h[p]=d[m]=d[m]||d[(m-1)/2|0]}),a.init(u,h,f)}});var BN={name:"css",register:Yb,targetTest:function(e){return e.style&&e.nodeType},init:function(e,r,n,i,s){var o=this._props,a=e.style,u=n.vars.startAt,l,c,f,d,h,p,m,g,v,y,b,_,x,S,w,P;qw||Yb(),this.styles=this.styles||EN(e),P=this.styles.props,this.tween=n;for(m in r)if(m!=="autoRound"&&(c=r[m],!(rn[m]&&hN(m,r,n,i,e,s)))){if(h=typeof c,p=Gp[m],h==="function"&&(c=c.call(n,i,e,s),h=typeof c),h==="string"&&~c.indexOf("random(")&&(c=xf(c)),p)p(this,e,m,c,n)&&(w=1);else if(m.substr(0,2)==="--")l=(getComputedStyle(e).getPropertyValue(m)+"").trim(),c+="",Ws.lastIndex=0,Ws.test(l)||(g=dr(l),v=dr(c)),v?g!==v&&(l=no(e,m,l,v)+v):g&&(c+=g),this.add(a,"setProperty",l,c,i,s,0,0,m),o.push(m),P.push(m,0,a[m]);else if(h!=="undefined"){if(u&&m in u?(l=typeof u[m]=="function"?u[m].call(n,i,e,s):u[m],Kt(l)&&~l.indexOf("random(")&&(l=xf(l)),dr(l+"")||l==="auto"||(l+=un.units[m]||dr(Hi(e,m))||""),(l+"").charAt(1)==="="&&(l=Hi(e,m))):l=Hi(e,m),d=parseFloat(l),y=h==="string"&&c.charAt(1)==="="&&c.substr(0,2),y&&(c=c.substr(2)),f=parseFloat(c),m in vi&&(m==="autoAlpha"&&(d===1&&Hi(e,"visibility")==="hidden"&&f&&(d=0),P.push("visibility",0,a.visibility),Ms(this,a,"visibility",d?"inherit":"hidden",f?"inherit":"hidden",!f)),m!=="scale"&&m!=="transform"&&(m=vi[m],~m.indexOf(",")&&(m=m.split(",")[0]))),b=m in as,b){if(this.styles.save(m),_||(x=e._gsap,x.renderTransform&&!r.parseTransform||Cf(e,r.parseTransform),S=r.smoothOrigin!==!1&&x.smooth,_=this._pt=new Hr(this._pt,a,ft,0,1,x.renderTransform,x,0,-1),_.dep=1),m==="scale")this._pt=new Hr(this._pt,x,"scaleY",x.scaleY,(y?pu(x.scaleY,y+f):f)-x.scaleY||0,Xb),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){P.push(Vr,0,a[Vr]),c=Aoe(c),x.svg?Kb(e,c,0,S,0,this):(v=parseFloat(c.split(" ")[2])||0,v!==x.zOrigin&&Ms(this,x,"zOrigin",x.zOrigin,v),Ms(this,a,m,zp(l),zp(c)));continue}else if(m==="svgOrigin"){Kb(e,c,1,S,0,this);continue}else if(m in PN){Boe(this,x,m,d,y?pu(d,y+c):c);continue}else if(m==="smoothOrigin"){Ms(this,x,"smooth",x.smooth,c);continue}else if(m==="force3D"){x[m]=c;continue}else if(m==="transform"){koe(this,c,e);continue}}else m in a||(m=Uu(m)||m);if(b||(f||f===0)&&(d||d===0)&&!hoe.test(c)&&m in a)g=(l+"").substr((d+"").length),f||(f=0),v=dr(c)||(m in un.units?un.units[m]:g),g!==v&&(d=no(e,m,l,v)),this._pt=new Hr(this._pt,b?x:a,m,d,(y?pu(d,y+f):f)-d,!b&&(v==="px"||m==="zIndex")&&r.autoRound!==!1?goe:Xb),this._pt.u=v||0,g!==v&&v!=="%"&&(this._pt.b=l,this._pt.r=moe);else if(m in a)Toe.call(this,e,m,l,y?y+c:c);else if(m in e)this.add(e,m,l||e[m],y?y+c:c,i,s);else if(m!=="parseTransform"){Uw(m,c);continue}b||(m in a?P.push(m,0,a[m]):typeof e[m]=="function"?P.push(m,2,e[m]()):P.push(m,1,l||e[m])),o.push(m)}}w&&_N(this)},render:function(e,r){if(r.tween._time||!Yw())for(var n=r._pt;n;)n.r(e,n.d),n=n._next;else r.styles.revert()},get:Hi,aliases:vi,getSetter:function(e,r,n){var i=vi[r];return i&&i.indexOf(",")<0&&(r=i),r in as&&r!==Vr&&(e._gsap.x||Hi(e,"x"))?n&&bP===n?r==="scale"?boe:_oe:(bP=n||{})&&(r==="scale"?xoe:Soe):e.style&&!Fw(e.style[r])?voe:~r.indexOf("-")?yoe:Ww(e,r)},core:{_removeProperty:Zo,_getMatrix:Zw}};Xr.utils.checkPrefix=Uu;Xr.core.getStyleSaver=EN;(function(t,e,r,n){var i=jr(t+","+e+","+r,function(s){as[s]=1});jr(e,function(s){un.units[s]="deg",PN[s]=1}),vi[i[13]]=t+","+e,jr(n,function(s){var o=s.split(":");vi[o[1]]=i[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");jr("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){un.units[t]="px"});Xr.registerPlugin(BN);var Doe=Xr.registerPlugin(BN)||Xr;Doe.core.Tween;function Moe(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}var Ioe=Moe,Foe=B8,Loe=Ioe,Noe=k8,Uoe=1,Goe=2;function zoe(t,e,r,n,i,s){var o=r&Uoe,a=t.length,u=e.length;if(a!=u&&!(o&&u>a))return!1;var l=s.get(t),c=s.get(e);if(l&&c)return l==e&&c==t;var f=-1,d=!0,h=r&Goe?new Foe:void 0;for(s.set(t,e),s.set(e,t);++f<a;){var p=t[f],m=e[f];if(n)var g=o?n(m,p,f,e,t,s):n(p,m,f,t,e,s);if(g!==void 0){if(g)continue;d=!1;break}if(h){if(!Loe(e,function(v,y){if(!Noe(h,y)&&(p===v||i(p,v,r,n,s)))return h.push(y)})){d=!1;break}}else if(!(p===m||i(p,m,r,n,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var kN=zoe;function $oe(t){var e=-1,r=Array(t.size);return t.forEach(function(n,i){r[++e]=[i,n]}),r}var joe=$oe,RP=Nf,OP=zk,Hoe=b1,Voe=kN,Woe=joe,Xoe=Mw,qoe=1,Yoe=2,Koe="[object Boolean]",Zoe="[object Date]",Qoe="[object Error]",Joe="[object Map]",eae="[object Number]",tae="[object RegExp]",rae="[object Set]",nae="[object String]",iae="[object Symbol]",sae="[object ArrayBuffer]",oae="[object DataView]",BP=RP?RP.prototype:void 0,cy=BP?BP.valueOf:void 0;function aae(t,e,r,n,i,s,o){switch(r){case oae:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case sae:return!(t.byteLength!=e.byteLength||!s(new OP(t),new OP(e)));case Koe:case Zoe:case eae:return Hoe(+t,+e);case Qoe:return t.name==e.name&&t.message==e.message;case tae:case nae:return t==e+"";case Joe:var a=Woe;case rae:var u=n&qoe;if(a||(a=Xoe),t.size!=e.size&&!u)return!1;var l=o.get(t);if(l)return l==e;n|=Yoe,o.set(t,e);var c=Voe(a(t),a(e),n,i,s,o);return o.delete(t),c;case iae:if(cy)return cy.call(t)==cy.call(e)}return!1}var uae=aae,kP=Lk,lae=1,cae=Object.prototype,fae=cae.hasOwnProperty;function dae(t,e,r,n,i,s){var o=r&lae,a=kP(t),u=a.length,l=kP(e),c=l.length;if(u!=c&&!o)return!1;for(var f=u;f--;){var d=a[f];if(!(o?d in e:fae.call(e,d)))return!1}var h=s.get(t),p=s.get(e);if(h&&p)return h==e&&p==t;var m=!0;s.set(t,e),s.set(e,t);for(var g=o;++f<u;){d=a[f];var v=t[d],y=e[d];if(n)var b=o?n(y,v,d,e,t,s):n(v,y,d,t,e,s);if(!(b===void 0?v===y||i(v,y,r,n,s):b)){m=!1;break}g||(g=d=="constructor")}if(m&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof x=="function"&&x instanceof x)&&(m=!1)}return s.delete(t),s.delete(e),m}var hae=dae,fy=w1,pae=kN,mae=uae,gae=hae,DP=_m,MP=fs,IP=C1,vae=Pk,yae=1,FP="[object Arguments]",LP="[object Array]",Qd="[object Object]",_ae=Object.prototype,NP=_ae.hasOwnProperty;function bae(t,e,r,n,i,s){var o=MP(t),a=MP(e),u=o?LP:DP(t),l=a?LP:DP(e);u=u==FP?Qd:u,l=l==FP?Qd:l;var c=u==Qd,f=l==Qd,d=u==l;if(d&&IP(t)){if(!IP(e))return!1;o=!0,c=!1}if(d&&!c)return s||(s=new fy),o||vae(t)?pae(t,e,r,n,i,s):mae(t,e,u,r,n,i,s);if(!(r&yae)){var h=c&&NP.call(t,"__wrapped__"),p=f&&NP.call(e,"__wrapped__");if(h||p){var m=h?t.value():t,g=p?e.value():e;return s||(s=new fy),i(m,g,r,n,s)}}return d?(s||(s=new fy),gae(t,e,r,n,i,s)):!1}var xae=bae,Sae=xae,UP=ia;function DN(t,e,r,n,i){return t===e?!0:t==null||e==null||!UP(t)&&!UP(e)?t!==t&&e!==e:Sae(t,e,r,n,DN,i)}var MN=DN,wae=w1,Eae=MN,Cae=1,Tae=2;function Aae(t,e,r,n){var i=r.length,s=i,o=!n;if(t==null)return!s;for(t=Object(t);i--;){var a=r[i];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<s;){a=r[i];var u=a[0],l=t[u],c=a[1];if(o&&a[2]){if(l===void 0&&!(u in t))return!1}else{var f=new wae;if(n)var d=n(l,c,u,t,e,f);if(!(d===void 0?Eae(c,l,Cae|Tae,n,f):d))return!1}}return!0}var Pae=Aae,Rae=Fi;function Oae(t){return t===t&&!Rae(t)}var IN=Oae,Bae=IN,kae=ym;function Dae(t){for(var e=kae(t),r=e.length;r--;){var n=e[r],i=t[n];e[r]=[n,i,Bae(i)]}return e}var Mae=Dae;function Iae(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var FN=Iae,Fae=Pae,Lae=Mae,Nae=FN;function Uae(t){var e=Lae(t);return e.length==1&&e[0][2]?Nae(e[0][0],e[0][1]):function(r){return r===t||Fae(r,t,e)}}var Gae=Uae,zae=Uf,$ae=ia,jae="[object Symbol]";function Hae(t){return typeof t=="symbol"||$ae(t)&&zae(t)==jae}var _g=Hae,Vae=fs,Wae=_g,Xae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qae=/^\w*$/;function Yae(t,e){if(Vae(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Wae(t)?!0:qae.test(t)||!Xae.test(t)||e!=null&&t in Object(e)}var Qw=Yae,LN=S1,Kae="Expected a function";function Jw(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Kae);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=t.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Jw.Cache||LN),r}Jw.Cache=LN;var Zae=Jw,Qae=Zae,Jae=500;function eue(t){var e=Qae(t,function(n){return r.size===Jae&&r.clear(),n}),r=e.cache;return e}var tue=eue,rue=tue,nue=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,iue=/\\(\\)?/g,sue=rue(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(nue,function(r,n,i,s){e.push(i?s.replace(iue,"$1"):n||r)}),e}),oue=sue;function aue(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}var NN=aue,GP=Nf,uue=NN,lue=fs,cue=_g,fue=1/0,zP=GP?GP.prototype:void 0,$P=zP?zP.toString:void 0;function UN(t){if(typeof t=="string")return t;if(lue(t))return uue(t,UN)+"";if(cue(t))return $P?$P.call(t):"";var e=t+"";return e=="0"&&1/t==-fue?"-0":e}var due=UN,hue=due;function pue(t){return t==null?"":hue(t)}var mue=pue,gue=fs,vue=Qw,yue=oue,_ue=mue;function bue(t,e){return gue(t)?t:vue(t,e)?[t]:yue(_ue(t))}var bg=bue,xue=_g,Sue=1/0;function wue(t){if(typeof t=="string"||xue(t))return t;var e=t+"";return e=="0"&&1/t==-Sue?"-0":e}var rd=wue,Eue=bg,Cue=rd;function Tue(t,e){e=Eue(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[Cue(e[r++])];return r&&r==n?t:void 0}var e3=Tue,Aue=e3;function Pue(t,e,r){var n=t==null?void 0:Aue(t,e);return n===void 0?r:n}var GN=Pue;const W0e=Zt(GN);function Rue(t,e){return t!=null&&e in Object(t)}var Oue=Rue,Bue=bg,kue=Ak,Due=fs,Mue=T1,Iue=A1,Fue=rd;function Lue(t,e,r){e=Bue(e,t);for(var n=-1,i=e.length,s=!1;++n<i;){var o=Fue(e[n]);if(!(s=t!=null&&r(t,o)))break;t=t[o]}return s||++n!=i?s:(i=t==null?0:t.length,!!i&&Iue(i)&&Mue(o,i)&&(Due(t)||kue(t)))}var Nue=Lue,Uue=Oue,Gue=Nue;function zue(t,e){return t!=null&&Gue(t,e,Uue)}var $ue=zue,jue=MN,Hue=GN,Vue=$ue,Wue=Qw,Xue=IN,que=FN,Yue=rd,Kue=1,Zue=2;function Que(t,e){return Wue(t)&&Xue(e)?que(Yue(t),e):function(r){var n=Hue(r,t);return n===void 0&&n===e?Vue(r,t):jue(e,n,Kue|Zue)}}var Jue=Que;function ele(t){return t}var tle=ele;function rle(t){return function(e){return e==null?void 0:e[t]}}var nle=rle,ile=e3;function sle(t){return function(e){return ile(e,t)}}var ole=sle,ale=nle,ule=ole,lle=Qw,cle=rd;function fle(t){return lle(t)?ale(cle(t)):ule(t)}var dle=fle,hle=Gae,ple=Jue,mle=tle,gle=fs,vle=dle;function yle(t){return typeof t=="function"?t:t==null?mle:typeof t=="object"?gle(t)?ple(t[0],t[1]):hle(t):vle(t)}var zN=yle,_le="Expected a function";function ble(t){if(typeof t!="function")throw new TypeError(_le);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var xle=ble,Sle=E1,wle=bg,Ele=T1,jP=Fi,Cle=rd;function Tle(t,e,r,n){if(!jP(t))return t;e=wle(e,t);for(var i=-1,s=e.length,o=s-1,a=t;a!=null&&++i<s;){var u=Cle(e[i]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(i!=o){var c=a[u];l=n?n(c,u,a):void 0,l===void 0&&(l=jP(c)?c:Ele(e[i+1])?[]:{})}Sle(a,u,l),a=a[u]}return t}var Ale=Tle,Ple=e3,Rle=Ale,Ole=bg;function Ble(t,e,r){for(var n=-1,i=e.length,s={};++n<i;){var o=e[n],a=Ple(t,o);r(a,o)&&Rle(s,Ole(o,t),a)}return s}var kle=Ble,Dle=NN,Mle=zN,Ile=kle,Fle=Nk;function Lle(t,e){if(t==null)return{};var r=Dle(Fle(t),function(n){return[n]});return e=Mle(e),Ile(t,r,function(n,i){return e(n,i[0])})}var Nle=Lle,Ule=zN,Gle=xle,zle=Nle;function $le(t,e){return zle(t,Gle(Ule(e)))}var jle=$le;const X0e=Zt(jle);function Hle(t){return t===void 0}var Vle=Hle;const q0e=Zt(Vle);let Jd;const Wle=new Uint8Array(16);function Xle(){if(!Jd&&(Jd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jd(Wle)}const Jt=[];for(let t=0;t<256;++t)Jt.push((t+256).toString(16).slice(1));function qle(t,e=0){return Jt[t[e+0]]+Jt[t[e+1]]+Jt[t[e+2]]+Jt[t[e+3]]+"-"+Jt[t[e+4]]+Jt[t[e+5]]+"-"+Jt[t[e+6]]+Jt[t[e+7]]+"-"+Jt[t[e+8]]+Jt[t[e+9]]+"-"+Jt[t[e+10]]+Jt[t[e+11]]+Jt[t[e+12]]+Jt[t[e+13]]+Jt[t[e+14]]+Jt[t[e+15]]}const Yle=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),HP={randomUUID:Yle};function Y0e(t,e,r){if(HP.randomUUID&&!e&&!t)return HP.randomUUID();t=t||{};const n=t.random||(t.rng||Xle)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return qle(n)}var Nn=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,Un=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,Kle=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uSize;
uniform vec3 uColor;
uniform float uReplaceColor;

uniform vec4 uInputSize;

vec2 mapCoord( vec2 coord )
{
    coord *= uInputSize.xy;
    coord += uInputSize.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= uInputSize.zw;
    coord /= uInputSize.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor(coord / size) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod(coord, size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, 4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the grid position
    vec2 pixCoord = pixelate(coord, vec2(uSize));
    pixCoord = unmapCoord(pixCoord);

    // sample the color at grid position
    vec4 color = texture(uTexture, pixCoord);

    // brightness of the color as it's perceived by the human eye
    float gray = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;

    // determine the character to use
    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(uSize));

    finalColor = (uReplaceColor > 0.5 ? vec4(uColor, 1.) : color) * character( n, vec2(-1.0) + modd * 2.0);
}
`,Zle=`struct AsciiUniforms {
    uSize: f32,
    uColor: vec3<f32>,
    uReplaceColor: f32,
};

struct GlobalFilterUniforms {
    uInputSize:vec4<f32>,
    uInputPixel:vec4<f32>,
    uInputClamp:vec4<f32>,
    uOutputFrame:vec4<f32>,
    uGlobalFrame:vec4<f32>,
    uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> asciiUniforms : AsciiUniforms;

@fragment
fn mainFragment(
    @location(0) uv: vec2<f32>,
    @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
    let pixelSize: f32 = asciiUniforms.uSize;
    let coord: vec2<f32> = mapCoord(uv);

    // get the rounded color..
    var pixCoord: vec2<f32> = pixelate(coord, vec2<f32>(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    var color = textureSample(uTexture, uSampler, pixCoord);

    // determine the character to use
    let gray: f32 = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;
    
    var n: f32 = 65536.0; // .
    if (gray > 0.2) {
        n = 65600.0;    // :
    }
    if (gray > 0.3) {
        n = 332772.0;   // *
    }
    if (gray > 0.4) {
        n = 15255086.0; // o
    }
    if (gray > 0.5) {
        n = 23385164.0; // &
    }
    if (gray > 0.6) {
        n = 15252014.0; // 8
    }
    if (gray > 0.7) {
        n = 13199452.0; // @
    }
    if (gray > 0.8) {
        n = 11512810.0; // #
    }

    // get the mod..
    let modd: vec2<f32> = getMod(coord, vec2<f32>(pixelSize));
    return select(color, vec4<f32>(asciiUniforms.uColor, 1.), asciiUniforms.uReplaceColor > 0.5) * character(n, vec2<f32>(-1.0) + modd * 2.0);
}

fn pixelate(coord: vec2<f32>, size: vec2<f32>) -> vec2<f32>
{
    return floor( coord / size ) * size;
}

fn getMod(coord: vec2<f32>, size: vec2<f32>) -> vec2<f32>
{
    return moduloVec2( coord , size) / size;
}

fn character(n: f32, p: vec2<f32>) -> f32
{
    var q: vec2<f32> = floor(p*vec2<f32>(4.0, 4.0) + 2.5);

    if (clamp(q.x, 0.0, 4.0) == q.x)
    {
        if (clamp(q.y, 0.0, 4.0) == q.y)
        {
        if (i32(modulo(n/exp2(q.x + 5.0*q.y), 2.0)) == 1)
        {
            return 1.0;
        }
        }
    }

    return 0.0;
}

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

fn moduloVec2(x: vec2<f32>, y: vec2<f32>) -> vec2<f32>
{
  return x - y * floor(x/y);
}

fn mapCoord(coord: vec2<f32> ) -> vec2<f32>
{
    var mappedCoord: vec2<f32> = coord;
    mappedCoord *= gfu.uInputSize.xy;
    mappedCoord += gfu.uOutputFrame.xy;
    return mappedCoord;
}

fn unmapCoord(coord: vec2<f32> ) -> vec2<f32>
{
    var mappedCoord: vec2<f32> = coord;
    mappedCoord -= gfu.uOutputFrame.xy;
    mappedCoord /= gfu.uInputSize.xy;
    return mappedCoord;
}`,Qle=Object.defineProperty,Jle=(t,e,r)=>e in t?Qle(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Zb=(t,e,r)=>(Jle(t,typeof e!="symbol"?e+"":e,r),r);const $N=class jN extends Rt{constructor(...e){let r=e[0]??{};typeof r=="number"&&(oe("6.0.0","AsciiFilter constructor params are now options object. See params: { size, color, replaceColor }"),r={size:r});const n=(r==null?void 0:r.color)&&r.replaceColor!==!1;r={...jN.DEFAULT_OPTIONS,...r};const i=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Zle,entryPoint:"mainFragment"}}),s=et.from({vertex:Nn,fragment:Kle,name:"ascii-filter"});super({gpuProgram:i,glProgram:s,resources:{asciiUniforms:{uSize:{value:r.size,type:"f32"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uReplaceColor:{value:Number(n),type:"f32"}}}}),Zb(this,"uniforms"),Zb(this,"_color"),this.uniforms=this.resources.asciiUniforms.uniforms,this._color=new Re,this.color=r.color??16777215}get size(){return this.uniforms.uSize}set size(e){this.uniforms.uSize=e}get color(){return this._color.value}set color(e){this._color.setValue(e);const[r,n,i]=this._color.toArray();this.uniforms.uColor[0]=r,this.uniforms.uColor[1]=n,this.uniforms.uColor[2]=i}get replaceColor(){return this.uniforms.uReplaceColor>.5}set replaceColor(e){this.uniforms.uReplaceColor=e?1:0}};Zb($N,"DEFAULT_OPTIONS",{size:8,color:16777215,replaceColor:!1});let K0e=$N;var ece=`in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec3 uColor;
uniform float uAlpha;

void main(void) {
    vec4 c = texture(uTexture, vTextureCoord);
    finalColor = vec4(mix(c.rgb, uColor * c.a, uAlpha), c.a);
}`,tce=`struct ColorOverlayUniforms {
    uColor: vec3<f32>,
    uAlpha: f32,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>;
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> colorOverlayUniforms : ColorOverlayUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    let c = textureSample(uTexture, uSampler, uv);
    return vec4<f32>(mix(c.rgb, colorOverlayUniforms.uColor.rgb * c.a, colorOverlayUniforms.uAlpha), c.a);
}
`,rce=Object.defineProperty,nce=(t,e,r)=>e in t?rce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qb=(t,e,r)=>(nce(t,typeof e!="symbol"?e+"":e,r),r);const HN=class VN extends Rt{constructor(...e){let r=e[0]??{};(typeof r=="number"||Array.isArray(r)||r instanceof Float32Array)&&(oe("6.0.0","ColorOverlayFilter constructor params are now options object. See params: { color, alpha }"),r={color:r},e[1]!==void 0&&(r.alpha=e[1])),r={...VN.DEFAULT_OPTIONS,...r};const n=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:tce,entryPoint:"mainFragment"}}),i=et.from({vertex:Nn,fragment:ece,name:"color-overlay-filter"});super({gpuProgram:n,glProgram:i,resources:{colorOverlayUniforms:{uColor:{value:new Float32Array(3),type:"vec3<f32>"},uAlpha:{value:r.alpha,type:"f32"}}}}),Qb(this,"uniforms"),Qb(this,"_color"),this.uniforms=this.resources.colorOverlayUniforms.uniforms,this._color=new Re,this.color=r.color??0}get color(){return this._color.value}set color(e){this._color.setValue(e);const[r,n,i]=this._color.toArray();this.uniforms.uColor[0]=r,this.uniforms.uColor[1]=n,this.uniforms.uColor[2]=i}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};Qb(HN,"DEFAULT_OPTIONS",{color:0,alpha:1});let Z0e=HN;var ice=`in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uTexelSize;
uniform mat3 uMatrix;

void main(void)
{
    vec4 c11 = texture(uTexture, vTextureCoord - uTexelSize); // top left
    vec4 c12 = texture(uTexture, vec2(vTextureCoord.x, vTextureCoord.y - uTexelSize.y)); // top center
    vec4 c13 = texture(uTexture, vec2(vTextureCoord.x + uTexelSize.x, vTextureCoord.y - uTexelSize.y)); // top right

    vec4 c21 = texture(uTexture, vec2(vTextureCoord.x - uTexelSize.x, vTextureCoord.y)); // mid left
    vec4 c22 = texture(uTexture, vTextureCoord); // mid center
    vec4 c23 = texture(uTexture, vec2(vTextureCoord.x + uTexelSize.x, vTextureCoord.y)); // mid right

    vec4 c31 = texture(uTexture, vec2(vTextureCoord.x - uTexelSize.x, vTextureCoord.y + uTexelSize.y)); // bottom left
    vec4 c32 = texture(uTexture, vec2(vTextureCoord.x, vTextureCoord.y + uTexelSize.y)); // bottom center
    vec4 c33 = texture(uTexture, vTextureCoord + uTexelSize); // bottom right

    finalColor =
        c11 * uMatrix[0][0] + c12 * uMatrix[0][1] + c13 * uMatrix[0][2] +
        c21 * uMatrix[1][0] + c22 * uMatrix[1][1] + c23 * uMatrix[1][2] +
        c31 * uMatrix[2][0] + c32 * uMatrix[2][1] + c33 * uMatrix[2][2];

    finalColor.a = c22.a;
}`,sce=`struct ConvolutionUniforms {
    uMatrix: mat3x3<f32>,
    uTexelSize: vec2<f32>,
};

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> convolutionUniforms : ConvolutionUniforms;

@fragment
fn mainFragment(
    @location(0) uv: vec2<f32>,
    @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
    let texelSize = convolutionUniforms.uTexelSize;
    let matrix = convolutionUniforms.uMatrix;

    let c11: vec4<f32> = textureSample(uTexture, uSampler, uv - texelSize); // top left
    let c12: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x, uv.y - texelSize.y)); // top center
    let c13: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x + texelSize.x, uv.y - texelSize.y)); // top right

    let c21: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x - texelSize.x, uv.y)); // mid left
    let c22: vec4<f32> = textureSample(uTexture, uSampler, uv); // mid center
    let c23: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x + texelSize.x, uv.y)); // mid right

    let c31: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x - texelSize.x, uv.y + texelSize.y)); // bottom left
    let c32: vec4<f32> = textureSample(uTexture, uSampler, vec2<f32>(uv.x, uv.y + texelSize.y)); // bottom center
    let c33: vec4<f32> = textureSample(uTexture, uSampler, uv + texelSize); // bottom right

    var finalColor: vec4<f32> = vec4<f32>(
        c11 * matrix[0][0] + c12 * matrix[0][1] + c13 * matrix[0][2] +
        c21 * matrix[1][0] + c22 * matrix[1][1] + c23 * matrix[1][2] +
        c31 * matrix[2][0] + c32 * matrix[2][1] + c33 * matrix[2][2]
    );

    finalColor.a = c22.a;

    return finalColor;
}`,oce=Object.defineProperty,ace=(t,e,r)=>e in t?oce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,WN=(t,e,r)=>(ace(t,typeof e!="symbol"?e+"":e,r),r);const XN=class qN extends Rt{constructor(...e){let r=e[0]??{};Array.isArray(r)&&(oe("6.0.0","ConvolutionFilter constructor params are now options object. See params: { matrix, width, height }"),r={matrix:r},e[1]!==void 0&&(r.width=e[1]),e[2]!==void 0&&(r.height=e[2])),r={...qN.DEFAULT_OPTIONS,...r};const n=r.width??200,i=r.height??200,s=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:sce,entryPoint:"mainFragment"}}),o=et.from({vertex:Nn,fragment:ice,name:"convolution-filter"});super({gpuProgram:s,glProgram:o,resources:{convolutionUniforms:{uMatrix:{value:r.matrix,type:"mat3x3<f32>"},uTexelSize:{value:{x:1/n,y:1/i},type:"vec2<f32>"}}}}),WN(this,"uniforms"),this.uniforms=this.resources.convolutionUniforms.uniforms,this.width=n,this.height=i}get matrix(){return this.uniforms.uMatrix}set matrix(e){e.forEach((r,n)=>{this.uniforms.uMatrix[n]=r})}get width(){return 1/this.uniforms.uTexelSize.x}set width(e){this.uniforms.uTexelSize.x=1/e}get height(){return 1/this.uniforms.uTexelSize.y}set height(e){this.uniforms.uTexelSize.y=1/e}};WN(XN,"DEFAULT_OPTIONS",{matrix:new Float32Array(9),width:200,height:200});let Q0e=XN;var uce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec4 uLine;
uniform vec2 uNoise;
uniform vec3 uVignette;
uniform float uSeed;
uniform float uTime;
uniform vec2 uDimensions;

uniform vec4 uInputSize;

const float SQRT_2 = 1.414213;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float vignette(vec3 co, vec2 coord)
{
    float outter = SQRT_2 - uVignette[0] * SQRT_2;
    vec2 dir = vec2(0.5) - coord;
    dir.y *= uDimensions.y / uDimensions.x;
    float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);
    return darker + (1.0 - darker) * (1.0 - uVignette[1]);
}

float noise(vec2 coord)
{
    vec2 pixelCoord = coord * uInputSize.xy;
    pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
    pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
    return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}

vec3 interlaceLines(vec3 co, vec2 coord)
{
    vec3 color = co;

    float curvature = uLine[0];
    float lineWidth = uLine[1];
    float lineContrast = uLine[2];
    float verticalLine = uLine[3];

    vec2 dir = vec2(coord * uInputSize.xy / uDimensions - 0.5);

    float _c = curvature > 0. ? curvature : 1.;
    float k = curvature > 0. ? (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
    vec2 uv = dir * k;
    float v = verticalLine > 0.5 ? uv.x * uDimensions.x : uv.y * uDimensions.y;
    v *= min(1.0, 2.0 / lineWidth ) / _c;
    float j = 1. + cos(v * 1.2 - uTime) * 0.5 * lineContrast;
    color *= j;

    float segment = verticalLine > 0.5 ? mod((dir.x + .5) * uDimensions.x, 4.) : mod((dir.y + .5) * uDimensions.y, 4.);
    color *= 0.99 + ceil(segment) * 0.015;

    return color;
}

void main(void)
{
    finalColor = texture(uTexture, vTextureCoord);
    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions;

    if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
    {
        float n = noise(vTextureCoord);
        finalColor += vec4(n, n, n, finalColor.a);
    }

    if (uVignette[0] > 0.)
    {
        float v = vignette(finalColor.rgb, coord);
        finalColor *= vec4(v, v, v, finalColor.a);
    }

    if (uLine[1] > 0.0)
    {
        finalColor = vec4(interlaceLines(finalColor.rgb, vTextureCoord), finalColor.a);  
    }
}
`,lce=`struct CRTUniforms {
    uLine: vec4<f32>,
    uNoise: vec2<f32>,
    uVignette: vec3<f32>,
    uSeed: f32,
    uTime: f32,
    uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> crtUniforms : CRTUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let coord: vec2<f32> = uv * gfu.uInputSize.xy / crtUniforms.uDimensions;

  let uNoise = crtUniforms.uNoise;

  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
  {
    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);
  }

  if (crtUniforms.uVignette[0] > 0.)
  {
    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);
  }

  if (crtUniforms.uLine[1] > 0.0)
  {
    color = vec4<f32>(vec3<f32>(interlaceLines(color.rgb, uv)), color.a);  
  }

  return color;
}

const SQRT_2: f32 = 1.414213;

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

fn rand(co: vec2<f32>) -> f32
{
  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);
}

fn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32
{
  let uVignette = crtUniforms.uVignette;
  let uDimensions = crtUniforms.uDimensions;
  
  let outter: f32 = SQRT_2 - uVignette[0] * SQRT_2;
  var dir: vec2<f32> = vec2<f32>(0.5) - coord;
  dir.y *= uDimensions.y / uDimensions.x;
  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignette[2] * SQRT_2), 0.0, 1.0);
  return darker + (1.0 - darker) * (1.0 - uVignette[1]);
}

fn noise(coord: vec2<f32>) -> f32
{
  let uNoise = crtUniforms.uNoise;
  let uSeed = crtUniforms.uSeed;

  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;
  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}

fn interlaceLines(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>
{
  var color = co;

  let uDimensions = crtUniforms.uDimensions;

  let curvature: f32 = crtUniforms.uLine[0];
  let lineWidth: f32 = crtUniforms.uLine[1];
  let lineContrast: f32 = crtUniforms.uLine[2];
  let verticalLine: f32 = crtUniforms.uLine[3];

  let dir: vec2<f32> = vec2<f32>(coord * gfu.uInputSize.xy / uDimensions - 0.5);

  let _c: f32 = select(1., curvature, curvature > 0.);
  let k: f32 = select(1., (length(dir * dir) * 0.25 * _c * _c + 0.935 * _c), curvature > 0.);
  let uv: vec2<f32> = dir * k;
  let v: f32 = select(uv.y * uDimensions.y, uv.x * uDimensions.x, verticalLine > 0.5) * min(1.0, 2.0 / lineWidth ) / _c;
  let j: f32 = 1. + cos(v * 1.2 - crtUniforms.uTime) * 0.5 * lineContrast;
  color *= j;

  let segment: f32 = select(modulo((dir.y + .5) * uDimensions.y, 4.), modulo((dir.x + .5) * uDimensions.x, 4.), verticalLine > 0.5);
  color *= 0.99 + ceil(segment) * 0.015;

  return color;
}`,cce=Object.defineProperty,fce=(t,e,r)=>e in t?cce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Bh=(t,e,r)=>(fce(t,typeof e!="symbol"?e+"":e,r),r);const YN=class KN extends Rt{constructor(e){e={...KN.DEFAULT_OPTIONS,...e};const r=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:lce,entryPoint:"mainFragment"}}),n=et.from({vertex:Nn,fragment:uce,name:"crt-filter"});super({gpuProgram:r,glProgram:n,resources:{crtUniforms:{uLine:{value:new Float32Array(4),type:"vec4<f32>"},uNoise:{value:new Float32Array(2),type:"vec2<f32>"},uVignette:{value:new Float32Array(3),type:"vec3<f32>"},uSeed:{value:e.seed,type:"f32"},uTime:{value:e.time,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),Bh(this,"uniforms"),Bh(this,"seed"),Bh(this,"time"),this.uniforms=this.resources.crtUniforms.uniforms,Object.assign(this,e)}apply(e,r,n,i){this.uniforms.uDimensions[0]=r.frame.width,this.uniforms.uDimensions[1]=r.frame.height,this.uniforms.uSeed=this.seed,this.uniforms.uTime=this.time,e.applyFilter(this,r,n,i)}get curvature(){return this.uniforms.uLine[0]}set curvature(e){this.uniforms.uLine[0]=e}get lineWidth(){return this.uniforms.uLine[1]}set lineWidth(e){this.uniforms.uLine[1]=e}get lineContrast(){return this.uniforms.uLine[2]}set lineContrast(e){this.uniforms.uLine[2]=e}get verticalLine(){return this.uniforms.uLine[3]>.5}set verticalLine(e){this.uniforms.uLine[3]=e?1:0}get noise(){return this.uniforms.uNoise[0]}set noise(e){this.uniforms.uNoise[0]=e}get noiseSize(){return this.uniforms.uNoise[1]}set noiseSize(e){this.uniforms.uNoise[1]=e}get vignetting(){return this.uniforms.uVignette[0]}set vignetting(e){this.uniforms.uVignette[0]=e}get vignettingAlpha(){return this.uniforms.uVignette[1]}set vignettingAlpha(e){this.uniforms.uVignette[1]=e}get vignettingBlur(){return this.uniforms.uVignette[2]}set vignettingBlur(e){this.uniforms.uVignette[2]=e}};Bh(YN,"DEFAULT_OPTIONS",{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0,seed:0});let J0e=YN;var dce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uAngle;
uniform float uScale;
uniform bool uGrayScale;

uniform vec4 uInputSize;

float pattern()
{
    float s = sin(uAngle), c = cos(uAngle);
    vec2 tex = vTextureCoord * uInputSize.xy;
    vec2 point = vec2(
        c * tex.x - s * tex.y,
        s * tex.x + c * tex.y
    ) * uScale;
    return (sin(point.x) * sin(point.y)) * 4.0;
    }

    void main()
    {
    vec4 color = texture(uTexture, vTextureCoord);
    vec3 colorRGB = vec3(color);

    if (uGrayScale)
    {
        colorRGB = vec3(color.r + color.g + color.b) / 3.0;
    }

    finalColor = vec4(colorRGB * 10.0 - 5.0 + pattern(), color.a);
}
`,hce=`struct DotUniforms {
  uScale:f32,
  uAngle:f32,
  uGrayScale:f32,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> dotUniforms : DotUniforms;

@fragment
fn mainFragment(
  @location(0) uv: vec2<f32>,
  @builtin(position) position: vec4<f32>
) -> @location(0) vec4<f32> {
  let color: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let gray: vec3<f32> = vec3<f32>(dot(color.rgb, vec3<f32>(0.299, 0.587, 0.114)));
  // dotUniforms.uGrayScale == 1 doesn't ever pass so it is converted to a float and compared to 0.5 instead 
  let finalColor: vec3<f32> = select(color.rgb, gray, f32(dotUniforms.uGrayScale) >= 0.5);

  return vec4<f32>(finalColor * 10.0 - 5.0 + pattern(uv), color.a);
}

fn pattern(uv: vec2<f32>) -> f32
{
  let s: f32 = sin(dotUniforms.uAngle);
  let c: f32 = cos(dotUniforms.uAngle);
  
  let tex: vec2<f32> = uv * gfu.uInputSize.xy;
  
  let p: vec2<f32> = vec2<f32>(
      c * tex.x - s * tex.y,
      s * tex.x + c * tex.y
  ) * dotUniforms.uScale;

  return (sin(p.x) * sin(p.y)) * 4.0;
}`,pce=Object.defineProperty,mce=(t,e,r)=>e in t?pce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gce=(t,e,r)=>(mce(t,typeof e!="symbol"?e+"":e,r),r);const ZN=class QN extends Rt{constructor(...e){let r=e[0]??{};typeof r=="number"&&(oe("6.0.0","DotFilter constructor params are now options object. See params: { scale, angle, grayscale }"),r={scale:r},e[1]!==void 0&&(r.angle=e[1]),e[2]!==void 0&&(r.grayscale=e[2])),r={...QN.DEFAULT_OPTIONS,...r};const n={uScale:{value:r.scale,type:"f32"},uAngle:{value:r.angle,type:"f32"},uGrayScale:{value:r.grayscale?1:0,type:"f32"}},i=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:hce,entryPoint:"mainFragment"}}),s=et.from({vertex:Nn,fragment:dce,name:"dot-filter"});super({gpuProgram:i,glProgram:s,resources:{dotUniforms:n}})}get scale(){return this.resources.dotUniforms.uniforms.uScale}set scale(e){this.resources.dotUniforms.uniforms.uScale=e}get angle(){return this.resources.dotUniforms.uniforms.uAngle}set angle(e){this.resources.dotUniforms.uniforms.uAngle=e}get grayscale(){return this.resources.dotUniforms.uniforms.uGrayScale===1}set grayscale(e){this.resources.dotUniforms.uniforms.uGrayScale=e?1:0}};gce(ZN,"DEFAULT_OPTIONS",{scale:1,angle:5,grayscale:!0});let eye=ZN;var vce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform sampler2D uDisplacementMap;
uniform float uSeed;
uniform vec2 uDimensions;
uniform float uAspect;
uniform float uFillMode;
uniform float uOffset;
uniform float uDirection;
uniform vec2 uRed;
uniform vec2 uGreen;
uniform vec2 uBlue;

uniform vec4 uInputSize;
uniform vec4 uInputClamp;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * uInputSize.xy) / uDimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float sinDir = sin(uDirection);
    float cosDir = cos(uDirection);

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * uAspect;
    float ny = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture(uDisplacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (uOffset / uInputSize.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * uAspect);

    int fillMode = int(uFillMode);

    if (fillMode == CLAMP) {
        coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);
    } else {
        if( coord.x > uInputClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= uInputClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = uInputClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < uInputClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += uInputClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -uInputClamp.z;
            }
        }

        if( coord.y > uInputClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= uInputClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = uInputClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < uInputClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += uInputClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -uInputClamp.w;
            }
        }
    }

    finalColor.r = texture(uTexture, coord + uRed * (1.0 - uSeed * 0.4) / uInputSize.xy).r;
    finalColor.g = texture(uTexture, coord + uGreen * (1.0 - uSeed * 0.3) / uInputSize.xy).g;
    finalColor.b = texture(uTexture, coord + uBlue * (1.0 - uSeed * 0.2) / uInputSize.xy).b;
    finalColor.a = texture(uTexture, coord).a;
}
`,yce=`struct GlitchUniforms {
  uSeed: f32,
  uDimensions: vec2<f32>,
  uAspect: f32,
  uFillMode: f32,
  uOffset: f32,
  uDirection: f32,
  uRed: vec2<f32>,
  uGreen: vec2<f32>,
  uBlue: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> glitchUniforms : GlitchUniforms;
@group(1) @binding(1) var uDisplacementMap: texture_2d<f32>; 
@group(1) @binding(2) var uDisplacementSampler: sampler; 

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uSeed: f32 = glitchUniforms.uSeed;
  let uDimensions: vec2<f32> = glitchUniforms.uDimensions;
  let uAspect: f32 = glitchUniforms.uAspect;
  let uOffset: f32 = glitchUniforms.uOffset;
  let uDirection: f32 = glitchUniforms.uDirection;
  let uRed: vec2<f32> = glitchUniforms.uRed;
  let uGreen: vec2<f32> = glitchUniforms.uGreen;
  let uBlue: vec2<f32> = glitchUniforms.uBlue;

  let uInputSize: vec4<f32> = gfu.uInputSize;
  let uInputClamp: vec4<f32> = gfu.uInputClamp;

  var discarded: bool = false;
  var coord: vec2<f32> = (uv * uInputSize.xy) / uDimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
      discarded = true;
    }

    let sinDir: f32 = sin(uDirection);
    let cosDir: f32 = cos(uDirection);

    let cx: f32 = coord.x - 0.5;
    let cy: f32 = (coord.y - 0.5) * uAspect;
    var ny: f32 = (-sinDir * cx + cosDir * cy) / uAspect + 0.5;

    ny = select(select(ny, -ny, ny < 0.0), 2.0 - ny, ny > 1.0);

    let dc: vec4<f32> = textureSample(uDisplacementMap, uDisplacementSampler, vec2<f32>(0.5, ny));

    let displacement: f32 = (dc.r - dc.g) * (uOffset / uInputSize.x);

    coord = uv + vec2<f32>(cosDir * displacement, sinDir * displacement * uAspect);

    let fillMode: i32 = i32(glitchUniforms.uFillMode);

    if (fillMode == CLAMP) {
      coord = clamp(coord, uInputClamp.xy, uInputClamp.zw);
    } else {
      if (coord.x > uInputClamp.z) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.x = coord.x - uInputClamp.z;
        } else if (fillMode == MIRROR) {
          coord.x = uInputClamp.z * 2.0 - coord.x;
        }
      } else if (coord.x < uInputClamp.x) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.x = coord.x + uInputClamp.z;
        } else if (fillMode == MIRROR) {
          coord.x = coord.x * -uInputClamp.z;
        }
      }

      if (coord.y > uInputClamp.w) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.y = coord.y - uInputClamp.w;
        } else if (fillMode == MIRROR) {
          coord.y = uInputClamp.w * 2.0 - coord.y;
        }
      } else if (coord.y < uInputClamp.y) {
        if (fillMode == TRANSPARENT) {
          discarded = true;
        } else if (fillMode == LOOP) {
          coord.y = coord.y + uInputClamp.w;
        } else if (fillMode == MIRROR) {
          coord.y = coord.y * -uInputClamp.w;
        }
      }
    }

    let seedR: f32 = 1.0 - uSeed * 0.4;
    let seedG: f32 = 1.0 - uSeed * 0.3;
    let seedB: f32 = 1.0 - uSeed * 0.2;

    let offsetR: vec2<f32> = vec2(uRed.x * seedR / uInputSize.x, uRed.y * seedR / uInputSize.y);
    let offsetG: vec2<f32> = vec2(uGreen.x * seedG / uInputSize.x, uGreen.y * seedG / uInputSize.y);
    let offsetB: vec2<f32> = vec2(uBlue.x * seedB / uInputSize.x, uBlue.y * seedB / uInputSize.y);

    let r = textureSample(uTexture, uSampler, coord + offsetR).r;
    let g = textureSample(uTexture, uSampler, coord + offsetG).g;
    let b = textureSample(uTexture, uSampler, coord + offsetB).b;
    let a = textureSample(uTexture, uSampler, coord).a;

    return select(vec4<f32>(r, g, b, a), vec4<f32>(0.0,0.0,0.0,0.0), discarded);
}

const TRANSPARENT: i32 = 0;
const ORIGINAL: i32 = 1;
const LOOP: i32 = 2;
const CLAMP: i32 = 3;
const MIRROR: i32 = 4;`,_ce=Object.defineProperty,bce=(t,e,r)=>e in t?_ce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ai=(t,e,r)=>(bce(t,typeof e!="symbol"?e+"":e,r),r);const JN=class eU extends Rt{constructor(e){e={...eU.defaults,...e};const r=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:yce,entryPoint:"mainFragment"}}),n=et.from({vertex:Nn,fragment:vce,name:"glitch-filter"}),i=document.createElement("canvas");i.width=4,i.height=e.sampleSize??512;const s=new ne({source:new ts({resource:i})});super({gpuProgram:r,glProgram:n,resources:{glitchUniforms:{uSeed:{value:(e==null?void 0:e.seed)??0,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"},uAspect:{value:1,type:"f32"},uFillMode:{value:(e==null?void 0:e.fillMode)??0,type:"f32"},uOffset:{value:(e==null?void 0:e.offset)??100,type:"f32"},uDirection:{value:(e==null?void 0:e.direction)??0,type:"f32"},uRed:{value:e.red,type:"vec2<f32>"},uGreen:{value:e.green,type:"vec2<f32>"},uBlue:{value:e.blue,type:"vec2<f32>"}},uDisplacementMap:s.source,uDisplacementSampler:s.source.style}}),ai(this,"uniforms"),ai(this,"average",!1),ai(this,"minSize",8),ai(this,"sampleSize",512),ai(this,"_canvas"),ai(this,"texture"),ai(this,"_slices",0),ai(this,"_sizes",new Float32Array(1)),ai(this,"_offsets",new Float32Array(1)),this.uniforms=this.resources.glitchUniforms.uniforms,this._canvas=i,this.texture=s,Object.assign(this,e)}apply(e,r,n,i){const{width:s,height:o}=r.frame;this.uniforms.uDimensions[0]=s,this.uniforms.uDimensions[1]=o,this.uniforms.uAspect=o/s,e.applyFilter(this,r,n,i)}_randomizeSizes(){const e=this._sizes,r=this._slices-1,n=this.sampleSize,i=Math.min(this.minSize/n,.9/this._slices);if(this.average){const s=this._slices;let o=1;for(let a=0;a<r;a++){const u=o/(s-a),l=Math.max(u*(1-Math.random()*.6),i);e[a]=l,o-=l}e[r]=o}else{let s=1;const o=Math.sqrt(1/this._slices);for(let a=0;a<r;a++){const u=Math.max(o*s*Math.random(),i);e[a]=u,s-=u}e[r]=s}this.shuffle()}shuffle(){const e=this._sizes,r=this._slices-1;for(let n=r;n>0;n--){const i=Math.random()*n>>0,s=e[n];e[n]=e[i],e[i]=s}}_randomizeOffsets(){for(let e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)}refresh(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}redraw(){const e=this.sampleSize,r=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);let i,s=0;for(let o=0;o<this._slices;o++){i=Math.floor(this._offsets[o]*256);const a=this._sizes[o]*e,u=i>0?i:0,l=i<0?-i:0;n.fillStyle=`rgba(${u}, ${l}, 0, 1)`,n.fillRect(0,s>>0,e,a+1>>0),s+=a}r.source.update()}set sizes(e){const r=Math.min(this._slices,e.length);for(let n=0;n<r;n++)this._sizes[n]=e[n]}get sizes(){return this._sizes}set offsets(e){const r=Math.min(this._slices,e.length);for(let n=0;n<r;n++)this._offsets[n]=e[n]}get offsets(){return this._offsets}get slices(){return this._slices}set slices(e){this._slices!==e&&(this._slices=e,this._sizes=new Float32Array(e),this._offsets=new Float32Array(e),this.refresh())}get offset(){return this.uniforms.uOffset}set offset(e){this.uniforms.uOffset=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}get fillMode(){return this.uniforms.uFillMode}set fillMode(e){this.uniforms.uFillMode=e}get direction(){return this.uniforms.uDirection/ef}set direction(e){this.uniforms.uDirection=e*ef}get red(){return this.uniforms.uRed}set red(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uRed=e}get green(){return this.uniforms.uGreen}set green(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uGreen=e}get blue(){return this.uniforms.uBlue}set blue(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uBlue=e}destroy(){var e;(e=this.texture)==null||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}};ai(JN,"defaults",{slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:{x:0,y:0},green:{x:0,y:0},blue:{x:0,y:0},minSize:8,sampleSize:512});let tye=JN;var xce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uDimensions;
uniform float uParallel;
uniform vec2 uLight;
uniform float uAspect;
uniform float uTime;
uniform vec3 uRay;

uniform vec4 uInputSize;

\${PERLIN}

void main(void) {
    vec2 uDimensions = uDimensions;
    bool uParallel = uParallel > 0.5;
    vec2 uLight = uLight;
    float uAspect = uAspect;

    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions;

    float d;

    if (uParallel) {
        float _cos = uLight.x;
        float _sin = uLight.y;
        d = (_cos * coord.x) + (_sin * coord.y * uAspect);
    } else {
        float dx = coord.x - uLight.x / uDimensions.x;
        float dy = (coord.y - uLight.y / uDimensions.y) * uAspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    float uTime = uTime;
    vec3 uRay = uRay;

    float gain = uRay[0];
    float lacunarity = uRay[1];
    float alpha = uRay[2];

    vec3 dir = vec3(d, d, 0.0);
    float noise = turb(dir + vec3(uTime, 0.0, 62.1 + uTime) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(vec3(noise), 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    finalColor = texture(uTexture, vTextureCoord) + mist;
}
`,Sce=`struct GodrayUniforms {
  uLight: vec2<f32>,
  uParallel: f32,
  uAspect: f32,
  uTime: f32,
  uRay: vec3<f32>,
  uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> godrayUniforms : GodrayUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uDimensions: vec2<f32> = godrayUniforms.uDimensions;
  let uParallel: bool = godrayUniforms.uParallel > 0.5;
  let uLight: vec2<f32> = godrayUniforms.uLight;
  let uAspect: f32 = godrayUniforms.uAspect;

  let coord: vec2<f32> = uv * gfu.uInputSize.xy / uDimensions;

  var d: f32;

  if (uParallel) {
    let _cos: f32 = uLight.x;
    let _sin: f32 = uLight.y;
    d = (_cos * coord.x) + (_sin * coord.y * uAspect);
  } else {
    let dx: f32 = coord.x - uLight.x / uDimensions.x;
    let dy: f32 = (coord.y - uLight.y / uDimensions.y) * uAspect;
    let dis: f32 = sqrt(dx * dx + dy * dy) + 0.00001;
    d = dy / dis;
  }

  let uTime: f32 = godrayUniforms.uTime;
  let uRay: vec3<f32> = godrayUniforms.uRay;
  
  let gain = uRay[0];
  let lacunarity = uRay[1];
  let alpha = uRay[2];

  let dir: vec3<f32> = vec3<f32>(d, d, 0.0);
  var noise: f32 = turb(dir + vec3<f32>(uTime, 0.0, 62.1 + uTime) * 0.05, vec3<f32>(480.0, 320.0, 480.0), lacunarity, gain);
  noise = mix(noise, 0.0, 0.3);
  //fade vertically.
  var mist: vec4<f32> = vec4<f32>(vec3<f32>(noise), 1.0) * (1.0 - coord.y);
  mist.a = 1.0;
  // apply user alpha
  mist *= alpha;
  return textureSample(uTexture, uSampler, uv) + mist;
}

\${PERLIN}`,wce=`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`,Ece=`// Taken from https://gist.github.com/munrocket/236ed5ba7e409b8bdf1ff6eca5dcdc39

fn moduloVec3(x: vec3<f32>, y: vec3<f32>) -> vec3<f32>
{
  return x - y * floor(x/y);
}
fn mod289Vec3(x: vec3<f32>) -> vec3<f32>
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
fn mod289Vec4(x: vec4<f32>) -> vec4<f32>
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
fn permute4(x: vec4<f32>) -> vec4<f32>
{
    return mod289Vec4(((x * 34.0) + 1.0) * x);
}
fn taylorInvSqrt(r: vec4<f32>) -> vec4<f32>
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
fn fade3(t: vec3<f32>) -> vec3<f32>
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
fn fade2(t: vec2<f32>) -> vec2<f32> { return t * t * t * (t * (t * 6. - 15.) + 10.); }

fn perlinNoise2(P: vec2<f32>) -> f32 {
  var Pi: vec4<f32> = floor(P.xyxy) + vec4<f32>(0., 0., 1., 1.);
  let Pf = fract(P.xyxy) - vec4<f32>(0., 0., 1., 1.);
  Pi = Pi % vec4<f32>(289.); // To avoid truncation effects in permutation
  let ix = Pi.xzxz;
  let iy = Pi.yyww;
  let fx = Pf.xzxz;
  let fy = Pf.yyww;
  let i = permute4(permute4(ix) + iy);
  var gx: vec4<f32> = 2. * fract(i * 0.0243902439) - 1.; // 1/41 = 0.024...
  let gy = abs(gx) - 0.5;
  let tx = floor(gx + 0.5);
  gx = gx - tx;
  var g00: vec2<f32> = vec2<f32>(gx.x, gy.x);
  var g10: vec2<f32> = vec2<f32>(gx.y, gy.y);
  var g01: vec2<f32> = vec2<f32>(gx.z, gy.z);
  var g11: vec2<f32> = vec2<f32>(gx.w, gy.w);
  let norm = 1.79284291400159 - 0.85373472095314 *
      vec4<f32>(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11));
  g00 = g00 * norm.x;
  g01 = g01 * norm.y;
  g10 = g10 * norm.z;
  g11 = g11 * norm.w;
  let n00 = dot(g00, vec2<f32>(fx.x, fy.x));
  let n10 = dot(g10, vec2<f32>(fx.y, fy.y));
  let n01 = dot(g01, vec2<f32>(fx.z, fy.z));
  let n11 = dot(g11, vec2<f32>(fx.w, fy.w));
  let fade_xy = fade2(Pf.xy);
  let n_x = mix(vec2<f32>(n00, n01), vec2<f32>(n10, n11), vec2<f32>(fade_xy.x));
  let n_xy = mix(n_x.x, n_x.y, fade_xy.y);
  return 2.3 * n_xy;
}

// Classic Perlin noise, periodic variant
fn perlinNoise3(P: vec3<f32>, rep: vec3<f32>) -> f32
{
    var Pi0: vec3<f32> = moduloVec3(floor(P), rep); // Integer part, modulo period
    var Pi1: vec3<f32> = moduloVec3(Pi0 + vec3<f32>(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289Vec3(Pi0);
    Pi1 = mod289Vec3(Pi1);
    let Pf0: vec3<f32> = fract(P); // Fractional part for interpolation
    let Pf1: vec3<f32> = Pf0 - vec3<f32>(1.0); // Fractional part - 1.0
    let ix: vec4<f32> = vec4<f32>(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    let iy: vec4<f32> = vec4<f32>(Pi0.yy, Pi1.yy);
    let iz0: vec4<f32> = Pi0.zzzz;
    let iz1: vec4<f32> = Pi1.zzzz;
    let ixy: vec4<f32> = permute4(permute4(ix) + iy);
    let ixy0: vec4<f32> = permute4(ixy + iz0);
    let ixy1: vec4<f32> = permute4(ixy + iz1);
    var gx0: vec4<f32> = ixy0 * (1.0 / 7.0);
    var gy0: vec4<f32> = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    let gz0: vec4<f32> = vec4<f32>(0.5) - abs(gx0) - abs(gy0);
    let sz0: vec4<f32> = step(gz0, vec4<f32>(0.0));
    gx0 -= sz0 * (step(vec4<f32>(0.0), gx0) - 0.5);
    gy0 -= sz0 * (step(vec4<f32>(0.0), gy0) - 0.5);
    var gx1: vec4<f32> = ixy1 * (1.0 / 7.0);
    var gy1: vec4<f32> = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    let gz1: vec4<f32> = vec4<f32>(0.5) - abs(gx1) - abs(gy1);
    let sz1: vec4<f32> = step(gz1, vec4<f32>(0.0));
    gx1 -= sz1 * (step(vec4<f32>(0.0), gx1) - 0.5);
    gy1 -= sz1 * (step(vec4<f32>(0.0), gy1) - 0.5);
    var g000: vec3<f32> = vec3<f32>(gx0.x, gy0.x, gz0.x);
    var g100: vec3<f32> = vec3<f32>(gx0.y, gy0.y, gz0.y);
    var g010: vec3<f32> = vec3<f32>(gx0.z, gy0.z, gz0.z);
    var g110: vec3<f32> = vec3<f32>(gx0.w, gy0.w, gz0.w);
    var g001: vec3<f32> = vec3<f32>(gx1.x, gy1.x, gz1.x);
    var g101: vec3<f32> = vec3<f32>(gx1.y, gy1.y, gz1.y);
    var g011: vec3<f32> = vec3<f32>(gx1.z, gy1.z, gz1.z);
    var g111: vec3<f32> = vec3<f32>(gx1.w, gy1.w, gz1.w);
    let norm0: vec4<f32> = taylorInvSqrt(vec4<f32>(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    let norm1: vec4<f32> = taylorInvSqrt(vec4<f32>(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    let n000: f32 = dot(g000, Pf0);
    let n100: f32 = dot(g100, vec3<f32>(Pf1.x, Pf0.yz));
    let n010: f32 = dot(g010, vec3<f32>(Pf0.x, Pf1.y, Pf0.z));
    let n110: f32 = dot(g110, vec3<f32>(Pf1.xy, Pf0.z));
    let n001: f32 = dot(g001, vec3<f32>(Pf0.xy, Pf1.z));
    let n101: f32 = dot(g101, vec3<f32>(Pf1.x, Pf0.y, Pf1.z));
    let n011: f32 = dot(g011, vec3<f32>(Pf0.x, Pf1.yz));
    let n111: f32 = dot(g111, Pf1);
    let fade_xyz: vec3<f32> = fade3(Pf0);
    let n_z: vec4<f32> = mix(vec4<f32>(n000, n100, n010, n110), vec4<f32>(n001, n101, n011, n111), fade_xyz.z);
    let n_yz: vec2<f32> = mix(n_z.xy, n_z.zw, fade_xyz.y);
    let n_xyz: f32 = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
fn turb(P: vec3<f32>, rep: vec3<f32>, lacunarity: f32, gain: f32) -> f32
{
    var sum: f32 = 0.0;
    var sc: f32 = 1.0;
    var totalgain: f32 = 1.0;
    for (var i = 0.0; i < 6.0; i += 1)
    {
        sum += totalgain * perlinNoise3(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}`,Cce=Object.defineProperty,Tce=(t,e,r)=>e in t?Cce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ma=(t,e,r)=>(Tce(t,typeof e!="symbol"?e+"":e,r),r);const tU=class rU extends Rt{constructor(e){e={...rU.DEFAULT_OPTIONS,...e};const r=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Sce.replace("${PERLIN}",Ece),entryPoint:"mainFragment"}}),n=et.from({vertex:Nn,fragment:xce.replace("${PERLIN}",wce),name:"god-ray-filter"});super({gpuProgram:r,glProgram:n,resources:{godrayUniforms:{uLight:{value:new Float32Array(2),type:"vec2<f32>"},uParallel:{value:0,type:"f32"},uAspect:{value:0,type:"f32"},uTime:{value:e.time,type:"f32"},uRay:{value:new Float32Array(3),type:"vec3<f32>"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),Ma(this,"uniforms"),Ma(this,"time",0),Ma(this,"_angleLight",[0,0]),Ma(this,"_angle",0),Ma(this,"_center"),this.uniforms=this.resources.godrayUniforms.uniforms,Object.assign(this,e)}apply(e,r,n,i){const s=r.frame.width,o=r.frame.height;this.uniforms.uLight[0]=this.parallel?this._angleLight[0]:this._center.x,this.uniforms.uLight[1]=this.parallel?this._angleLight[1]:this._center.y,this.uniforms.uDimensions[0]=s,this.uniforms.uDimensions[1]=o,this.uniforms.uAspect=o/s,this.uniforms.uTime=this.time,e.applyFilter(this,r,n,i)}get angle(){return this._angle}set angle(e){this._angle=e;const r=e*ef;this._angleLight[0]=Math.cos(r),this._angleLight[1]=Math.sin(r)}get parallel(){return this.uniforms.uParallel>.5}set parallel(e){this.uniforms.uParallel=e?1:0}get center(){return this._center}set center(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this._center=e}get centerX(){return this.center.x}set centerX(e){this.center.x=e}get centerY(){return this.center.y}set centerY(e){this.center.y=e}get gain(){return this.uniforms.uRay[0]}set gain(e){this.uniforms.uRay[0]=e}get lacunarity(){return this.uniforms.uRay[1]}set lacunarity(e){this.uniforms.uRay[1]=e}get alpha(){return this.uniforms.uRay[2]}set alpha(e){this.uniforms.uRay[2]=e}};Ma(tU,"DEFAULT_OPTIONS",{angle:30,gain:.5,lacunarity:2.5,parallel:!0,time:0,center:{x:0,y:0},alpha:1});let rye=tU;var Ace=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uSepia;
uniform vec2 uNoise;
uniform vec3 uScratch;
uniform vec3 uVignetting;
uniform float uSeed;
uniform vec2 uDimensions;

uniform vec4 uInputSize;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    finalColor = texture(uTexture, vTextureCoord);
    vec3 color = finalColor.rgb;

    if (uSepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + uSepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * uInputSize.xy / uDimensions.xy;

    float vignette = uVignetting[0];
    float vignetteAlpha = uVignetting[1];
    float vignetteBlur = uVignetting[2];

    if (vignette > 0.0)
    {
        float outter = SQRT_2 - vignette * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= uDimensions.y / uDimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignetteBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignetteAlpha);
    }

    float scratch = uScratch[0];
    float scratchDensity = uScratch[1];
    float scratchWidth = uScratch[2];

    if (scratchDensity > uSeed && scratch != 0.0)
    {
        float phase = uSeed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(uSeed * dist, abs(s - uSeed * dist)));
        if (d < uSeed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / uDimensions.x * (0.75 + uSeed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    float noise = uNoise[0];
    float noiseSize = uNoise[1];

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * uInputSize.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + uSeed * 512.0, 1024.0 - uSeed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * uSeed) - 0.5;
        color += _noise * noise;
    }

    finalColor.rgb = color;
}`,Pce=`struct OldFilmUniforms {
    uSepia: f32,
    uNoise: vec2<f32>,
    uScratch: vec3<f32>,
    uVignetting: vec3<f32>,
    uSeed: f32,
    uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> oldFilmUniforms : OldFilmUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  var color: vec4<f32> = textureSample(uTexture, uSampler, uv);

  if (oldFilmUniforms.uSepia > 0.)
  {
    color = vec4<f32>(sepia(color.rgb), color.a);
  }

  let coord: vec2<f32> = uv * gfu.uInputSize.xy / oldFilmUniforms.uDimensions;

  if (oldFilmUniforms.uVignetting[0] > 0.)
  {
    color *= vec4<f32>(vec3<f32>(vignette(color.rgb, coord)), color.a);
  }

  let uScratch = oldFilmUniforms.uScratch; 

  if (uScratch[1] > oldFilmUniforms.uSeed && uScratch[0] != 0.)
  {
    color = vec4<f32>(scratch(color.rgb, coord), color.a);
  }

  let uNoise = oldFilmUniforms.uNoise;

  if (uNoise[0] > 0.0 && uNoise[1] > 0.0)
  {
    color += vec4<f32>(vec3<f32>(noise(uv)), color.a);
  }

  return color;
}

const SQRT_2: f32 = 1.414213;
const SEPIA_RGB: vec3<f32> = vec3<f32>(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

fn rand(co: vec2<f32>) -> f32
{
  return fract(sin(dot(co, vec2<f32>(12.9898, 78.233))) * 43758.5453);
}

fn overlay(src: vec3<f32>, dst: vec3<f32>) -> vec3<f32>
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)

    return vec3<f32>(
      select((1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)), (2.0 * src.x * dst.x), (dst.x <= 0.5)), 
      select((1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)), (2.0 * src.y * dst.y), (dst.y <= 0.5)),
      select((1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)), (2.0 * src.z * dst.z), (dst.z <= 0.5))
    );
}

fn sepia(co: vec3<f32>) -> vec3<f32>
{
  let gray: f32 = (co.x + co.y + co.z) / 3.0;
  let grayscale: vec3<f32> = vec3<f32>(gray);
  let color = overlay(SEPIA_RGB, grayscale);
  return grayscale + oldFilmUniforms.uSepia * (color - grayscale);
}

fn vignette(co: vec3<f32>, coord: vec2<f32>) -> f32
{
  let uVignetting = oldFilmUniforms.uVignetting;
  let uDimensions = oldFilmUniforms.uDimensions;
  
  let outter: f32 = SQRT_2 - uVignetting[0] * SQRT_2;
  var dir: vec2<f32> = vec2<f32>(vec2<f32>(0.5) - coord);
  dir.y *= uDimensions.y / uDimensions.x;
  let darker: f32 = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + uVignetting[2] * SQRT_2), 0.0, 1.0);
  return darker + (1.0 - darker) * (1.0 - uVignetting[1]);
}

fn scratch(co: vec3<f32>, coord: vec2<f32>) -> vec3<f32>
{
  var color = co;
  let uScratch = oldFilmUniforms.uScratch;
  let uSeed = oldFilmUniforms.uSeed;
  let uDimensions = oldFilmUniforms.uDimensions;

  let phase: f32 = uSeed * 256.0;
  let s: f32 = modulo(floor(phase), 2.0);
  let dist: f32 = 1.0 / uScratch[1];
  let d: f32 = distance(coord, vec2<f32>(uSeed * dist, abs(s - uSeed * dist)));

  if (d < uSeed * 0.6 + 0.4)
  {
    let period: f32 = uScratch[1] * 10.0;

    let xx: f32 = coord.x * period + phase;
    let aa: f32 = abs(modulo(xx, 0.5) * 4.0);
    let bb: f32 = modulo(floor(xx / 0.5), 2.0);
    let yy: f32 = (1.0 - bb) * aa + bb * (2.0 - aa);

    let kk: f32 = 2.0 * period;
    let dw: f32 = uScratch[2] / uDimensions.x * (0.75 + uSeed);
    let dh: f32 = dw * kk;

    var tine: f32 = (yy - (2.0 - dh));

    if (tine > 0.0) {
        let _sign: f32 = sign(uScratch[0]);

        tine = s * tine / period + uScratch[0] + 0.1;
        tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

        color *= tine;
    }
  }

  return color;
}

fn noise(coord: vec2<f32>) -> f32
{
  let uNoise = oldFilmUniforms.uNoise;
  let uSeed = oldFilmUniforms.uSeed;

  var pixelCoord: vec2<f32> = coord * gfu.uInputSize.xy;
  pixelCoord.x = floor(pixelCoord.x / uNoise[1]);
  pixelCoord.y = floor(pixelCoord.y / uNoise[1]);
  return (rand(pixelCoord * uNoise[1] * uSeed) - 0.5) * uNoise[0];
}`,Rce=Object.defineProperty,Oce=(t,e,r)=>e in t?Rce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Jb=(t,e,r)=>(Oce(t,typeof e!="symbol"?e+"":e,r),r);const nU=class iU extends Rt{constructor(e){e={...iU.DEFAULT_OPTIONS,...e};const r=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Pce,entryPoint:"mainFragment"}}),n=et.from({vertex:Nn,fragment:Ace,name:"old-film-filter"});super({gpuProgram:r,glProgram:n,resources:{oldFilmUniforms:{uSepia:{value:e.sepia,type:"f32"},uNoise:{value:new Float32Array(2),type:"vec2<f32>"},uScratch:{value:new Float32Array(3),type:"vec3<f32>"},uVignetting:{value:new Float32Array(3),type:"vec3<f32>"},uSeed:{value:e.seed,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),Jb(this,"uniforms"),Jb(this,"seed"),this.uniforms=this.resources.oldFilmUniforms.uniforms,Object.assign(this,e)}apply(e,r,n,i){this.uniforms.uDimensions[0]=r.frame.width,this.uniforms.uDimensions[1]=r.frame.height,this.uniforms.uSeed=this.seed,e.applyFilter(this,r,n,i)}get sepia(){return this.uniforms.uSepia}set sepia(e){this.uniforms.uSepia=e}get noise(){return this.uniforms.uNoise[0]}set noise(e){this.uniforms.uNoise[0]=e}get noiseSize(){return this.uniforms.uNoise[1]}set noiseSize(e){this.uniforms.uNoise[1]=e}get scratch(){return this.uniforms.uScratch[0]}set scratch(e){this.uniforms.uScratch[0]=e}get scratchDensity(){return this.uniforms.uScratch[1]}set scratchDensity(e){this.uniforms.uScratch[1]=e}get scratchWidth(){return this.uniforms.uScratch[2]}set scratchWidth(e){this.uniforms.uScratch[2]=e}get vignetting(){return this.uniforms.uVignetting[0]}set vignetting(e){this.uniforms.uVignetting[0]=e}get vignettingAlpha(){return this.uniforms.uVignetting[1]}set vignettingAlpha(e){this.uniforms.uVignetting[1]=e}get vignettingBlur(){return this.uniforms.uVignetting[2]}set vignettingBlur(e){this.uniforms.uVignetting[2]=e}};Jb(nU,"DEFAULT_OPTIONS",{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,seed:0});let nye=nU;var Bce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uMirror;
uniform float uBoundary;
uniform vec2 uAmplitude;
uniform vec2 uWavelength;
uniform vec2 uAlpha;
uniform float uTime;
uniform vec2 uDimensions;

uniform vec4 uInputSize;
uniform vec4 uInputClamp;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * uInputSize.xy;
    vec2 coord = pixelCoord / uDimensions;

    if (coord.y < uBoundary) {
        finalColor = texture(uTexture, vTextureCoord);
        return;
    }

    float k = (coord.y - uBoundary) / (1. - uBoundary + 0.0001);
    float areaY = uBoundary * uDimensions.y / uInputSize.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = uMirror > 0.5 ? v : vTextureCoord.y;

    float _amplitude = ((uAmplitude.y - uAmplitude.x) * k + uAmplitude.x ) / uInputSize.x;
    float _waveLength = ((uWavelength.y - uWavelength.x) * k + uWavelength.x) / uInputSize.y;
    float _alpha = (uAlpha.y - uAlpha.x) * k + uAlpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - uTime) * _amplitude;
    x = clamp(x, uInputClamp.x, uInputClamp.z);

    vec4 color = texture(uTexture, vec2(x, y));

    finalColor = color * _alpha;
}
`,kce=`struct ReflectionUniforms {
  uMirror: f32,
  uBoundary: f32,
  uAmplitude: vec2<f32>,
  uWavelength: vec2<f32>,
  uAlpha: vec2<f32>,
  uTime: f32,
  uDimensions: vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> reflectionUniforms : ReflectionUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uDimensions: vec2<f32> = reflectionUniforms.uDimensions;
  let uBoundary: f32 = reflectionUniforms.uBoundary;
  let uMirror: bool = reflectionUniforms.uMirror > 0.5;
  let uAmplitude: vec2<f32> = reflectionUniforms.uAmplitude;
  let uWavelength: vec2<f32> = reflectionUniforms.uWavelength;
  let uAlpha: vec2<f32> = reflectionUniforms.uAlpha;
  let uTime: f32 = reflectionUniforms.uTime;

  let pixelCoord: vec2<f32> = uv * gfu.uInputSize.xy;
  let coord: vec2<f32> = pixelCoord /uDimensions;
  var returnColorOnly: bool = false;

  if (coord.y < uBoundary) {
    returnColorOnly = true;
  }

  let k: f32 = (coord.y - uBoundary) / (1. - uBoundary + 0.0001);
  let areaY: f32 = uBoundary * uDimensions.y / gfu.uInputSize.y;
  let v: f32 = areaY + areaY - uv.y;
  let y: f32 = select(uv.y, v, uMirror);

  let amplitude: f32 = ((uAmplitude.y - uAmplitude.x) * k + uAmplitude.x ) / gfu.uInputSize.x;
  let waveLength: f32 = ((uWavelength.y - uWavelength.x) * k + uWavelength.x) / gfu.uInputSize.y;
  let alpha: f32 = select((uAlpha.y - uAlpha.x) * k + uAlpha.x, 1., returnColorOnly);

  var x: f32 = uv.x + cos(v * 6.28 / waveLength - uTime) * amplitude;
  x = clamp(x, gfu.uInputClamp.x, gfu.uInputClamp.z);
  
  return textureSample(uTexture, uSampler, select(vec2<f32>(x, y), uv, returnColorOnly)) * alpha;
}

fn rand(co: vec2<f32>) -> f32 
{
  return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}`,Dce=Object.defineProperty,Mce=(t,e,r)=>e in t?Dce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ex=(t,e,r)=>(Mce(t,typeof e!="symbol"?e+"":e,r),r);const sU=class oU extends Rt{constructor(e){e={...oU.DEFAULT_OPTIONS,...e};const r=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:kce,entryPoint:"mainFragment"}}),n=et.from({vertex:Nn,fragment:Bce,name:"reflection-filter"});super({gpuProgram:r,glProgram:n,resources:{reflectionUniforms:{uMirror:{value:e.mirror?1:0,type:"f32"},uBoundary:{value:e.boundary,type:"f32"},uAmplitude:{value:e.amplitude,type:"vec2<f32>"},uWavelength:{value:e.waveLength,type:"vec2<f32>"},uAlpha:{value:e.alpha,type:"vec2<f32>"},uTime:{value:e.time,type:"f32"},uDimensions:{value:new Float32Array(2),type:"vec2<f32>"}}}}),ex(this,"uniforms"),ex(this,"time",0),this.uniforms=this.resources.reflectionUniforms.uniforms,Object.assign(this,e)}apply(e,r,n,i){this.uniforms.uDimensions[0]=r.frame.width,this.uniforms.uDimensions[1]=r.frame.height,this.uniforms.uTime=this.time,e.applyFilter(this,r,n,i)}get mirror(){return this.uniforms.uMirror>.5}set mirror(e){this.uniforms.uMirror=e?1:0}get boundary(){return this.uniforms.uBoundary}set boundary(e){this.uniforms.uBoundary=e}get amplitude(){return Array.from(this.uniforms.uAmplitude)}set amplitude(e){this.uniforms.uAmplitude[0]=e[0],this.uniforms.uAmplitude[1]=e[1]}get amplitudeStart(){return this.uniforms.uAmplitude[0]}set amplitudeStart(e){this.uniforms.uAmplitude[0]=e}get amplitudeEnd(){return this.uniforms.uAmplitude[1]}set amplitudeEnd(e){this.uniforms.uAmplitude[1]=e}get waveLength(){return Array.from(this.uniforms.uWavelength)}set waveLength(e){this.uniforms.uWavelength[0]=e[0],this.uniforms.uWavelength[1]=e[1]}get wavelengthStart(){return this.uniforms.uWavelength[0]}set wavelengthStart(e){this.uniforms.uWavelength[0]=e}get wavelengthEnd(){return this.uniforms.uWavelength[1]}set wavelengthEnd(e){this.uniforms.uWavelength[1]=e}get alpha(){return Array.from(this.uniforms.uAlpha)}set alpha(e){this.uniforms.uAlpha[0]=e[0],this.uniforms.uAlpha[1]=e[1]}get alphaStart(){return this.uniforms.uAlpha[0]}set alphaStart(e){this.uniforms.uAlpha[0]=e}get alphaEnd(){return this.uniforms.uAlpha[1]}set alphaEnd(e){this.uniforms.uAlpha[1]=e}};ex(sU,"DEFAULT_OPTIONS",{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0});let iye=sU;var Ice=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec4 uInputSize;
uniform vec2 uRed;
uniform vec2 uGreen;
uniform vec2 uBlue;

void main(void)
{
   float r = texture(uTexture, vTextureCoord + uRed/uInputSize.xy).r;
   float g = texture(uTexture, vTextureCoord + uGreen/uInputSize.xy).g;
   float b = texture(uTexture, vTextureCoord + uBlue/uInputSize.xy).b;
   float a = texture(uTexture, vTextureCoord).a;
   finalColor = vec4(r, g, b, a);
}
`,Fce=`struct RgbSplitUniforms {
    uRed: vec2<f32>,
    uGreen: vec2<f32>,
    uBlue: vec3<f32>,
};

struct GlobalFilterUniforms {
    uInputSize:vec4<f32>,
    uInputPixel:vec4<f32>,
    uInputClamp:vec4<f32>,
    uOutputFrame:vec4<f32>,
    uGlobalFrame:vec4<f32>,
    uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> rgbSplitUniforms : RgbSplitUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
    let r = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uRed.x / gfu.uInputSize.x, rgbSplitUniforms.uRed.y / gfu.uInputSize.y)).r;
    let g = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uGreen.x / gfu.uInputSize.x, rgbSplitUniforms.uGreen.y / gfu.uInputSize.y)).g;
    let b = textureSample(uTexture, uSampler, uv + vec2<f32>(rgbSplitUniforms.uBlue.x / gfu.uInputSize.x, rgbSplitUniforms.uBlue.y / gfu.uInputSize.y)).b;
    let a = textureSample(uTexture, uSampler, uv).a;
    return vec4<f32>(r, g, b, a);
}
`,Lce=Object.defineProperty,Nce=(t,e,r)=>e in t?Lce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,aU=(t,e,r)=>(Nce(t,typeof e!="symbol"?e+"":e,r),r);const uU=class lU extends Rt{constructor(...e){let r=e[0]??{};(Array.isArray(r)||"x"in r&&"y"in r)&&(oe("6.0.0","RGBSplitFilter constructor params are now options object. See params: { red, green, blue }"),r={red:r},e[1]!==void 0&&(r.green=e[1]),e[2]!==void 0&&(r.blue=e[2])),r={...lU.DEFAULT_OPTIONS,...r};const n=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Fce,entryPoint:"mainFragment"}}),i=et.from({vertex:Nn,fragment:Ice,name:"rgb-split-filter"});super({gpuProgram:n,glProgram:i,resources:{rgbSplitUniforms:{uRed:{value:r.red,type:"vec2<f32>"},uGreen:{value:r.green,type:"vec2<f32>"},uBlue:{value:r.blue,type:"vec2<f32>"}}}}),aU(this,"uniforms"),this.uniforms=this.resources.rgbSplitUniforms.uniforms,Object.assign(this,r)}get red(){return this.uniforms.uRed}set red(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uRed=e}get redX(){return this.red.x}set redX(e){this.red.x=e}get redY(){return this.red.y}set redY(e){this.red.y=e}get green(){return this.uniforms.uGreen}set green(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uGreen=e}get greenX(){return this.green.x}set greenX(e){this.green.x=e}get greenY(){return this.green.y}set greenY(e){this.green.y=e}get blue(){return this.uniforms.uBlue}set blue(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uBlue=e}get blueX(){return this.blue.x}set blueX(e){this.blue.x=e}get blueY(){return this.blue.y}set blueY(e){this.blue.y=e}};aU(uU,"DEFAULT_OPTIONS",{red:{x:-10,y:0},green:{x:0,y:10},blue:{x:0,y:0}});let sye=uU;var Uce=`
precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uCenter;
uniform float uTime;
uniform float uSpeed;
uniform vec4 uWave;

uniform vec4 uInputSize;
uniform vec4 uInputClamp;

const float PI = 3.14159;

void main()
{
    float uAmplitude = uWave[0];
    float uWavelength = uWave[1];
    float uBrightness = uWave[2];
    float uRadius = uWave[3];

    float halfWavelength = uWavelength * 0.5 / uInputSize.x;
    float maxRadius = uRadius / uInputSize.x;
    float currentRadius = uTime * uSpeed / uInputSize.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            finalColor = texture(uTexture, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - uCenter / uInputSize.xy);
    dir.y *= uInputSize.y / uInputSize.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        finalColor = texture(uTexture, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( uAmplitude * fade );

    vec2 offset = diffUV * powDiff / uInputSize.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, uInputClamp.xy, uInputClamp.zw);
    vec4 color = texture(uTexture, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // finalColor = texture(uTexture, vTextureCoord + offset);

    color.rgb *= 1.0 + (uBrightness - 1.0) * p * fade;

    finalColor = color;
}
`,Gce=`
struct ShockWaveUniforms {
    uTime: f32,
    uOffset: vec2<f32>,
    uSpeed: f32,
    uWave: vec4<f32>,
};

struct GlobalFilterUniforms {
    uInputSize:vec4<f32>,
    uInputPixel:vec4<f32>,
    uInputClamp:vec4<f32>,
    uOutputFrame:vec4<f32>,
    uGlobalFrame:vec4<f32>,
    uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> shockwaveUniforms : ShockWaveUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {

    let uTime = shockwaveUniforms.uTime;
    let uOffset = shockwaveUniforms.uOffset;
    let uSpeed = shockwaveUniforms.uSpeed;
    let uAmplitude = shockwaveUniforms.uWave[0];
    let uWavelength = shockwaveUniforms.uWave[1];
    let uBrightness = shockwaveUniforms.uWave[2];
    let uRadius = shockwaveUniforms.uWave[3];
    let halfWavelength: f32 = uWavelength * 0.5 / gfu.uInputSize.x;
    let maxRadius: f32 = uRadius / gfu.uInputSize.x;
    let currentRadius: f32 = uTime * uSpeed / gfu.uInputSize.x;
    var fade: f32 = 1.0;
    var returnColorOnly: bool = false;
    
    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            returnColorOnly = true;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }
    var dir: vec2<f32> = vec2<f32>(uv - uOffset / gfu.uInputSize.xy);
    dir.y *= gfu.uInputSize.y / gfu.uInputSize.x;

    let dist:f32 = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        returnColorOnly = true;
    }

    let diffUV: vec2<f32> = normalize(dir);
    let diff: f32 = (dist - currentRadius) / halfWavelength;
    let p: f32 = 1.0 - pow(abs(diff), 2.0);
    let powDiff: f32 = 1.25 * sin(diff * PI) * p * ( uAmplitude * fade );
    let offset: vec2<f32> = diffUV * powDiff / gfu.uInputSize.xy;
    // Do clamp :
    let coord: vec2<f32> = uv + offset;
    let clampedCoord: vec2<f32> = clamp(coord, gfu.uInputClamp.xy, gfu.uInputClamp.zw);

    var clampedColor: vec4<f32> = textureSample(uTexture, uSampler, clampedCoord);
    
    if (boolVec2(coord, clampedCoord)) 
    {
        clampedColor *= max(0.0, 1.0 - length(coord - clampedCoord));
    }
    // No clamp :
    var finalColor = clampedColor;

    return select(finalColor, textureSample(uTexture, uSampler, uv), returnColorOnly);
}

fn boolVec2(x: vec2<f32>, y: vec2<f32>) -> bool
{
    if (x.x == y.x && x.y == y.y)
    {
        return true;
    }
    
    return false;
}

const PI: f32 = 3.14159265358979323846264;
`,zce=Object.defineProperty,$ce=(t,e,r)=>e in t?zce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tx=(t,e,r)=>($ce(t,typeof e!="symbol"?e+"":e,r),r);const cU=class fU extends Rt{constructor(...e){let r=e[0]??{};(Array.isArray(r)||"x"in r&&"y"in r)&&(oe("6.0.0","ShockwaveFilter constructor params are now options object. See params: { center, speed, amplitude, wavelength, brightness, radius, time }"),r={center:r,...e[1]},e[2]!==void 0&&(r.time=e[2])),r={...fU.DEFAULT_OPTIONS,...r};const n=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Gce,entryPoint:"mainFragment"}}),i=et.from({vertex:Nn,fragment:Uce,name:"shockwave-filter"});super({gpuProgram:n,glProgram:i,resources:{shockwaveUniforms:{uTime:{value:r.time,type:"f32"},uCenter:{value:r.center,type:"vec2<f32>"},uSpeed:{value:r.speed,type:"f32"},uWave:{value:new Float32Array(4),type:"vec4<f32>"}}}}),tx(this,"uniforms"),tx(this,"time"),this.time=0,this.uniforms=this.resources.shockwaveUniforms.uniforms,Object.assign(this,r)}apply(e,r,n,i){this.uniforms.uTime=this.time,e.applyFilter(this,r,n,i)}get center(){return this.uniforms.uCenter}set center(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uCenter=e}get centerX(){return this.uniforms.uCenter.x}set centerX(e){this.uniforms.uCenter.x=e}get centerY(){return this.uniforms.uCenter.y}set centerY(e){this.uniforms.uCenter.y=e}get speed(){return this.uniforms.uSpeed}set speed(e){this.uniforms.uSpeed=e}get amplitude(){return this.uniforms.uWave[0]}set amplitude(e){this.uniforms.uWave[0]=e}get wavelength(){return this.uniforms.uWave[1]}set wavelength(e){this.uniforms.uWave[1]=e}get brightness(){return this.uniforms.uWave[2]}set brightness(e){this.uniforms.uWave[2]=e}get radius(){return this.uniforms.uWave[3]}set radius(e){this.uniforms.uWave[3]=e}};tx(cU,"DEFAULT_OPTIONS",{center:{x:0,y:0},speed:500,amplitude:30,wavelength:160,brightness:1,radius:-1});let oye=cU;var jce=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform float uStrength;
uniform vec2 uCenter;
uniform vec2 uRadii;

uniform vec4 uInputSize;

const float MAX_KERNEL_SIZE = \${MAX_KERNEL_SIZE};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {
    float minGradient = uRadii[0] * 0.3;
    float innerRadius = (uRadii[0] + minGradient * 0.5) / uInputSize.x;

    float gradient = uRadii[1] * 0.3;
    float radius = (uRadii[1] - gradient * 0.5) / uInputSize.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / uInputSize.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * uInputSize.y / uInputSize.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / uInputSize.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture(uTexture, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture(uTexture, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`,Hce=`struct ZoomBlurUniforms {
    uStrength:f32,
    uCenter:vec2<f32>,
    uRadii:vec2<f32>,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> zoomBlurUniforms : ZoomBlurUniforms;

@fragment
fn mainFragment(
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let uStrength = zoomBlurUniforms.uStrength;
  let uCenter = zoomBlurUniforms.uCenter;
  let uRadii = zoomBlurUniforms.uRadii;

  let minGradient: f32 = uRadii[0] * 0.3;
  let innerRadius: f32 = (uRadii[0] + minGradient * 0.5) / gfu.uInputSize.x;

  let gradient: f32 = uRadii[1] * 0.3;
  let radius: f32 = (uRadii[1] - gradient * 0.5) / gfu.uInputSize.x;

  let MAX_KERNEL_SIZE: f32 = \${MAX_KERNEL_SIZE};

  var countLimit: f32 = MAX_KERNEL_SIZE;

  var dir: vec2<f32> = vec2<f32>(uCenter / gfu.uInputSize.xy - uv);
  let dist: f32 = length(vec2<f32>(dir.x, dir.y * gfu.uInputSize.y / gfu.uInputSize.x));

  var strength: f32 = uStrength;

  var delta: f32 = 0.0;
  var gap: f32;

  if (dist < innerRadius) {
      delta = innerRadius - dist;
      gap = minGradient;
  } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
      delta = dist - radius;
      gap = gradient;
  }

  var returnColorOnly: bool = false;

  if (delta > 0.0) {
    let normalCount: f32 = gap / gfu.uInputSize.x;
    delta = (normalCount - delta) / normalCount;
    countLimit *= delta;
    strength *= delta;
    
    if (countLimit < 1.0)
    {
      returnColorOnly = true;;
    }
  }

  // randomize the lookup values to hide the fixed number of samples
  let offset: f32 = rand(uv, 0.0);

  var total: f32 = 0.0;
  var color: vec4<f32> = vec4<f32>(0.);

  dir *= strength;

  for (var t = 0.0; t < MAX_KERNEL_SIZE; t += 1.0) {
    let percent: f32 = (t + offset) / MAX_KERNEL_SIZE;
    let weight: f32 = 4.0 * (percent - percent * percent);
    let p: vec2<f32> = uv + dir * percent;
    let sample: vec4<f32> = textureSample(uTexture, uSampler, p);
    
    if (t < countLimit)
    {
      color += sample * weight;
      total += weight;
    }
  }

  color /= total;

  return select(color, textureSample(uTexture, uSampler, uv), returnColorOnly);
}

fn modulo(x: f32, y: f32) -> f32
{
  return x - y * floor(x/y);
}

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
fn rand(co: vec2<f32>, seed: f32) -> f32
{
  let a: f32 = 12.9898;
  let b: f32 = 78.233;
  let c: f32 = 43758.5453;
  let dt: f32 = dot(co + seed, vec2<f32>(a, b));
  let sn: f32 = modulo(dt, 3.14159);
  return fract(sin(sn) * c + seed);
}`,Vce=Object.defineProperty,Wce=(t,e,r)=>e in t?Vce(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,dU=(t,e,r)=>(Wce(t,typeof e!="symbol"?e+"":e,r),r);const hU=class pU extends Rt{constructor(e){e={...pU.DEFAULT_OPTIONS,...e};const r=e.maxKernelSize??32,n=qe.from({vertex:{source:Un,entryPoint:"mainVertex"},fragment:{source:Hce.replace("${MAX_KERNEL_SIZE}",r.toFixed(1)),entryPoint:"mainFragment"}}),i=et.from({vertex:Nn,fragment:jce.replace("${MAX_KERNEL_SIZE}",r.toFixed(1)),name:"zoom-blur-filter"});super({gpuProgram:n,glProgram:i,resources:{zoomBlurUniforms:{uStrength:{value:e.strength,type:"f32"},uCenter:{value:e.center,type:"vec2<f32>"},uRadii:{value:new Float32Array(2),type:"vec2<f32>"}}}}),dU(this,"uniforms"),this.uniforms=this.resources.zoomBlurUniforms.uniforms,Object.assign(this,e)}get strength(){return this.uniforms.uStrength}set strength(e){this.uniforms.uStrength=e}get center(){return this.uniforms.uCenter}set center(e){Array.isArray(e)&&(e={x:e[0],y:e[1]}),this.uniforms.uCenter=e}get centerX(){return this.uniforms.uCenter.x}set centerX(e){this.uniforms.uCenter.x=e}get centerY(){return this.uniforms.uCenter.y}set centerY(e){this.uniforms.uCenter.y=e}get innerRadius(){return this.uniforms.uRadii[0]}set innerRadius(e){this.uniforms.uRadii[0]=e}get radius(){return this.uniforms.uRadii[1]}set radius(e){this.uniforms.uRadii[1]=e<0||e===1/0?-1:e}};dU(hU,"DEFAULT_OPTIONS",{strength:.1,center:{x:0,y:0},innerRadius:0,radius:-1,maxKernelSize:32});let aye=hU;var mU={exports:{}},gU={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gu=M;function Xce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qce=typeof Object.is=="function"?Object.is:Xce,Yce=Gu.useState,Kce=Gu.useEffect,Zce=Gu.useLayoutEffect,Qce=Gu.useDebugValue;function Jce(t,e){var r=e(),n=Yce({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return Zce(function(){i.value=r,i.getSnapshot=e,dy(i)&&s({inst:i})},[t,r,e]),Kce(function(){return dy(i)&&s({inst:i}),t(function(){dy(i)&&s({inst:i})})},[t]),Qce(r),r}function dy(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!qce(t,r)}catch{return!0}}function efe(t,e){return e()}var tfe=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?efe:Jce;gU.useSyncExternalStore=Gu.useSyncExternalStore!==void 0?Gu.useSyncExternalStore:tfe;mU.exports=gU;var rfe=mU.exports,vU={exports:{}},yU={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg=M,nfe=rfe;function ife(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var sfe=typeof Object.is=="function"?Object.is:ife,ofe=nfe.useSyncExternalStore,afe=xg.useRef,ufe=xg.useEffect,lfe=xg.useMemo,cfe=xg.useDebugValue;yU.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=afe(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=lfe(function(){function u(h){if(!l){if(l=!0,c=h,h=n(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,sfe(c,h))return p;var m=n(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=r===void 0?null:r;return[function(){return u(e())},d===null?void 0:function(){return u(d())}]},[e,r,n,i]);var a=ofe(t,s[0],s[1]);return ufe(function(){o.hasValue=!0,o.value=a},[a]),cfe(a),a};vU.exports=yU;var ffe=vU.exports;function dfe(t){t()}let _U=dfe;const hfe=t=>_U=t,pfe=()=>_U,VP=Symbol.for("react-redux-context"),WP=typeof globalThis<"u"?globalThis:{};function mfe(){var t;if(!M.createContext)return{};const e=(t=WP[VP])!=null?t:WP[VP]=new Map;let r=e.get(M.createContext);return r||(r=M.createContext(null),e.set(M.createContext,r)),r}const io=mfe();function t3(t=io){return function(){return M.useContext(t)}}const bU=t3(),gfe=()=>{throw new Error("uSES not initialized!")};let xU=gfe;const vfe=t=>{xU=t},yfe=(t,e)=>t===e;function _fe(t=io){const e=t===io?bU:t3(t);return function(n,i={}){const{equalityFn:s=yfe,stabilityCheck:o=void 0,noopCheck:a=void 0}=typeof i=="function"?{equalityFn:i}:i,{store:u,subscription:l,getServerState:c,stabilityCheck:f,noopCheck:d}=e();M.useRef(!0);const h=M.useCallback({[n.name](m){return n(m)}}[n.name],[n,f,o]),p=xU(l.addNestedSub,u.getState,c||u.getState,h,s);return M.useDebugValue(p),p}}const uye=_fe();function bfe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var SU={exports:{}},Ge={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qt=typeof Symbol=="function"&&Symbol.for,r3=Qt?Symbol.for("react.element"):60103,n3=Qt?Symbol.for("react.portal"):60106,Sg=Qt?Symbol.for("react.fragment"):60107,wg=Qt?Symbol.for("react.strict_mode"):60108,Eg=Qt?Symbol.for("react.profiler"):60114,Cg=Qt?Symbol.for("react.provider"):60109,Tg=Qt?Symbol.for("react.context"):60110,i3=Qt?Symbol.for("react.async_mode"):60111,Ag=Qt?Symbol.for("react.concurrent_mode"):60111,Pg=Qt?Symbol.for("react.forward_ref"):60112,Rg=Qt?Symbol.for("react.suspense"):60113,xfe=Qt?Symbol.for("react.suspense_list"):60120,Og=Qt?Symbol.for("react.memo"):60115,Bg=Qt?Symbol.for("react.lazy"):60116,Sfe=Qt?Symbol.for("react.block"):60121,wfe=Qt?Symbol.for("react.fundamental"):60117,Efe=Qt?Symbol.for("react.responder"):60118,Cfe=Qt?Symbol.for("react.scope"):60119;function xn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case r3:switch(t=t.type,t){case i3:case Ag:case Sg:case Eg:case wg:case Rg:return t;default:switch(t=t&&t.$$typeof,t){case Tg:case Pg:case Bg:case Og:case Cg:return t;default:return e}}case n3:return e}}}function wU(t){return xn(t)===Ag}Ge.AsyncMode=i3;Ge.ConcurrentMode=Ag;Ge.ContextConsumer=Tg;Ge.ContextProvider=Cg;Ge.Element=r3;Ge.ForwardRef=Pg;Ge.Fragment=Sg;Ge.Lazy=Bg;Ge.Memo=Og;Ge.Portal=n3;Ge.Profiler=Eg;Ge.StrictMode=wg;Ge.Suspense=Rg;Ge.isAsyncMode=function(t){return wU(t)||xn(t)===i3};Ge.isConcurrentMode=wU;Ge.isContextConsumer=function(t){return xn(t)===Tg};Ge.isContextProvider=function(t){return xn(t)===Cg};Ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===r3};Ge.isForwardRef=function(t){return xn(t)===Pg};Ge.isFragment=function(t){return xn(t)===Sg};Ge.isLazy=function(t){return xn(t)===Bg};Ge.isMemo=function(t){return xn(t)===Og};Ge.isPortal=function(t){return xn(t)===n3};Ge.isProfiler=function(t){return xn(t)===Eg};Ge.isStrictMode=function(t){return xn(t)===wg};Ge.isSuspense=function(t){return xn(t)===Rg};Ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Sg||t===Ag||t===Eg||t===wg||t===Rg||t===xfe||typeof t=="object"&&t!==null&&(t.$$typeof===Bg||t.$$typeof===Og||t.$$typeof===Cg||t.$$typeof===Tg||t.$$typeof===Pg||t.$$typeof===wfe||t.$$typeof===Efe||t.$$typeof===Cfe||t.$$typeof===Sfe)};Ge.typeOf=xn;SU.exports=Ge;var Tfe=SU.exports,EU=Tfe,Afe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Pfe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CU={};CU[EU.ForwardRef]=Afe;CU[EU.Memo]=Pfe;var ze={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s3=Symbol.for("react.element"),o3=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),Dg=Symbol.for("react.strict_mode"),Mg=Symbol.for("react.profiler"),Ig=Symbol.for("react.provider"),Fg=Symbol.for("react.context"),Rfe=Symbol.for("react.server_context"),Lg=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Ug=Symbol.for("react.suspense_list"),Gg=Symbol.for("react.memo"),zg=Symbol.for("react.lazy"),Ofe=Symbol.for("react.offscreen"),TU;TU=Symbol.for("react.module.reference");function Gn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case s3:switch(t=t.type,t){case kg:case Mg:case Dg:case Ng:case Ug:return t;default:switch(t=t&&t.$$typeof,t){case Rfe:case Fg:case Lg:case zg:case Gg:case Ig:return t;default:return e}}case o3:return e}}}ze.ContextConsumer=Fg;ze.ContextProvider=Ig;ze.Element=s3;ze.ForwardRef=Lg;ze.Fragment=kg;ze.Lazy=zg;ze.Memo=Gg;ze.Portal=o3;ze.Profiler=Mg;ze.StrictMode=Dg;ze.Suspense=Ng;ze.SuspenseList=Ug;ze.isAsyncMode=function(){return!1};ze.isConcurrentMode=function(){return!1};ze.isContextConsumer=function(t){return Gn(t)===Fg};ze.isContextProvider=function(t){return Gn(t)===Ig};ze.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===s3};ze.isForwardRef=function(t){return Gn(t)===Lg};ze.isFragment=function(t){return Gn(t)===kg};ze.isLazy=function(t){return Gn(t)===zg};ze.isMemo=function(t){return Gn(t)===Gg};ze.isPortal=function(t){return Gn(t)===o3};ze.isProfiler=function(t){return Gn(t)===Mg};ze.isStrictMode=function(t){return Gn(t)===Dg};ze.isSuspense=function(t){return Gn(t)===Ng};ze.isSuspenseList=function(t){return Gn(t)===Ug};ze.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===kg||t===Mg||t===Dg||t===Ng||t===Ug||t===Ofe||typeof t=="object"&&t!==null&&(t.$$typeof===zg||t.$$typeof===Gg||t.$$typeof===Ig||t.$$typeof===Fg||t.$$typeof===Lg||t.$$typeof===TU||t.getModuleId!==void 0)};ze.typeOf=Gn;function Bfe(){const t=pfe();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0,s=r={callback:n,next:null,prev:r};return s.prev?s.prev.next=s:e=s,function(){!i||e===null||(i=!1,s.next?s.next.prev=s.prev:r=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}const XP={notify(){},get:()=>[]};function kfe(t,e){let r,n=XP,i=0,s=!1;function o(m){c();const g=n.subscribe(m);let v=!1;return()=>{v||(v=!0,g(),f())}}function a(){n.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,r||(r=e?e.addNestedSub(u):t.subscribe(u),n=Bfe())}function f(){i--,r&&i===0&&(r(),r=void 0,n.clear(),n=XP)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>n};return p}const Dfe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mfe=Dfe?M.useLayoutEffect:M.useEffect;function lye({store:t,context:e,children:r,serverState:n,stabilityCheck:i="once",noopCheck:s="once"}){const o=M.useMemo(()=>{const l=kfe(t);return{store:t,subscription:l,getServerState:n?()=>n:void 0,stabilityCheck:i,noopCheck:s}},[t,n,i,s]),a=M.useMemo(()=>t.getState(),[t]);Mfe(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==t.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=e||io;return M.createElement(u.Provider,{value:o},r)}function AU(t=io){const e=t===io?bU:t3(t);return function(){const{store:n}=e();return n}}const Ife=AU();function Ffe(t=io){const e=t===io?Ife:AU(t);return function(){return e().dispatch}}const cye=Ffe();vfe(ffe.useSyncExternalStoreWithSelector);hfe(Zc.unstable_batchedUpdates);function Lfe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Nfe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Ufe=function(){function t(r){var n=this;this._insertTag=function(i){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(i,s),n.tags.push(i)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Nfe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=Lfe(i);try{s.insertRule(n,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){return n.parentNode&&n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},t}(),lr="-ms-",$p="-moz-",De="-webkit-",PU="comm",a3="rule",u3="decl",Gfe="@import",RU="@keyframes",zfe="@layer",$fe=Math.abs,$g=String.fromCharCode,jfe=Object.assign;function Hfe(t,e){return tr(t,0)^45?(((e<<2^tr(t,0))<<2^tr(t,1))<<2^tr(t,2))<<2^tr(t,3):0}function OU(t){return t.trim()}function Vfe(t,e){return(t=e.exec(t))?t[0]:t}function Me(t,e,r){return t.replace(e,r)}function rx(t,e){return t.indexOf(e)}function tr(t,e){return t.charCodeAt(e)|0}function Tf(t,e,r){return t.slice(e,r)}function ci(t){return t.length}function l3(t){return t.length}function eh(t,e){return e.push(t),t}function Wfe(t,e){return t.map(e).join("")}var jg=1,zu=1,BU=0,qr=0,Dt=0,dl="";function Hg(t,e,r,n,i,s,o){return{value:t,root:e,parent:r,type:n,props:i,children:s,line:jg,column:zu,length:o,return:""}}function Yl(t,e){return jfe(Hg("",null,null,"",null,null,0),t,{length:-t.length},e)}function Xfe(){return Dt}function qfe(){return Dt=qr>0?tr(dl,--qr):0,zu--,Dt===10&&(zu=1,jg--),Dt}function ln(){return Dt=qr<BU?tr(dl,qr++):0,zu++,Dt===10&&(zu=1,jg++),Dt}function Ri(){return tr(dl,qr)}function kh(){return qr}function nd(t,e){return Tf(dl,t,e)}function Af(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function kU(t){return jg=zu=1,BU=ci(dl=t),qr=0,[]}function DU(t){return dl="",t}function Dh(t){return OU(nd(qr-1,nx(t===91?t+2:t===40?t+1:t)))}function Yfe(t){for(;(Dt=Ri())&&Dt<33;)ln();return Af(t)>2||Af(Dt)>3?"":" "}function Kfe(t,e){for(;--e&&ln()&&!(Dt<48||Dt>102||Dt>57&&Dt<65||Dt>70&&Dt<97););return nd(t,kh()+(e<6&&Ri()==32&&ln()==32))}function nx(t){for(;ln();)switch(Dt){case t:return qr;case 34:case 39:t!==34&&t!==39&&nx(Dt);break;case 40:t===41&&nx(t);break;case 92:ln();break}return qr}function Zfe(t,e){for(;ln()&&t+Dt!==47+10;)if(t+Dt===42+42&&Ri()===47)break;return"/*"+nd(e,qr-1)+"*"+$g(t===47?t:ln())}function Qfe(t){for(;!Af(Ri());)ln();return nd(t,qr)}function Jfe(t){return DU(Mh("",null,null,null,[""],t=kU(t),0,[0],t))}function Mh(t,e,r,n,i,s,o,a,u){for(var l=0,c=0,f=o,d=0,h=0,p=0,m=1,g=1,v=1,y=0,b="",_=i,x=s,S=n,w=b;g;)switch(p=y,y=ln()){case 40:if(p!=108&&tr(w,f-1)==58){rx(w+=Me(Dh(y),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:w+=Dh(y);break;case 9:case 10:case 13:case 32:w+=Yfe(p);break;case 92:w+=Kfe(kh()-1,7);continue;case 47:switch(Ri()){case 42:case 47:eh(ede(Zfe(ln(),kh()),e,r),u);break;default:w+="/"}break;case 123*m:a[l++]=ci(w)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+c:v==-1&&(w=Me(w,/\f/g,"")),h>0&&ci(w)-f&&eh(h>32?YP(w+";",n,r,f-1):YP(Me(w," ","")+";",n,r,f-2),u);break;case 59:w+=";";default:if(eh(S=qP(w,e,r,l,c,i,a,b,_=[],x=[],f),s),y===123)if(c===0)Mh(w,e,S,S,_,s,f,a,x);else switch(d===99&&tr(w,3)===110?100:d){case 100:case 108:case 109:case 115:Mh(t,S,S,n&&eh(qP(t,S,S,0,0,i,a,b,i,_=[],f),x),i,x,f,a,n?_:x);break;default:Mh(w,S,S,S,[""],x,0,a,x)}}l=c=h=0,m=v=1,b=w="",f=o;break;case 58:f=1+ci(w),h=p;default:if(m<1){if(y==123)--m;else if(y==125&&m++==0&&qfe()==125)continue}switch(w+=$g(y),y*m){case 38:v=c>0?1:(w+="\f",-1);break;case 44:a[l++]=(ci(w)-1)*v,v=1;break;case 64:Ri()===45&&(w+=Dh(ln())),d=Ri(),c=f=ci(b=w+=Qfe(kh())),y++;break;case 45:p===45&&ci(w)==2&&(m=0)}}return s}function qP(t,e,r,n,i,s,o,a,u,l,c){for(var f=i-1,d=i===0?s:[""],h=l3(d),p=0,m=0,g=0;p<n;++p)for(var v=0,y=Tf(t,f+1,f=$fe(m=o[p])),b=t;v<h;++v)(b=OU(m>0?d[v]+" "+y:Me(y,/&\f/g,d[v])))&&(u[g++]=b);return Hg(t,e,r,i===0?a3:a,u,l,c)}function ede(t,e,r){return Hg(t,e,r,PU,$g(Xfe()),Tf(t,2,-2),0)}function YP(t,e,r,n){return Hg(t,e,r,u3,Tf(t,0,n),Tf(t,n+1,-1),n)}function vu(t,e){for(var r="",n=l3(t),i=0;i<n;i++)r+=e(t[i],i,t,e)||"";return r}function tde(t,e,r,n){switch(t.type){case zfe:if(t.children.length)break;case Gfe:case u3:return t.return=t.return||t.value;case PU:return"";case RU:return t.return=t.value+"{"+vu(t.children,n)+"}";case a3:t.value=t.props.join(",")}return ci(r=vu(t.children,n))?t.return=t.value+"{"+r+"}":""}function rde(t){var e=l3(t);return function(r,n,i,s){for(var o="",a=0;a<e;a++)o+=t[a](r,n,i,s)||"";return o}}function nde(t){return function(e){e.root||(e=e.return)&&t(e)}}function ide(t){var e=Object.create(null);return function(r){return e[r]===void 0&&(e[r]=t(r)),e[r]}}var sde=function(e,r,n){for(var i=0,s=0;i=s,s=Ri(),i===38&&s===12&&(r[n]=1),!Af(s);)ln();return nd(e,qr)},ode=function(e,r){var n=-1,i=44;do switch(Af(i)){case 0:i===38&&Ri()===12&&(r[n]=1),e[n]+=sde(qr-1,r,n);break;case 2:e[n]+=Dh(i);break;case 4:if(i===44){e[++n]=Ri()===58?"&\f":"",r[n]=e[n].length;break}default:e[n]+=$g(i)}while(i=ln());return e},ade=function(e,r){return DU(ode(kU(e),r))},KP=new WeakMap,ude=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var r=e.value,n=e.parent,i=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&r.charCodeAt(0)!==58&&!KP.get(n))&&!i){KP.set(e,!0);for(var s=[],o=ade(r,s),a=n.props,u=0,l=0;u<o.length;u++)for(var c=0;c<a.length;c++,l++)e.props[l]=s[u]?o[u].replace(/&\f/g,a[c]):a[c]+" "+o[u]}}},lde=function(e){if(e.type==="decl"){var r=e.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(e.return="",e.value="")}};function MU(t,e){switch(Hfe(t,e)){case 5103:return De+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return De+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return De+t+$p+t+lr+t+t;case 6828:case 4268:return De+t+lr+t+t;case 6165:return De+t+lr+"flex-"+t+t;case 5187:return De+t+Me(t,/(\w+).+(:[^]+)/,De+"box-$1$2"+lr+"flex-$1$2")+t;case 5443:return De+t+lr+"flex-item-"+Me(t,/flex-|-self/,"")+t;case 4675:return De+t+lr+"flex-line-pack"+Me(t,/align-content|flex-|-self/,"")+t;case 5548:return De+t+lr+Me(t,"shrink","negative")+t;case 5292:return De+t+lr+Me(t,"basis","preferred-size")+t;case 6060:return De+"box-"+Me(t,"-grow","")+De+t+lr+Me(t,"grow","positive")+t;case 4554:return De+Me(t,/([^-])(transform)/g,"$1"+De+"$2")+t;case 6187:return Me(Me(Me(t,/(zoom-|grab)/,De+"$1"),/(image-set)/,De+"$1"),t,"")+t;case 5495:case 3959:return Me(t,/(image-set\([^]*)/,De+"$1$`$1");case 4968:return Me(Me(t,/(.+:)(flex-)?(.*)/,De+"box-pack:$3"+lr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+De+t+t;case 4095:case 3583:case 4068:case 2532:return Me(t,/(.+)-inline(.+)/,De+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ci(t)-1-e>6)switch(tr(t,e+1)){case 109:if(tr(t,e+4)!==45)break;case 102:return Me(t,/(.+:)(.+)-([^]+)/,"$1"+De+"$2-$3$1"+$p+(tr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~rx(t,"stretch")?MU(Me(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(tr(t,e+1)!==115)break;case 6444:switch(tr(t,ci(t)-3-(~rx(t,"!important")&&10))){case 107:return Me(t,":",":"+De)+t;case 101:return Me(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+De+(tr(t,14)===45?"inline-":"")+"box$3$1"+De+"$2$3$1"+lr+"$2box$3")+t}break;case 5936:switch(tr(t,e+11)){case 114:return De+t+lr+Me(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return De+t+lr+Me(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return De+t+lr+Me(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return De+t+lr+t+t}return t}var cde=function(e,r,n,i){if(e.length>-1&&!e.return)switch(e.type){case u3:e.return=MU(e.value,e.length);break;case RU:return vu([Yl(e,{value:Me(e.value,"@","@"+De)})],i);case a3:if(e.length)return Wfe(e.props,function(s){switch(Vfe(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vu([Yl(e,{props:[Me(s,/:(read-\w+)/,":"+$p+"$1")]})],i);case"::placeholder":return vu([Yl(e,{props:[Me(s,/:(plac\w+)/,":"+De+"input-$1")]}),Yl(e,{props:[Me(s,/:(plac\w+)/,":"+$p+"$1")]}),Yl(e,{props:[Me(s,/:(plac\w+)/,lr+"input-$1")]})],i)}return""})}},fde=[cde],dde=function(e){var r=e.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||fde,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)s[g[v]]=!0;a.push(m)});var u,l=[ude,lde];{var c,f=[tde,nde(function(m){c.insert(m)})],d=rde(l.concat(i,f)),h=function(g){return vu(Jfe(g),d)};u=function(g,v,y,b){c=y,h(g?g+"{"+v.styles+"}":v.styles),b&&(p.inserted[v.name]=!0)}}var p={key:r,sheet:new Ufe({key:r,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:u};return p.sheet.hydrate(a),p};function hde(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var pde={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},mde=/[A-Z]|^ms/g,gde=/_EMO_([^_]+?)_([^]*?)_EMO_/g,IU=function(e){return e.charCodeAt(1)===45},ZP=function(e){return e!=null&&typeof e!="boolean"},hy=ide(function(t){return IU(t)?t:t.replace(mde,"-$&").toLowerCase()}),QP=function(e,r){switch(e){case"animation":case"animationName":if(typeof r=="string")return r.replace(gde,function(n,i,s){return fi={name:i,styles:s,next:fi},i})}return pde[e]!==1&&!IU(e)&&typeof r=="number"&&r!==0?r+"px":r};function Pf(t,e,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return fi={name:r.name,styles:r.styles,next:fi},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)fi={name:n.name,styles:n.styles,next:fi},n=n.next;var i=r.styles+";";return i}return vde(t,e,r)}case"function":{if(t!==void 0){var s=fi,o=r(t);return fi=s,Pf(t,e,o)}break}}if(e==null)return r;var a=e[r];return a!==void 0?a:r}function vde(t,e,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=Pf(t,e,r[i])+";";else for(var s in r){var o=r[s];if(typeof o!="object")e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":ZP(o)&&(n+=hy(s)+":"+QP(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)ZP(o[a])&&(n+=hy(s)+":"+QP(s,o[a])+";");else{var u=Pf(t,e,o);switch(s){case"animation":case"animationName":{n+=hy(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}return n}var JP=/label:\s*([^\s;\n{]+)\s*(;|$)/g,fi,py=function(e,r,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";fi=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Pf(n,r,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Pf(n,r,e[a]),i&&(s+=o[a]);JP.lastIndex=0;for(var u="",l;(l=JP.exec(s))!==null;)u+="-"+l[1];var c=hde(s)+u;return{name:c,styles:s,next:fi}},yde=!0;function FU(t,e,r){var n="";return r.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):n+=i+" "}),n}var _de=function(e,r,n){var i=e.key+"-"+r.name;(n===!1||yde===!1)&&e.registered[i]===void 0&&(e.registered[i]=r.styles)},bde=function(e,r,n){_de(e,r,n);var i=e.key+"-"+r.name;if(e.inserted[r.name]===void 0){var s=r;do e.insert(r===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function eR(t,e){if(t.inserted[e.name]===void 0)return t.insert("",e,t.sheet,!0)}function tR(t,e,r){var n=[],i=FU(t,n,r);return n.length<2?r:i+e(n)}var xde=function(e){var r=dde(e);r.sheet.speedy=function(a){this.isSpeedy=a},r.compat=!0;var n=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=py(l,r.registered,void 0);return bde(r,f,!1),r.key+"-"+f.name},i=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=py(l,r.registered),d="animation-"+f.name;return eR(r,{name:f.name,styles:"@keyframes "+d+"{"+f.styles+"}"}),d},s=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var f=py(l,r.registered);eR(r,f)},o=function(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return tR(r.registered,n,Sde(l))};return{css:n,cx:o,injectGlobal:s,keyframes:i,hydrate:function(u){u.forEach(function(l){r.inserted[l]=!0})},flush:function(){r.registered={},r.inserted={},r.sheet.flush()},sheet:r.sheet,cache:r,getRegisteredStyles:FU.bind(null,r.registered),merge:tR.bind(null,r.registered,n)}},Sde=function t(e){for(var r="",n=0;n<e.length;n++){var i=e[n];if(i!=null){var s=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))s=t(i);else{s="";for(var o in i)i[o]&&o&&(s&&(s+=" "),s+=o)}break}default:s=i}s&&(r&&(r+=" "),r+=s)}}return r},LU=xde({key:"css"}),fye=LU.injectGlobal,dye=LU.css,c3={},wde={document:{}},Vg=Object.prototype.hasOwnProperty,NU=function(t){return Wg(t)?t.toLowerCase():t},Ic=Array.isArray,Ede=function(t){return Wg(t)?t.replace(/[A-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)|32)}):t};"I".toLowerCase()!=="i"&&(NU=Ede);function jp(t){var e=Function.prototype.constructor;delete Function.prototype.constructor;var r=t();return Function.prototype.constructor=e,r}var Cde,f3=Object.prototype.toString,UU=Object.getPrototypeOf,my=VU("ng");function Tde(t){if(t==null||h3(t))return!1;if(Ic(t)||Wg(t)||Cde)return!0;var e="length"in Object(t)&&t.length;return d3(e)&&(e>=0&&(e-1 in t||t instanceof Array)||typeof t.item=="function")}function ut(t,e,r){var n,i;if(t)if(jU(t))for(n in t)n!=="prototype"&&n!=="length"&&n!=="name"&&t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else if(Ic(t)||Tde(t)){var s=typeof t!="object";for(n=0,i=t.length;n<i;n++)(s||n in t)&&e.call(r,t[n],n,t)}else if(t.forEach&&t.forEach!==ut)t.forEach(e,r,t);else if($U(t))for(n in t)e.call(r,t[n],n,t);else if(typeof t.hasOwnProperty=="function")for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t);else for(n in t)Vg.call(t,n)&&e.call(r,t[n],n,t);return t}function Ade(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function GU(){}function Pde(t){return typeof t>"u"}function Wa(t){return typeof t<"u"}function zU(t){return t!==null&&typeof t=="object"}function $U(t){return t!==null&&typeof t=="object"&&!UU(t)}function Wg(t){return typeof t=="string"}function d3(t){return typeof t=="number"}function jU(t){return typeof t=="function"}function h3(t){return t&&t.window===t}function HU(t){return t&&t.$evalAsync&&t.$watch}var Rde=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/;function Ode(t){return t&&d3(t.length)&&Rde.test(f3.call(t))}function Bde(t){return f3.call(t)==="[object ArrayBuffer]"}function kde(t,e){var r=[],n=[];if(e){if(Ode(e)||Bde(e))throw my("cpta","Can't copy! TypedArray destination cannot be mutated.");if(t===e)throw my("cpi","Can't copy! Source and destination are identical.");return Ic(e)?e.length=0:ut(e,function(a,u){u!=="$$hashKey"&&delete e[u]}),r.push(t),n.push(e),i(t,e)}return s(t);function i(a,u){var l=u.$$hashKey,c;if(Ic(a))for(var f=0,d=a.length;f<d;f++)u.push(s(a[f]));else if($U(a))for(c in a)u[c]=s(a[c]);else if(a&&typeof a.hasOwnProperty=="function")for(c in a)a.hasOwnProperty(c)&&(u[c]=s(a[c]));else for(c in a)Vg.call(a,c)&&(u[c]=s(a[c]));return Ade(u,l),u}function s(a){if(!zU(a))return a;var u=r.indexOf(a);if(u!==-1)return n[u];if(h3(a)||HU(a))throw my("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var l=!1,c=o(a);return c===void 0&&(c=Ic(a)?[]:Object.create(UU(a)),l=!0),r.push(a),n.push(c),l?i(a,c):c}function o(a){switch(f3.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(s(a.buffer),a.byteOffset,a.length);case"[object ArrayBuffer]":if(!a.slice){var u=new ArrayBuffer(a.byteLength);return new Uint8Array(u).set(new Uint8Array(a)),u}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var l=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return l.lastIndex=a.lastIndex,l;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(jU(a.cloneNode))return a.cloneNode(!0)}}function Dde(t,e){var r=e;return typeof t=="string"&&t.charAt(0)==="$"&&t.charAt(1)==="$"?r=void 0:h3(e)?r="$WINDOW":e&&wde.document===e?r="$DOCUMENT":HU(e)&&(r="$SCOPE"),r}function Mde(){return Object.create(null)}function Ide(t){var e=[];return JSON.stringify(t,function(r,n){if(n=Dde(r,n),zU(n)){if(e.indexOf(n)>=0)return"...";e.push(n)}return n})}function rR(t){return typeof t=="function"?t.toString().replace(/ \{[\s\S]*$/,""):Pde(t)?"undefined":typeof t!="string"?Ide(t):t}function VU(t,e){return e=e||Error,function(){var r=2,n=arguments,i=n[0],s="["+(t?t+":":"")+i+"] ",o=n[1],a,u;for(s+=o.replace(/\{\d+\}/g,function(l){var c=+l.slice(1,-1),f=c+r;return f<n.length?rR(n[f]):l}),s+=`
http://errors.angularjs.org/"NG_VERSION_FULL"/`+(t?t+"/":"")+i,u=r,a="?";u<n.length;u++,a="&")s+=a+"p"+(u-r)+"="+encodeURIComponent(rR(n[u]));return new e(s)}}var Xa=VU("$parse");function WU(t){return t+""}var Ih=Mde();ut("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(t){Ih[t]=!0});var Fde={n:`
`,f:"\f",r:"\r",t:"	",v:"\v","'":"'",'"':'"'};function Fh(t){this.options=t||{}}Fh.prototype={constructor:Fh,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if(e==='"'||e==="'"||e==="`")this.readString(e);else if(this.isNumber(e)||e==="."&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var r=e+this.peek(),n=r+this.peek(2),i=Ih[e],s=Ih[r],o=Ih[n];if(i||s||o){var a=o?n:s?r:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(t,e){return e.indexOf(t)!==-1},peek:function(t){var e=t||1;return this.index+e<this.text.length?this.text.charAt(this.index+e):!1},isNumber:function(t){return t>="0"&&t<="9"&&typeof t=="string"},isWhitespace:function(t){return t===" "||t==="\r"||t==="	"||t===`
`||t==="\v"||t===""},isIdentifierStart:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},isValidIdentifierStart:function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t==="_"||t==="$"},isIdentifierContinue:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},isValidIdentifierContinue:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},codePointAt:function(t){return t.length===1?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},peekMultichar:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var r=t.charCodeAt(0),n=e.charCodeAt(0);return r>=55296&&r<=56319&&n>=56320&&n<=57343?t+e:t},isExpOperator:function(t){return t==="-"||t==="+"||this.isNumber(t)},throwError:function(t,e,r){r=r||this.index;var n=Wa(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,r)+"]":" "+r;throw Xa("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",t,n,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var r=NU(this.text.charAt(this.index));if(r==="."||this.isNumber(r))t+=r;else{var n=this.peek();if(r==="e"&&this.isExpOperator(n))t+=r;else if(this.isExpOperator(r)&&n&&this.isNumber(n)&&t.charAt(t.length-1)==="e")t+=r;else if(this.isExpOperator(r)&&(!n||!this.isNumber(n))&&t.charAt(t.length-1)==="e")this.throwError("Invalid exponent");else break}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var r="",n=t,i=t==="`",s=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i&&o==="$"&&this.text.charAt(this.index+1)==="{"){this.tokens.push({index:e,text:n,constant:!0,value:r});var a=this.text.indexOf("}",this.index),u=this.text.substr(this.index+2,a-this.index-2);this.tokens.push({index:this.index,text:"+",operator:!0});for(var l=new Fh(this.options).lex(u),c=0,f=l.length;c<f;c++)this.tokens.push(l[c]);this.tokens.push({index:this.index,text:"+",operator:!0}),this.index=a,this.readString("`");return}if(n+=o,s){if(o==="u"){var d=this.text.substring(this.index+1,this.index+5);d.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+d+"]"),this.index+=4,r+=String.fromCharCode(parseInt(d,16))}else{var h=Fde[o];r=r+(h||o)}s=!1}else if(o==="\\")s=!0;else if(o===t){this.index++,this.tokens.push({index:e,text:n,constant:!0,value:r});return}else r+=o;this.index++}this.throwError("Unterminated quote",e)}};function Y(t,e){this.lexer=t,this.options=e}Y.Program="Program";Y.ExpressionStatement="ExpressionStatement";Y.AssignmentExpression="AssignmentExpression";Y.ConditionalExpression="ConditionalExpression";Y.LogicalExpression="LogicalExpression";Y.BinaryExpression="BinaryExpression";Y.UnaryExpression="UnaryExpression";Y.CallExpression="CallExpression";Y.MemberExpression="MemberExpression";Y.Identifier="Identifier";Y.Literal="Literal";Y.ArrayExpression="ArrayExpression";Y.Property="Property";Y.ObjectExpression="ObjectExpression";Y.ThisExpression="ThisExpression";Y.LocalsExpression="LocalsExpression";Y.NGValueParameter="NGValueParameter";Y.prototype={ast:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return this.tokens.length!==0&&this.throwError("is an unexpected token",this.tokens[0]),e},program:function(){for(var t=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.push(this.expressionStatement()),!this.expect(";"))return{type:Y.Program,body:t}},expressionStatement:function(){return{type:Y.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},expression:function(){return this.assignment()},assignment:function(){var t=this.ternary();if(this.expect("=")){if(!YU(t))throw Xa("lval","Trying to assign a value to a non l-value");t={type:Y.AssignmentExpression,left:t,right:this.assignment(),operator:"="}}return t},ternary:function(){var t=this.logicalOR(),e,r;return this.expect("?")&&(e=this.expression(),this.consume(":"))?(r=this.expression(),{type:Y.ConditionalExpression,test:t,alternate:e,consequent:r}):t},logicalOR:function(){for(var t=this.logicalAND();this.expect("||");)t={type:Y.LogicalExpression,operator:"||",left:t,right:this.logicalAND()};return t},logicalAND:function(){for(var t=this.equality();this.expect("&&");)t={type:Y.LogicalExpression,operator:"&&",left:t,right:this.equality()};return t},equality:function(){for(var t=this.relational(),e;e=this.expect("==","!=","===","!==");)t={type:Y.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var t=this.additive(),e;e=this.expect("<",">","<=",">=");)t={type:Y.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var t=this.multiplicative(),e;e=this.expect("+","-");)t={type:Y.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var t=this.unary(),e;e=this.expect("*","/","%");)t={type:Y.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var t;return(t=this.expect("+","-","!"))?{type:Y.UnaryExpression,operator:t.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?t=kde(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?t={type:Y.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e;e=this.expect("(","[",".");)e.text==="("?(t={type:Y.CallExpression,callee:t,arguments:this.parseArguments()},this.consume(")")):e.text==="["?(t={type:Y.MemberExpression,object:t,property:this.expression(),computed:!0},this.consume("]")):e.text==="."?t={type:Y.MemberExpression,object:t,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return t},filter:function(t){for(var e=[t],r={type:Y.CallExpression,callee:this.identifier(),arguments:e,filter:!0};this.expect(":");)e.push(this.expression());return r},parseArguments:function(){var t=[];if(this.peekToken().text!==")")do t.push(this.filterChain());while(this.expect(","));return t},identifier:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),{type:Y.Identifier,name:t.text}},constant:function(){return{type:Y.Literal,value:this.consume().value}},arrayDeclaration:function(){var t=[];if(this.peekToken().text!=="]")do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Y.ArrayExpression,elements:t}},object:function(){var t=[],e;if(this.peekToken().text!=="}")do{if(this.peek("}"))break;e={type:Y.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Y.ObjectExpression,properties:t}},throwError:function(t,e){throw Xa("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",e.text,t,e.index+1,this.text,this.text.substring(e.index))},consume:function(t){if(this.tokens.length===0)throw Xa("ueoe","Unexpected end of expression: {0}",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},peekToken:function(){if(this.tokens.length===0)throw Xa("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(t,e,r,n){return this.peekAhead(0,t,e,r,n)},peekAhead:function(t,e,r,n,i){if(this.tokens.length>t){var s=this.tokens[t],o=s.text;if(o===e||o===r||o===n||o===i||!e&&!r&&!n&&!i)return s}return!1},expect:function(t,e,r,n){var i=this.peek(t,e,r,n);return i?(this.tokens.shift(),i):!1}};function Lde(t,e){return typeof t<"u"?t:e}function XU(t,e){return typeof t>"u"?e:typeof e>"u"?t:t+e}function Nde(t,e){var r=t(e);if(!r)throw new Error("Filter '"+e+"' is not defined");return!r.$stateful}function Vt(t,e){var r,n,i;switch(t.type){case Y.Program:r=!0,ut(t.body,function(s){Vt(s.expression,e),r=r&&s.expression.constant}),t.constant=r;break;case Y.Literal:t.constant=!0,t.toWatch=[];break;case Y.UnaryExpression:Vt(t.argument,e),t.constant=t.argument.constant,t.toWatch=t.argument.toWatch;break;case Y.BinaryExpression:Vt(t.left,e),Vt(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.left.toWatch.concat(t.right.toWatch);break;case Y.LogicalExpression:Vt(t.left,e),Vt(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=t.constant?[]:[t];break;case Y.ConditionalExpression:Vt(t.test,e),Vt(t.alternate,e),Vt(t.consequent,e),t.constant=t.test.constant&&t.alternate.constant&&t.consequent.constant,t.toWatch=t.constant?[]:[t];break;case Y.Identifier:t.constant=!1,t.toWatch=[t];break;case Y.MemberExpression:Vt(t.object,e),t.computed&&Vt(t.property,e),t.constant=t.object.constant&&(!t.computed||t.property.constant),t.toWatch=[t];break;case Y.CallExpression:i=t.filter?Nde(e,t.callee.name):!1,r=i,n=[],ut(t.arguments,function(s){Vt(s,e),r=r&&s.constant,s.constant||n.push.apply(n,s.toWatch)}),t.constant=r,t.toWatch=i?n:[t];break;case Y.AssignmentExpression:Vt(t.left,e),Vt(t.right,e),t.constant=t.left.constant&&t.right.constant,t.toWatch=[t];break;case Y.ArrayExpression:r=!0,n=[],ut(t.elements,function(s){Vt(s,e),r=r&&s.constant,s.constant||n.push.apply(n,s.toWatch)}),t.constant=r,t.toWatch=n;break;case Y.ObjectExpression:r=!0,n=[],ut(t.properties,function(s){Vt(s.value,e),r=r&&s.value.constant&&!s.computed,s.value.constant||n.push.apply(n,s.value.toWatch)}),t.constant=r,t.toWatch=n;break;case Y.ThisExpression:t.constant=!1,t.toWatch=[];break;case Y.LocalsExpression:t.constant=!1,t.toWatch=[];break}}function qU(t){if(t.length===1){var e=t[0].expression,r=e.toWatch;return r.length!==1||r[0]!==e?r:void 0}}function YU(t){return t.type===Y.Identifier||t.type===Y.MemberExpression}function KU(t){if(t.body.length===1&&YU(t.body[0].expression))return{type:Y.AssignmentExpression,left:t.body[0].expression,right:{type:Y.NGValueParameter},operator:"="}}function ZU(t){return t.body.length===0||t.body.length===1&&(t.body[0].expression.type===Y.Literal||t.body[0].expression.type===Y.ArrayExpression||t.body[0].expression.type===Y.ObjectExpression)}function QU(t){return t.constant}function JU(t,e){this.astBuilder=t,this.$filter=e}JU.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},Vt(r,e.$filter);var n="",i;if(this.stage="assign",i=KU(r)){this.state.computing="assign";var s=this.nextId();this.recurse(i,s),this.return_(s),n="fn.assign="+this.generateFunction("assign","s,v,l")}var o=qU(r.body);e.stage="inputs",ut(o,function(c,f){var d="fn"+f;e.state[d]={vars:[],body:[],own:{}},e.state.computing=d;var h=e.nextId();e.recurse(c,h),e.return_(h),e.state.inputs.push(d),c.watchId=f}),this.state.computing="fn",this.stage="main",this.recurse(r);var a='"'+this.USE+" "+this.STRICT+`";
`+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+n+this.watchFns()+"return fn;",u=new Function("$filter","getStringValue","ifDefined","plus",a)(this.$filter,WU,Lde,XU),l=function(c,f,d,h){return jp(function(){return u(c,f,d,h)})};return l.assign=function(c,f,d){return jp(function(){return u.assign(c,f,d)})},l.inputs=u.inputs,this.state=this.stage=void 0,l.ast=r,l.literal=ZU(r),l.constant=QU(r),l},USE:"use",STRICT:"strict",watchFns:function(){var t=[],e=this.state.inputs,r=this;return ut(e,function(n){t.push("var "+n+"="+r.generateFunction(n,"s"))}),e.length&&t.push("fn.inputs=["+e.join(",")+"];"),t.join("")},generateFunction:function(t,e){return"function("+e+"){"+this.varsPrefix(t)+this.body(t)+"};"},filterPrefix:function(){var t=[],e=this;return ut(this.state.filters,function(r,n){t.push(r+"=$filter("+e.escape(n)+")")}),t.length?"var "+t.join(",")+";":""},varsPrefix:function(t){return this.state[t].vars.length?"var "+this.state[t].vars.join(",")+";":""},body:function(t){return this.state[t].body.join("")},recurse:function(t,e,r,n,i,s){var o,a,u=this,l,c,f;if(n=n||GU,!s&&Wa(t.watchId)){e=e||this.nextId(),this.if_("i",this.lazyAssign(e,this.unsafeComputedMember("i",t.watchId)),this.lazyRecurse(t,e,r,n,i,!0));return}switch(t.type){case Y.Program:ut(t.body,function(h,p){u.recurse(h.expression,void 0,void 0,function(m){a=m}),p!==t.body.length-1?u.current().body.push(a,";"):u.return_(a)});break;case Y.Literal:c=this.escape(t.value),this.assign(e,c),n(e||c);break;case Y.UnaryExpression:this.recurse(t.argument,void 0,void 0,function(h){a=h}),c=t.operator+"("+this.ifDefined(a,0)+")",this.assign(e,c),n(c);break;case Y.BinaryExpression:this.recurse(t.left,void 0,void 0,function(h){o=h}),this.recurse(t.right,void 0,void 0,function(h){a=h}),t.operator==="+"?c=this.plus(o,a):t.operator==="-"?c=this.ifDefined(o,0)+t.operator+this.ifDefined(a,0):c="("+o+")"+t.operator+"("+a+")",this.assign(e,c),n(c);break;case Y.LogicalExpression:e=e||this.nextId(),u.recurse(t.left,e),u.if_(t.operator==="&&"?e:u.not(e),u.lazyRecurse(t.right,e)),n(e);break;case Y.ConditionalExpression:e=e||this.nextId(),u.recurse(t.test,e),u.if_(e,u.lazyRecurse(t.alternate,e),u.lazyRecurse(t.consequent,e)),n(e);break;case Y.Identifier:e=e||this.nextId();var d=u.current().inAssignment;r&&(d?r.context=this.assign(this.nextId(),"s"):r.context=u.stage==="inputs"?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",t.name)+"?l:s"),r.computed=!1,r.name=t.name),u.if_(u.stage==="inputs"||u.not(u.getHasOwnProperty("l",t.name)),function(){u.if_(u.stage==="inputs"||u.and_("s",u.or_(u.isNull(u.nonComputedMember("s",t.name)),u.hasOwnProperty_("s",t.name))),function(){i&&i!==1&&u.if_(u.isNull(u.nonComputedMember("s",t.name)),u.lazyAssign(u.nonComputedMember("s",t.name),"{}")),u.assign(e,u.nonComputedMember("s",t.name))})},e&&function(){u.if_(u.hasOwnProperty_("l",t.name),u.lazyAssign(e,u.nonComputedMember("l",t.name)))}),n(e);break;case Y.MemberExpression:o=r&&(r.context=this.nextId())||this.nextId(),e=e||this.nextId(),u.recurse(t.object,o,void 0,function(){var h=null,p=u.current().inAssignment;t.computed?(a=u.nextId(),p||u.state.computing==="assign"?h=u.unsafeComputedMember(o,a):h=u.computedMember(o,a)):(p||u.state.computing==="assign"?h=u.unsafeNonComputedMember(o,t.property.name):h=u.nonComputedMember(o,t.property.name),a=t.property.name),t.computed&&t.property.type===Y.Literal&&u.recurse(t.property,a),u.if_(u.and_(u.notNull(o),u.or_(u.isNull(h),u.hasOwnProperty_(o,a,t.computed))),function(){t.computed?(t.property.type!==Y.Literal&&u.recurse(t.property,a),i&&i!==1&&u.if_(u.not(h),u.lazyAssign(h,"{}")),u.assign(e,h),r&&(r.computed=!0,r.name=a)):(i&&i!==1&&u.if_(u.isNull(h),u.lazyAssign(h,"{}")),u.assign(e,h),r&&(r.computed=!1,r.name=t.property.name))},function(){u.assign(e,"undefined")}),n(e)},!!i);break;case Y.CallExpression:e=e||this.nextId(),t.filter?(a=u.filter(t.callee.name),l=[],ut(t.arguments,function(h){var p=u.nextId();u.recurse(h,p),l.push(p)}),c=a+".call("+a+","+l.join(",")+")",u.assign(e,c),n(e)):(a=u.nextId(),o={},l=[],u.recurse(t.callee,a,o,function(){u.if_(u.notNull(a),function(){if(ut(t.arguments,function(p){u.recurse(p,t.constant?void 0:u.nextId(),void 0,function(m){l.push(m)})}),o.name){var h=u.member(o.context,o.name,o.computed);c="("+h+" === null ? null : "+u.unsafeMember(o.context,o.name,o.computed)+".call("+[o.context].concat(l).join(",")+"))"}else c=a+"("+l.join(",")+")";u.assign(e,c)},function(){u.assign(e,"undefined")}),n(e)}));break;case Y.AssignmentExpression:a=this.nextId(),o={},u.current().inAssignment=!0,this.recurse(t.left,void 0,o,function(){u.if_(u.and_(u.notNull(o.context),u.or_(u.hasOwnProperty_(o.context,o.name),u.isNull(u.member(o.context,o.name,o.computed)))),function(){u.recurse(t.right,a),c=u.member(o.context,o.name,o.computed)+t.operator+a,u.assign(e,c),n(e||c)}),u.current().inAssignment=!1,u.recurse(t.right,a),u.current().inAssignment=!0},1),u.current().inAssignment=!1;break;case Y.ArrayExpression:l=[],ut(t.elements,function(h){u.recurse(h,t.constant?void 0:u.nextId(),void 0,function(p){l.push(p)})}),c="["+l.join(",")+"]",this.assign(e,c),n(e||c);break;case Y.ObjectExpression:l=[],f=!1,ut(t.properties,function(h){h.computed&&(f=!0)}),f?(e=e||this.nextId(),this.assign(e,"{}"),ut(t.properties,function(h){h.computed?(o=u.nextId(),u.recurse(h.key,o)):o=h.key.type===Y.Identifier?h.key.name:""+h.key.value,a=u.nextId(),u.recurse(h.value,a),u.assign(u.unsafeMember(e,o,h.computed),a)})):(ut(t.properties,function(h){u.recurse(h.value,t.constant?void 0:u.nextId(),void 0,function(p){l.push(u.escape(h.key.type===Y.Identifier?h.key.name:""+h.key.value)+":"+p)})}),c="{"+l.join(",")+"}",this.assign(e,c)),n(e||c);break;case Y.ThisExpression:this.assign(e,"s"),n(e||"s");break;case Y.LocalsExpression:this.assign(e,"l"),n(e||"l");break;case Y.NGValueParameter:this.assign(e,"v"),n(e||"v");break}},getHasOwnProperty:function(t,e){var r=t+"."+e,n=this.current().own;return n.hasOwnProperty(r)||(n[r]=this.nextId(!1,t+"&&("+this.escape(e)+" in "+t+")")),n[r]},assign:function(t,e){if(t)return this.current().body.push(t,"=",e,";"),t},filter:function(t){return Vg.call(this.state.filters,t)||(this.state.filters[t]=this.nextId(!0)),this.state.filters[t]},ifDefined:function(t,e){return"ifDefined("+t+","+this.escape(e)+")"},plus:function(t,e){return"plus("+t+","+e+")"},return_:function(t){this.current().body.push("return ",t,";")},if_:function(t,e,r){if(t===!0)e();else{var n=this.current().body;n.push("if(",t,"){"),e(),n.push("}"),r&&(n.push("else{"),r(),n.push("}"))}},or_:function(t,e){return"("+t+") || ("+e+")"},hasOwnProperty_:function(t,e,r){return r?"(Object.prototype.hasOwnProperty.call("+t+","+e+"))":"(Object.prototype.hasOwnProperty.call("+t+",'"+e+"'))"},and_:function(t,e){return"("+t+") && ("+e+")"},not:function(t){return"!("+t+")"},isNull:function(t){return t+"==null"},notNull:function(t){return t+"!=null"},nonComputedMember:function(t,e){var r=/^[$_a-zA-Z][$_a-zA-Z0-9]*$/,n=/[^$_a-zA-Z0-9]/g,i="";return r.test(e)?i=t+"."+e:(e=e.replace(n,this.stringEscapeFn),i=t+'["'+e+'"]'),i},unsafeComputedMember:function(t,e){return t+"["+e+"]"},unsafeNonComputedMember:function(t,e){return this.nonComputedMember(t,e)},computedMember:function(t,e){return this.state.computing==="assign"?this.unsafeComputedMember(t,e):"("+t+".hasOwnProperty("+e+") ? "+t+"["+e+"] : undefined)"},unsafeMember:function(t,e,r){return r?this.unsafeComputedMember(t,e):this.unsafeNonComputedMember(t,e)},member:function(t,e,r){return r?this.computedMember(t,e):this.nonComputedMember(t,e)},getStringValue:function(t){this.assign(t,"getStringValue("+t+")")},lazyRecurse:function(t,e,r,n,i,s){var o=this;return function(){o.recurse(t,e,r,n,i,s)}},lazyAssign:function(t,e){var r=this;return function(){r.assign(t,e)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)},escape:function(t){if(Wg(t))return"'"+t.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(d3(t))return t.toString();if(t===!0)return"true";if(t===!1)return"false";if(t===null)return"null";if(typeof t>"u")return"undefined";throw Xa("esc","IMPOSSIBLE")},nextId:function(t,e){var r="v"+this.state.nextId++;return t||this.current().vars.push(r+(e?"="+e:"")),r},current:function(){return this.state[this.state.computing]}};function e6(t,e){this.astBuilder=t,this.$filter=e}e6.prototype={compile:function(t){var e=this,r=this.astBuilder.ast(t);Vt(r,e.$filter);var n,i;(n=KU(r))&&(i=this.recurse(n));var s=qU(r.body),o;s&&(o=[],ut(s,function(c,f){var d=e.recurse(c);c.input=d,o.push(d),c.watchId=f}));var a=[];ut(r.body,function(c){a.push(e.recurse(c.expression))});var u=r.body.length===0?GU:r.body.length===1?a[0]:function(c,f){var d;return ut(a,function(h){d=h(c,f)}),d};i&&(u.assign=function(c,f,d){return i(c,d,f)});var l=function(c,f){return jp(function(){return u(c,f)})};return l.assign=function(c,f,d){return jp(function(){return u.assign(c,f,d)})},o&&(l.inputs=o),l.ast=r,l.literal=ZU(r),l.constant=QU(r),l},recurse:function(t,e,r){var n,i,s=this,o;if(t.input)return this.inputs(t.input,t.watchId);switch(t.type){case Y.Literal:return this.value(t.value,e);case Y.UnaryExpression:return i=this.recurse(t.argument),this["unary"+t.operator](i,e);case Y.BinaryExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case Y.LogicalExpression:return n=this.recurse(t.left),i=this.recurse(t.right),this["binary"+t.operator](n,i,e);case Y.ConditionalExpression:return this["ternary?:"](this.recurse(t.test),this.recurse(t.alternate),this.recurse(t.consequent),e);case Y.Identifier:return s.identifier(t.name,e,r);case Y.MemberExpression:return n=this.recurse(t.object,!1,!!r),t.computed||(i=t.property.name),t.computed&&(i=this.recurse(t.property)),t.computed?this.computedMember(n,i,e,r):this.nonComputedMember(n,i,e,r);case Y.CallExpression:return o=[],ut(t.arguments,function(a){o.push(s.recurse(a))}),t.filter&&(i=this.$filter(t.callee.name)),t.filter||(i=this.recurse(t.callee,!0)),t.filter?function(a,u,l,c){for(var f=[],d=0;d<o.length;++d)f.push(o[d](a,u,l,c));var h=i.apply(void 0,f,c);return e?{context:void 0,name:void 0,value:h}:h}:function(a,u,l,c){var f=i(a,u,l,c),d;if(f.value!=null){for(var h=[],p=0;p<o.length;++p)h.push(o[p](a,u,l,c));d=f.value.apply(f.context,h)}return e?{value:d}:d};case Y.AssignmentExpression:return n=this.recurse(t.left,!0,1),i=this.recurse(t.right),function(a,u,l,c){var f=n(a,!1,l,c),d=i(a,u,l,c);return f.context[f.name]=d,e?{value:d}:d};case Y.ArrayExpression:return o=[],ut(t.elements,function(a){o.push(s.recurse(a))}),function(a,u,l,c){for(var f=[],d=0;d<o.length;++d)f.push(o[d](a,u,l,c));return e?{value:f}:f};case Y.ObjectExpression:return o=[],ut(t.properties,function(a){a.computed?o.push({key:s.recurse(a.key),computed:!0,value:s.recurse(a.value)}):o.push({key:a.key.type===Y.Identifier?a.key.name:""+a.key.value,computed:!1,value:s.recurse(a.value)})}),function(a,u,l,c){for(var f={},d=0;d<o.length;++d)o[d].computed?f[o[d].key(a,u,l,c)]=o[d].value(a,u,l,c):f[o[d].key]=o[d].value(a,u,l,c);return e?{value:f}:f};case Y.ThisExpression:return function(a){return e?{value:a}:a};case Y.LocalsExpression:return function(a,u){return e?{value:u}:u};case Y.NGValueParameter:return function(a,u,l){return e?{value:l}:l}}},"unary+":function(t,e){return function(r,n,i,s){var o=t(r,n,i,s);return Wa(o)?o=+o:o=0,e?{value:o}:o}},"unary-":function(t,e){return function(r,n,i,s){var o=t(r,n,i,s);return Wa(o)?o=-o:o=-0,e?{value:o}:o}},"unary!":function(t,e){return function(r,n,i,s){var o=!t(r,n,i,s);return e?{value:o}:o}},"binary+":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o),u=e(n,i,s,o),l=XU(a,u);return r?{value:l}:l}},"binary-":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o),u=e(n,i,s,o),l=(Wa(a)?a:0)-(Wa(u)?u:0);return r?{value:l}:l}},"binary*":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)*e(n,i,s,o);return r?{value:a}:a}},"binary/":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)/e(n,i,s,o);return r?{value:a}:a}},"binary%":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)%e(n,i,s,o);return r?{value:a}:a}},"binary===":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)===e(n,i,s,o);return r?{value:a}:a}},"binary!==":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)!==e(n,i,s,o);return r?{value:a}:a}},"binary==":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)==e(n,i,s,o);return r?{value:a}:a}},"binary!=":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)!=e(n,i,s,o);return r?{value:a}:a}},"binary<":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)<e(n,i,s,o);return r?{value:a}:a}},"binary>":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)>e(n,i,s,o);return r?{value:a}:a}},"binary<=":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)<=e(n,i,s,o);return r?{value:a}:a}},"binary>=":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)>=e(n,i,s,o);return r?{value:a}:a}},"binary&&":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)&&e(n,i,s,o);return r?{value:a}:a}},"binary||":function(t,e,r){return function(n,i,s,o){var a=t(n,i,s,o)||e(n,i,s,o);return r?{value:a}:a}},"ternary?:":function(t,e,r,n){return function(i,s,o,a){var u=t(i,s,o,a)?e(i,s,o,a):r(i,s,o,a);return n?{value:u}:u}},value:function(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}},identifier:function(t,e,r){return function(n,i){var s=i&&t in i?i:n;r&&r!==1&&s&&s[t]==null&&(s[t]={});var o;return s&&Vg.call(s,t)&&(o=s?s[t]:void 0),e?{context:s,name:t,value:o}:o}},computedMember:function(t,e,r,n){return function(i,s,o,a){var u=t(i,s,o,a),l,c;return u!=null&&(l=e(i,s,o,a),l=WU(l),n&&n!==1&&u&&!u[l]&&(u[l]={}),Object.prototype.hasOwnProperty.call(u,l)&&(c=u[l])),r?{context:u,name:l,value:c}:c}},nonComputedMember:function(t,e,r,n){return function(i,s,o,a){var u=t(i,s,o,a);n&&n!==1&&u&&u[e]==null&&(u[e]={});var l=void 0;return u!=null&&Object.prototype.hasOwnProperty.call(u,e)&&(l=u[e]),r?{context:u,name:e,value:l}:l}},inputs:function(t,e){return function(r,n,i,s){return s?s[e]:t(r,n,i)}}};var ix=function(e,r,n){this.lexer=e,this.$filter=r,n=n||{},n.handleThis=n.handleThis!=null?n.handleThis:!0,this.options=n,this.ast=new Y(e,n),this.ast.selfReferential={$locals:{type:Y.LocalsExpression}},n.handleThis&&(this.ast.selfReferential.this={type:Y.ThisExpression}),this.astCompiler=n.csp?new e6(this.ast,r):new JU(this.ast,r)};ix.prototype={constructor:ix,parse:function(t){return this.astCompiler.compile(t)}};c3.Lexer=Fh;c3.Parser=ix;var t6=c3,Ude={},Gde=t6.Lexer,zde=t6.Parser;function $de(t){return t=t||{},t.filters&&(t.cache=t.cache||{}),t.cache=t.cache||p3.cache,t.filters=t.filters||Ude,t}function jde(t){return{handleThis:t.handleThis!=null?t.handleThis:!0,csp:t.csp!=null?t.csp:!1,literals:t.literals!=null?t.literals:{true:!0,false:!1,null:null,undefined:void 0}}}function p3(t,e){if(typeof t!="string")throw new TypeError("src must be a string, instead saw '"+typeof t+"'");e=$de(e);var r=e,n=jde(e),i=new Gde(r),s=new zde(i,function(l){return e.filters[l]},n);if(!e.cache)return s.parse(t);delete e.src;var o=JSON.stringify(Object.assign({src:t},e)),a=e.cache[o];return a||(a=e.cache[o]=s.parse(t)),a}p3.cache=Object.create(null);var hye=p3;function pye(t){return{all:t=t||new Map,on:function(e,r){var n=t.get(e);n?n.push(r):t.set(e,[r])},off:function(e,r){var n=t.get(e);n&&(r?n.splice(n.indexOf(r)>>>0,1):t.set(e,[]))},emit:function(e,r){var n=t.get(e);n&&n.slice().map(function(i){i(r)}),(n=t.get("*"))&&n.slice().map(function(i){i(e,r)})}}}function m3(t,e){if(t==null)return{};var r=bfe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var Hde={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};const Vde=Zt(Hde);var Wde=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function nR(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(e.name=r[1],(Vde[r[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var n=t.indexOf("-->");return{type:"comment",comment:n!==-1?t.slice(4,n):""}}for(var i=new RegExp(Wde),s=null;(s=i.exec(t))!==null;)if(s[0].trim())if(s[1]){var o=s[1].trim(),a=[o,""];o.indexOf("=")>-1&&(a=o.split("=")),e.attrs[a[0]]=a[1],i.lastIndex--}else s[2]&&(e.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return e}var Xde=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,qde=/^\s*$/,Yde=Object.create(null);function r6(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(r){var n=[];for(var i in r)n.push(i+'="'+r[i]+'"');return n.length?" "+n.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(r6,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var Kde={parse:function(t,e){e||(e={}),e.components||(e.components=Yde);var r,n=[],i=[],s=-1,o=!1;if(t.indexOf("<")!==0){var a=t.indexOf("<");n.push({type:"text",content:a===-1?t:t.substring(0,a)})}return t.replace(Xde,function(u,l){if(o){if(u!=="</"+r.name+">")return;o=!1}var c,f=u.charAt(1)!=="/",d=u.startsWith("<!--"),h=l+u.length,p=t.charAt(h);if(d){var m=nR(u);return s<0?(n.push(m),n):((c=i[s]).children.push(m),n)}if(f&&(s++,(r=nR(u)).type==="tag"&&e.components[r.name]&&(r.type="component",o=!0),r.voidElement||o||!p||p==="<"||r.children.push({type:"text",content:t.slice(h,t.indexOf("<",h))}),s===0&&n.push(r),(c=i[s-1])&&c.children.push(r),i[s]=r),(!f||r.voidElement)&&(s>-1&&(r.voidElement||r.name===u.slice(2,-1))&&(s--,r=s===-1?n:i[s]),!o&&p!=="<"&&p)){c=s===-1?n:i[s].children;var g=t.indexOf("<",h),v=t.slice(h,g===-1?void 0:g);qde.test(v)&&(v=" "),(g>-1&&s+c.length>=0||v!==" ")&&c.push({type:"text",content:v})}}),n},stringify:function(t){return t.reduce(function(e,r){return e+r6("",r)},"")}};function Lh(){if(console&&console.warn){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(t=console).warn.apply(t,r)}}var iR={};function Hp(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];typeof e[0]=="string"&&iR[e[0]]||(typeof e[0]=="string"&&(iR[e[0]]=new Date),Lh.apply(void 0,e))}var n6=function(e,r){return function(){if(e.isInitialized)r();else{var n=function i(){setTimeout(function(){e.off("initialized",i)},0),r()};e.on("initialized",n)}}};function sR(t,e,r){t.loadNamespaces(e,n6(t,r))}function oR(t,e,r,n){typeof r=="string"&&(r=[r]),r.forEach(function(i){t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,n6(t,n))}function Zde(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var o=function(u,l){var c=e.services.backendConnector.state["".concat(u,"|").concat(l)];return c===-1||c===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!o(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(n,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||o(n,t)&&(!i||o(s,t)))}function Qde(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return Hp("i18n.languages were undefined or empty",e.languages),!0;var n=e.options.ignoreJSONStructure!==void 0;return n?e.hasLoadedNamespace(t,{lng:r.lng,precheck:function(s,o){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!o(s.isLanguageChangingTo,t))return!1}}):Zde(t,e,r)}var Jde=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ehe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},the=function(e){return ehe[e]},rhe=function(e){return e.replace(Jde,the)};function aR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sx={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:rhe};function nhe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sx=uR(uR({},sx),t)}function i6(){return sx}var s6;function ihe(t){s6=t}function g3(){return s6}var she=["format"],ohe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function lR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?lR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gy(t,e){if(!t)return!1;var r=t.props?t.props.children:t.children;return e?r.length>0:!!r}function vy(t){return t?t.props?t.props.children:t.children:[]}function ahe(t){return Object.prototype.toString.call(t)!=="[object Array]"?!1:t.every(function(e){return M.isValidElement(e)})}function fc(t){return Array.isArray(t)?t:[t]}function uhe(t,e){var r=Lt({},e);return r.props=Object.assign(t.props,e.props),r}function o6(t,e){if(!t)return"";var r="",n=fc(t),i=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return n.forEach(function(s,o){if(typeof s=="string")r+="".concat(s);else if(M.isValidElement(s)){var a=Object.keys(s.props).length,u=i.indexOf(s.type)>-1,l=s.props.children;if(!l&&u&&a===0)r+="<".concat(s.type,"/>");else if(!l&&(!u||a!==0))r+="<".concat(o,"></").concat(o,">");else if(s.props.i18nIsDynamicList)r+="<".concat(o,"></").concat(o,">");else if(u&&a===1&&typeof l=="string")r+="<".concat(s.type,">").concat(l,"</").concat(s.type,">");else{var c=o6(l,e);r+="<".concat(o,">").concat(c,"</").concat(o,">")}}else if(s===null)Lh("Trans: the passed in value is invalid - seems you passed in a null child.");else if(Xt(s)==="object"){var f=s.format,d=m3(s,she),h=Object.keys(d);if(h.length===1){var p=f?"".concat(h[0],", ").concat(f):h[0];r+="{{".concat(p,"}}")}else Lh("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",s)}else Lh("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",s)}),r}function lhe(t,e,r,n,i,s){if(e==="")return[];var o=n.transKeepBasicHtmlNodesFor||[],a=e&&new RegExp(o.join("|")).test(e);if(!t&&!a)return[e];var u={};function l(g){var v=fc(g);v.forEach(function(y){typeof y!="string"&&(gy(y)?l(vy(y)):Xt(y)==="object"&&!M.isValidElement(y)&&Object.assign(u,y))})}l(t);var c=Kde.parse("<0>".concat(e,"</0>")),f=Lt(Lt({},u),i);function d(g,v,y){var b=vy(g),_=p(b,v.children,y);return ahe(b)&&_.length===0?b:_}function h(g,v,y,b,_){g.dummy&&(g.children=v),y.push(M.cloneElement(g,Lt(Lt({},g.props),{},{key:b}),_?void 0:v))}function p(g,v,y){var b=fc(g),_=fc(v);return _.reduce(function(x,S,w){var P=S.children&&S.children[0]&&S.children[0].content&&r.services.interpolator.interpolate(S.children[0].content,f,r.language);if(S.type==="tag"){var C=b[parseInt(S.name,10)];!C&&y.length===1&&y[0][S.name]&&(C=y[0][S.name]),C||(C={});var R=Object.keys(S.attrs).length!==0?uhe({props:S.attrs},C):C,F=M.isValidElement(R),N=F&&gy(S,!0)&&!S.voidElement,G=a&&Xt(R)==="object"&&R.dummy&&!F,j=Xt(t)==="object"&&t!==null&&Object.hasOwnProperty.call(t,S.name);if(typeof R=="string"){var re=r.services.interpolator.interpolate(R,f,r.language);x.push(re)}else if(gy(R)||N){var U=d(R,S,y);h(R,U,x,w)}else if(G){var z=p(b,S.children,y);x.push(M.cloneElement(R,Lt(Lt({},R.props),{},{key:w}),z))}else if(Number.isNaN(parseFloat(S.name)))if(j){var pe=d(R,S,y);h(R,pe,x,w,S.voidElement)}else if(n.transSupportBasicHtmlNodes&&o.indexOf(S.name)>-1)if(S.voidElement)x.push(M.createElement(S.name,{key:"".concat(S.name,"-").concat(w)}));else{var ae=p(b,S.children,y);x.push(M.createElement(S.name,{key:"".concat(S.name,"-").concat(w)},ae))}else if(S.voidElement)x.push("<".concat(S.name," />"));else{var we=p(b,S.children,y);x.push("<".concat(S.name,">").concat(we,"</").concat(S.name,">"))}else if(Xt(R)==="object"&&!F){var V=S.children[0]?P:null;V&&x.push(V)}else S.children.length===1&&P?x.push(M.cloneElement(R,Lt(Lt({},R.props),{},{key:w}),P)):x.push(M.cloneElement(R,Lt(Lt({},R.props),{},{key:w})))}else if(S.type==="text"){var q=n.transWrapTextNodes,ie=s?n.unescape(r.services.interpolator.interpolate(S.content,f,r.language)):r.services.interpolator.interpolate(S.content,f,r.language);q?x.push(M.createElement(q,{key:"".concat(S.name,"-").concat(w)},ie)):x.push(ie)}return x},[])}var m=p([{dummy:!0,children:t||[]}],c,fc(t||[]));return vy(m[0])}function che(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,s=t.context,o=t.tOptions,a=o===void 0?{}:o,u=t.values,l=t.defaults,c=t.components,f=t.ns,d=t.i18n,h=t.t,p=t.shouldUnescape,m=m3(t,ohe),g=d||g3();if(!g)return Hp("You will need to pass in an i18next instance by using i18nextReactModule"),e;var v=h||g.t.bind(g)||function(N){return N};s&&(a.context=s);var y=Lt(Lt({},i6()),g.options&&g.options.react),b=f||v.ns||g.options&&g.options.defaultNS;b=typeof b=="string"?[b]:b||["translation"];var _=l||o6(e,y)||y.transEmptyNodeValue||i,x=y.hashTransKey,S=i||(x?x(_):_),w=u?a.interpolation:{interpolation:Lt(Lt({},a.interpolation),{},{prefix:"#$?",suffix:"?$#"})},P=Lt(Lt(Lt(Lt({},a),{},{count:r},u),w),{},{defaultValue:_,ns:b}),C=S?v(S,P):_,R=lhe(c||e,C,g,y,P,p),F=n!==void 0?n:y.defaultTransParent;return F?M.createElement(F,m,R):R}function ri(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mk(n.key),n)}}function ni(t,e,r){return e&&cR(t.prototype,e),r&&cR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var mye={type:"3rdParty",init:function(e){nhe(e.options.react),ihe(e)}},a6=M.createContext(),fhe=function(){function t(){ri(this,t),this.usedNamespaces={}}return ni(t,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(i){n.usedNamespaces[i]||(n.usedNamespaces[i]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),t}(),dhe=["children","count","parent","i18nKey","context","tOptions","values","defaults","components","ns","i18n","t","shouldUnescape"];function fR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function hhe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function gye(t){var e=t.children,r=t.count,n=t.parent,i=t.i18nKey,s=t.context,o=t.tOptions,a=o===void 0?{}:o,u=t.values,l=t.defaults,c=t.components,f=t.ns,d=t.i18n,h=t.t,p=t.shouldUnescape,m=m3(t,dhe),g=M.useContext(a6)||{},v=g.i18n,y=g.defaultNS,b=d||v||g3(),_=h||b&&b.t.bind(b);return che(hhe({children:e,count:r,parent:n,i18nKey:i,context:s,tOptions:a,values:u,defaults:l,components:c,ns:f||_&&_.ns||y||b&&b.options&&b.options.defaultNS,i18n:b,t:h,shouldUnescape:p},m))}function u6(t){if(Array.isArray(t))return t}function phe(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,s,o,a=[],u=!0,l=!1;try{if(s=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=s.call(r)).done)&&(a.push(n.value),a.length!==e);u=!0);}catch(c){l=!0,i=c}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return a}}function dR(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l6(t,e){if(t){if(typeof t=="string")return dR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dR(t,e)}}function c6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mhe(t,e){return u6(t)||phe(t,e)||l6(t,e)||c6()}function hR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ghe=function(e,r){var n=M.useRef();return M.useEffect(function(){n.current=r?n.current:e},[e,r]),n.current};function vye(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.i18n,n=M.useContext(a6)||{},i=n.i18n,s=n.defaultNS,o=r||i||g3();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new fhe),!o){Hp("You will need to pass in an i18next instance by using initReactI18next");var a=function(C,R){return typeof R=="string"?R:R&&Xt(R)==="object"&&typeof R.defaultValue=="string"?R.defaultValue:Array.isArray(C)?C[C.length-1]:C},u=[a,{},!1];return u.t=a,u.i18n={},u.ready=!1,u}o.options.react&&o.options.react.wait!==void 0&&Hp("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var l=yy(yy(yy({},i6()),o.options.react),e),c=l.useSuspense,f=l.keyPrefix,d=t||s||o.options&&o.options.defaultNS;d=typeof d=="string"?[d]:d||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(d);var h=(o.isInitialized||o.initializedStoreOnce)&&d.every(function(P){return Qde(P,o,l)});function p(){return o.getFixedT(e.lng||null,l.nsMode==="fallback"?d:d[0],f)}var m=M.useState(p),g=mhe(m,2),v=g[0],y=g[1],b=d.join();e.lng&&(b="".concat(e.lng).concat(b));var _=ghe(b),x=M.useRef(!0);M.useEffect(function(){var P=l.bindI18n,C=l.bindI18nStore;x.current=!0,!h&&!c&&(e.lng?oR(o,e.lng,d,function(){x.current&&y(p)}):sR(o,d,function(){x.current&&y(p)})),h&&_&&_!==b&&x.current&&y(p);function R(){x.current&&y(p)}return P&&o&&o.on(P,R),C&&o&&o.store.on(C,R),function(){x.current=!1,P&&o&&P.split(" ").forEach(function(F){return o.off(F,R)}),C&&o&&C.split(" ").forEach(function(F){return o.store.off(F,R)})}},[o,b]);var S=M.useRef(!0);M.useEffect(function(){x.current&&!S.current&&y(p),S.current=!1},[o,f]);var w=[v,o,h];if(w.t=v,w.i18n=o,w.ready=h,h||!h&&!c)return w;throw new Promise(function(P){e.lng?oR(o,e.lng,d,function(){return P()}):sR(o,d,function(){return P()})})}var vhe=ei,yhe=function(){return vhe.Date.now()},_he=yhe,bhe=/\s/;function xhe(t){for(var e=t.length;e--&&bhe.test(t.charAt(e)););return e}var She=xhe,whe=She,Ehe=/^\s+/;function Che(t){return t&&t.slice(0,whe(t)+1).replace(Ehe,"")}var The=Che,Ahe=The,pR=Fi,Phe=_g,mR=0/0,Rhe=/^[-+]0x[0-9a-f]+$/i,Ohe=/^0b[01]+$/i,Bhe=/^0o[0-7]+$/i,khe=parseInt;function Dhe(t){if(typeof t=="number")return t;if(Phe(t))return mR;if(pR(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=pR(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Ahe(t);var r=Ohe.test(t);return r||Bhe.test(t)?khe(t.slice(2),r?2:8):Rhe.test(t)?mR:+t}var Mhe=Dhe,Ihe=Fi,_y=_he,gR=Mhe,Fhe="Expected a function",Lhe=Math.max,Nhe=Math.min;function Uhe(t,e,r){var n,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof t!="function")throw new TypeError(Fhe);e=gR(e)||0,Ihe(r)&&(c=!!r.leading,f="maxWait"in r,s=f?Lhe(gR(r.maxWait)||0,e):s,d="trailing"in r?!!r.trailing:d);function h(S){var w=n,P=i;return n=i=void 0,l=S,o=t.apply(P,w),o}function p(S){return l=S,a=setTimeout(v,e),c?h(S):o}function m(S){var w=S-u,P=S-l,C=e-w;return f?Nhe(C,s-P):C}function g(S){var w=S-u,P=S-l;return u===void 0||w>=e||w<0||f&&P>=s}function v(){var S=_y();if(g(S))return y(S);a=setTimeout(v,m(S))}function y(S){return a=void 0,d&&n?h(S):(n=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,n=u=i=a=void 0}function _(){return a===void 0?o:y(_y())}function x(){var S=_y(),w=g(S);if(n=arguments,i=this,u=S,w){if(a===void 0)return p(u);if(f)return clearTimeout(a),a=setTimeout(v,e),h(u)}return a===void 0&&(a=setTimeout(v,e)),o}return x.cancel=b,x.flush=_,x}var Ghe=Uhe,zhe=Ghe,$he=Fi,jhe="Expected a function";function Hhe(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(jhe);return $he(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),zhe(t,e,{leading:n,maxWait:e,trailing:i})}var Vhe=Hhe;const yye=Zt(Vhe);var Whe=["size","strokeWidth","strokeLinecap","strokeLinejoin","theme","fill","className","spin"];function vR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function yR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vR(Object(r),!0).forEach(function(n){Xhe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xhe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qhe(t,e){if(t==null)return{};var r=Yhe(t,e),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yhe(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var Khe={size:"1em",strokeWidth:4,strokeLinecap:"round",strokeLinejoin:"round",rtl:!1,theme:"outline",colors:{outline:{fill:"#333",background:"transparent"},filled:{fill:"#333",background:"#FFF"},twoTone:{fill:"#333",twoTone:"#2F88FF"},multiColor:{outStrokeColor:"#333",outFillColor:"#2F88FF",innerStrokeColor:"#FFF",innerFillColor:"#43CCF8"}},prefix:"i"};function Zhe(){return"icon-"+((1+Math.random())*4294967296|0).toString(16).substring(1)}function Qhe(t,e,r){var n=typeof e.fill=="string"?[e.fill]:e.fill||[],i=[],s=e.theme||r.theme;switch(s){case"outline":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("none");break;case"filled":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push("#FFF"),i.push("#FFF");break;case"two-tone":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone),i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.twoTone.twoTone);break;case"multi-color":i.push(typeof n[0]=="string"?n[0]:"currentColor"),i.push(typeof n[1]=="string"?n[1]:r.colors.multiColor.outFillColor),i.push(typeof n[2]=="string"?n[2]:r.colors.multiColor.innerStrokeColor),i.push(typeof n[3]=="string"?n[3]:r.colors.multiColor.innerFillColor);break}return{size:e.size||r.size,strokeWidth:e.strokeWidth||r.strokeWidth,strokeLinecap:e.strokeLinecap||r.strokeLinecap,strokeLinejoin:e.strokeLinejoin||r.strokeLinejoin,colors:i,id:t}}var f6=M.createContext(Khe);f6.Provider;function dt(t,e,r){return function(n){var i=n.size,s=n.strokeWidth,o=n.strokeLinecap,a=n.strokeLinejoin,u=n.theme,l=n.fill,c=n.className,f=n.spin,d=qhe(n,Whe),h=M.useContext(f6),p=M.useMemo(Zhe,[]),m=Qhe(p,{size:i,strokeWidth:s,strokeLinecap:o,strokeLinejoin:a,theme:u,fill:l},h),g=[h.prefix+"-icon"];return g.push(h.prefix+"-icon-"+t),e&&h.rtl&&g.push(h.prefix+"-icon-rtl"),f&&g.push(h.prefix+"-icon-spin"),c&&g.push(c),J.createElement("span",yR(yR({},d),{},{className:g.join(" ")}),r(m))}}const _ye=dt("align-text-left-one",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M39 6H9C7.34315 6 6 7.34315 6 9V39C6 40.6569 7.34315 42 9 42H39C40.6569 42 42 40.6569 42 39V9C42 7.34315 40.6569 6 39 6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M26 24H14",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M34 15H14",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M32 33H14",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),bye=dt("close-small",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M14 14L34 34",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 34L34 14",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),xye=dt("double-down",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M36 12L24 24L12 12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M36 24L24 36L12 24",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Sye=dt("double-right",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M12 12L24 24L12 36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 12L36 24L24 36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),wye=dt("double-up",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M12 24L24 12L36 24",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M12 36L24 24L36 36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Eye=dt("folder-open",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M4 9V41L9 21H39.5V15C39.5 13.8954 38.6046 13 37.5 13H24L19 7H6C4.89543 7 4 7.89543 4 9Z",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M40 41L44 21H8.8125L4 41H40Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Cye=dt("go-end",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M14 12L26 24L14 36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M34 12V36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Tye=dt("go-start",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M34 36L22 24L34 12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 12V36",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Aye=dt("hamburger-button",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M7.94971 11.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M7.94971 23.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M7.94971 35.9497H39.9497",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Pye=dt("home",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M9 18V42H39V18L24 6L9 18Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M19 29V42H29V29H19Z",fill:t.colors[3],stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M9 42H39",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}))}),Rye=dt("left",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M31 36L19 24L31 12",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Oye=dt("lock",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("rect",{x:"6",y:"22",width:"36",height:"22",rx:"2",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 22V14C14 8.47715 18.4772 4 24 4C29.5228 4 34 8.47715 34 14V22",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 30V36",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Bye=dt("logout",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M23.9917 6H6V42H24",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M33 33L42 24L33 15",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M16 23.9917H42",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),kye=dt("music-list",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M24 19H40",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 10H40",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M8 38H40",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M8 28H40",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M8 10L16 15L8 20V10Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Dye=dt("play-one",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Mye=dt("preview-close-one",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M9.85786 18C6.23858 21 4 24 4 24C4 24 12.9543 36 24 36C25.3699 36 26.7076 35.8154 28 35.4921M20.0318 12.5C21.3144 12.1816 22.6414 12 24 12C35.0457 12 44 24 44 24C44 24 41.7614 27 38.1421 30",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M20.3142 20.6211C19.4981 21.5109 19 22.6972 19 23.9998C19 26.7612 21.2386 28.9998 24 28.9998C25.3627 28.9998 26.5981 28.4546 27.5 27.5705",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M42 42L6 6",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Iye=dt("preview-open",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M24 36C35.0457 36 44 24 44 24C44 24 35.0457 12 24 12C12.9543 12 4 24 4 24C4 24 12.9543 36 24 36Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 29C26.7614 29 29 26.7614 29 24C29 21.2386 26.7614 19 24 19C21.2386 19 19 21.2386 19 24C19 26.7614 21.2386 29 24 29Z",fill:t.colors[3],stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Fye=dt("return",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M12.9998 8L6 14L12.9998 21",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M6 14H28.9938C35.8768 14 41.7221 19.6204 41.9904 26.5C42.2739 33.7696 36.2671 40 28.9938 40H11.9984",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Lye=dt("save",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M6 9C6 7.34315 7.34315 6 9 6H34.2814L42 13.2065V39C42 40.6569 40.6569 42 39 42H9C7.34315 42 6 40.6569 6 39V9Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6",fill:t.colors[3]}),J.createElement("path",{d:"M24.0083 6L24 13.3846C24 13.7245 23.5523 14 23 14H15C14.4477 14 14 13.7245 14 13.3846L14 6H24.0083Z",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M9 6H34.2814",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 26H34",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 34H24.0083",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),Nye=dt("setting-two",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M18.2838 43.1713C14.9327 42.1736 11.9498 40.3213 9.58787 37.867C10.469 36.8227 11 35.4734 11 34.0001C11 30.6864 8.31371 28.0001 5 28.0001C4.79955 28.0001 4.60139 28.01 4.40599 28.0292C4.13979 26.7277 4 25.3803 4 24.0001C4 21.9095 4.32077 19.8938 4.91579 17.9995C4.94381 17.9999 4.97188 18.0001 5 18.0001C8.31371 18.0001 11 15.3138 11 12.0001C11 11.0488 10.7786 10.1493 10.3846 9.35011C12.6975 7.1995 15.5205 5.59002 18.6521 4.72314C19.6444 6.66819 21.6667 8.00013 24 8.00013C26.3333 8.00013 28.3556 6.66819 29.3479 4.72314C32.4795 5.59002 35.3025 7.1995 37.6154 9.35011C37.2214 10.1493 37 11.0488 37 12.0001C37 15.3138 39.6863 18.0001 43 18.0001C43.0281 18.0001 43.0562 17.9999 43.0842 17.9995C43.6792 19.8938 44 21.9095 44 24.0001C44 25.3803 43.8602 26.7277 43.594 28.0292C43.3986 28.01 43.2005 28.0001 43 28.0001C39.6863 28.0001 37 30.6864 37 34.0001C37 35.4734 37.531 36.8227 38.4121 37.867C36.0502 40.3213 33.0673 42.1736 29.7162 43.1713C28.9428 40.752 26.676 39.0001 24 39.0001C21.324 39.0001 19.0572 40.752 18.2838 43.1713Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 31C27.866 31 31 27.866 31 24C31 20.134 27.866 17 24 17C20.134 17 17 20.134 17 24C17 27.866 20.134 31 24 31Z",fill:t.colors[3],stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}))}),Uye=dt("square-small",!1,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M34 12H14C12.8954 12 12 12.8954 12 14V34C12 35.1046 12.8954 36 14 36H34C35.1046 36 36 35.1046 36 34V14C36 12.8954 35.1046 12 34 12Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth}))}),Gye=dt("unlock",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("rect",{x:"7",y:"22.0476",width:"34",height:"22",rx:"2",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M14 22V14.0047C13.9948 8.87022 17.9227 4.56718 23.0859 4.05117C28.249 3.53516 32.9673 6.97408 34 12.0059",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M24 30V36",stroke:t.colors[2],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}))}),zye=dt("volume-notice",!0,function(t){return J.createElement("svg",{width:t.size,height:t.size,viewBox:"0 0 48 48",fill:"none"},J.createElement("path",{d:"M24 6V42C17 42 11.7985 32.8391 11.7985 32.8391H6C4.89543 32.8391 4 31.9437 4 30.8391V17.0108C4 15.9062 4.89543 15.0108 6 15.0108H11.7985C11.7985 15.0108 17 6 24 6Z",fill:t.colors[1],stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M32 15L32 15C32.6232 15.5565 33.1881 16.1797 33.6841 16.8588C35.1387 18.8504 36 21.3223 36 24C36 26.6545 35.1535 29.1067 33.7218 31.0893C33.2168 31.7885 32.6391 32.4293 32 33",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap,strokeLinejoin:t.strokeLinejoin}),J.createElement("path",{d:"M34.2359 41.1857C40.0836 37.6953 44 31.305 44 24C44 16.8085 40.2043 10.5035 34.507 6.97906",stroke:t.colors[0],strokeWidth:t.strokeWidth,strokeLinecap:t.strokeLinecap}))});var d6={exports:{}};(function(t){(function(){function e(A,D,W){return A.call.apply(A.bind,arguments)}function r(A,D,W){if(!A)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,$),A.apply(D,te)}}return function(){return A.apply(D,arguments)}}function n(A,D,W){return n=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?e:r,n.apply(null,arguments)}var i=Date.now||function(){return+new Date};function s(A,D){this.a=A,this.o=D||A,this.c=this.o.document}var o=!!window.FontFace;function a(A,D,W,$){if(D=A.c.createElement(D),W)for(var te in W)W.hasOwnProperty(te)&&(te=="style"?D.style.cssText=W[te]:D.setAttribute(te,W[te]));return $&&D.appendChild(A.c.createTextNode($)),D}function u(A,D,W){A=A.c.getElementsByTagName(D)[0],A||(A=document.documentElement),A.insertBefore(W,A.lastChild)}function l(A){A.parentNode&&A.parentNode.removeChild(A)}function c(A,D,W){D=D||[],W=W||[];for(var $=A.className.split(/\s+/),te=0;te<D.length;te+=1){for(var ue=!1,de=0;de<$.length;de+=1)if(D[te]===$[de]){ue=!0;break}ue||$.push(D[te])}for(D=[],te=0;te<$.length;te+=1){for(ue=!1,de=0;de<W.length;de+=1)if($[te]===W[de]){ue=!0;break}ue||D.push($[te])}A.className=D.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function f(A,D){for(var W=A.className.split(/\s+/),$=0,te=W.length;$<te;$++)if(W[$]==D)return!0;return!1}function d(A){return A.o.location.hostname||A.a.location.hostname}function h(A,D,W){function $(){Oe&&te&&ue&&(Oe(de),Oe=null)}D=a(A,"link",{rel:"stylesheet",href:D,media:"all"});var te=!1,ue=!0,de=null,Oe=W||null;o?(D.onload=function(){te=!0,$()},D.onerror=function(){te=!0,de=Error("Stylesheet failed to load"),$()}):setTimeout(function(){te=!0,$()},0),u(A,"head",D)}function p(A,D,W,$){var te=A.c.getElementsByTagName("head")[0];if(te){var ue=a(A,"script",{src:D}),de=!1;return ue.onload=ue.onreadystatechange=function(){de||this.readyState&&this.readyState!="loaded"&&this.readyState!="complete"||(de=!0,W&&W(null),ue.onload=ue.onreadystatechange=null,ue.parentNode.tagName=="HEAD"&&te.removeChild(ue))},te.appendChild(ue),setTimeout(function(){de||(de=!0,W&&W(Error("Script load timeout")))},$||5e3),ue}return null}function m(){this.a=0,this.c=null}function g(A){return A.a++,function(){A.a--,y(A)}}function v(A,D){A.c=D,y(A)}function y(A){A.a==0&&A.c&&(A.c(),A.c=null)}function b(A){this.a=A||"-"}b.prototype.c=function(A){for(var D=[],W=0;W<arguments.length;W++)D.push(arguments[W].replace(/[\W_]+/g,"").toLowerCase());return D.join(this.a)};function _(A,D){this.c=A,this.f=4,this.a="n";var W=(D||"n4").match(/^([nio])([1-9])$/i);W&&(this.a=W[1],this.f=parseInt(W[2],10))}function x(A){return P(A)+" "+(A.f+"00")+" 300px "+S(A.c)}function S(A){var D=[];A=A.split(/,\s*/);for(var W=0;W<A.length;W++){var $=A[W].replace(/['"]/g,"");$.indexOf(" ")!=-1||/^\d/.test($)?D.push("'"+$+"'"):D.push($)}return D.join(",")}function w(A){return A.a+A.f}function P(A){var D="normal";return A.a==="o"?D="oblique":A.a==="i"&&(D="italic"),D}function C(A){var D=4,W="n",$=null;return A&&(($=A.match(/(normal|oblique|italic)/i))&&$[1]&&(W=$[1].substr(0,1).toLowerCase()),($=A.match(/([1-9]00|normal|bold)/i))&&$[1]&&(/bold/i.test($[1])?D=7:/[1-9]00/.test($[1])&&(D=parseInt($[1].substr(0,1),10)))),W+D}function R(A,D){this.c=A,this.f=A.o.document.documentElement,this.h=D,this.a=new b("-"),this.j=D.events!==!1,this.g=D.classes!==!1}function F(A){A.g&&c(A.f,[A.a.c("wf","loading")]),G(A,"loading")}function N(A){if(A.g){var D=f(A.f,A.a.c("wf","active")),W=[],$=[A.a.c("wf","loading")];D||W.push(A.a.c("wf","inactive")),c(A.f,W,$)}G(A,"inactive")}function G(A,D,W){A.j&&A.h[D]&&(W?A.h[D](W.c,w(W)):A.h[D]())}function j(){this.c={}}function re(A,D,W){var $=[],te;for(te in D)if(D.hasOwnProperty(te)){var ue=A.c[te];ue&&$.push(ue(D[te],W))}return $}function U(A,D){this.c=A,this.f=D,this.a=a(this.c,"span",{"aria-hidden":"true"},this.f)}function z(A){u(A.c,"body",A.a)}function pe(A){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+S(A.c)+";"+("font-style:"+P(A)+";font-weight:"+(A.f+"00")+";")}function ae(A,D,W,$,te,ue){this.g=A,this.j=D,this.a=$,this.c=W,this.f=te||3e3,this.h=ue||void 0}ae.prototype.start=function(){var A=this.c.o.document,D=this,W=i(),$=new Promise(function(de,Oe){function xe(){i()-W>=D.f?Oe():A.fonts.load(x(D.a),D.h).then(function(tt){1<=tt.length?de():setTimeout(xe,25)},function(){Oe()})}xe()}),te=null,ue=new Promise(function(de,Oe){te=setTimeout(Oe,D.f)});Promise.race([ue,$]).then(function(){te&&(clearTimeout(te),te=null),D.g(D.a)},function(){D.j(D.a)})};function we(A,D,W,$,te,ue,de){this.v=A,this.B=D,this.c=W,this.a=$,this.s=de||"BESbswy",this.f={},this.w=te||3e3,this.u=ue||null,this.m=this.j=this.h=this.g=null,this.g=new U(this.c,this.s),this.h=new U(this.c,this.s),this.j=new U(this.c,this.s),this.m=new U(this.c,this.s),A=new _(this.a.c+",serif",w(this.a)),A=pe(A),this.g.a.style.cssText=A,A=new _(this.a.c+",sans-serif",w(this.a)),A=pe(A),this.h.a.style.cssText=A,A=new _("serif",w(this.a)),A=pe(A),this.j.a.style.cssText=A,A=new _("sans-serif",w(this.a)),A=pe(A),this.m.a.style.cssText=A,z(this.g),z(this.h),z(this.j),z(this.m)}var V={D:"serif",C:"sans-serif"},q=null;function ie(){if(q===null){var A=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);q=!!A&&(536>parseInt(A[1],10)||parseInt(A[1],10)===536&&11>=parseInt(A[2],10))}return q}we.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=i(),be(this)};function ge(A,D,W){for(var $ in V)if(V.hasOwnProperty($)&&D===A.f[V[$]]&&W===A.f[V[$]])return!0;return!1}function be(A){var D=A.g.a.offsetWidth,W=A.h.a.offsetWidth,$;($=D===A.f.serif&&W===A.f["sans-serif"])||($=ie()&&ge(A,D,W)),$?i()-A.A>=A.w?ie()&&ge(A,D,W)&&(A.u===null||A.u.hasOwnProperty(A.a.c))?bt(A,A.v):bt(A,A.B):ot(A):bt(A,A.v)}function ot(A){setTimeout(n(function(){be(this)},A),50)}function bt(A,D){setTimeout(n(function(){l(this.g.a),l(this.h.a),l(this.j.a),l(this.m.a),D(this.a)},A),0)}function zt(A,D,W){this.c=A,this.a=D,this.f=0,this.m=this.j=!1,this.s=W}var xt=null;zt.prototype.g=function(A){var D=this.a;D.g&&c(D.f,[D.a.c("wf",A.c,w(A).toString(),"active")],[D.a.c("wf",A.c,w(A).toString(),"loading"),D.a.c("wf",A.c,w(A).toString(),"inactive")]),G(D,"fontactive",A),this.m=!0,Qr(this)},zt.prototype.h=function(A){var D=this.a;if(D.g){var W=f(D.f,D.a.c("wf",A.c,w(A).toString(),"active")),$=[],te=[D.a.c("wf",A.c,w(A).toString(),"loading")];W||$.push(D.a.c("wf",A.c,w(A).toString(),"inactive")),c(D.f,$,te)}G(D,"fontinactive",A),Qr(this)};function Qr(A){--A.f==0&&A.j&&(A.m?(A=A.a,A.g&&c(A.f,[A.a.c("wf","active")],[A.a.c("wf","loading"),A.a.c("wf","inactive")]),G(A,"active")):N(A.a))}function _r(A){this.j=A,this.a=new j,this.h=0,this.f=this.g=!0}_r.prototype.load=function(A){this.c=new s(this.j,A.context||this.j),this.g=A.events!==!1,this.f=A.classes!==!1,Br(this,new R(this.c,A),A)};function br(A,D,W,$,te){var ue=--A.h==0;(A.f||A.g)&&setTimeout(function(){var de=te||null,Oe=$||null||{};if(W.length===0&&ue)N(D.a);else{D.f+=W.length,ue&&(D.j=ue);var xe,tt=[];for(xe=0;xe<W.length;xe++){var rt=W[xe],$t=Oe[rt.c],Jr=D.a,gs=rt;if(Jr.g&&c(Jr.f,[Jr.a.c("wf",gs.c,w(gs).toString(),"loading")]),G(Jr,"fontloading",gs),Jr=null,xt===null)if(window.FontFace){var gs=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),rv=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);xt=gs?42<parseInt(gs[1],10):!rv}else xt=!1;xt?Jr=new ae(n(D.g,D),n(D.h,D),D.c,rt,D.s,$t):Jr=new we(n(D.g,D),n(D.h,D),D.c,rt,D.s,de,$t),tt.push(Jr)}for(xe=0;xe<tt.length;xe++)tt[xe].start()}},0)}function Br(A,D,W){var te=[],$=W.timeout;F(D);var te=re(A.a,W,A.c),ue=new zt(A.c,D,$);for(A.h=te.length,D=0,W=te.length;D<W;D++)te[D].load(function(de,Oe,xe){br(A,ue,de,Oe,xe)})}function xr(A,D){this.c=A,this.a=D}xr.prototype.load=function(A){function D(){if(ue["__mti_fntLst"+$]){var de=ue["__mti_fntLst"+$](),Oe=[],xe;if(de)for(var tt=0;tt<de.length;tt++){var rt=de[tt].fontfamily;de[tt].fontStyle!=null&&de[tt].fontWeight!=null?(xe=de[tt].fontStyle+de[tt].fontWeight,Oe.push(new _(rt,xe))):Oe.push(new _(rt))}A(Oe)}else setTimeout(function(){D()},50)}var W=this,$=W.a.projectId,te=W.a.version;if($){var ue=W.c.o;p(this.c,(W.a.api||"https://fast.fonts.net/jsapi")+"/"+$+".js"+(te?"?v="+te:""),function(de){de?A([]):(ue["__MonotypeConfiguration__"+$]=function(){return W.a},D())}).id="__MonotypeAPIScript__"+$}else A([])};function It(A,D){this.c=A,this.a=D}It.prototype.load=function(A){var D,W,$=this.a.urls||[],te=this.a.families||[],ue=this.a.testStrings||{},de=new m;for(D=0,W=$.length;D<W;D++)h(this.c,$[D],g(de));var Oe=[];for(D=0,W=te.length;D<W;D++)if($=te[D].split(":"),$[1])for(var xe=$[1].split(","),tt=0;tt<xe.length;tt+=1)Oe.push(new _($[0],xe[tt]));else Oe.push(new _($[0]));v(de,function(){A(Oe,ue)})};function vl(A,D){A?this.c=A:this.c=vo,this.a=[],this.f=[],this.g=D||""}var vo="https://fonts.googleapis.com/css";function ms(A,D){for(var W=D.length,$=0;$<W;$++){var te=D[$].split(":");te.length==3&&A.f.push(te.pop());var ue="";te.length==2&&te[1]!=""&&(ue=":"),A.a.push(te.join(ue))}}function fa(A){if(A.a.length==0)throw Error("No fonts to load!");if(A.c.indexOf("kit=")!=-1)return A.c;for(var D=A.a.length,W=[],$=0;$<D;$++)W.push(A.a[$].replace(/ /g,"+"));return D=A.c+"?family="+W.join("%7C"),0<A.f.length&&(D+="&subset="+A.f.join(",")),0<A.g.length&&(D+="&text="+encodeURIComponent(A.g)),D}function yl(A){this.f=A,this.a=[],this.c={}}var da={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},ad={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ud={i:"i",italic:"i",n:"n",normal:"n"},ld=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function cd(A){for(var D=A.f.length,W=0;W<D;W++){var $=A.f[W].split(":"),te=$[0].replace(/\+/g," "),ue=["n4"];if(2<=$.length){var de,Oe=$[1];if(de=[],Oe)for(var Oe=Oe.split(","),xe=Oe.length,tt=0;tt<xe;tt++){var rt;if(rt=Oe[tt],rt.match(/^[\w-]+$/)){var $t=ld.exec(rt.toLowerCase());if($t==null)rt="";else{if(rt=$t[2],rt=rt==null||rt==""?"n":ud[rt],$t=$t[1],$t==null||$t=="")$t="4";else var Jr=ad[$t],$t=Jr||(isNaN($t)?"4":$t.substr(0,1));rt=[rt,$t].join("")}}else rt="";rt&&de.push(rt)}0<de.length&&(ue=de),$.length==3&&($=$[2],de=[],$=$?$.split(","):de,0<$.length&&($=da[$[0]])&&(A.c[te]=$))}for(A.c[te]||($=da[te])&&(A.c[te]=$),$=0;$<ue.length;$+=1)A.a.push(new _(te,ue[$]))}}function _l(A,D){this.c=A,this.a=D}var fd={Arimo:!0,Cousine:!0,Tinos:!0};_l.prototype.load=function(A){var D=new m,W=this.c,$=new vl(this.a.api,this.a.text),te=this.a.families;ms($,te);var ue=new yl(te);cd(ue),h(W,fa($),g(D)),v(D,function(){A(ue.a,ue.c,fd)})};function bl(A,D){this.c=A,this.a=D}bl.prototype.load=function(A){var D=this.a.id,W=this.c.o;D?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+D+".js",function($){if($)A([]);else if(W.Typekit&&W.Typekit.config&&W.Typekit.config.fn){$=W.Typekit.config.fn;for(var te=[],ue=0;ue<$.length;ue+=2)for(var de=$[ue],Oe=$[ue+1],xe=0;xe<Oe.length;xe++)te.push(new _(de,Oe[xe]));try{W.Typekit.load({events:!1,classes:!1,async:!0})}catch{}A(te)}},2e3):A([])};function xl(A,D){this.c=A,this.f=D,this.a=[]}xl.prototype.load=function(A){var D=this.f.id,W=this.c.o,$=this;D?(W.__webfontfontdeckmodule__||(W.__webfontfontdeckmodule__={}),W.__webfontfontdeckmodule__[D]=function(te,ue){for(var de=0,Oe=ue.fonts.length;de<Oe;++de){var xe=ue.fonts[de];$.a.push(new _(xe.name,C("font-weight:"+xe.weight+";font-style:"+xe.style)))}A($.a)},p(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+d(this.c)+"/"+D+".js",function(te){te&&A([])})):A([])};var zn=new _r(window);zn.a.c.custom=function(A,D){return new It(D,A)},zn.a.c.fontdeck=function(A,D){return new xl(D,A)},zn.a.c.monotype=function(A,D){return new xr(D,A)},zn.a.c.typekit=function(A,D){return new bl(D,A)},zn.a.c.google=function(A,D){return new _l(D,A)};var Sl={load:n(zn.load,zn)};t.exports?t.exports=Sl:(window.WebFont=Sl,window.WebFontConfig&&zn.load(window.WebFontConfig))})()})(d6);var Jhe=d6.exports;const $ye=Zt(Jhe),by=typeof window>"u"?global:window,xy="@griffel/";function epe(t,e){return by[Symbol.for(xy+t)]||(by[Symbol.for(xy+t)]=e),by[Symbol.for(xy+t)]}const ox=epe("DEFINITION_LOOKUP_TABLE",{}),Fc="data-make-styles-bucket",tpe="data-priority",ax=7,v3="___",rpe=v3.length+ax,npe=0,ipe=1;function spe(t){for(var e=0,r,n=0,i=t.length;i>=4;++n,i-=4)r=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,e=(r&65535)*1540483477+((r>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}function ope(t){const e=t.length;if(e===ax)return t;for(let r=e;r<ax;r++)t+="0";return t}function h6(t,e,r=[]){return v3+ope(spe(t+e))}function p6(t,e){let r="",n="";for(const i in t){const s=t[i];if(s===0){n+=i+" ";continue}const o=Array.isArray(s),a=e==="rtl"?(o?s[1]:s)+" ":(o?s[0]:s)+" ";r+=a,n+=a}return[r.slice(0,-1),n.slice(0,-1)]}function _R(t,e){const r={};for(const n in t){const[i,s]=p6(t[n],e);if(s===""){r[n]="";continue}const o=h6(s,e),a=o+(i===""?"":" "+i);ox[o]=[t[n],e],r[n]=a}return r}const bR={};function hi(){let t=null,e="",r="";const n=new Array(arguments.length);for(let f=0;f<arguments.length;f++){const d=arguments[f];if(typeof d=="string"&&d!==""){const h=d.indexOf(v3);if(h===-1)e+=d+" ";else{const p=d.substr(h,rpe);h>0&&(e+=d.slice(0,h)),r+=p,n[f]=p}}}if(r==="")return e.slice(0,-1);const i=bR[r];if(i!==void 0)return e+i;const s=[];for(let f=0;f<arguments.length;f++){const d=n[f];if(d){const h=ox[d];h&&(s.push(h[npe]),t=h[ipe])}}const o=Object.assign.apply(Object,[{}].concat(s)),[a,u]=p6(o,t),l=h6(u,t,n),c=l+" "+a;return bR[r]=c,ox[l]=[o,t],e+c}function ape(t){return Array.isArray(t)?t:[t]}function upe(t,e,r,n){const i=[];if(n[Fc]=e,n[tpe]=String(r),t)for(const o in n)t.setAttribute(o,n[o]);function s(o){return t!=null&&t.sheet?t.sheet.insertRule(o,t.sheet.cssRules.length):i.push(o)}return{elementAttributes:n,insertRule:s,element:t,bucketName:e,cssRules(){return t!=null&&t.sheet?Array.from(t.sheet.cssRules).map(o=>o.cssText):i}}}const lpe=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],xR=lpe.reduce((t,e,r)=>(t[e]=r,t),{});function cpe(t,e,r){return(t==="m"?t+e:t)+r}function fpe(t,e,r,n,i={}){var s,o;const a=t==="m",u=(s=i.m)!==null&&s!==void 0?s:"0",l=(o=i.p)!==null&&o!==void 0?o:0,c=cpe(t,u,l);if(!n.stylesheets[c]){const f=e&&e.createElement("style"),d=upe(f,t,l,Object.assign({},n.styleElementAttributes,a&&{media:u}));n.stylesheets[c]=d,e!=null&&e.head&&f&&e.head.insertBefore(f,hpe(e,r,t,n,i))}return n.stylesheets[c]}function dpe(t,e,r){var n,i;const s=e+((n=r.m)!==null&&n!==void 0?n:""),o=t.getAttribute(Fc)+((i=t.media)!==null&&i!==void 0?i:"");return s===o}function hpe(t,e,r,n,i={}){var s,o;const a=xR[r],u=(s=i.m)!==null&&s!==void 0?s:"",l=(o=i.p)!==null&&o!==void 0?o:0;let c=m=>a-xR[m.getAttribute(Fc)],f=t.head.querySelectorAll(`[${Fc}]`);if(r==="m"){const m=t.head.querySelectorAll(`[${Fc}="${r}"]`);m.length&&(f=m,c=g=>n.compareMediaQueries(u,g.media))}const d=m=>dpe(m,r,i)?l-Number(m.getAttribute("data-priority")):c(m),h=f.length;let p=h-1;for(;p>=0;){const m=f.item(p);if(d(m)>0)return m.nextSibling;p--}return h>0?f.item(0):e?e.nextSibling:null}function SR(t,e){try{t.insertRule(e)}catch{}}let ppe=0;const mpe=(t,e)=>t<e?-1:t>e?1:0;function gpe(t=typeof document>"u"?void 0:document,e={}){const{classNameHashSalt:r,unstable_filterCSSRule:n,insertionPoint:i,styleElementAttributes:s,compareMediaQueries:o=mpe}=e,a={classNameHashSalt:r,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(s),compareMediaQueries:o,id:`d${ppe++}`,insertCSSRules(u){for(const l in u){const c=u[l];for(let f=0,d=c.length;f<d;f++){const[h,p]=ape(c[f]),m=fpe(l,t,i||null,a,p);a.insertionCache[h]||(a.insertionCache[h]=l,n?n(h)&&SR(m,h):SR(m,h))}}}};return a}const m6=()=>{const t={};return function(r,n){t[r.id]===void 0&&(r.insertCSSRules(n),t[r.id]=!0)}};function vpe(t,e,r=m6){const n=r();let i=null,s=null;function o(a){const{dir:u,renderer:l}=a,c=u==="ltr";return c?i===null&&(i=_R(t,u)):s===null&&(s=_R(t,u)),n(l,e),c?i:s}return o}function ype(t,e,r,n=m6){const i=n();function s(o){const{dir:a,renderer:u}=o,l=a==="ltr"?t:e||t;return i(u,Array.isArray(r)?{r}:r),l}return s}function _pe(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const wR=_u["useInsertionEffect"]?_u["useInsertionEffect"]:void 0,g6=()=>{const t={};return function(r,n){if(wR&&_pe()){wR(()=>{r.insertCSSRules(n)},[r,n]);return}t[r.id]===void 0&&(r.insertCSSRules(n),t[r.id]=!0)}},bpe=M.createContext(gpe());function v6(){return M.useContext(bpe)}const xpe=M.createContext("ltr");function y6(){return M.useContext(xpe)}function hl(t,e){const r=vpe(t,e,g6);return function(){const i=y6(),s=v6();return r({dir:i,renderer:s})}}function Spe(t,e,r){const n=ype(t,e,r,g6);return function(){const s=y6(),o=v6();return n({dir:s,renderer:o})}}const _6=Symbol.for("fui.slotRenderFunction"),Xg=Symbol.for("fui.slotElementType"),b6=Symbol.for("fui.slotClassNameProp");function id(t,e){const{defaultProps:r,elementType:n}=e,i=wpe(t),s={...r,...i,[Xg]:n,[b6]:i==null?void 0:i.className};return i&&typeof i.children=="function"&&(s[_6]=i.children,s.children=r==null?void 0:r.children),s}function Vp(t,e){if(!(t===null||t===void 0&&!e.renderByDefault))return id(t,e)}function wpe(t){return typeof t=="string"||typeof t=="number"||Array.isArray(t)||M.isValidElement(t)?{children:t}:t}function Epe(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&!M.isValidElement(t)}function ER(t){return!!(t!=null&&t.hasOwnProperty(Xg))}const Ye=(...t)=>{const e={};for(const r of t){const n=Array.isArray(r)?r:Object.keys(r);for(const i of n)e[i]=1}return e},Cpe=Ye(["onAuxClick","onAnimationEnd","onAnimationStart","onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onInput","onSubmit","onLoad","onError","onKeyDown","onKeyDownCapture","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onClickCapture","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onMouseUpCapture","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onPointerCancel","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerOut","onPointerOver","onPointerUp","onGotPointerCapture","onLostPointerCapture"]),Tpe=Ye(["accessKey","children","className","contentEditable","dir","draggable","hidden","htmlFor","id","lang","ref","role","style","tabIndex","title","translate","spellCheck","name"]),Ape=Ye(["itemID","itemProp","itemRef","itemScope","itemType"]),Mt=Ye(Tpe,Cpe,Ape),Ppe=Ye(Mt,["form"]),x6=Ye(Mt,["height","loop","muted","preload","src","width"]),Rpe=Ye(x6,["poster"]),Ope=Ye(Mt,["start"]),Bpe=Ye(Mt,["value"]),kpe=Ye(Mt,["download","href","hrefLang","media","rel","target","type"]),Dpe=Ye(Mt,["dateTime"]),qg=Ye(Mt,["autoFocus","disabled","form","formAction","formEncType","formMethod","formNoValidate","formTarget","type","value"]),Mpe=Ye(qg,["accept","alt","autoCorrect","autoCapitalize","autoComplete","checked","dirname","form","height","inputMode","list","max","maxLength","min","minLength","multiple","pattern","placeholder","readOnly","required","src","step","size","type","value","width"]),Ipe=Ye(qg,["autoCapitalize","cols","dirname","form","maxLength","placeholder","readOnly","required","rows","wrap"]),Fpe=Ye(qg,["form","multiple","required"]),Lpe=Ye(Mt,["selected","value"]),Npe=Ye(Mt,["cellPadding","cellSpacing"]),Upe=Mt,Gpe=Ye(Mt,["colSpan","rowSpan","scope"]),zpe=Ye(Mt,["colSpan","headers","rowSpan","scope"]),$pe=Ye(Mt,["span"]),jpe=Ye(Mt,["span"]),Hpe=Ye(Mt,["disabled","form"]),Vpe=Ye(Mt,["acceptCharset","action","encType","encType","method","noValidate","target"]),Wpe=Ye(Mt,["allow","allowFullScreen","allowPaymentRequest","allowTransparency","csp","height","importance","referrerPolicy","sandbox","src","srcDoc","width"]),Xpe=Ye(Mt,["alt","crossOrigin","height","src","srcSet","useMap","width"]),qpe=Ye(Mt,["open","onCancel","onClose"]);function Ype(t,e,r){const n=Array.isArray(e),i={},s=Object.keys(t);for(const o of s)(!n&&e[o]||n&&e.indexOf(o)>=0||o.indexOf("data-")===0||o.indexOf("aria-")===0)&&(!r||(r==null?void 0:r.indexOf(o))===-1)&&(i[o]=t[o]);return i}const Kpe={label:Ppe,audio:x6,video:Rpe,ol:Ope,li:Bpe,a:kpe,button:qg,input:Mpe,textarea:Ipe,select:Fpe,option:Lpe,table:Npe,tr:Upe,th:Gpe,td:zpe,colGroup:$pe,col:jpe,fieldset:Hpe,form:Vpe,iframe:Wpe,img:Xpe,time:Dpe,dialog:qpe};function S6(t,e,r){const n=t&&Kpe[t]||Mt;return n.as=1,Ype(e,n,r)}const Zpe=({primarySlotTagName:t,props:e,excludedPropNames:r})=>({root:{style:e.style,className:e.className},primary:S6(t,e,[...r||[],"style","className"])}),w6=(t,e,r)=>{var n;return S6((n=e.as)!==null&&n!==void 0?n:t,e,r)};function Qpe(t,e){const r=M.useRef(void 0),n=M.useCallback((s,o)=>(r.current!==void 0&&e(r.current),r.current=t(s,o),r.current),[e,t]),i=M.useCallback(()=>{r.current!==void 0&&(e(r.current),r.current=void 0)},[e]);return M.useEffect(()=>i,[i]),[n,i]}const E6=M.createContext(void 0),Jpe="";E6.Provider;function eme(){var t;return(t=M.useContext(E6))!==null&&t!==void 0?t:Jpe}const C6=M.createContext(void 0),tme={targetDocument:typeof document=="object"?document:void 0,dir:"ltr"};C6.Provider;function go(){var t;return(t=M.useContext(C6))!==null&&t!==void 0?t:tme}const T6=M.createContext(void 0),rme=()=>{};T6.Provider;const y3=t=>{var e,r;return(r=(e=M.useContext(T6))===null||e===void 0?void 0:e[t])!==null&&r!==void 0?r:rme},A6=M.createContext(void 0);A6.Provider;function nme(){return M.useContext(A6)}function ime(t){return typeof t=="function"}const ux=t=>{"use no memo";const[e,r]=M.useState(()=>t.defaultState===void 0?t.initialState:sme(t.defaultState)?t.defaultState():t.defaultState),n=M.useRef(t.state);M.useEffect(()=>{n.current=t.state},[t.state]);const i=M.useCallback(s=>{ime(s)&&s(n.current)},[]);return ome(t.state)?[t.state,i]:[e,r]};function sme(t){return typeof t=="function"}const ome=t=>{"use no memo";const[e]=M.useState(()=>t!==void 0);return e};function P6(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const ame={current:0},ume=M.createContext(void 0);function lme(){var t;return(t=M.useContext(ume))!==null&&t!==void 0?t:ame}const $u=P6()?M.useLayoutEffect:M.useEffect,sr=t=>{const e=M.useRef(()=>{throw new Error("Cannot call an event handler while rendering")});return $u(()=>{e.current=t},[t]),M.useCallback((...r)=>{const n=e.current;return n(...r)},[e])};function cme(){const t=M.useRef(!0);return t.current?(t.current=!1,!0):t.current}const R6=M.createContext(void 0);R6.Provider;function fme(){return M.useContext(R6)||""}function O6(t="fui-",e){"use no memo";const r=lme(),n=fme(),i=_u["useId"];if(i){const s=i(),o=M.useMemo(()=>s.replace(/:/g,""),[s]);return e||`${n}${t}${o}`}return M.useMemo(()=>e||`${n}${t}${++r.current}`,[n,t,e,r])}function Xs(...t){"use no memo";const e=M.useCallback(r=>{e.current=r;for(const n of t)typeof n=="function"?n(r):n&&(n.current=r)},[...t]);return e}const B6=(t,e)=>!!(t!=null&&t.contains(e)),dme=t=>{const{targetDocument:e}=go(),r=e==null?void 0:e.defaultView,{refs:n,callback:i,element:s,disabled:o,disabledFocusOnIframe:a,contains:u=B6}=t,l=M.useRef(void 0);pme({element:s,disabled:a||o,callback:i,refs:n,contains:u});const c=M.useRef(!1),f=sr(h=>{if(c.current){c.current=!1;return}const p=h.composedPath()[0];n.every(g=>!u(g.current||null,p))&&!o&&i(h)}),d=sr(h=>{c.current=n.some(p=>u(p.current||null,h.target))});M.useEffect(()=>{if(o)return;let h=hme(r);const p=m=>{if(m===h){h=void 0;return}f(m)};return s==null||s.addEventListener("click",p,!0),s==null||s.addEventListener("touchstart",p,!0),s==null||s.addEventListener("contextmenu",p,!0),s==null||s.addEventListener("mousedown",d,!0),l.current=r==null?void 0:r.setTimeout(()=>{h=void 0},1),()=>{s==null||s.removeEventListener("click",p,!0),s==null||s.removeEventListener("touchstart",p,!0),s==null||s.removeEventListener("contextmenu",p,!0),s==null||s.removeEventListener("mousedown",d,!0),r==null||r.clearTimeout(l.current),h=void 0}},[f,s,o,d,r])},hme=t=>{if(t){var e,r;if(typeof t.window=="object"&&t.window===t)return t.event;var n;return(n=(r=t.ownerDocument)===null||r===void 0||(e=r.defaultView)===null||e===void 0?void 0:e.event)!==null&&n!==void 0?n:void 0}},Sy="fuiframefocus",pme=t=>{const{disabled:e,element:r,callback:n,contains:i=B6,pollDuration:s=1e3,refs:o}=t,a=M.useRef(),u=sr(l=>{o.every(f=>!i(f.current||null,l.target))&&!e&&n(l)});M.useEffect(()=>{if(!e)return r==null||r.addEventListener(Sy,u,!0),()=>{r==null||r.removeEventListener(Sy,u,!0)}},[r,e,u]),M.useEffect(()=>{var l;if(!e)return a.current=r==null||(l=r.defaultView)===null||l===void 0?void 0:l.setInterval(()=>{const c=r==null?void 0:r.activeElement;if((c==null?void 0:c.tagName)==="IFRAME"||(c==null?void 0:c.tagName)==="WEBVIEW"){const f=new CustomEvent(Sy,{bubbles:!0});c.dispatchEvent(f)}},s),()=>{var c;r==null||(c=r.defaultView)===null||c===void 0||c.clearTimeout(a.current)}},[r,e,s])},mme=t=>-1,gme=t=>{};function vme(){const{targetDocument:t}=go(),e=t==null?void 0:t.defaultView,r=e?e.setTimeout:mme,n=e?e.clearTimeout:gme;return Qpe(r,n)}function qn(t,e){return(...r)=>{t==null||t(...r),e==null||e(...r)}}function ju(t,e){var r;const n=t;var i;return!!(!(n==null||(r=n.ownerDocument)===null||r===void 0)&&r.defaultView&&n instanceof n.ownerDocument.defaultView[(i=e==null?void 0:e.constructorName)!==null&&i!==void 0?i:"HTMLElement"])}function CR(t,e){if(!t)return;const r=t;r._virtual||(r._virtual={}),r._virtual.parent=e}function yme(t,e){return{...e,[Xg]:t}}function k6(t,e){return function(n,i,s,o,a){return ER(i)?e(yme(n,i),null,s,o,a):ER(n)?e(n,i,s,o,a):t(n,i,s,o,a)}}function D6(t){const{as:e,[b6]:r,[Xg]:n,[_6]:i,...s}=t,o=s,a=typeof n=="string"?e??n:n;return typeof a!="string"&&e&&(o.as=e),{elementType:a,props:o,renderFunction:i}}const zo=oz,_me=(t,e,r)=>{const{elementType:n,renderFunction:i,props:s}=D6(t),o={...s,...e};return i?zo.jsx(M.Fragment,{children:i(n,o)},r):zo.jsx(n,o,r)},bme=(t,e,r)=>{const{elementType:n,renderFunction:i,props:s}=D6(t),o={...s,...e};return i?zo.jsx(M.Fragment,{children:i(n,{...o,children:zo.jsxs(M.Fragment,{children:o.children},void 0)})},r):zo.jsxs(n,o,r)},Cn=k6(zo.jsx,_me),lx=k6(zo.jsxs,bme),cx=M.createContext(void 0),xme={};cx.Provider;const Sme=()=>M.useContext(cx)?M.useContext(cx):xme;var wme=typeof WeakRef<"u",TR=class{constructor(t){wme&&typeof t=="object"?this._weakRef=new WeakRef(t):this._instance=t}deref(){var t,e;let r;return this._weakRef?(r=(t=this._weakRef)==null?void 0:t.deref(),r||delete this._weakRef):(r=this._instance,(e=r==null?void 0:r.isDisposed)!=null&&e.call(r)&&delete this._instance),r}},Rf="keyborg:focusin",Eme="keyborg:focusout";function Cme(t){const e=t.HTMLElement,r=e.prototype.focus;let n=!1;return e.prototype.focus=function(){n=!0},t.document.createElement("button").focus(),e.prototype.focus=r,n}var wy=!1;function Tme(t){const e=t;wy||(wy=Cme(e));const r=e.HTMLElement.prototype.focus;if(r.__keyborgNativeFocus)return;e.HTMLElement.prototype.focus=u;const n=new Set,i=c=>{const f=c.target;if(!f)return;const d=new CustomEvent(Eme,{cancelable:!0,bubbles:!0,composed:!0,detail:{originalEvent:c}});f.dispatchEvent(d)},s=c=>{const f=c.target;if(!f)return;let d=c.composedPath()[0];const h=new Set;for(;d;)d.nodeType===Node.DOCUMENT_FRAGMENT_NODE?(h.add(d),d=d.host):d=d.parentNode;for(const p of n){const m=p.deref();(!m||!h.has(m))&&(n.delete(p),m&&(m.removeEventListener("focusin",s,!0),m.removeEventListener("focusout",i,!0)))}o(f,c.relatedTarget||void 0)},o=(c,f,d)=>{var h;const p=c.shadowRoot;if(p){for(const v of n)if(v.deref()===p)return;p.addEventListener("focusin",s,!0),p.addEventListener("focusout",i,!0),n.add(new TR(p));return}const m={relatedTarget:f,originalEvent:d},g=new CustomEvent(Rf,{cancelable:!0,bubbles:!0,composed:!0,detail:m});g.details=m,(wy||a.lastFocusedProgrammatically)&&(m.isFocusedProgrammatically=c===((h=a.lastFocusedProgrammatically)==null?void 0:h.deref()),a.lastFocusedProgrammatically=void 0),c.dispatchEvent(g)},a=e.__keyborgData={focusInHandler:s,focusOutHandler:i,shadowTargets:n};e.document.addEventListener("focusin",e.__keyborgData.focusInHandler,!0),e.document.addEventListener("focusout",e.__keyborgData.focusOutHandler,!0);function u(){const c=e.__keyborgData;return c&&(c.lastFocusedProgrammatically=new TR(this)),r.apply(this,arguments)}let l=e.document.activeElement;for(;l&&l.shadowRoot;)o(l),l=l.shadowRoot.activeElement;u.__keyborgNativeFocus=r}function Ame(t){const e=t,r=e.HTMLElement.prototype,n=r.focus.__keyborgNativeFocus,i=e.__keyborgData;if(i){e.document.removeEventListener("focusin",i.focusInHandler,!0),e.document.removeEventListener("focusout",i.focusOutHandler,!0);for(const s of i.shadowTargets){const o=s.deref();o&&(o.removeEventListener("focusin",i.focusInHandler,!0),o.removeEventListener("focusout",i.focusOutHandler,!0))}i.shadowTargets.clear(),delete e.__keyborgData}n&&(r.focus=n)}var Pme=500,M6=0,Rme=class{constructor(t,e){this._isNavigatingWithKeyboard_DO_NOT_USE=!1,this._onFocusIn=n=>{if(this._isMouseOrTouchUsedTimer||this.isNavigatingWithKeyboard)return;const i=n.detail;i.relatedTarget&&(i.isFocusedProgrammatically||i.isFocusedProgrammatically===void 0||(this.isNavigatingWithKeyboard=!0))},this._onMouseDown=n=>{n.buttons===0||n.clientX===0&&n.clientY===0&&n.screenX===0&&n.screenY===0||this._onMouseOrTouch()},this._onMouseOrTouch=()=>{const n=this._win;n&&(this._isMouseOrTouchUsedTimer&&n.clearTimeout(this._isMouseOrTouchUsedTimer),this._isMouseOrTouchUsedTimer=n.setTimeout(()=>{delete this._isMouseOrTouchUsedTimer},1e3)),this.isNavigatingWithKeyboard=!1},this._onKeyDown=n=>{this.isNavigatingWithKeyboard?this._shouldDismissKeyboardNavigation(n)&&this._scheduleDismiss():this._shouldTriggerKeyboardNavigation(n)&&(this.isNavigatingWithKeyboard=!0)},this.id="c"+ ++M6,this._win=t;const r=t.document;if(e){const n=e.triggerKeys,i=e.dismissKeys;n!=null&&n.length&&(this._triggerKeys=new Set(n)),i!=null&&i.length&&(this._dismissKeys=new Set(i))}r.addEventListener(Rf,this._onFocusIn,!0),r.addEventListener("mousedown",this._onMouseDown,!0),t.addEventListener("keydown",this._onKeyDown,!0),r.addEventListener("touchstart",this._onMouseOrTouch,!0),r.addEventListener("touchend",this._onMouseOrTouch,!0),r.addEventListener("touchcancel",this._onMouseOrTouch,!0),Tme(t)}get isNavigatingWithKeyboard(){return this._isNavigatingWithKeyboard_DO_NOT_USE}set isNavigatingWithKeyboard(t){this._isNavigatingWithKeyboard_DO_NOT_USE!==t&&(this._isNavigatingWithKeyboard_DO_NOT_USE=t,this.update())}dispose(){const t=this._win;if(t){this._isMouseOrTouchUsedTimer&&(t.clearTimeout(this._isMouseOrTouchUsedTimer),this._isMouseOrTouchUsedTimer=void 0),this._dismissTimer&&(t.clearTimeout(this._dismissTimer),this._dismissTimer=void 0),Ame(t);const e=t.document;e.removeEventListener(Rf,this._onFocusIn,!0),e.removeEventListener("mousedown",this._onMouseDown,!0),t.removeEventListener("keydown",this._onKeyDown,!0),e.removeEventListener("touchstart",this._onMouseOrTouch,!0),e.removeEventListener("touchend",this._onMouseOrTouch,!0),e.removeEventListener("touchcancel",this._onMouseOrTouch,!0),delete this._win}}isDisposed(){return!!this._win}update(){var t,e;const r=(e=(t=this._win)==null?void 0:t.__keyborg)==null?void 0:e.refs;if(r)for(const n of Object.keys(r))_3.update(r[n],this.isNavigatingWithKeyboard)}_shouldTriggerKeyboardNavigation(t){var e;if(t.key==="Tab")return!0;const r=(e=this._win)==null?void 0:e.document.activeElement,n=!this._triggerKeys||this._triggerKeys.has(t.keyCode),i=r&&(r.tagName==="INPUT"||r.tagName==="TEXTAREA"||r.isContentEditable);return n&&!i}_shouldDismissKeyboardNavigation(t){var e;return(e=this._dismissKeys)==null?void 0:e.has(t.keyCode)}_scheduleDismiss(){const t=this._win;if(t){this._dismissTimer&&(t.clearTimeout(this._dismissTimer),this._dismissTimer=void 0);const e=t.document.activeElement;this._dismissTimer=t.setTimeout(()=>{this._dismissTimer=void 0;const r=t.document.activeElement;e&&r&&e===r&&(this.isNavigatingWithKeyboard=!1)},Pme)}}},_3=class I6{constructor(e,r){this._cb=[],this._id="k"+ ++M6,this._win=e;const n=e.__keyborg;n?(this._core=n.core,n.refs[this._id]=this):(this._core=new Rme(e,r),e.__keyborg={core:this._core,refs:{[this._id]:this}})}static create(e,r){return new I6(e,r)}static dispose(e){e.dispose()}static update(e,r){e._cb.forEach(n=>n(r))}dispose(){var e;const r=(e=this._win)==null?void 0:e.__keyborg;r!=null&&r.refs[this._id]&&(delete r.refs[this._id],Object.keys(r.refs).length===0&&(r.core.dispose(),delete this._win.__keyborg)),this._cb=[],delete this._core,delete this._win}isNavigatingWithKeyboard(){var e;return!!((e=this._core)!=null&&e.isNavigatingWithKeyboard)}subscribe(e){this._cb.push(e)}unsubscribe(e){const r=this._cb.indexOf(e);r>=0&&this._cb.splice(r,1)}setVal(e){this._core&&(this._core.isNavigatingWithKeyboard=e)}};function F6(t,e){return _3.create(t,e)}function L6(t){_3.dispose(t)}/*!
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */const AR="data-fui-focus-visible";function Ome(t,e){if(N6(t))return()=>{};const r={current:void 0},n=F6(e);function i(u){n.isNavigatingWithKeyboard()&&ju(u)&&(r.current=u,u.setAttribute(AR,""))}function s(){r.current&&(r.current.removeAttribute(AR),r.current=void 0)}n.subscribe(u=>{u||s()});const o=u=>{s();const l=u.composedPath()[0];i(l)},a=u=>{(!u.relatedTarget||ju(u.relatedTarget)&&!t.contains(u.relatedTarget))&&s()};return t.addEventListener(Rf,o),t.addEventListener("focusout",a),t.focusVisible=!0,t.contains(e.document.activeElement)&&i(e.document.activeElement),()=>{s(),t.removeEventListener(Rf,o),t.removeEventListener("focusout",a),delete t.focusVisible,L6(n)}}function N6(t){return t?t.focusVisible?!0:N6(t==null?void 0:t.parentElement):!1}function Bme(t={}){const e=go(),r=M.useRef(null);var n;const i=(n=t.targetDocument)!==null&&n!==void 0?n:e.targetDocument;return M.useEffect(()=>{if(i!=null&&i.defaultView&&r.current)return Ome(r.current,i.defaultView)},[r,i]),r}function U6(){const{targetDocument:t}=go(),e=M.useRef(null);return M.useEffect(()=>{const r=t==null?void 0:t.defaultView;if(r){const n=F6(r);return e.current=n,()=>{L6(n),e.current=null}}},[t]),e}function G6(t){const e=U6(),r=sr(t);M.useEffect(()=>{const n=e.current;if(n){const i=s=>{r(s)};return n.subscribe(i),i(n.isNavigatingWithKeyboard()),()=>{n.unsubscribe(i)}}},[e,r])}function kme(){const t=U6();return M.useCallback(e=>{var r;(r=t.current)===null||r===void 0||r.setVal(e)},[t])}const Dme=t=>r=>{const n=M.useRef(r.value),i=M.useRef(0),s=M.useRef();return s.current||(s.current={value:n,version:i,listeners:[]}),$u(()=>{n.current=r.value,i.current+=1,Py.unstable_runWithPriority(Py.unstable_NormalPriority,()=>{s.current.listeners.forEach(o=>{o([i.current,r.value])})})},[r.value]),M.createElement(t,{value:s.current},r.children)},z6=t=>{const e=M.createContext({value:{current:t},version:{current:-1},listeners:[]});return e.Provider=Dme(e.Provider),delete e.Consumer,e},Mme=(t,e)=>{const r=M.useContext(t),{value:{current:n},version:{current:i},listeners:s}=r,o=e(n),[a,u]=M.useState([n,o]),l=f=>{u(d=>{if(!f)return[n,o];if(f[0]<=i)return Object.is(d[1],o)?d:[n,o];try{if(Object.is(d[0],f[1]))return d;const h=e(f[1]);return Object.is(d[1],h)?d:[f[1],h]}catch{}return[d[0],d[1]]})};Object.is(a[1],o)||l(void 0);const c=sr(l);return $u(()=>(s.push(c),()=>{const f=s.indexOf(c);s.splice(f,1)}),[c,s]),a[1]};function $6(t){const e=M.useContext(t);return e.version?e.version.current!==-1:!1}const PR="Enter",th=" ",Ime="Tab",RR="ArrowDown",Ey="ArrowUp",Fme="End",Lme="Home",Nme="PageDown",Ume="PageUp",Gme="Escape",Dr=()=>{},zme={controller:{active:Dr,blur:Dr,find:Dr,first:Dr,focus:Dr,focusLastActive:Dr,scrollActiveIntoView:Dr,last:Dr,next:Dr,prev:Dr,showAttributes:Dr,hideAttributes:Dr,showFocusVisibleAttributes:Dr,hideFocusVisibleAttributes:Dr}},b3=M.createContext(void 0),j6=b3.Provider,H6=()=>{var t;return(t=M.useContext(b3))!==null&&t!==void 0?t:zme},$me=()=>!!M.useContext(b3);function jme(t){const{matchOption:e}=t,{targetDocument:r}=go(),n=M.useRef(null),i=M.useRef(null),s=M.useCallback(u=>ju(u)&&e(u)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP,[e]),o=M.useCallback(u=>{u&&r?(i.current=u,n.current=r.createTreeWalker(u,NodeFilter.SHOW_ELEMENT,s)):i.current=null},[r,s]);return{optionWalker:M.useMemo(()=>({first:()=>!n.current||!i.current?null:(n.current.currentNode=i.current,n.current.firstChild()),last:()=>!n.current||!i.current?null:(n.current.currentNode=i.current,n.current.lastChild()),next:()=>n.current?n.current.nextNode():null,prev:()=>n.current?n.current.previousNode():null,find:(u,l)=>{if(!n.current||!i.current)return null;const c=l?r==null?void 0:r.getElementById(l):null;n.current.currentNode=c??i.current;let f=n.current.currentNode;for(;f&&!u(f.id);)f=n.current.nextNode();return f},setCurrent:u=>{n.current&&(n.current.currentNode=u)}}),[r]),listboxCallbackRef:o}}const OR="data-activedescendant",Aa="data-activedescendant-focusvisible",BR=t=>{if(!t)return;const e=V6(t.parentElement);if(!e)return;const{offsetHeight:r}=t,n=W6(t,e),{scrollMarginTop:i,scrollMarginBottom:s}=Hme(t),{offsetHeight:o,scrollTop:a}=e,u=n-i<a,l=n+r+s>a+o,c=2;u?e.scrollTo(0,n-i-c):l&&e.scrollTo(0,n+r+s-o+c)},V6=t=>t?t.scrollHeight>t.offsetHeight?t:V6(t.parentElement):null,W6=(t,e)=>!t||t===e?0:t.contains(e)?e.offsetTop*-1:t.offsetTop+W6(t.offsetParent,e),Hme=t=>{var e;const r=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;if(!r)return{scrollMarginTop:0,scrollMarginBottom:0};const n=r.getComputedStyle(t);var i;const s=(i=rh(n.scrollMarginTop))!==null&&i!==void 0?i:rh(n.scrollMarginBlockStart);var o;const a=(o=rh(n.scrollMarginBottom))!==null&&o!==void 0?o:rh(n.scrollMarginBlockEnd);return{scrollMarginTop:s,scrollMarginBottom:a}},rh=t=>t?parseInt(t,10):0,Vme=t=>new CustomEvent("activedescendantchange",{bubbles:!0,cancelable:!1,composed:!0,detail:t});function X6(t){const{imperativeRef:e,matchOption:r}=t,n=M.useRef(!1),i=M.useRef(!0),s=M.useRef(null),o=M.useRef(null),a=M.useRef(null),u=M.useRef(!0),l=M.useCallback(()=>{var _;(_=a.current)===null||_===void 0||_.removeAttribute("aria-activedescendant")},[]),c=M.useCallback(_=>{if(_&&(s.current=_),u.current&&s.current){var x;(x=a.current)===null||x===void 0||x.setAttribute("aria-activedescendant",s.current)}},[]);G6(_=>{n.current=_;const x=m();x&&(_&&i.current?x.setAttribute(Aa,""):x.removeAttribute(Aa))});const f=sr(r),d=M.useRef(null),{optionWalker:h,listboxCallbackRef:p}=jme({matchOption:f}),m=M.useCallback(()=>{var _;return(_=d.current)===null||_===void 0?void 0:_.querySelector(`#${s.current}`)},[d]),g=M.useCallback(_=>{i.current=_;const x=m();x&&(_&&n.current?x.setAttribute(Aa,""):x.removeAttribute(Aa))},[m]),v=M.useCallback(()=>{const _=m();_&&(_.removeAttribute(OR),_.removeAttribute(Aa)),l(),o.current=s.current,s.current=null;var x;return(x=_==null?void 0:_.id)!==null&&x!==void 0?x:null},[m,l]),y=M.useCallback(_=>{if(!_)return;const x=v();BR(_),c(_.id),_.setAttribute(OR,""),n.current&&i.current&&_.setAttribute(Aa,"");const S=Vme({id:_.id,previousId:x});_.dispatchEvent(S)},[v,c]),b=M.useMemo(()=>({first:({passive:_}={})=>{const x=h.first();return _||y(x),x==null?void 0:x.id},last:({passive:_}={})=>{const x=h.last();return _||y(x),x==null?void 0:x.id},next:({passive:_}={})=>{const x=m();if(!x)return;h.setCurrent(x);const S=h.next();return _||y(S),S==null?void 0:S.id},prev:({passive:_}={})=>{const x=m();if(!x)return;h.setCurrent(x);const S=h.prev();return _||y(S),S==null?void 0:S.id},blur:()=>{v()},active:()=>{var _;return(_=m())===null||_===void 0?void 0:_.id},focus:_=>{if(!d.current)return;const x=d.current.querySelector(`#${_}`);x&&y(x)},focusLastActive:()=>{if(!d.current||!o.current)return;const _=d.current.querySelector(`#${o.current}`);if(_)return y(_),!0},find(_,{passive:x,startFrom:S}={}){const w=h.find(_,S);return x||y(w),w==null?void 0:w.id},scrollActiveIntoView:()=>{if(!d.current)return;const _=m();_&&BR(_)},showAttributes(){u.current=!0,c()},hideAttributes(){u.current=!1,l()},showFocusVisibleAttributes(){g(!0)},hideFocusVisibleAttributes(){g(!1)}}),[h,d,c,l,y,v,m,g]);return M.useImperativeHandle(e,()=>b),{listboxRef:Xs(d,p),activeParentRef:a,controller:b}}const Wme=hl({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),Xme=(t,e)=>{const{title:r,primaryFill:n="currentColor",...i}=t,s={...i,title:void 0,fill:n},o=Wme(),a=Sme();return s.className=hi(o.root,(e==null?void 0:e.flipInRtl)&&(a==null?void 0:a.textDirection)==="rtl"&&o.rtl,s.className),r&&(s["aria-label"]=r),!s["aria-label"]&&!s["aria-labelledby"]?s["aria-hidden"]=!0:s.role="img",s},Yg=(t,e,r,n)=>{const i=e==="1em"?"20":e,s=M.forwardRef((o,a)=>{const u={...Xme(o,{flipInRtl:n==null?void 0:n.flipInRtl}),ref:a,width:e,height:e,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"};return M.createElement("svg",u,...r.map(l=>M.createElement("path",{d:l,fill:u.fill})))});return s.displayName=t,s},qme=Yg("CheckmarkFilled","1em",["M7.03 13.9 3.56 10a.75.75 0 0 0-1.12 1l4 4.5c.29.32.79.34 1.09.03l10.5-10.5a.75.75 0 0 0-1.06-1.06l-9.94 9.94Z"]),Yme=Yg("ChevronDownRegular","1em",["M15.85 7.65c.2.2.2.5 0 .7l-5.46 5.49a.55.55 0 0 1-.78 0L4.15 8.35a.5.5 0 1 1 .7-.7L10 12.8l5.15-5.16c.2-.2.5-.2.7 0Z"]),Kme=Yg("DismissRegular","1em",["m4.09 4.22.06-.07a.5.5 0 0 1 .63-.06l.07.06L10 9.29l5.15-5.14a.5.5 0 0 1 .63-.06l.07.06c.18.17.2.44.06.63l-.06.07L10.71 10l5.14 5.15c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L10 10.71l-5.15 5.14a.5.5 0 0 1-.63.06l-.07-.06a.5.5 0 0 1-.06-.63l.06-.07L9.29 10 4.15 4.85a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]),Zme=Yg("Checkmark12Filled","12",["M9.76 3.2c.3.29.32.76.04 1.06l-4.25 4.5a.75.75 0 0 1-1.08.02L2.22 6.53a.75.75 0 0 1 1.06-1.06l1.7 1.7L8.7 3.24a.75.75 0 0 1 1.06-.04Z"]),kR="data-popper-is-intersecting",DR="data-popper-escaped",MR="data-popper-reference-hidden",Qme="data-popper-placement",fx="fui-positioningend",Jme=["top","right","bottom","left"],Qo=Math.min,Tn=Math.max,Wp=Math.round,Oi=t=>({x:t,y:t}),ege={left:"right",right:"left",bottom:"top",top:"bottom"},tge={start:"end",end:"start"};function dx(t,e,r){return Tn(t,Qo(e,r))}function us(t,e){return typeof t=="function"?t(e):t}function ls(t){return t.split("-")[0]}function pl(t){return t.split("-")[1]}function x3(t){return t==="x"?"y":"x"}function S3(t){return t==="y"?"height":"width"}function Qi(t){return["top","bottom"].includes(ls(t))?"y":"x"}function w3(t){return x3(Qi(t))}function rge(t,e,r){r===void 0&&(r=!1);const n=pl(t),i=w3(t),s=S3(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=Xp(o)),[o,Xp(o)]}function nge(t){const e=Xp(t);return[hx(t),e,hx(e)]}function hx(t){return t.replace(/start|end/g,e=>tge[e])}function ige(t,e,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return r?e?i:n:e?n:i;case"left":case"right":return e?s:o;default:return[]}}function sge(t,e,r,n){const i=pl(t);let s=ige(ls(t),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(hx)))),s}function Xp(t){return t.replace(/left|right|bottom|top/g,e=>ege[e])}function oge(t){return{top:0,right:0,bottom:0,left:0,...t}}function q6(t){return typeof t!="number"?oge(t):{top:t,right:t,bottom:t,left:t}}function qp(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function IR(t,e,r){let{reference:n,floating:i}=t;const s=Qi(e),o=w3(e),a=S3(o),u=ls(e),l=s==="y",c=n.x+n.width/2-i.width/2,f=n.y+n.height/2-i.height/2,d=n[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:n.y-i.height};break;case"bottom":h={x:c,y:n.y+n.height};break;case"right":h={x:n.x+n.width,y:f};break;case"left":h={x:n.x-i.width,y:f};break;default:h={x:n.x,y:n.y}}switch(pl(e)){case"start":h[o]-=d*(r&&l?-1:1);break;case"end":h[o]+=d*(r&&l?-1:1);break}return h}const age=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:c,y:f}=IR(l,n,u),d=n,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:y,y:b,data:_,reset:x}=await v({x:c,y:f,initialPlacement:n,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:t,floating:e}});c=y??c,f=b??f,h={...h,[g]:{...h[g],..._}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):x.rects),{x:c,y:f}=IR(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Hu(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:u}=t,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=us(e,t),p=q6(h),g=a[d?f==="floating"?"reference":"floating":f],v=qp(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(g)))==null||r?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),y=f==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),_=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=qp(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:b,strategy:u}):y);return{top:(v.top-x.top+p.top)/_.y,bottom:(x.bottom-v.bottom+p.bottom)/_.y,left:(v.left-x.left+p.left)/_.x,right:(x.right-v.right+p.right)/_.x}}const uge=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=e,{element:l,padding:c=0}=us(t,e)||{};if(l==null)return{};const f=q6(c),d={x:r,y:n},h=w3(i),p=S3(h),m=await o.getDimensions(l),g=h==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",_=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let w=S?S[b]:0;(!w||!await(o.isElement==null?void 0:o.isElement(S)))&&(w=a.floating[b]||s.floating[p]);const P=_/2-x/2,C=w/2-m[p]/2-1,R=Qo(f[v],C),F=Qo(f[y],C),N=R,G=w-m[p]-F,j=w/2-m[p]/2+P,re=dx(N,j,G),U=!u.arrow&&pl(i)!=null&&j!==re&&s.reference[p]/2-(j<N?R:F)-m[p]/2<0,z=U?j<N?j-N:j-G:0;return{[h]:d[h]+z,data:{[h]:re,centerOffset:j-re-z,...U&&{alignmentOffset:z}},reset:U}}}),lge=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=e,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=us(t,e);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const v=ls(i),y=Qi(a),b=ls(a)===a,_=await(u.isRTL==null?void 0:u.isRTL(l.floating)),x=d||(b||!m?[Xp(a)]:nge(a)),S=p!=="none";!d&&S&&x.push(...sge(a,m,p,_));const w=[a,...x],P=await Hu(e,g),C=[];let R=((n=s.flip)==null?void 0:n.overflows)||[];if(c&&C.push(P[v]),f){const re=rge(i,o,_);C.push(P[re[0]],P[re[1]])}if(R=[...R,{placement:i,overflows:C}],!C.every(re=>re<=0)){var F,N;const re=(((F=s.flip)==null?void 0:F.index)||0)+1,U=w[re];if(U){var G;const pe=f==="alignment"?y!==Qi(U):!1,ae=((G=R[0])==null?void 0:G.overflows[0])>0;if(!pe||ae)return{data:{index:re,overflows:R},reset:{placement:U}}}let z=(N=R.filter(pe=>pe.overflows[0]<=0).sort((pe,ae)=>pe.overflows[1]-ae.overflows[1])[0])==null?void 0:N.placement;if(!z)switch(h){case"bestFit":{var j;const pe=(j=R.filter(ae=>{if(S){const we=Qi(ae.placement);return we===y||we==="y"}return!0}).map(ae=>[ae.placement,ae.overflows.filter(we=>we>0).reduce((we,V)=>we+V,0)]).sort((ae,we)=>ae[1]-we[1])[0])==null?void 0:j[0];pe&&(z=pe);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function FR(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function LR(t){return Jme.some(e=>t[e]>=0)}const cge=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=us(t,e);switch(n){case"referenceHidden":{const s=await Hu(e,{...i,elementContext:"reference"}),o=FR(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:LR(o)}}}case"escaped":{const s=await Hu(e,{...i,altBoundary:!0}),o=FR(s,r.floating);return{data:{escapedOffsets:o,escaped:LR(o)}}}default:return{}}}}};async function fge(t,e){const{placement:r,platform:n,elements:i}=t,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=ls(r),a=pl(r),u=Qi(r)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=us(e,t);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const dge=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=e,u=await fge(e,t);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},hge=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y}=g;return{x:v,y}}},...u}=us(t,e),l={x:r,y:n},c=await Hu(e,u),f=Qi(ls(i)),d=x3(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",y=h+c[g],b=h-c[v];h=dx(y,h,b)}if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",y=p+c[g],b=p-c[v];p=dx(y,p,b)}const m=a.fn({...e,[d]:h,[f]:p});return{...m,data:{x:m.x-r,y:m.y-n,enabled:{[d]:s,[f]:o}}}}}},pge=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=us(t,e),c={x:r,y:n},f=Qi(i),d=x3(f);let h=c[d],p=c[f];const m=us(a,e),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",_=s.reference[d]-s.floating[b]+g.mainAxis,x=s.reference[d]+s.reference[b]-g.mainAxis;h<_?h=_:h>x&&(h=x)}if(l){var v,y;const b=d==="y"?"width":"height",_=["top","left"].includes(ls(i)),x=s.reference[f]-s.floating[b]+(_&&((v=o.offset)==null?void 0:v[f])||0)+(_?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(_?0:((y=o.offset)==null?void 0:y[f])||0)-(_?g.crossAxis:0);p<x?p=x:p>S&&(p=S)}return{[d]:h,[f]:p}}}},mge=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:u=()=>{},...l}=us(t,e),c=await Hu(e,l),f=ls(i),d=pl(i),h=Qi(i)==="y",{width:p,height:m}=s.floating;let g,v;f==="top"||f==="bottom"?(g=f,v=d===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(v=f,g=d==="end"?"top":"bottom");const y=m-c.top-c.bottom,b=p-c.left-c.right,_=Qo(m-c[g],y),x=Qo(p-c[v],b),S=!e.middlewareData.shift;let w=_,P=x;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(P=b),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(w=y),S&&!d){const R=Tn(c.left,0),F=Tn(c.right,0),N=Tn(c.top,0),G=Tn(c.bottom,0);h?P=p-2*(R!==0||F!==0?R+F:Tn(c.left,c.right)):w=m-2*(N!==0||G!==0?N+G:Tn(c.top,c.bottom))}await u({...e,availableWidth:P,availableHeight:w});const C=await o.getDimensions(a.floating);return p!==C.width||m!==C.height?{reset:{rects:!0}}:{}}}};function Kg(){return typeof window<"u"}function ml(t){return Y6(t)?(t.nodeName||"").toLowerCase():"#document"}function cn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ps(t){var e;return(e=(Y6(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Y6(t){return Kg()?t instanceof Node||t instanceof cn(t).Node:!1}function Qn(t){return Kg()?t instanceof Element||t instanceof cn(t).Element:!1}function Di(t){return Kg()?t instanceof HTMLElement||t instanceof cn(t).HTMLElement:!1}function NR(t){return!Kg()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof cn(t).ShadowRoot}function sd(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Jn(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(i)}function gge(t){return["table","td","th"].includes(ml(t))}function Zg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function E3(t){const e=C3(),r=Qn(t)?Jn(t):t;return["transform","translate","scale","rotate","perspective"].some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function vge(t){let e=so(t);for(;Di(e)&&!Vu(e);){if(E3(e))return e;if(Zg(e))return null;e=so(e)}return null}function C3(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Vu(t){return["html","body","#document"].includes(ml(t))}function Jn(t){return cn(t).getComputedStyle(t)}function Qg(t){return Qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function so(t){if(ml(t)==="html")return t;const e=t.assignedSlot||t.parentNode||NR(t)&&t.host||ps(t);return NR(e)?e.host:e}function K6(t){const e=so(t);return Vu(e)?t.ownerDocument?t.ownerDocument.body:t.body:Di(e)&&sd(e)?e:K6(e)}function px(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=K6(t),s=i===((n=t.ownerDocument)==null?void 0:n.body),o=cn(i);if(s){const a=mx(o);return e.concat(o,o.visualViewport||[],sd(i)?i:[],a&&r?px(a):[])}return e.concat(i,px(i,[],r))}function mx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Z6(t){const e=Jn(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Di(t),s=i?t.offsetWidth:r,o=i?t.offsetHeight:n,a=Wp(r)!==s||Wp(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function Q6(t){return Qn(t)?t:t.contextElement}function yu(t){const e=Q6(t);if(!Di(e))return Oi(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:s}=Z6(e);let o=(s?Wp(r.width):r.width)/n,a=(s?Wp(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const yge=Oi(0);function J6(t){const e=cn(t);return!C3()||!e.visualViewport?yge:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function _ge(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==cn(t)?!1:e}function Of(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),s=Q6(t);let o=Oi(1);e&&(n?Qn(n)&&(o=yu(n)):o=yu(t));const a=_ge(s,r,n)?J6(s):Oi(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=cn(s),h=n&&Qn(n)?cn(n):n;let p=d,m=mx(p);for(;m&&n&&h!==p;){const g=yu(m),v=m.getBoundingClientRect(),y=Jn(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,_=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=_,p=cn(m),m=mx(p)}}return qp({width:c,height:f,x:u,y:l})}function T3(t,e){const r=Qg(t).scrollLeft;return e?e.left+r:Of(ps(t)).left+r}function eG(t,e,r){r===void 0&&(r=!1);const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-(r?0:T3(t,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function bge(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const s=i==="fixed",o=ps(n),a=e?Zg(e.floating):!1;if(n===o||a&&s)return r;let u={scrollLeft:0,scrollTop:0},l=Oi(1);const c=Oi(0),f=Di(n);if((f||!f&&!s)&&((ml(n)!=="body"||sd(o))&&(u=Qg(n)),Di(n))){const h=Of(n);l=yu(n),c.x=h.x+n.clientLeft,c.y=h.y+n.clientTop}const d=o&&!f&&!s?eG(o,u,!0):Oi(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-u.scrollLeft*l.x+c.x+d.x,y:r.y*l.y-u.scrollTop*l.y+c.y+d.y}}function xge(t){return Array.from(t.getClientRects())}function Sge(t){const e=ps(t),r=Qg(t),n=t.ownerDocument.body,i=Tn(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=Tn(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+T3(t);const a=-r.scrollTop;return Jn(n).direction==="rtl"&&(o+=Tn(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function wge(t,e){const r=cn(t),n=ps(t),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=C3();(!l||l&&e==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Ege(t,e){const r=Of(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,s=Di(t)?yu(t):Oi(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,u=i*s.x,l=n*s.y;return{width:o,height:a,x:u,y:l}}function UR(t,e,r){let n;if(e==="viewport")n=wge(t,r);else if(e==="document")n=Sge(ps(t));else if(Qn(e))n=Ege(e,r);else{const i=J6(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return qp(n)}function tG(t,e){const r=so(t);return r===e||!Qn(r)||Vu(r)?!1:Jn(r).position==="fixed"||tG(r,e)}function Cge(t,e){const r=e.get(t);if(r)return r;let n=px(t,[],!1).filter(a=>Qn(a)&&ml(a)!=="body"),i=null;const s=Jn(t).position==="fixed";let o=s?so(t):t;for(;Qn(o)&&!Vu(o);){const a=Jn(o),u=E3(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||sd(o)&&!u&&tG(t,o))?n=n.filter(c=>c!==o):i=a,o=so(o)}return e.set(t,n),n}function Tge(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const o=[...r==="clippingAncestors"?Zg(e)?[]:Cge(e,this._c):[].concat(r),n],a=o[0],u=o.reduce((l,c)=>{const f=UR(e,c,i);return l.top=Tn(f.top,l.top),l.right=Qo(f.right,l.right),l.bottom=Qo(f.bottom,l.bottom),l.left=Tn(f.left,l.left),l},UR(e,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Age(t){const{width:e,height:r}=Z6(t);return{width:e,height:r}}function Pge(t,e,r){const n=Di(e),i=ps(e),s=r==="fixed",o=Of(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const u=Oi(0);function l(){u.x=T3(i)}if(n||!n&&!s)if((ml(e)!=="body"||sd(i))&&(a=Qg(e)),n){const h=Of(e,!0,s,e);u.x=h.x+e.clientLeft,u.y=h.y+e.clientTop}else i&&l();s&&!n&&i&&l();const c=i&&!n&&!s?eG(i,a):Oi(0),f=o.left+a.scrollLeft-u.x-c.x,d=o.top+a.scrollTop-u.y-c.y;return{x:f,y:d,width:o.width,height:o.height}}function Cy(t){return Jn(t).position==="static"}function GR(t,e){if(!Di(t)||Jn(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return ps(t)===r&&(r=r.ownerDocument.body),r}function rG(t,e){const r=cn(t);if(Zg(t))return r;if(!Di(t)){let i=so(t);for(;i&&!Vu(i);){if(Qn(i)&&!Cy(i))return i;i=so(i)}return r}let n=GR(t,e);for(;n&&gge(n)&&Cy(n);)n=GR(n,e);return n&&Vu(n)&&Cy(n)&&!E3(n)?r:n||vge(t)||r}const Rge=async function(t){const e=this.getOffsetParent||rG,r=this.getDimensions,n=await r(t.floating);return{reference:Pge(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Oge(t){return Jn(t).direction==="rtl"}const Bge={convertOffsetParentRelativeRectToViewportRelativeRect:bge,getDocumentElement:ps,getClippingRect:Tge,getOffsetParent:rG,getElementRects:Rge,getClientRects:xge,getDimensions:Age,getScale:yu,isElement:Qn,isRTL:Oge},kge=Hu,Dge=dge,Mge=hge,Ige=lge,Fge=mge,zR=cge,Lge=uge,$R=pge,Nge=(t,e,r)=>{const n=new Map,i={platform:Bge,...r},s={...i.platform,_c:n};return age(t,e,{...i,platform:s})};function nG(t){const e=t.split("-");return{side:e[0],alignment:e[1]}}const Uge=t=>t.nodeName==="HTML"?t:t.parentNode||t.host,Gge=t=>{var e;if(t.nodeType!==1)return{};const r=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return r?r.getComputedStyle(t,null):{}},Jg=t=>{const e=t&&Uge(t);if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}const{overflow:r,overflowX:n,overflowY:i}=Gge(e);return/(auto|scroll|overlay)/.test(r+i+n)?e:Jg(e)},zge=t=>{var e;const r=Jg(t);return r?r!==((e=r.ownerDocument)===null||e===void 0?void 0:e.body):!1};function A3(t,e){if(e==="window")return t==null?void 0:t.ownerDocument.documentElement;if(e==="clippingParents")return"clippingAncestors";if(e==="scrollParent"){let r=Jg(t);return r.nodeName==="BODY"&&(r=t==null?void 0:t.ownerDocument.documentElement),r}return e}function iG(t,e){if(typeof t=="number")return t;const{start:r,end:n,...i}=t,s=i,o=e?"end":"start",a=e?"start":"end";return t[o]&&(s.left=t[o]),t[a]&&(s.right=t[a]),s}const $ge=t=>({above:"top",below:"bottom",before:t?"right":"left",after:t?"left":"right"}),jge=()=>({start:"start",end:"end",top:"start",bottom:"end",center:void 0}),Hge=(t,e)=>{const r=t==="above"||t==="below",n=e==="top"||e==="bottom";return r&&n||!r&&!n},sG=(t,e,r)=>{const n=Hge(e,t)?"center":t,i=e&&$ge(r)[e],s=n&&jge()[n];return i&&s?`${i}-${s}`:i},Vge=()=>({top:"above",bottom:"below",right:"after",left:"before"}),Wge=t=>t==="above"||t==="below"?{start:"start",end:"end"}:{start:"top",end:"bottom"},Xge=t=>{const{side:e,alignment:r}=nG(t),n=Vge()[e],i=r&&Wge(n)[r];return{position:n,alignment:i}},qge={above:{position:"above",align:"center"},"above-start":{position:"above",align:"start"},"above-end":{position:"above",align:"end"},below:{position:"below",align:"center"},"below-start":{position:"below",align:"start"},"below-end":{position:"below",align:"end"},before:{position:"before",align:"center"},"before-top":{position:"before",align:"top"},"before-bottom":{position:"before",align:"bottom"},after:{position:"after",align:"center"},"after-top":{position:"after",align:"top"},"after-bottom":{position:"after",align:"bottom"}};function oG(t){return t==null?{}:typeof t=="string"?qge[t]:t}function Ty(t,e,r){const n=M.useRef(!0),[i]=M.useState(()=>({value:t,callback:e,facade:{get current(){return i.value},set current(s){const o=i.value;if(o!==s){if(i.value=s,r&&n.current)return;i.callback(s,o)}}}}));return $u(()=>{n.current=!1},[]),i.callback=e,i.facade}function Yge(t){let e;return()=>(e||(e=new Promise(r=>{Promise.resolve().then(()=>{e=void 0,r(t())})})),e)}function Kge(t){const{arrow:e,middlewareData:r}=t;if(!r.arrow||!e)return;const{x:n,y:i}=r.arrow;Object.assign(e.style,{left:n!=null?`${n}px`:"",top:i!=null?`${i}px`:""})}function Zge(t){var e,r,n;const{container:i,placement:s,middlewareData:o,strategy:a,lowPPI:u,coordinates:l,useTransform:c=!0}=t;if(!i)return;i.setAttribute(Qme,s),i.removeAttribute(kR),o.intersectionObserver.intersecting&&i.setAttribute(kR,""),i.removeAttribute(DR),!((e=o.hide)===null||e===void 0)&&e.escaped&&i.setAttribute(DR,""),i.removeAttribute(MR),!((r=o.hide)===null||r===void 0)&&r.referenceHidden&&i.setAttribute(MR,"");const f=((n=i.ownerDocument.defaultView)===null||n===void 0?void 0:n.devicePixelRatio)||1,d=Math.round(l.x*f)/f,h=Math.round(l.y*f)/f;if(Object.assign(i.style,{position:a}),c){Object.assign(i.style,{transform:u?`translate(${d}px, ${h}px)`:`translate3d(${d}px, ${h}px, 0)`});return}Object.assign(i.style,{left:`${d}px`,top:`${h}px`})}const Qge=t=>{switch(t){case"always":case!0:return{applyMaxWidth:!0,applyMaxHeight:!0};case"width-always":case"width":return{applyMaxWidth:!0,applyMaxHeight:!1};case"height-always":case"height":return{applyMaxWidth:!1,applyMaxHeight:!0};default:return!1}};function Jge(){return{name:"coverTarget",fn:t=>{const{placement:e,rects:r,x:n,y:i}=t,s=nG(e).side,o={x:n,y:i};switch(s){case"bottom":o.y-=r.reference.height;break;case"top":o.y+=r.reference.height;break;case"left":o.x+=r.reference.width;break;case"right":o.x-=r.reference.width;break}return o}}}function eve(t){const{hasScrollableElement:e,flipBoundary:r,container:n,fallbackPositions:i=[],isRtl:s}=t,o=i.reduce((a,u)=>{const{position:l,align:c}=oG(u),f=sG(c,l,s);return f&&a.push(f),a},[]);return Ige({...e&&{boundary:"clippingAncestors"},...r&&{altBoundary:!0,boundary:A3(n,r)},fallbackStrategy:"bestFit",...o.length&&{fallbackPlacements:o}})}function tve(){return{name:"intersectionObserver",fn:async t=>{const e=t.rects.floating,r=await kge(t,{altBoundary:!0}),n=r.top<e.height&&r.top>0,i=r.bottom<e.height&&r.bottom>0;return{data:{intersecting:n||i}}}}}const rve=t=>({name:"resetMaxSize",fn({middlewareData:e,elements:r}){var n;if(!((n=e.resetMaxSize)===null||n===void 0)&&n.maxSizeAlreadyReset)return{};const{applyMaxWidth:i,applyMaxHeight:s}=t;return i&&(r.floating.style.removeProperty("box-sizing"),r.floating.style.removeProperty("max-width"),r.floating.style.removeProperty("width")),s&&(r.floating.style.removeProperty("box-sizing"),r.floating.style.removeProperty("max-height"),r.floating.style.removeProperty("height")),{data:{maxSizeAlreadyReset:!0},reset:{rects:!0}}}});function nve(t,e){const{container:r,overflowBoundary:n,overflowBoundaryPadding:i,isRtl:s}=e;return Fge({...i&&{padding:iG(i,s)},...n&&{altBoundary:!0,boundary:A3(r,n)},apply({availableHeight:o,availableWidth:a,elements:u,rects:l}){const c=(h,p,m)=>{if(h&&(u.floating.style.setProperty("box-sizing","border-box"),u.floating.style.setProperty(`max-${p}`,`${m}px`),l.floating[p]>m)){u.floating.style.setProperty(p,`${m}px`);const g=p==="width"?"x":"y";u.floating.style.getPropertyValue(`overflow-${g}`)||u.floating.style.setProperty(`overflow-${g}`,"auto")}},{applyMaxWidth:f,applyMaxHeight:d}=t;c(f,"width",a),c(d,"height",o)}})}function ive(t){return!t||typeof t=="number"||typeof t=="object"?t:({rects:{floating:e,reference:r},placement:n})=>{const{position:i,alignment:s}=Xge(n);return t({positionedRect:e,targetRect:r,position:i,alignment:s})}}function sve(t){const e=ive(t);return Dge(e)}function ove(t){const{hasScrollableElement:e,shiftToCoverTarget:r,disableTether:n,overflowBoundary:i,container:s,overflowBoundaryPadding:o,isRtl:a}=t;return Mge({...e&&{boundary:"clippingAncestors"},...r&&{crossAxis:!0,limiter:$R({crossAxis:!0,mainAxis:!1})},...n&&{crossAxis:n==="all",limiter:$R({crossAxis:n!=="all",mainAxis:!1})},...o&&{padding:iG(o,a)},...i&&{altBoundary:!0,boundary:A3(s,i)}})}const jR="--fui-match-target-size";function ave(){return{name:"matchTargetSize",fn:async t=>{const{rects:{reference:e,floating:r},elements:{floating:n},middlewareData:{matchTargetSize:{matchTargetSizeAttempt:i=!1}={}}}=t;if(e.width===r.width||i)return{};const{width:s}=e;return n.style.setProperty(jR,`${s}px`),n.style.width||(n.style.width=`var(${jR})`),{data:{matchTargetSizeAttempt:!0},reset:{rects:!0}}}}}function HR(t){const e=[];let r=t;for(;r;){const n=Jg(r);if(t.ownerDocument.body===n){e.push(n);break}if(n.nodeName==="BODY"&&n!==t.ownerDocument.body)break;e.push(n),r=n}return e}function uve(t,e){return new t.ResizeObserver(e)}function lve(t){let e=!1;const{container:r,target:n,arrow:i,strategy:s,middleware:o,placement:a,useTransform:u=!0,disableUpdateOnResize:l=!1}=t,c=r.ownerDocument.defaultView;if(!n||!r||!c)return{updatePosition:()=>{},dispose:()=>{}};const f=l?null:uve(c,v=>{v.every(b=>b.contentRect.width>0&&b.contentRect.height>0)&&m()});let d=!0;const h=new Set;Object.assign(r.style,{position:"fixed",left:0,top:0,margin:0});const p=()=>{e||(d&&(HR(r).forEach(v=>h.add(v)),ju(n)&&HR(n).forEach(v=>h.add(v)),h.forEach(v=>{v.addEventListener("scroll",m,{passive:!0})}),f==null||f.observe(r),ju(n)&&(f==null||f.observe(n)),d=!1),Object.assign(r.style,{position:s}),Nge(n,r,{placement:a,middleware:o,strategy:s}).then(({x:v,y,middlewareData:b,placement:_})=>{e||(Kge({arrow:i,middlewareData:b}),Zge({container:r,middlewareData:b,placement:_,coordinates:{x:v,y},lowPPI:((c==null?void 0:c.devicePixelRatio)||1)<=1,strategy:s,useTransform:u}),r.dispatchEvent(new CustomEvent(fx)))}).catch(v=>{}))},m=Yge(()=>p()),g=()=>{e=!0,c&&(c.removeEventListener("scroll",m),c.removeEventListener("resize",m)),h.forEach(v=>{v.removeEventListener("scroll",m)}),h.clear(),f==null||f.disconnect()};return c&&(c.addEventListener("scroll",m,{passive:!0}),c.addEventListener("resize",m)),m(),{updatePosition:m,dispose:g}}function cve(t){"use no memo";const e=M.useRef(null),r=M.useRef(null),n=M.useRef(null),i=M.useRef(null),s=M.useRef(null),{enabled:o=!0}=t,a=fve(t),u=M.useCallback(()=>{e.current&&e.current.dispose(),e.current=null;var p;const m=(p=n.current)!==null&&p!==void 0?p:r.current;o&&P6()&&m&&i.current&&(e.current=lve({container:i.current,target:m,arrow:s.current,...a(i.current,s.current)}))},[o,a]),l=sr(p=>{n.current=p,u()});M.useImperativeHandle(t.positioningRef,()=>({updatePosition:()=>{var p;return(p=e.current)===null||p===void 0?void 0:p.updatePosition()},setTarget:p=>{t.target,l(p)}}),[t.target,l]),$u(()=>{var p;l((p=t.target)!==null&&p!==void 0?p:null)},[t.target,l]),$u(()=>{u()},[u]);const c=Ty(null,p=>{r.current!==p&&(r.current=p,u())}),f=sr(()=>{var p;return(p=t.onPositioningEnd)===null||p===void 0?void 0:p.call(t)}),d=Ty(null,p=>{if(i.current!==p){var m;(m=i.current)===null||m===void 0||m.removeEventListener(fx,f),p==null||p.addEventListener(fx,f),i.current=p,u()}}),h=Ty(null,p=>{s.current!==p&&(s.current=p,u())});return{targetRef:c,containerRef:d,arrowRef:h}}function fve(t){"use no memo";const{align:e,arrowPadding:r,autoSize:n,coverTarget:i,flipBoundary:s,offset:o,overflowBoundary:a,pinned:u,position:l,unstable_disableTether:c,positionFixed:f,strategy:d,overflowBoundaryPadding:h,fallbackPositions:p,useTransform:m,matchTargetSize:g,disableUpdateOnResize:v=!1,shiftToCoverTarget:y}=t,{dir:b,targetDocument:_}=go(),x=b==="rtl",S=d??f?"fixed":"absolute",w=Qge(n);return M.useCallback((P,C)=>{const R=zge(P),F=[w&&rve(w),g&&ave(),o&&sve(o),i&&Jge(),!u&&eve({container:P,flipBoundary:s,hasScrollableElement:R,isRtl:x,fallbackPositions:p}),ove({container:P,hasScrollableElement:R,overflowBoundary:a,disableTether:c,overflowBoundaryPadding:h,isRtl:x,shiftToCoverTarget:y}),w&&nve(w,{container:P,overflowBoundary:a,overflowBoundaryPadding:h,isRtl:x}),tve(),C&&Lge({element:C,padding:r}),zR({strategy:"referenceHidden"}),zR({strategy:"escaped"}),!1].filter(Boolean);return{placement:sG(e,l,x),middleware:F,strategy:S,useTransform:m,disableUpdateOnResize:v}},[e,r,w,i,c,s,x,o,a,u,l,S,h,p,m,g,_,v])}function dve(t){return ju(t)?{element:t}:typeof t=="object"?t===null?{element:null}:t:{}}var aG=()=>{try{return _u["".concat("__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE")].A.getOwner()}catch{}try{return _u["".concat("__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED")].ReactCurrentOwner.current}catch{}},hve=()=>!1,VR=new WeakSet;function pve(t,e){const r=aG();M.useEffect(()=>{if(!VR.has(r)){VR.add(r),t();return}return t()},e)}var WR=new WeakSet;function mve(t,e){return M.useMemo(()=>{const r=aG();return WR.has(r)?t():(WR.add(r),null)},e)}function gve(t,e){var r;const n=hve()&&!1,i=n?mve:M.useMemo,s=n?pve:M.useEffect,[o,a]=(r=i(()=>t(),e))!=null?r:[null,()=>null];return s(()=>a,e),o}const vve=hl({root:{qhf8xq:"f1euv43f",Bhzewxz:"f15twtuk",oyh7mz:["f1vgc2s3","f1e31b4d"],j35jbq:["f1e31b4d","f1vgc2s3"],Bj3rh1h:"f494woh"}},{d:[".f1euv43f{position:absolute;}",".f15twtuk{top:0;}",".f1vgc2s3{left:0;}",".f1e31b4d{right:0;}",".f494woh{z-index:1000000;}"]}),XR=_u["useInsertionEffect"],yve=t=>{"use no memo";const{targetDocument:e,dir:r}=go(),n=nme(),i=Bme(),s=vve(),o=eme(),a=hi(o,s.root,t.className),u=n??(e==null?void 0:e.body),l=gve(()=>{if(u===void 0||t.disabled)return[null,()=>null];const c=u.ownerDocument.createElement("div");return u.appendChild(c),[c,()=>c.remove()]},[u]);return XR?XR(()=>{if(!l)return;const c=a.split(" ").filter(Boolean);return l.classList.add(...c),l.setAttribute("dir",r),l.setAttribute("data-portal-node","true"),i.current=l,()=>{l.classList.remove(...c),l.removeAttribute("dir")}},[a,r,l,i]):M.useMemo(()=>{l&&(l.className=a,l.setAttribute("dir",r),l.setAttribute("data-portal-node","true"),i.current=l)},[a,r,l,i]),l},_ve=t=>{const{element:e,className:r}=dve(t.mountNode),n=M.useRef(null),i=yve({disabled:!!e,className:r}),s=e??i,o={children:t.children,mountNode:s,virtualParentRootRef:n};return M.useEffect(()=>{if(!s)return;const a=n.current,u=s.contains(a);if(a&&!u)return CR(s,a),()=>{CR(s,void 0)}},[n,s]),o},bve=t=>M.createElement("span",{hidden:!0,ref:t.virtualParentRootRef},t.mountNode&&Zc.createPortal(t.children,t.mountNode)),uG=t=>{const e=_ve(t);return bve(e)};uG.displayName="Portal";const lG=M.createContext(void 0);lG.Provider;const xve=()=>M.useContext(lG);function cG(t,e){return Sve(xve(),t,e)}function Sve(t,e,r){if(!t)return e;e={...e};const{generatedControlId:n,hintId:i,labelFor:s,labelId:o,required:a,validationMessageId:u,validationState:l}=t;if(n){var c,f;(f=(c=e).id)!==null&&f!==void 0||(c.id=n)}if(o&&(!(r!=null&&r.supportsLabelFor)||s!==e.id)){var d,h,p;(p=(d=e)[h="aria-labelledby"])!==null&&p!==void 0||(d[h]=o)}if((u||i)&&(e["aria-describedby"]=[u,i,e==null?void 0:e["aria-describedby"]].filter(Boolean).join(" ")),l==="error"){var m,g,v;(v=(m=e)[g="aria-invalid"])!==null&&v!==void 0||(m[g]=!0)}if(a)if(r!=null&&r.supportsRequired){var y,b;(b=(y=e).required)!==null&&b!==void 0||(y.required=!0)}else{var _,x,S;(S=(_=e)[x="aria-required"])!==null&&S!==void 0||(_[x]=!0)}if(r!=null&&r.supportsSize){var w,P;(P=(w=e).size)!==null&&P!==void 0||(w.size=t.size)}return e}const fG=z6({activeOption:void 0,appearance:"outline",focusVisible:!1,open:!1,registerOption(){return()=>{}},selectedOptions:[],selectOption(){},setActiveOption(){},setOpen(){},size:"medium"});fG.Provider;const wve={activeOption:void 0,focusVisible:!1,multiselect:!1,getOptionById(){},getOptionsMatchingValue(){return[]},registerOption(){return()=>{}},selectedOptions:[],onOptionClick(){},onActiveDescendantChange(){},selectOption(){},setActiveOption(){}},gl=z6(void 0),sn=t=>Mme(gl,(e=wve)=>t(e));gl.Provider;function Eve(t){const{appearance:e,open:r,getOptionById:n,getOptionsMatchingValue:i,registerOption:s,selectedOptions:o,selectOption:a,setOpen:u,size:l,activeDescendantController:c,onOptionClick:f,onActiveDescendantChange:d}=t,h={activeOption:void 0,appearance:e,focusVisible:!1,open:r,registerOption:s,selectedOptions:o,selectOption:a,setActiveOption:()=>null,setOpen:u,size:l},p={activeOption:void 0,focusVisible:!1,getOptionById:n,getOptionsMatchingValue:i,registerOption:s,selectedOptions:o,selectOption:a,setActiveOption:()=>null,onOptionClick:f,onActiveDescendantChange:d},m=M.useMemo(()=>({controller:c}),[c]);return{combobox:h,activeDescendant:m,listbox:p}}function Cve(t){const e=$6(gl),{getOptionById:r,getOptionsMatchingValue:n,multiselect:i,registerOption:s,selectedOptions:o,selectOption:a,activeDescendantController:u}=t,l=sn(m=>m.registerOption),c=sn(m=>m.onOptionClick),f=sn(m=>m.onActiveDescendantChange),h={activeOption:void 0,focusVisible:!1,getOptionById:r,getOptionsMatchingValue:n,multiselect:i,registerOption:e?l:s,selectedOptions:o,selectOption:a,setActiveOption:()=>{},onOptionClick:c,onActiveDescendantChange:f},p=M.useMemo(()=>({controller:u}),[u]);return{listbox:h,activeDescendant:p}}function P3(t,e={}){const{open:r=!0,multiselect:n=!1}=e,i=t.key,{altKey:s,ctrlKey:o,key:a,metaKey:u}=t;return a.length===1&&i!==th&&!s&&!o&&!u?"Type":r?i===Ey&&s||i===PR||!n&&i===th?"CloseSelect":n&&i===th?"Select":i===Gme?"Close":i===RR?"Next":i===Ey?"Previous":i===Lme?"First":i===Fme?"Last":i===Ume?"PageUp":i===Nme?"PageDown":i===Ime?"Tab":"None":i===RR||i===Ey||i===PR||i===th?"Open":"None"}const dG=()=>{const t=M.useRef(new Map),e=M.useMemo(()=>({getCount:()=>t.current.size,getOptionAtIndex:()=>{},getIndexOfId:()=>-1,getOptionById:l=>t.current.get(l),getOptionsMatchingText:l=>Array.from(t.current.values()).filter(({text:c})=>l(c)),getOptionsMatchingValue:l=>{const c=[];for(const f of t.current.values())l(f.value)&&c.push(f);return c}}),[]),r=M.useCallback(n=>(t.current.set(n.id,n),()=>t.current.delete(n.id)),[]);return{...e,options:Array.from(t.current.values()),registerOption:r}},hG=t=>{const{defaultSelectedOptions:e,multiselect:r,onOptionSelect:n}=t,[i,s]=ux({state:t.selectedOptions,defaultState:e,initialState:[]}),o=M.useCallback((u,l)=>{if(l.disabled)return;let c=[l.value];if(r){const f=i.findIndex(d=>d===l.value);f>-1?c=[...i.slice(0,f),...i.slice(f+1)]:c=[...i,l.value]}s(c),n==null||n(u,{optionValue:l.value,optionText:l.text,selectedOptions:c})},[n,r,i,s]);return{clearSelection:u=>{s([]),n==null||n(u,{optionValue:void 0,optionText:void 0,selectedOptions:[]})},selectOption:o,selectedOptions:i}},Yp={root:"fui-Option",checkIcon:"fui-Option__checkIcon"},Tve=hl({root:{Bt984gj:"f122n59",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",sj55zd:"f19n0e5",i8kkvl:"f1ufnopg",Bceei9c:"f1k6fduh",mc9l5x:"f22iagw",Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bg96gwp:"f1i3iumi",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"fm5eomj",qhf8xq:"f10pi13n",Jwef8y:"f1knas48",Bi91k9c:"feu1g3u",zqbkvg:"fo79ri9",h82x05:["f1osiabc","f1e8le25"],cqj998:"f1yusjty",j3hlsh:["f1e8le25","f1osiabc"],ecr2s2:"fb40n2d",lj723h:"f1g4hkjv",Btxx2vb:"f1lnr2zp",sltcwy:["f1ogfk9z","f1g7j8ec"],dnwvvm:"fiuf46r",Blyvkvs:["f1g7j8ec","f1ogfk9z"]},active:{Bowz1zl:"f11vrvdw",oxogb1:"f17hxjb7",Ix2sn8:"f1dha69c",q7v32p:"f1lm7500",B7cbj04:0,Bewtojm:0,b50fsz:0,B1wzb3v:0,Bqwk70n:0,B37u8z8:0,avt0cx:0,f0sref:0,B9fkznv:0,Be3o27t:0,Bertapg:0,B53xpsf:0,Bsv72rj:0,B39dzdd:0,Btq9bd3:0,Bqfxd14:0,atup0s:"fo7xqb",Fffuxt:0,Bttcd12:0,Beitzug:0,Bqougee:0,B86i8pi:"f1kurthe",Bhijsxg:"fwq15dy",kktds4:"f1pb3wry",Bmau3bo:["ftjv2f4","f1flhb1f"],npektv:["f1flhb1f","ftjv2f4"]},disabled:{sj55zd:"f1s2aq7o",Jwef8y:"f9ql6rf",Bi91k9c:"fvgxktp",zqbkvg:"f185j3qj",h82x05:["f1dligi3","f1vydzie"],cqj998:"fjw1di3",j3hlsh:["f1vydzie","f1dligi3"],ecr2s2:"fgj9um3",lj723h:"f19wldhg",Btxx2vb:"f1ss0kt2",sltcwy:["f1t6oli3","fjy9ci8"],dnwvvm:"fresaxk",Blyvkvs:["fjy9ci8","f1t6oli3"],Bbusuzp:"f1dcs8yz"},selected:{},checkIcon:{Bnnss6s:"fi64zpg",Be2twd7:"fod5ikn",Frg6f3:["f18b9hdq","fn6qj8t"],t21cq0:["f1xk557c","f1h9en5y"],Bcdw1i0:"fd7fpy0",Bo70h7d:"fvc9v3g"},selectedCheck:{Bcdw1i0:"f1022m68"},multiselectCheck:{Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f1l3cf7o",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"fq9zq91",B7ck84d:"f1ewtqcl",mc9l5x:"f22iagw",Bt984gj:"f122n59",Brf1p80:"f4d9j23",Bkfmm31:"f1w9h62z",Be2twd7:"f1ugzwwg",Bqenvij:"fd461yt",a9b677:"fjw5fx7",Bcdw1i0:"f1022m68"},selectedMultiselectCheck:{De3pzq:"ftywsgz",sj55zd:"fqpbvvt",g2u3we:"f3xi7mh",h3c5rm:["ftovhe4","f1wczvin"],B9xav0g:"f68vbr6",zhjwy3:["f1wczvin","ftovhe4"]},checkDisabled:{sj55zd:"f1s2aq7o",Bbusuzp:"f1dcs8yz"},multiselectCheckDisabled:{g2u3we:"f1r1t4y1",h3c5rm:["fmj8ijw","figx54m"],B9xav0g:"f360ss8",zhjwy3:["figx54m","fmj8ijw"]}},{d:[".f122n59{align-items:center;}",[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f19n0e5{color:var(--colorNeutralForeground1);}",".f1ufnopg{column-gap:var(--spacingHorizontalXS);}",".f1k6fduh{cursor:pointer;}",".f22iagw{display:flex;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".fkhj508{font-size:var(--fontSizeBase300);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".fm5eomj{padding:var(--spacingVerticalSNudge) var(--spacingHorizontalS);}",{p:-1}],".f10pi13n{position:relative;}",'.f11vrvdw[data-activedescendant-focusvisible]::after{content:"";}',".f17hxjb7[data-activedescendant-focusvisible]::after{position:absolute;}",".f1dha69c[data-activedescendant-focusvisible]::after{pointer-events:none;}",".f1lm7500[data-activedescendant-focusvisible]::after{z-index:1;}",[".fo7xqb[data-activedescendant-focusvisible]::after{border:2px solid var(--colorStrokeFocus2);}",{p:-2}],[".f1kurthe[data-activedescendant-focusvisible]::after{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fwq15dy[data-activedescendant-focusvisible]::after{top:-2px;}",".f1pb3wry[data-activedescendant-focusvisible]::after{bottom:-2px;}",".ftjv2f4[data-activedescendant-focusvisible]::after{left:-2px;}",".f1flhb1f[data-activedescendant-focusvisible]::after{right:-2px;}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}",".fi64zpg{flex-shrink:0;}",".fod5ikn{font-size:var(--fontSizeBase400);}",".f18b9hdq{margin-left:calc(var(--spacingHorizontalXXS) * -1);}",".fn6qj8t{margin-right:calc(var(--spacingHorizontalXXS) * -1);}",".f1xk557c{margin-right:var(--spacingHorizontalXXS);}",".f1h9en5y{margin-left:var(--spacingHorizontalXXS);}",".fd7fpy0{visibility:hidden;}",".fvc9v3g svg{display:block;}",".f1022m68{visibility:visible;}",[".f1l3cf7o{border:var(--strokeWidthThin) solid var(--colorNeutralStrokeAccessible);}",{p:-2}],[".fq9zq91{border-radius:var(--borderRadiusSmall);}",{p:-1}],".f1ewtqcl{box-sizing:border-box;}",".f4d9j23{justify-content:center;}",".f1w9h62z{fill:currentColor;}",".f1ugzwwg{font-size:12px;}",".fd461yt{height:16px;}",".fjw5fx7{width:16px;}",".ftywsgz{background-color:var(--colorCompoundBrandBackground);}",".fqpbvvt{color:var(--colorNeutralForegroundInverted);}",".f3xi7mh{border-top-color:var(--colorCompoundBrandBackground);}",".ftovhe4{border-right-color:var(--colorCompoundBrandBackground);}",".f1wczvin{border-left-color:var(--colorCompoundBrandBackground);}",".f68vbr6{border-bottom-color:var(--colorCompoundBrandBackground);}",".f1r1t4y1{border-top-color:var(--colorNeutralForegroundDisabled);}",".fmj8ijw{border-right-color:var(--colorNeutralForegroundDisabled);}",".figx54m{border-left-color:var(--colorNeutralForegroundDisabled);}",".f360ss8{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],h:[".f1knas48:hover{background-color:var(--colorNeutralBackground1Hover);}",".feu1g3u:hover{color:var(--colorNeutralForeground1Hover);}",".fo79ri9:hover .fui-Option__checkIcon{border-top-color:var(--colorNeutralForeground1Hover);}",".f1osiabc:hover .fui-Option__checkIcon{border-right-color:var(--colorNeutralForeground1Hover);}",".f1e8le25:hover .fui-Option__checkIcon{border-left-color:var(--colorNeutralForeground1Hover);}",".f1yusjty:hover .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForeground1Hover);}",".f9ql6rf:hover{background-color:var(--colorTransparentBackground);}",".fvgxktp:hover{color:var(--colorNeutralForegroundDisabled);}",".f185j3qj:hover .fui-Option__checkIcon{border-top-color:var(--colorNeutralForegroundDisabled);}",".f1dligi3:hover .fui-Option__checkIcon{border-right-color:var(--colorNeutralForegroundDisabled);}",".f1vydzie:hover .fui-Option__checkIcon{border-left-color:var(--colorNeutralForegroundDisabled);}",".fjw1di3:hover .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],a:[".fb40n2d:active{background-color:var(--colorNeutralBackground1Pressed);}",".f1g4hkjv:active{color:var(--colorNeutralForeground1Pressed);}",".f1lnr2zp:active .fui-Option__checkIcon{border-top-color:var(--colorNeutralForeground1Hover);}",".f1ogfk9z:active .fui-Option__checkIcon{border-right-color:var(--colorNeutralForeground1Hover);}",".f1g7j8ec:active .fui-Option__checkIcon{border-left-color:var(--colorNeutralForeground1Hover);}",".fiuf46r:active .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForeground1Hover);}",".fgj9um3:active{background-color:var(--colorTransparentBackground);}",".f19wldhg:active{color:var(--colorNeutralForegroundDisabled);}",".f1ss0kt2:active .fui-Option__checkIcon{border-top-color:var(--colorNeutralForegroundDisabled);}",".f1t6oli3:active .fui-Option__checkIcon{border-right-color:var(--colorNeutralForegroundDisabled);}",".fjy9ci8:active .fui-Option__checkIcon{border-left-color:var(--colorNeutralForegroundDisabled);}",".fresaxk:active .fui-Option__checkIcon{border-bottom-color:var(--colorNeutralForegroundDisabled);}"],m:[["@media (forced-colors: active){.f1dcs8yz{color:GrayText;}}",{m:"(forced-colors: active)"}]]}),Ave=t=>{"use no memo";const{disabled:e,multiselect:r,selected:n}=t,i=Tve();return t.root.className=hi(Yp.root,i.root,i.active,e&&i.disabled,n&&i.selected,t.root.className),t.checkIcon&&(t.checkIcon.className=hi(Yp.checkIcon,i.checkIcon,r&&i.multiselectCheck,n&&i.selectedCheck,n&&r&&i.selectedMultiselectCheck,e&&i.checkDisabled,e&&r&&i.multiselectCheckDisabled,t.checkIcon.className)),t},qR={activeOption:void 0,focusVisible:!1,setActiveOption:()=>null},Pve=(t,e)=>{"use no memo";const{multiselect:r,disableAutoFocus:n=!1}=t,i=dG(),{listboxRef:s,activeParentRef:o,controller:a}=X6({matchOption:j=>j.classList.contains(Yp.root)}),u=$6(gl),l=sn(j=>j.onActiveDescendantChange),c=sn(j=>j.getOptionById),f=sn(j=>j.getOptionsMatchingValue),d=u?c:i.getOptionById,h=u?f:i.getOptionsMatchingValue,p=M.useMemo(()=>{let j=null;const re=U=>{const z=U;l==null||l(z)};return U=>{if(!U){j==null||j.removeEventListener("activedescendantchange",re);return}j=U,j.addEventListener("activedescendantchange",re)}},[l]),[m,g]=M.useState(!1);G6(g);const v=H6(),y=$me(),b=y?v.controller:a,{clearSelection:_,selectedOptions:x,selectOption:S}=hG(t),w=j=>{const re=P3(j,{open:!0}),U=b.active(),z=U?d(U):null;switch(re){case"First":case"Last":case"Next":case"Previous":case"PageDown":case"PageUp":case"CloseSelect":case"Select":j.preventDefault();break}switch(re){case"Next":z?b.next():b.first();break;case"Previous":z?b.prev():b.first();break;case"PageUp":case"First":b.first();break;case"PageDown":case"Last":b.last();break;case"Select":case"CloseSelect":z&&S(j,z);break}},P=sn(j=>j.selectedOptions),C=sn(j=>j.selectOption),R=u?{selectedOptions:P,selectOption:C,...qR}:{selectedOptions:x,selectOption:S,...qR};M.useEffect(()=>{if(!y){if(b.hideFocusVisibleAttributes(),!n)if(!r&&R.selectedOptions.length>0){const j=h(re=>re===R.selectedOptions[0]).pop();j!=null&&j.id&&b.focus(j.id)}else b.first();return()=>{b.blur()}}},[]);const F=M.useCallback(()=>{y||(b.showFocusVisibleAttributes(),m&&b.scrollActiveIntoView())},[b,y,m]),N=M.useCallback(()=>{y||b.hideFocusVisibleAttributes()},[b,y]),G={components:{root:"div"},root:id(w6("div",{ref:Xs(e,o,s,p),role:r?"menu":"listbox",tabIndex:0,...t}),{elementType:"div"}),standalone:!u,multiselect:r,clearSelection:_,activeDescendantController:b,onActiveDescendantChange:l,...i,...R};return G.root.onKeyDown=sr(qn(G.root.onKeyDown,w)),G.root.onFocus=sr(qn(G.root.onFocus,F)),G.root.onBlur=sr(qn(G.root.onBlur,N)),G},Rve=(t,e)=>Cn(j6,{value:e.activeDescendant,children:Cn(gl.Provider,{value:e.listbox,children:Cn(t.root,{})})}),Ove={root:"fui-Listbox"},Bve=hl({root:{De3pzq:"fxugw4r",B7ck84d:"f1ewtqcl",mc9l5x:"f22iagw",Beiy3e4:"f1vx9l62",Bf4jedk:"f3hsy1e",Bmxbyg5:"f5zp4f",Bw0xxkn:0,oeaueh:0,Bpd4iqm:0,Befb4lg:"f1iepc6i",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:"f1t35pdg",Belr9w4:"fiut8dr"}},{d:[".fxugw4r{background-color:var(--colorNeutralBackground1);}",".f1ewtqcl{box-sizing:border-box;}",".f22iagw{display:flex;}",".f1vx9l62{flex-direction:column;}",".f3hsy1e{min-width:160px;}",".f5zp4f{overflow-y:auto;}",[".f1iepc6i{outline:1px solid var(--colorTransparentStroke);}",{p:-1}],[".f1t35pdg{padding:var(--spacingHorizontalXS);}",{p:-1}],".fiut8dr{row-gap:var(--spacingHorizontalXXS);}"]}),kve=t=>{"use no memo";const e=Bve();return t.root.className=hi(Ove.root,e.root,t.root.className),t},R3=M.forwardRef((t,e)=>{const r=Pve(t,e),n=Cve(r);return kve(r),y3("useListboxStyles_unstable")(r),Rve(r,n)});R3.displayName="Listbox";function Dve(t,e){if(t!==void 0)return t;let r="",n=!1;return M.Children.forEach(e,i=>{typeof i=="string"?r+=i:n=!0}),n&&console.warn("Provide a `text` prop to Option components when they contain non-string children."),r}const Mve=(t,e)=>{const{children:r,disabled:n,text:i,value:s}=t,o=M.useRef(null),a=Dve(i,r),u=s??a,l=O6("fluent-option",t.id),c=M.useMemo(()=>({id:l,disabled:n,text:a,value:u}),[l,n,a,u]),{controller:f}=H6(),d=sn(_=>_.multiselect),h=sn(_=>_.registerOption),p=sn(_=>{const x=_.selectedOptions;return u!==void 0&&x.find(S=>S===u)!==void 0}),m=sn(_=>_.selectOption),g=sn(_=>_.onOptionClick);let v=M.createElement(qme,null);d&&(v=p?M.createElement(Zme,null):"");const y=_=>{var x;if(n){_.preventDefault();return}f.focus(l),m(_,c),g(_),(x=t.onClick)===null||x===void 0||x.call(t,_)};M.useEffect(()=>{if(l&&o.current)return h(c,o.current)},[l,c,h]);const b=d?{role:"menuitemcheckbox","aria-checked":p}:{role:"option","aria-selected":p};return{components:{root:"div",checkIcon:"span"},root:id(w6("div",{ref:Xs(e,o),"aria-disabled":n?"true":void 0,id:l,...b,...t,onClick:y}),{elementType:"div"}),checkIcon:Vp(t.checkIcon,{renderByDefault:!0,defaultProps:{"aria-hidden":"true",children:v},elementType:"span"}),disabled:n,multiselect:d,selected:p,focusVisible:!1,active:!1}},Ive=t=>lx(t.root,{children:[t.checkIcon&&Cn(t.checkIcon,{}),t.root.children]}),Fve=M.forwardRef((t,e)=>{const r=Mve(t,e);return Ave(r),y3("useOptionStyles_unstable")(r),Ive(r)});Fve.displayName="Option";const Lve=t=>{"use no memo";const{appearance:e="outline",disableAutoFocus:r,children:n,clearable:i=!1,editable:s=!1,inlinePopup:o=!1,mountNode:a=void 0,multiselect:u,onOpenChange:l,size:c="medium",activeDescendantController:f,freeform:d=!1,disabled:h=!1,onActiveOptionChange:p=null}=t,m=dG(),{getOptionsMatchingValue:g}=m,{getOptionById:v}=m,y=M.useCallback(()=>{const q=f.active();return q?v(q):void 0},[f,v]),b=y(),_=M.useCallback(q=>{let ie;if(typeof q=="function"){const ge=y();ie=q(ge)}ie?f.focus(ie.id):f.blur()},[f,y]),[x,S]=M.useState(!1),[w,P]=M.useState(!1),C=M.useRef(!1),R=cme(),[F,N]=ux({state:t.value,initialState:void 0}),{selectedOptions:G,selectOption:j,clearSelection:re}=hG(t),U=M.useCallback((q,ie)=>{Zc.unstable_batchedUpdates(()=>{N(void 0),j(q,ie)})},[N,j]),z=M.useMemo(()=>{if(F!==void 0)return F;if(R&&t.defaultValue!==void 0)return t.defaultValue;const q=g(ie=>G.includes(ie)).map(ie=>ie.text);return u?s?"":q.join(", "):q[0]},[F,s,g,u,G]),[pe,ae]=ux({state:t.open,defaultState:t.defaultOpen,initialState:!1}),we=M.useCallback((q,ie)=>{h||(l==null||l(q,{open:ie}),Zc.unstable_batchedUpdates(()=>{!ie&&!d&&N(void 0),ae(ie)}))},[l,ae,N,d,h]);M.useEffect(()=>{if(pe){if(!u&&G.length>0){const q=g(ie=>ie===G[0]).pop();q!=null&&q.id&&f.focus(q.id)}}else f.blur()},[pe,f]),M.useEffect(()=>{pe&&!r&&!f.active()&&f.first()},[pe,n,r,f,v]);const V=sr(q=>{const ie=q.detail.previousId?m.getOptionById(q.detail.previousId):null,ge=m.getOptionById(q.detail.id);p==null||p(q,{event:q,type:"change",previousOption:ie,nextOption:ge})});return{...m,freeform:d,disabled:h,selectOption:U,clearSelection:re,selectedOptions:G,activeOption:b,appearance:e,clearable:i,focusVisible:x,ignoreNextBlur:C,inlinePopup:o,mountNode:a,open:pe,hasFocus:w,setActiveOption:_,setFocusVisible:S,setHasFocus:P,setOpen:we,setValue:N,size:c,value:z,multiselect:u,onOptionClick:sr(q=>{u||we(q,!1)}),onActiveDescendantChange:V}};function Nve(t){const{positioning:e}=t,n={position:"below",align:"start",offset:{crossAxis:0,mainAxis:2},fallbackPositions:["above","after","after-top","before","before-top"],matchTargetSize:"width",autoSize:!0,...oG(e)},{targetRef:i,containerRef:s}=cve(n);return[s,i]}function Uve(t,e,r){const{state:{multiselect:n},triggerRef:i,defaultProps:s}=r,o=O6("fluent-listbox",Epe(t)?t.id:void 0),a=Vp(t,{renderByDefault:!0,elementType:R3,defaultProps:{id:o,multiselect:n,tabIndex:void 0,...s}}),u=cG({id:o},{supportsLabelFor:!0});a&&!a["aria-label"]&&!a["aria-labelledby"]&&u["aria-labelledby"]&&(a["aria-labelledby"]=u["aria-labelledby"]);const l=sr(qn(d=>{d.preventDefault()},a==null?void 0:a.onMouseDown)),c=sr(qn(d=>{var h;d.preventDefault(),(h=i.current)===null||h===void 0||h.focus()},a==null?void 0:a.onClick)),f=Xs(a==null?void 0:a.ref,e);return a&&(a.ref=f,a.onMouseDown=l,a.onClick=c),a}function Gve(t,e,r){const{state:{open:n,setOpen:i,setHasFocus:s},defaultProps:o,elementType:a,activeDescendantController:u}=r,l=id(t,{defaultProps:{type:"text","aria-expanded":n,role:"combobox",...typeof o=="object"&&o},elementType:a}),c=M.useRef(null);return l.ref=Xs(c,l.ref,e),l.onBlur=qn(f=>{i(f,!1),s(!1)},l.onBlur),l.onFocus=qn(f=>{f.target===f.currentTarget&&s(!0)},l.onFocus),l.onClick=qn(f=>{i(f,!n)},l.onClick),l.onKeyDown=qn(zve({activeDescendantController:u,...r.state}),l.onKeyDown),l}function zve(t){const{activeDescendantController:e,getOptionById:r,setOpen:n,selectOption:i,multiselect:s,open:o}=t,a=M.useCallback(()=>{const m=e.active();return m?r(m):void 0},[e,r]),u=()=>{e.first()},l=()=>{e.last()},c=m=>{m?e.next():e.first()},f=m=>{m?e.prev():e.first()},d=()=>{for(let m=0;m<10;m++)e.prev()},h=()=>{for(let m=0;m<10;m++)e.next()},p=kme();return sr(m=>{const g=P3(m,{open:o,multiselect:s}),v=a();switch(g){case"First":case"Last":case"Next":case"Previous":case"PageDown":case"PageUp":case"Open":case"Close":case"CloseSelect":case"Select":m.preventDefault();break}switch(p(!0),g){case"First":u();break;case"Last":l();break;case"Next":c(v);break;case"Previous":f(v);break;case"PageDown":h();break;case"PageUp":d();break;case"Open":n(m,!0);break;case"Close":m.stopPropagation(),n(m,!1);break;case"CloseSelect":!s&&!(v!=null&&v.disabled)&&n(m,!1);case"Select":v&&i(m,v);break;case"Tab":!s&&v&&i(m,v);break}})}function $ve(t,e,r){"use no memo";const{state:{open:n,setOpen:i,getOptionById:s},defaultProps:o,activeDescendantController:a}=r,u=M.useRef(""),[l,c]=vme(),f=(m,g={startFromNext:!1})=>{const{startFromNext:v}=g,y=a.active(),b=a.find(_=>{const x=s(_);return!!x&&m(x.text)},{startFrom:v?a.next({passive:!0}):y});return b||a.find(_=>{const x=s(_);return!!x&&m(x.text)})},d=()=>{f(m=>m.toLocaleLowerCase().indexOf(u.current)===0,{startFromNext:u.current.length===1})||jve(u.current)&&f(m=>m.toLocaleLowerCase().indexOf(u.current[0])===0,{startFromNext:!0})||a.blur()},h=m=>{c(),P3(m)==="Type"&&(u.current+=m.key.toLowerCase(),l(()=>{u.current=""},500),n&&d(),!n&&i(m,!0))},p=Gve(t,e,{state:r.state,defaultProps:o,elementType:"button",activeDescendantController:a});return p.onKeyDown=qn(h,p.onKeyDown),p}function jve(t){for(let e=1;e<t.length;e++)if(t[e]!==t[e-1])return!1;return!0}const Hve=(t,e)=>{"use no memo";var r;t=cG(t,{supportsLabelFor:!0,supportsSize:!0});const{listboxRef:n,activeParentRef:i,controller:s}=X6({matchOption:N=>N.classList.contains(Yp.root)}),o=Lve({...t,activeDescendantController:s,freeform:!1}),{clearable:a,clearSelection:u,disabled:l,hasFocus:c,multiselect:f,open:d,selectedOptions:h,setOpen:p}=o,{primary:m,root:g}=Zpe({props:t,primarySlotTagName:"button",excludedPropNames:["children"]}),[v,y]=Nve(t),b=M.useRef(null),_=Uve(t.listbox,Xs(v,n),{state:o,triggerRef:b,defaultProps:{children:t.children}}),{targetDocument:x}=go();dme({element:x,callback:N=>p(N,!1),refs:[b,v,y],disabled:!d});var S;const w=$ve((S=t.button)!==null&&S!==void 0?S:{},Xs(b,i,e),{state:o,defaultProps:{type:"button",tabIndex:m.disabled?void 0:0,children:o.value||t.placeholder,"aria-controls":d?_==null?void 0:_.id:void 0,...m},activeDescendantController:s}),P=id(t.root,{defaultProps:{"aria-owns":!t.inlinePopup&&d?_==null?void 0:_.id:void 0,children:t.children,...g},elementType:"div"});P.ref=Xs(P.ref,y);const C=h.length>0&&!l&&a&&!f,R={components:{root:"div",button:"button",clearButton:"button",expandIcon:"span",listbox:R3},root:P,button:w,listbox:d||c?_:void 0,clearButton:Vp(t.clearButton,{defaultProps:{"aria-label":"Clear selection",children:M.createElement(Kme,null),tabIndex:C?0:void 0,type:"button"},elementType:"button",renderByDefault:!0}),expandIcon:Vp(t.expandIcon,{renderByDefault:!0,defaultProps:{children:M.createElement(Yme,null)},elementType:"span"}),placeholderVisible:!o.value&&!!t.placeholder,showClearButton:C,activeDescendantController:s,...o},F=sr(qn((r=R.clearButton)===null||r===void 0?void 0:r.onClick,N=>{var G;u(N),(G=b.current)===null||G===void 0||G.focus()}));return R.clearButton&&(R.clearButton.onClick=F),f&&(R.clearButton=void 0),R},Vve=(t,e)=>Cn(t.root,{children:Cn(j6,{value:e.activeDescendant,children:Cn(gl.Provider,{value:e.listbox,children:lx(fG.Provider,{value:e.combobox,children:[lx(t.button,{children:[t.button.children,t.expandIcon&&Cn(t.expandIcon,{})]}),t.clearButton&&Cn(t.clearButton,{}),t.listbox&&(t.inlinePopup?Cn(t.listbox,{}):Cn(uG,{mountNode:t.mountNode,children:Cn(t.listbox,{})}))]})})})}),Kl={root:"fui-Dropdown",button:"fui-Dropdown__button",clearButton:"fui-Dropdown__clearButton",expandIcon:"fui-Dropdown__expandIcon",listbox:"fui-Dropdown__listbox"},Wve=hl({root:{Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",B7ck84d:"f1ewtqcl",mc9l5x:"ftuwxu6",Bf4jedk:"f1exfvgq",qhf8xq:"f10pi13n",ha4doy:"fmrv4ls",Bbr2w1p:"f14a1fxs",Bduesf4:"f3e99gv",Bpq79vn:"fhljsf7",li1rpt:"f1gw3sf2",Bsft5z2:"f13zj6fq",E3zdtr:"f1mdlcz9",Eqx8gd:["f1a7op3","f1cjjd47"],By385i5:"f1gboi2j",B1piin3:["f1cjjd47","f1a7op3"],Dlnsje:"ffyw7fx",d9w3h3:["f1kp91vd","f1ibwz09"],B3778ie:["f1ibwz09","f1kp91vd"],B1q35kw:0,Bw17bha:0,Bcgy8vk:0,Bjuhk93:"f1mnjydx",Gjdm7m:"f13evtba",b1kco5:"f1yk9hq",Ba2ppi3:"fhwpy7i",F2fol1:"f14ee0xe",lck23g:"f1xhbsuh",df92cz:"fv8e3ye",I188md:"ftb5wc6",umuwi5:"fjw5xc1",Blcqepd:"f1xdyd5c",nplu4u:"fatpbeo",Bioka5o:"fb7uyps",H713fs:"f1cmft4k",B9ooomg:"f1x58t8o",Bercvud:"f1ibeo51",Bz04dq9:"f132nw8t",Budl3uf:"f1htdosj"},listbox:{B7ck84d:"f1ewtqcl",E5pizo:"f1hg901r",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"ft85np5",Bxyxcbc:"fmmk62d"},listboxCollapsed:{mc9l5x:"fjseox"},inlineListbox:{Bj3rh1h:"f19g0ac"},button:{Bt984gj:"f122n59",De3pzq:"f1c21dwh",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"f3bhgqh",B7ck84d:"f1ewtqcl",sj55zd:"f19n0e5",i8kkvl:"f14mj54c",Bceei9c:"f1k6fduh",mc9l5x:"f13qh94s",Bahqtrf:"fk6fouc",Budl1dq:"f12nh0o2",Brf1p80:"f1869bpl",fsow6f:["f1o700av","fes3tcz"],a9b677:"fly5x3f",Brovlpu:"ftqa4ok"},placeholder:{sj55zd:"fxc4j92"},small:{Bahqtrf:"fk6fouc",Be2twd7:"fy9rknc",Bhrd7zp:"figsok6",Bg96gwp:"fwrc4pm",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["fye6m5k","f3cq2dl"]},medium:{Bahqtrf:"fk6fouc",Be2twd7:"fkhj508",Bhrd7zp:"figsok6",Bg96gwp:"f1i3iumi",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["f14ev680","f58uxzw"]},large:{i8kkvl:"f1rjii52",Bahqtrf:"fk6fouc",Be2twd7:"fod5ikn",Bhrd7zp:"figsok6",Bg96gwp:"faaz57k",Byoj8tv:0,uwmqm3:0,z189sj:0,z8tnut:0,B0ocmuz:["f139mn7i","f1v3q0m"]},outline:{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:"f1c1zstj",oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fhz96rm"},outlineInteractive:{Bgoe8wy:"fvcxoqz",Bwzppfd:["f1ub3y4t","f1m52nbi"],oetu4i:"f1l4zc64",gg5e9n:["f1m52nbi","f1ub3y4t"],B6oc9vd:"fvs00aa",ak43y8:["f1assf6x","f4ruux4"],wmxk5l:"f1z0osm6",B50zh58:["f4ruux4","f1assf6x"],Bvq3b66:"f1b473iu",Brahy3i:["f381qr8","ft4skwv"],zoxjo1:"f1qzcrsd",an54nd:["ft4skwv","f381qr8"]},underline:{De3pzq:"f1c21dwh",B9xav0g:0,oivjwe:0,Bn0qgzm:0,Bgfg5da:"f9ez7ne",Beyfa6y:0,Bbmb7ep:0,Btl43ni:0,B7oj6ja:0,Dimara:"fokr779"},"filled-lighter":{De3pzq:"fxugw4r",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fs2rfia"},"filled-darker":{De3pzq:"f16xq7d1",Bgfg5da:0,B9xav0g:0,oivjwe:0,Bn0qgzm:0,B4g9neb:0,zhjwy3:0,wvpqe5:0,ibv6hh:0,u1mtju:0,h3c5rm:0,vrafjx:0,Bekrc4i:0,i8vvqc:0,g2u3we:0,icvyot:0,B4j52fo:0,irswps:"fs2rfia"},invalid:{tvckwq:"fs4k3qj",gk2u95:["fcee079","fmyw78r"],hhx65j:"f1fgmyf4",Bxowmz0:["fmyw78r","fcee079"]},invalidUnderline:{hhx65j:"f1fgmyf4"},disabled:{Bceei9c:"fdrzuqr",De3pzq:"f1c21dwh",g2u3we:"f1jj8ep1",h3c5rm:["f15xbau","fy0fskl"],B9xav0g:"f4ikngz",zhjwy3:["fy0fskl","f15xbau"],Bjwas2f:"fg455y9",Bn1d65q:["f1rvyvqg","f14g86mu"],Bxeuatn:"f1cwzwz",n51gp8:["f14g86mu","f1rvyvqg"]},disabledText:{sj55zd:"f1s2aq7o",Bceei9c:"fdrzuqr"},hidden:{mc9l5x:"fjseox"}},{d:[[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".f1ewtqcl{box-sizing:border-box;}",".ftuwxu6{display:inline-flex;}",".f1exfvgq{min-width:250px;}",".f10pi13n{position:relative;}",".fmrv4ls{vertical-align:middle;}",".f1gw3sf2::after{box-sizing:border-box;}",'.f13zj6fq::after{content:"";}',".f1mdlcz9::after{position:absolute;}",".f1a7op3::after{left:-1px;}",".f1cjjd47::after{right:-1px;}",".f1gboi2j::after{bottom:-1px;}",".ffyw7fx::after{height:max(var(--strokeWidthThick), var(--borderRadiusMedium));}",".f1kp91vd::after{border-bottom-left-radius:var(--borderRadiusMedium);}",".f1ibwz09::after{border-bottom-right-radius:var(--borderRadiusMedium);}",[".f1mnjydx::after{border-bottom:var(--strokeWidthThick) solid var(--colorCompoundBrandStroke);}",{p:-1}],".f13evtba::after{clip-path:inset(calc(100% - 2px) 0 0 0);}",".f1yk9hq::after{transform:scaleX(0);}",".fhwpy7i::after{transition-property:transform;}",".f14ee0xe::after{transition-duration:var(--durationUltraFast);}",".f1xhbsuh::after{transition-delay:var(--curveAccelerateMid);}",".f1hg901r{box-shadow:var(--shadow16);}",[".ft85np5{border-radius:var(--borderRadiusMedium);}",{p:-1}],".fmmk62d{max-height:80vh;}",".fjseox{display:none;}",".f19g0ac{z-index:1;}",".f122n59{align-items:center;}",".f1c21dwh{background-color:var(--colorTransparentBackground);}",[".f3bhgqh{border:none;}",{p:-2}],".f19n0e5{color:var(--colorNeutralForeground1);}",".f14mj54c{column-gap:var(--spacingHorizontalXXS);}",".f1k6fduh{cursor:pointer;}",".f13qh94s{display:grid;}",".fk6fouc{font-family:var(--fontFamilyBase);}",".f12nh0o2{grid-template-columns:[content] 1fr [icon] auto [end];}",".f1869bpl{justify-content:space-between;}",".f1o700av{text-align:left;}",".fes3tcz{text-align:right;}",".fly5x3f{width:100%;}",".fxc4j92{color:var(--colorNeutralForeground4);}",".fy9rknc{font-size:var(--fontSizeBase200);}",".figsok6{font-weight:var(--fontWeightRegular);}",".fwrc4pm{line-height:var(--lineHeightBase200);}",[".fye6m5k{padding:3px var(--spacingHorizontalSNudge) 3px calc(var(--spacingHorizontalSNudge) + var(--spacingHorizontalXXS));}",{p:-1}],[".f3cq2dl{padding:3px calc(var(--spacingHorizontalSNudge) + var(--spacingHorizontalXXS)) 3px var(--spacingHorizontalSNudge);}",{p:-1}],".fkhj508{font-size:var(--fontSizeBase300);}",".f1i3iumi{line-height:var(--lineHeightBase300);}",[".f14ev680{padding:5px var(--spacingHorizontalMNudge) 5px calc(var(--spacingHorizontalMNudge) + var(--spacingHorizontalXXS));}",{p:-1}],[".f58uxzw{padding:5px calc(var(--spacingHorizontalMNudge) + var(--spacingHorizontalXXS)) 5px var(--spacingHorizontalMNudge);}",{p:-1}],".f1rjii52{column-gap:var(--spacingHorizontalSNudge);}",".fod5ikn{font-size:var(--fontSizeBase400);}",".faaz57k{line-height:var(--lineHeightBase400);}",[".f139mn7i{padding:7px var(--spacingHorizontalM) 7px calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge));}",{p:-1}],[".f1v3q0m{padding:7px calc(var(--spacingHorizontalM) + var(--spacingHorizontalSNudge)) 7px var(--spacingHorizontalM);}",{p:-1}],".fxugw4r{background-color:var(--colorNeutralBackground1);}",[".fhz96rm{border:var(--strokeWidthThin) solid var(--colorNeutralStroke1);}",{p:-2}],".f1c1zstj{border-bottom-color:var(--colorNeutralStrokeAccessible);}",[".f9ez7ne{border-bottom:var(--strokeWidthThin) solid var(--colorNeutralStrokeAccessible);}",{p:-1}],[".fokr779{border-radius:0;}",{p:-1}],[".fs2rfia{border:var(--strokeWidthThin) solid transparent;}",{p:-2}],".f16xq7d1{background-color:var(--colorNeutralBackground3);}",[".fs2rfia{border:var(--strokeWidthThin) solid transparent;}",{p:-2}],".fs4k3qj:not(:focus-within),.fs4k3qj:hover:not(:focus-within){border-top-color:var(--colorPaletteRedBorder2);}",".fcee079:not(:focus-within),.fcee079:hover:not(:focus-within){border-right-color:var(--colorPaletteRedBorder2);}",".fmyw78r:not(:focus-within),.fmyw78r:hover:not(:focus-within){border-left-color:var(--colorPaletteRedBorder2);}",".f1fgmyf4:not(:focus-within),.f1fgmyf4:hover:not(:focus-within){border-bottom-color:var(--colorPaletteRedBorder2);}",".fdrzuqr{cursor:not-allowed;}",".f1jj8ep1{border-top-color:var(--colorNeutralStrokeDisabled);}",".f15xbau{border-right-color:var(--colorNeutralStrokeDisabled);}",".fy0fskl{border-left-color:var(--colorNeutralStrokeDisabled);}",".f4ikngz{border-bottom-color:var(--colorNeutralStrokeDisabled);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}"],w:[".f14a1fxs:focus-within{outline-width:2px;}",".f3e99gv:focus-within{outline-style:solid;}",".fhljsf7:focus-within{outline-color:transparent;}",".fjw5xc1:focus-within::after{transform:scaleX(1);}",".f1xdyd5c:focus-within::after{transition-property:transform;}",".fatpbeo:focus-within::after{transition-duration:var(--durationNormal);}",".fb7uyps:focus-within::after{transition-delay:var(--curveDecelerateMid);}",".f1ibeo51:focus-within:active::after{border-bottom-color:var(--colorCompoundBrandStrokePressed);}",".f1b473iu:focus-within{border-top-color:var(--colorNeutralStroke1Pressed);}",".f381qr8:focus-within{border-right-color:var(--colorNeutralStroke1Pressed);}",".ft4skwv:focus-within{border-left-color:var(--colorNeutralStroke1Pressed);}",".f1qzcrsd:focus-within{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"],m:[["@media screen and (prefers-reduced-motion: reduce){.fv8e3ye::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.ftb5wc6::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1cmft4k:focus-within::after{transition-duration:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media screen and (prefers-reduced-motion: reduce){.f1x58t8o:focus-within::after{transition-delay:0.01ms;}}",{m:"screen and (prefers-reduced-motion: reduce)"}],["@media (forced-colors: active){.fg455y9{border-top-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f14g86mu{border-left-color:GrayText;}.f1rvyvqg{border-right-color:GrayText;}}",{m:"(forced-colors: active)"}],["@media (forced-colors: active){.f1cwzwz{border-bottom-color:GrayText;}}",{m:"(forced-colors: active)"}]],t:["@supports selector(:has(*)){.f132nw8t:has(.fui-Dropdown__clearButton:focus)::after{border-bottom-color:initial;}}","@supports selector(:has(*)){.f1htdosj:has(.fui-Dropdown__clearButton:focus)::after{transform:scaleX(0);}}"],f:[".ftqa4ok:focus{outline-style:none;}"],h:[".fvcxoqz:hover{border-top-color:var(--colorNeutralStroke1Hover);}",".f1ub3y4t:hover{border-right-color:var(--colorNeutralStroke1Hover);}",".f1m52nbi:hover{border-left-color:var(--colorNeutralStroke1Hover);}",".f1l4zc64:hover{border-bottom-color:var(--colorNeutralStrokeAccessibleHover);}"],a:[".fvs00aa:active{border-top-color:var(--colorNeutralStroke1Pressed);}",".f1assf6x:active{border-right-color:var(--colorNeutralStroke1Pressed);}",".f4ruux4:active{border-left-color:var(--colorNeutralStroke1Pressed);}",".f1z0osm6:active{border-bottom-color:var(--colorNeutralStrokeAccessiblePressed);}"]}),Xve=hl({icon:{B7ck84d:"f1ewtqcl",sj55zd:"fxkbij4",mc9l5x:"ftgm304",Be2twd7:"f1pp30po",Br312pm:"f12w6cgp",Bw0ie65:"f8bv1bt",Bo70h7d:"fvc9v3g"},small:{Be2twd7:"f4ybsrx",Frg6f3:["f1h9en5y","f1xk557c"]},medium:{Be2twd7:"fe5j1ua",Frg6f3:["f1h9en5y","f1xk557c"]},large:{Be2twd7:"f1rt2boy",Frg6f3:["f1t5qyk5","f1ikr372"]},disabled:{sj55zd:"f1s2aq7o"}},{d:[".f1ewtqcl{box-sizing:border-box;}",".fxkbij4{color:var(--colorNeutralStrokeAccessible);}",".ftgm304{display:block;}",".f1pp30po{font-size:var(--fontSizeBase500);}",".f12w6cgp{grid-column-start:icon;}",".f8bv1bt{grid-column-end:end;}",".fvc9v3g svg{display:block;}",".f4ybsrx{font-size:16px;}",".f1h9en5y{margin-left:var(--spacingHorizontalXXS);}",".f1xk557c{margin-right:var(--spacingHorizontalXXS);}",".fe5j1ua{font-size:20px;}",".f1rt2boy{font-size:24px;}",".f1t5qyk5{margin-left:var(--spacingHorizontalSNudge);}",".f1ikr372{margin-right:var(--spacingHorizontalSNudge);}",".f1s2aq7o{color:var(--colorNeutralForegroundDisabled);}"]}),qve=Spe("rticfuj","r1vp6jef",{r:[".rticfuj{align-self:center;background-color:var(--colorTransparentBackground);border:none;cursor:pointer;height:fit-content;margin:0;margin-right:var(--spacingHorizontalMNudge);padding:0;position:relative;}",".rticfuj:focus{outline-style:none;}",".rticfuj:focus-visible{outline-style:none;}",".rticfuj[data-fui-focus-visible]{border-top-color:transparent;border-right-color:transparent;border-bottom-color:transparent;border-left-color:transparent;}",'.rticfuj[data-fui-focus-visible]::after{content:"";position:absolute;pointer-events:none;z-index:1;border:2px solid var(--colorStrokeFocus2);border-radius:var(--borderRadiusMedium);top:calc(2px * -1);right:calc(2px * -1);bottom:calc(2px * -1);left:calc(2px * -1);}',".r1vp6jef{align-self:center;background-color:var(--colorTransparentBackground);border:none;cursor:pointer;height:fit-content;margin:0;margin-left:var(--spacingHorizontalMNudge);padding:0;position:relative;}",".r1vp6jef:focus{outline-style:none;}",".r1vp6jef:focus-visible{outline-style:none;}",".r1vp6jef[data-fui-focus-visible]{border-top-color:transparent;border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;}",'.r1vp6jef[data-fui-focus-visible]::after{content:"";position:absolute;pointer-events:none;z-index:1;border:2px solid var(--colorStrokeFocus2);border-radius:var(--borderRadiusMedium);top:calc(2px * -1);left:calc(2px * -1);bottom:calc(2px * -1);right:calc(2px * -1);}'],s:["@media (forced-colors: active){.rticfuj[data-fui-focus-visible]::after{border-top-color:Highlight;border-right-color:Highlight;border-bottom-color:Highlight;border-left-color:Highlight;}}","@media (forced-colors: active){.r1vp6jef[data-fui-focus-visible]::after{border-top-color:Highlight;border-left-color:Highlight;border-bottom-color:Highlight;border-right-color:Highlight;}}"]}),Yve=t=>{"use no memo";const{appearance:e,open:r,placeholderVisible:n,showClearButton:i,size:s}=t,o=`${t.button["aria-invalid"]}`=="true",a=t.button.disabled,u=Wve(),l=Xve(),c=qve();return t.root.className=hi(Kl.root,u.root,u[e],!a&&e==="outline"&&u.outlineInteractive,o&&e!=="underline"&&u.invalid,o&&e==="underline"&&u.invalidUnderline,a&&u.disabled,t.root.className),t.button.className=hi(Kl.button,u.button,u[s],n&&u.placeholder,a&&u.disabledText,t.button.className),t.listbox&&(t.listbox.className=hi(Kl.listbox,u.listbox,t.inlinePopup&&u.inlineListbox,!r&&u.listboxCollapsed,t.listbox.className)),t.expandIcon&&(t.expandIcon.className=hi(Kl.expandIcon,l.icon,l[s],a&&l.disabled,i&&u.hidden,t.expandIcon.className)),t.clearButton&&(t.clearButton.className=hi(Kl.clearButton,c,l.icon,l[s],a&&l.disabled,!i&&u.hidden,t.clearButton.className)),t},Kve=M.forwardRef((t,e)=>{const r=Hve(t,e),n=Eve(r);return Yve(r),y3("useDropdownStyles_unstable")(r),Vve(r,n)});Kve.displayName="Dropdown";function qs(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gx(t,e){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},gx(t,e)}function ev(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gx(t,e)}function od(t,e){if(e&&(Xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qs(t)}function Mi(t){return Mi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mi(t)}function Zve(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Qve(t){return u6(t)||Zve(t)||l6(t)||c6()}function YR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function KR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Jve={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,r){console&&console[e]&&console[e].apply(console,r)}},e0e=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ri(this,t),this.init(e,r)}return ni(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||Jve,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,i,s){return s&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(i).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new t(this.logger,KR(KR({},{prefix:"".concat(this.prefix,":").concat(r,":")}),this.options))}},{key:"clone",value:function(r){return r=r||this.options,r.prefix=r.prefix||this.prefix,new t(this.logger,r)}}]),t}(),yi=new e0e,oo=function(){function t(){ri(this,t),this.observers={}}return ni(t,[{key:"on",value:function(r,n){var i=this;return r.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(i){return i!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,i=new Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];if(this.observers[r]){var o=[].concat(this.observers[r]);o.forEach(function(u){u.apply(void 0,i)})}if(this.observers["*"]){var a=[].concat(this.observers["*"]);a.forEach(function(u){u.apply(u,[r].concat(i))})}}}]),t}();function Zl(){var t,e,r=new Promise(function(n,i){t=n,e=i});return r.resolve=t,r.reject=e,r}function ZR(t){return t==null?"":""+t}function t0e(t,e,r){t.forEach(function(n){e[n]&&(r[n]=e[n])})}function O3(t,e,r){function n(a){return a&&a.indexOf("###")>-1?a.replace(/###/g,"."):a}function i(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var o=n(s.shift());!t[o]&&r&&(t[o]=new r),Object.prototype.hasOwnProperty.call(t,o)?t=t[o]:t={}}return i()?{}:{obj:t,k:n(s.shift())}}function QR(t,e,r){var n=O3(t,e,Object),i=n.obj,s=n.k;i[s]=r}function r0e(t,e,r,n){var i=O3(t,e,Object),s=i.obj,o=i.k;s[o]=s[o]||[],n&&(s[o]=s[o].concat(r)),n||s[o].push(r)}function Kp(t,e){var r=O3(t,e),n=r.obj,i=r.k;if(n)return n[i]}function n0e(t,e,r){var n=Kp(t,r);return n!==void 0?n:Kp(e,r)}function pG(t,e,r){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?typeof t[n]=="string"||t[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?r&&(t[n]=e[n]):pG(t[n],e[n],r):t[n]=e[n]);return t}function Pa(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var i0e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function s0e(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return i0e[e]}):t}var tv=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,o0e=[" ",",","?","!",";"];function a0e(t,e,r){e=e||"",r=r||"";var n=o0e.filter(function(a){return e.indexOf(a)<0&&r.indexOf(a)<0});if(n.length===0)return!0;var i=new RegExp("(".concat(n.map(function(a){return a==="?"?"\\?":a}).join("|"),")")),s=!i.test(t);if(!s){var o=t.indexOf(r);o>0&&!i.test(t.substring(0,o))&&(s=!0)}return s}function Zp(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var n=e.split(r),i=t,s=0;s<n.length;++s){if(!i||typeof i[n[s]]=="string"&&s+1<n.length)return;if(i[n[s]]===void 0){for(var o=2,a=n.slice(s,s+o).join(r),u=i[a];u===void 0&&n.length>s+o;)o++,a=n.slice(s,s+o).join(r),u=i[a];if(u===void 0)return;if(u===null)return null;if(e.endsWith(a)){if(typeof u=="string")return u;if(a&&typeof u[a]=="string")return u[a]}var l=n.slice(s+o).join(r);return l?Zp(u,l,r):void 0}i=i[n[s]]}return i}}function JR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function nh(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?JR(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function u0e(t){var e=l0e();return function(){var n=Mi(t),i;if(e){var s=Mi(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return od(this,i)}}function l0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var c0e=function(t){ev(r,t);var e=u0e(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return ri(this,r),i=e.call(this),tv&&oo.call(qs(i)),i.data=n||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return ni(r,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ignoreJSONStructure!==void 0?a.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[i,s];o&&typeof o!="string"&&(c=c.concat(o)),o&&typeof o=="string"&&(c=c.concat(u?o.split(u):o)),i.indexOf(".")>-1&&(c=i.split("."));var f=Kp(this.data,c);return f||!l||typeof o!="string"?f:Zp(this.data&&this.data[i]&&this.data[i][s],o,u)}},{key:"addResource",value:function(i,s,o,a){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,c=[i,s];o&&(c=c.concat(l?o.split(l):o)),i.indexOf(".")>-1&&(c=i.split("."),a=s,s=c[1]),this.addNamespaces(s),QR(this.data,c,a),u.silent||this.emit("added",i,s,o,a)}},{key:"addResources",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in o)(typeof o[u]=="string"||Object.prototype.toString.apply(o[u])==="[object Array]")&&this.addResource(i,s,u,o[u],{silent:!0});a.silent||this.emit("added",i,s,o)}},{key:"addResourceBundle",value:function(i,s,o,a,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[i,s];i.indexOf(".")>-1&&(c=i.split("."),a=o,o=s,s=c[1]),this.addNamespaces(s);var f=Kp(this.data,c)||{};a?pG(f,o,u):f=nh(nh({},f),o),QR(this.data,c,f),l.silent||this.emit("added",i,s,o)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?nh(nh({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),o=s&&Object.keys(s)||[];return!!o.find(function(a){return s[a]&&Object.keys(s[a]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),r}(oo),mG={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,r,n,i,s){var o=this;return e.forEach(function(a){o.processors[a]&&(r=o.processors[a].process(r,n,i,s))}),r}};function eO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?eO(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function f0e(t){var e=d0e();return function(){var n=Mi(t),i;if(e){var s=Mi(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return od(this,i)}}function d0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var tO={},rO=function(t){ev(r,t);var e=f0e(r);function r(n){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ri(this,r),i=e.call(this),tv&&oo.call(qs(i)),t0e(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,qs(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=yi.create("translator"),i}return ni(r,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var o=this.resolve(i,s);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(i,s){var o=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ns||this.options.defaultNS||[],l=o&&i.indexOf(o)>-1,c=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!a0e(i,o,a);if(l&&!c){var f=i.match(this.interpolator.nestingRegexp);if(f&&f.length>0)return{key:i,namespaces:u};var d=i.split(o);(o!==a||o===a&&this.options.ns.indexOf(d[0])>-1)&&(u=d.shift()),i=d.join(a)}return typeof u=="string"&&(u=[u]),{key:i,namespaces:u}}},{key:"translate",value:function(i,s,o){var a=this;if(Xt(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),Xt(s)==="object"&&(s=ur({},s)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var u=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,c=this.extractFromKey(i[i.length-1],s),f=c.key,d=c.namespaces,h=d[d.length-1],p=s.lng||this.language,m=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(p&&p.toLowerCase()==="cimode"){if(m){var g=s.nsSeparator||this.options.nsSeparator;return u?{res:"".concat(h).concat(g).concat(f),usedKey:f,exactUsedKey:f,usedLng:p,usedNS:h}:"".concat(h).concat(g).concat(f)}return u?{res:f,usedKey:f,exactUsedKey:f,usedLng:p,usedNS:h}:f}var v=this.resolve(i,s),y=v&&v.res,b=v&&v.usedKey||f,_=v&&v.exactUsedKey||f,x=Object.prototype.toString.apply(y),S=["[object Number]","[object Function]","[object RegExp]"],w=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,P=!this.i18nFormat||this.i18nFormat.handleAsObject,C=typeof y!="string"&&typeof y!="boolean"&&typeof y!="number";if(P&&y&&C&&S.indexOf(x)<0&&!(typeof w=="string"&&x==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var R=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,y,ur(ur({},s),{},{ns:d})):"key '".concat(f," (").concat(this.language,")' returned an object instead of string.");return u?(v.res=R,v):R}if(l){var F=x==="[object Array]",N=F?[]:{},G=F?_:b;for(var j in y)if(Object.prototype.hasOwnProperty.call(y,j)){var re="".concat(G).concat(l).concat(j);N[j]=this.translate(re,ur(ur({},s),{joinArrays:!1,ns:d})),N[j]===re&&(N[j]=y[j])}y=N}}else if(P&&typeof w=="string"&&x==="[object Array]")y=y.join(w),y&&(y=this.extendTranslation(y,i,s,o));else{var U=!1,z=!1,pe=s.count!==void 0&&typeof s.count!="string",ae=r.hasDefaultValue(s),we=pe?this.pluralResolver.getSuffix(p,s.count,s):"",V=s["defaultValue".concat(we)]||s.defaultValue;!this.isValidLookup(y)&&ae&&(U=!0,y=V),this.isValidLookup(y)||(z=!0,y=f);var q=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,ie=q&&z?void 0:y,ge=ae&&V!==y&&this.options.updateMissing;if(z||U||ge){if(this.logger.log(ge?"updateKey":"missingKey",p,h,f,ge?V:y),l){var be=this.resolve(f,ur(ur({},s),{},{keySeparator:!1}));be&&be.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var ot=[],bt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&bt&&bt[0])for(var zt=0;zt<bt.length;zt++)ot.push(bt[zt]);else this.options.saveMissingTo==="all"?ot=this.languageUtils.toResolveHierarchy(s.lng||this.language):ot.push(s.lng||this.language);var xt=function(_r,br,Br){var xr=ae&&Br!==y?Br:ie;a.options.missingKeyHandler?a.options.missingKeyHandler(_r,h,br,xr,ge,s):a.backendConnector&&a.backendConnector.saveMissing&&a.backendConnector.saveMissing(_r,h,br,xr,ge,s),a.emit("missingKey",_r,h,br,y)};this.options.saveMissing&&(this.options.saveMissingPlurals&&pe?ot.forEach(function(Qr){a.pluralResolver.getSuffixes(Qr,s).forEach(function(_r){xt([Qr],f+_r,s["defaultValue".concat(_r)]||V)})}):xt(ot,f,V))}y=this.extendTranslation(y,i,s,v,o),z&&y===f&&this.options.appendNamespaceToMissingKey&&(y="".concat(h,":").concat(f)),(z||U)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?y=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(h,":").concat(f):f,U?y:void 0):y=this.options.parseMissingKeyHandler(y))}return u?(v.res=y,v):y}},{key:"extendTranslation",value:function(i,s,o,a,u){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,ur(ur({},this.options.interpolation.defaultVariables),o),a.usedLng,a.usedNS,a.usedKey,{resolved:a});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(ur(ur({},o),{interpolation:ur(ur({},this.options.interpolation),o.interpolation)}));var c=typeof i=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),f;if(c){var d=i.match(this.interpolator.nestingRegexp);f=d&&d.length}var h=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(h=ur(ur({},this.options.interpolation.defaultVariables),h)),i=this.interpolator.interpolate(i,h,o.lng||this.language,o),c){var p=i.match(this.interpolator.nestingRegexp),m=p&&p.length;f<m&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&a&&a.res&&(o.lng=a.usedLng),o.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var y=arguments.length,b=new Array(y),_=0;_<y;_++)b[_]=arguments[_];return u&&u[0]===b[0]&&!o.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(b[0]," in key: ").concat(s[0])),null):l.translate.apply(l,b.concat([s]))},o)),o.interpolation&&this.interpolator.reset()}var g=o.postProcess||this.options.postProcess,v=typeof g=="string"?[g]:g;return i!=null&&v&&v.length&&o.applyPostProcessor!==!1&&(i=mG.handle(v,i,s,this.options&&this.options.postProcessPassResolved?ur({i18nResolved:a},o):o,this)),i}},{key:"resolve",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,u,l,c,f;return typeof i=="string"&&(i=[i]),i.forEach(function(d){if(!s.isValidLookup(a)){var h=s.extractFromKey(d,o),p=h.key;u=p;var m=h.namespaces;s.options.fallbackNS&&(m=m.concat(s.options.fallbackNS));var g=o.count!==void 0&&typeof o.count!="string",v=g&&!o.ordinal&&o.count===0&&s.pluralResolver.shouldUseIntlApi(),y=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",b=o.lngs?o.lngs:s.languageUtils.toResolveHierarchy(o.lng||s.language,o.fallbackLng);m.forEach(function(_){s.isValidLookup(a)||(f=_,!tO["".concat(b[0],"-").concat(_)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(f)&&(tO["".concat(b[0],"-").concat(_)]=!0,s.logger.warn('key "'.concat(u,'" for languages "').concat(b.join(", "),`" won't get resolved as namespace "`).concat(f,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(function(x){if(!s.isValidLookup(a)){c=x;var S=[p];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(S,p,x,_,o);else{var w;g&&(w=s.pluralResolver.getSuffix(x,o.count,o));var P="".concat(s.options.pluralSeparator,"zero");if(g&&(S.push(p+w),v&&S.push(p+P)),y){var C="".concat(p).concat(s.options.contextSeparator).concat(o.context);S.push(C),g&&(S.push(C+w),v&&S.push(C+P))}}for(var R;R=S.pop();)s.isValidLookup(a)||(l=R,a=s.getResource(x,_,R,o))}}))})}}),{res:a,usedKey:u,exactUsedKey:l,usedLng:c,usedNS:f}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,o){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,o,a):this.resourceStore.getResource(i,s,o,a)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)&&s===o.substring(0,s.length)&&i[o]!==void 0)return!0;return!1}}]),r}(oo);function Ay(t){return t.charAt(0).toUpperCase()+t.slice(1)}var nO=function(){function t(e){ri(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=yi.create("languageUtils")}return ni(t,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],i=r.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Ay(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),n.indexOf(i[1].toLowerCase())>-1&&(i[1]=Ay(i[1].toLowerCase())),n.indexOf(i[2].toLowerCase())>-1&&(i[2]=Ay(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var i;return r.forEach(function(s){if(!i){var o=n.formatLanguageCode(s);(!n.options.supportedLngs||n.isSupportedCode(o))&&(i=o)}}),!i&&this.options.supportedLngs&&r.forEach(function(s){if(!i){var o=n.getLanguagePartFromCode(s);if(n.isSupportedCode(o))return i=o;i=n.options.supportedLngs.find(function(a){if(a===o)return a;if(!(a.indexOf("-")<0&&o.indexOf("-")<0)&&a.indexOf(o)===0)return a})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var i=r[n];return i||(i=r[this.getScriptPartFromCode(n)]),i||(i=r[this.formatLanguageCode(n)]),i||(i=r[this.getLanguagePartFromCode(n)]),i||(i=r.default),i||[]}},{key:"toResolveHierarchy",value:function(r,n){var i=this,s=this.getFallbackCodes(n||this.options.fallbackLng||[],r),o=[],a=function(l){l&&(i.isSupportedCode(l)?o.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&a(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&a(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&a(this.getLanguagePartFromCode(r))):typeof r=="string"&&a(this.formatLanguageCode(r)),s.forEach(function(u){o.indexOf(u)<0&&a(i.formatLanguageCode(u))}),o}}]),t}(),h0e=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],p0e={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}},m0e=["v1","v2","v3"],iO={zero:0,one:1,two:2,few:3,many:4,other:5};function g0e(){var t={};return h0e.forEach(function(e){e.lngs.forEach(function(r){t[r]={numbers:e.nr,plurals:p0e[e.fc]}})}),t}var v0e=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ri(this,t),this.languageUtils=e,this.options=r,this.logger=yi.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=g0e()}return ni(t,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(r,{type:n.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(r,n);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(r,i).map(function(s){return"".concat(n).concat(s)})}},{key:"getSuffixes",value:function(r){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(r,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(o,a){return iO[o]-iO[a]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):s.numbers.map(function(o){return n.getSuffix(r,o,i)}):[]}},{key:"getSuffix",value:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(r,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(n)):this.getSuffixRetroCompatible(s,n):(this.logger.warn("no plural rule found for: ".concat(r)),"")}},{key:"getSuffixRetroCompatible",value:function(r,n){var i=this,s=r.noAbs?r.plurals(n):r.plurals(Math.abs(n)),o=r.numbers[s];this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var a=function(){return i.options.prepend&&o.toString()?i.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):a():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&r.numbers.length===2&&r.numbers[0]===1?a():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!m0e.includes(this.options.compatibilityJSON)}}]),t}();function sO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Hn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?sO(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function oO(t,e,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=n0e(t,e,r);return!s&&i&&typeof r=="string"&&(s=Zp(t,r,n),s===void 0&&(s=Zp(e,r,n))),s}var y0e=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ri(this,t),this.logger=yi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(r){return r},this.init(e)}return ni(t,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:s0e,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?Pa(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?Pa(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?Pa(n.nestingPrefix):n.nestingPrefixEscaped||Pa("$t("),this.nestingSuffix=n.nestingSuffix?Pa(n.nestingSuffix):n.nestingSuffixEscaped||Pa(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(r,n,i,s){var o=this,a,u,l,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function f(g){return g.replace(/\$/g,"$$$$")}var d=function(v){if(v.indexOf(o.formatSeparator)<0){var y=oO(n,c,v,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(y,void 0,i,Hn(Hn(Hn({},s),n),{},{interpolationkey:v})):y}var b=v.split(o.formatSeparator),_=b.shift().trim(),x=b.join(o.formatSeparator).trim();return o.format(oO(n,c,_,o.options.keySeparator,o.options.ignoreJSONStructure),x,i,Hn(Hn(Hn({},s),n),{},{interpolationkey:_}))};this.resetRegExp();var h=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,p=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,m=[{regex:this.regexpUnescape,safeValue:function(v){return f(v)}},{regex:this.regexp,safeValue:function(v){return o.escapeValue?f(o.escape(v)):f(v)}}];return m.forEach(function(g){for(l=0;a=g.regex.exec(r);){var v=a[1].trim();if(u=d(v),u===void 0)if(typeof h=="function"){var y=h(r,a,s);u=typeof y=="string"?y:""}else if(s&&Object.prototype.hasOwnProperty.call(s,v))u="";else if(p){u=a[0];continue}else o.logger.warn("missed to pass in variable ".concat(v," for interpolating ").concat(r)),u="";else typeof u!="string"&&!o.useRawValueToEscape&&(u=ZR(u));var b=g.safeValue(u);if(r=r.replace(a[0],b),p?(g.regex.lastIndex+=u.length,g.regex.lastIndex-=a[0].length):g.regex.lastIndex=0,l++,l>=o.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,a,u;function l(h,p){var m=this.nestingOptionsSeparator;if(h.indexOf(m)<0)return h;var g=h.split(new RegExp("".concat(m,"[ ]*{"))),v="{".concat(g[1]);h=g[0],v=this.interpolate(v,u);var y=v.match(/'/g),b=v.match(/"/g);(y&&y.length%2===0&&!b||b.length%2!==0)&&(v=v.replace(/'/g,'"'));try{u=JSON.parse(v),p&&(u=Hn(Hn({},p),u))}catch(_){return this.logger.warn("failed parsing options string in nesting for key ".concat(h),_),"".concat(h).concat(m).concat(v)}return delete u.defaultValue,h}for(;o=this.nestingRegexp.exec(r);){var c=[];u=Hn({},s),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var f=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var d=o[1].split(this.formatSeparator).map(function(h){return h.trim()});o[1]=d.shift(),c=d,f=!0}if(a=n(l.call(this,o[1].trim(),u),u),a&&o[0]===r&&typeof a!="string")return a;typeof a!="string"&&(a=ZR(a)),a||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(r)),a=""),f&&(a=c.reduce(function(h,p){return i.format(h,p,s.lng,Hn(Hn({},s),{},{interpolationkey:o[1].trim()}))},a.trim())),r=r.replace(o[0],a),this.regexp.lastIndex=0}return r}}]),t}();function aO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?aO(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _0e(t){var e=t.toLowerCase().trim(),r={};if(t.indexOf("(")>-1){var n=t.split("(");e=n[0].toLowerCase().trim();var i=n[1].substring(0,n[1].length-1);if(e==="currency"&&i.indexOf(":")<0)r.currency||(r.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)r.range||(r.range=i.trim());else{var s=i.split(";");s.forEach(function(o){if(o){var a=o.split(":"),u=Qve(a),l=u[0],c=u.slice(1),f=c.join(":").trim().replace(/^'+|'+$/g,"");r[l.trim()]||(r[l.trim()]=f),f==="false"&&(r[l.trim()]=!1),f==="true"&&(r[l.trim()]=!0),isNaN(f)||(r[l.trim()]=parseInt(f,10))}})}}return{formatName:e,formatOptions:r}}function Ra(t){var e={};return function(n,i,s){var o=i+JSON.stringify(s),a=e[o];return a||(a=t(i,s),e[o]=a),a(n)}}var b0e=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ri(this,t),this.logger=yi.create("formatter"),this.options=e,this.formats={number:Ra(function(r,n){var i=new Intl.NumberFormat(r,zi({},n));return function(s){return i.format(s)}}),currency:Ra(function(r,n){var i=new Intl.NumberFormat(r,zi(zi({},n),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:Ra(function(r,n){var i=new Intl.DateTimeFormat(r,zi({},n));return function(s){return i.format(s)}}),relativetime:Ra(function(r,n){var i=new Intl.RelativeTimeFormat(r,zi({},n));return function(s){return i.format(s,n.range||"day")}}),list:Ra(function(r,n){var i=new Intl.ListFormat(r,zi({},n));return function(s){return i.format(s)}})},this.init(e)}return ni(t,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=n.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(r,n){this.formats[r.toLowerCase().trim()]=n}},{key:"addCached",value:function(r,n){this.formats[r.toLowerCase().trim()]=Ra(n)}},{key:"format",value:function(r,n,i){var s=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=n.split(this.formatSeparator),u=a.reduce(function(l,c){var f=_0e(c),d=f.formatName,h=f.formatOptions;if(s.formats[d]){var p=l;try{var m=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},g=m.locale||m.lng||o.locale||o.lng||i;p=s.formats[d](l,g,zi(zi(zi({},h),o),m))}catch(v){s.logger.warn(v)}return p}else s.logger.warn("there was no format function for ".concat(d));return l},r);return u}}]),t}();function uO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function lO(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?uO(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x0e(t){var e=S0e();return function(){var n=Mi(t),i;if(e){var s=Mi(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return od(this,i)}}function S0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w0e(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var E0e=function(t){ev(r,t);var e=x0e(r);function r(n,i,s){var o,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return ri(this,r),o=e.call(this),tv&&oo.call(qs(o)),o.backend=n,o.store=i,o.services=s,o.languageUtils=s.languageUtils,o.options=a,o.logger=yi.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=a.maxParallelReads||10,o.readingCalls=0,o.maxRetries=a.maxRetries>=0?a.maxRetries:5,o.retryTimeout=a.retryTimeout>=1?a.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(s,a.backend,a),o}return ni(r,[{key:"queueLoad",value:function(i,s,o,a){var u=this,l={},c={},f={},d={};return i.forEach(function(h){var p=!0;s.forEach(function(m){var g="".concat(h,"|").concat(m);!o.reload&&u.store.hasResourceBundle(h,m)?u.state[g]=2:u.state[g]<0||(u.state[g]===1?c[g]===void 0&&(c[g]=!0):(u.state[g]=1,p=!1,c[g]===void 0&&(c[g]=!0),l[g]===void 0&&(l[g]=!0),d[m]===void 0&&(d[m]=!0)))}),p||(f[h]=!0)}),(Object.keys(l).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:a}),{toLoad:Object.keys(l),pending:Object.keys(c),toLoadLanguages:Object.keys(f),toLoadNamespaces:Object.keys(d)}}},{key:"loaded",value:function(i,s,o){var a=i.split("|"),u=a[0],l=a[1];s&&this.emit("failedLoading",u,l,s),o&&this.store.addResourceBundle(u,l,o),this.state[i]=s?-1:2;var c={};this.queue.forEach(function(f){r0e(f.loaded,[u],l),w0e(f,i),s&&f.errors.push(s),f.pendingCount===0&&!f.done&&(Object.keys(f.loaded).forEach(function(d){c[d]||(c[d]={});var h=f.loaded[d];h.length&&h.forEach(function(p){c[d][p]===void 0&&(c[d][p]=!0)})}),f.done=!0,f.errors.length?f.callback(f.errors):f.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(f){return!f.done})}},{key:"read",value:function(i,s,o){var a=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!i.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:o,tried:u,wait:l,callback:c});return}this.readingCalls++;var f=function(m,g){if(a.readingCalls--,a.waitingReads.length>0){var v=a.waitingReads.shift();a.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(m&&g&&u<a.maxRetries){setTimeout(function(){a.read.call(a,i,s,o,u+1,l*2,c)},l);return}c(m,g)},d=this.backend[o].bind(this.backend);if(d.length===2){try{var h=d(i,s);h&&typeof h.then=="function"?h.then(function(p){return f(null,p)}).catch(f):f(null,h)}catch(p){f(p)}return}return d(i,s,f)}},{key:"prepareLoading",value:function(i,s){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var l=this.queueLoad(i,s,a,u);if(!l.toLoad.length)return l.pending.length||u(),null;l.toLoad.forEach(function(c){o.loadOne(c)})}},{key:"load",value:function(i,s,o){this.prepareLoading(i,s,{},o)}},{key:"reload",value:function(i,s,o){this.prepareLoading(i,s,{reload:!0},o)}},{key:"loadOne",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=i.split("|"),u=a[0],l=a[1];this.read(u,l,"read",void 0,void 0,function(c,f){c&&s.logger.warn("".concat(o,"loading namespace ").concat(l," for language ").concat(u," failed"),c),!c&&f&&s.logger.log("".concat(o,"loaded namespace ").concat(l," for language ").concat(u),f),s.loaded(i,c,f)})}},{key:"saveMissing",value:function(i,s,o,a,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var f=lO(lO({},l),{},{isUpdate:u}),d=this.backend.create.bind(this.backend);if(d.length<6)try{var h;d.length===5?h=d(i,s,o,a,f):h=d(i,s,o,a),h&&typeof h.then=="function"?h.then(function(p){return c(null,p)}).catch(c):c(null,h)}catch(p){c(p)}else d(i,s,o,a,c,f)}!i||!i[0]||this.store.addResource(i[0],s,o,a)}}}]),r}(oo);function cO(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var r={};if(Xt(e[1])==="object"&&(r=e[1]),typeof e[1]=="string"&&(r.defaultValue=e[1]),typeof e[2]=="string"&&(r.tDescription=e[2]),Xt(e[2])==="object"||Xt(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(i){r[i]=n[i]})}return r},interpolation:{escapeValue:!0,format:function(e,r,n,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function fO(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function dO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function ii(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dO(Object(r),!0).forEach(function(n){vn(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dO(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function C0e(t){var e=T0e();return function(){var n=Mi(t),i;if(e){var s=Mi(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return od(this,i)}}function T0e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ih(){}function A0e(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(r){typeof t[r]=="function"&&(t[r]=t[r].bind(t))})}var Qp=function(t){ev(r,t);var e=C0e(r);function r(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(ri(this,r),n=e.call(this),tv&&oo.call(qs(n)),n.options=fO(i),n.services={},n.logger=yi,n.modules={external:[]},A0e(qs(n)),s&&!n.isInitialized&&!i.isClone){if(!n.options.initImmediate)return n.init(i,s),od(n,qs(n));setTimeout(function(){n.init(i,s)},0)}return n}return ni(r,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(o=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var a=cO();this.options=ii(ii(ii({},a),this.options),fO(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=ii(ii({},a.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function u(v){return v?typeof v=="function"?new v:v:null}if(!this.options.isClone){this.modules.logger?yi.init(u(this.modules.logger),this.options):yi.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=b0e);var c=new nO(this.options);this.store=new c0e(this.options.resources,this.options);var f=this.services;f.logger=yi,f.resourceStore=this.store,f.languageUtils=c,f.pluralResolver=new v0e(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(f.formatter=u(l),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new y0e(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new E0e(u(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(v){for(var y=arguments.length,b=new Array(y>1?y-1:0),_=1;_<y;_++)b[_-1]=arguments[_];i.emit.apply(i,[v].concat(b))}),this.modules.languageDetector&&(f.languageDetector=u(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=u(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new rO(this.services,this.options),this.translator.on("*",function(v){for(var y=arguments.length,b=new Array(y>1?y-1:0),_=1;_<y;_++)b[_-1]=arguments[_];i.emit.apply(i,[v].concat(b))}),this.modules.external.forEach(function(v){v.init&&v.init(i)})}if(this.format=this.options.interpolation.format,o||(o=ih),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var h=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];h.forEach(function(v){i[v]=function(){var y;return(y=i.store)[v].apply(y,arguments)}});var p=["addResource","addResources","addResourceBundle","removeResourceBundle"];p.forEach(function(v){i[v]=function(){var y;return(y=i.store)[v].apply(y,arguments),i}});var m=Zl(),g=function(){var y=function(_,x){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),m.resolve(x),o(_,x)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return y(null,i.t.bind(i));i.changeLanguage(i.options.lng,y)};return this.options.resources||!this.options.initImmediate?g():setTimeout(g,0),m}},{key:"loadResources",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ih,a=o,u=typeof i=="string"?i:this.language;if(typeof i=="function"&&(a=i),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return a();var l=[],c=function(h){if(h){var p=s.services.languageUtils.toResolveHierarchy(h);p.forEach(function(m){l.indexOf(m)<0&&l.push(m)})}};if(u)c(u);else{var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.forEach(function(d){return c(d)})}this.options.preload&&this.options.preload.forEach(function(d){return c(d)}),this.services.backendConnector.load(l,this.options.ns,function(d){!d&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),a(d)})}else a(null)}},{key:"reloadResources",value:function(i,s,o){var a=Zl();return i||(i=this.languages),s||(s=this.options.ns),o||(o=ih),this.services.backendConnector.reload(i,s,function(u){a.resolve(),o(u)}),a}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&mG.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var o=this.languages[s];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(i,s){var o=this;this.isLanguageChangingTo=i;var a=Zl();this.emit("languageChanging",i);var u=function(d){o.language=d,o.languages=o.services.languageUtils.toResolveHierarchy(d),o.resolvedLanguage=void 0,o.setResolvedLanguage(d)},l=function(d,h){h?(u(h),o.translator.changeLanguage(h),o.isLanguageChangingTo=void 0,o.emit("languageChanged",h),o.logger.log("languageChanged",h)):o.isLanguageChangingTo=void 0,a.resolve(function(){return o.t.apply(o,arguments)}),s&&s(d,function(){return o.t.apply(o,arguments)})},c=function(d){!i&&!d&&o.services.languageDetector&&(d=[]);var h=typeof d=="string"?d:o.services.languageUtils.getBestMatchFromCodes(d);h&&(o.language||u(h),o.translator.language||o.translator.changeLanguage(h),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(h)),o.loadResources(h,function(p){l(p,h)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),a}},{key:"getFixedT",value:function(i,s,o){var a=this,u=function l(c,f){var d;if(Xt(f)!=="object"){for(var h=arguments.length,p=new Array(h>2?h-2:0),m=2;m<h;m++)p[m-2]=arguments[m];d=a.options.overloadTranslationOptionHandler([c,f].concat(p))}else d=ii({},f);d.lng=d.lng||l.lng,d.lngs=d.lngs||l.lngs,d.ns=d.ns||l.ns,d.keyPrefix=d.keyPrefix||o||l.keyPrefix;var g=a.options.keySeparator||".",v;return d.keyPrefix&&Array.isArray(c)?v=c.map(function(y){return"".concat(d.keyPrefix).concat(g).concat(y)}):v=d.keyPrefix?"".concat(d.keyPrefix).concat(g).concat(c):c,a.t(v,d)};return typeof i=="string"?u.lng=i:u.lngs=i,u.ns=s,u.keyPrefix=o,u}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var a=o.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;var c=function(h,p){var m=s.services.backendConnector.state["".concat(h,"|").concat(p)];return m===-1||m===2};if(o.precheck){var f=o.precheck(this,c);if(f!==void 0)return f}return!!(this.hasResourceBundle(a,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(a,i)&&(!u||c(l,i)))}},{key:"loadNamespaces",value:function(i,s){var o=this,a=Zl();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(u){o.options.ns.indexOf(u)<0&&o.options.ns.push(u)}),this.loadResources(function(u){a.resolve(),s&&s(u)}),a):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var o=Zl();typeof i=="string"&&(i=[i]);var a=this.options.preload||[],u=i.filter(function(l){return a.indexOf(l)<0});return u.length?(this.options.preload=a.concat(u),this.loadResources(function(l){o.resolve(),s&&s(l)}),o):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new nO(cO());return s.indexOf(o.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ih,a=ii(ii(ii({},this.options),s),{isClone:!0}),u=new r(a);(s.debug!==void 0||s.prefix!==void 0)&&(u.logger=u.logger.clone(s));var l=["store","services","language"];return l.forEach(function(c){u[c]=i[c]}),u.services=ii({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new rO(u.services,u.options),u.translator.on("*",function(c){for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];u.emit.apply(u,[c].concat(d))}),u.init(a,o),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),r}(oo);vn(Qp,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Qp(t,e)});var Or=Qp.createInstance();Or.createInstance=Qp.createInstance;Or.createInstance;Or.dir;Or.init;Or.loadResources;Or.reloadResources;Or.use;Or.changeLanguage;Or.getFixedT;Or.t;Or.exists;Or.setDefaultNamespace;Or.hasLoadedNamespace;Or.loadNamespaces;Or.loadLanguages;me.add(YD);me.mixin(ar,KD);me.add(u2);me.add(l2);me.add(q2);me.mixin(ar,nF);me.add(F2);me.add(hw);me.add(qm);me.add(pw);me.add(gw);me.add(vw);me.add(Ew);me.add(ww);me.add(bw);me.add(cg);me.add(xw);me.add(_w);me.add(yw);me.add(Z2);me.add(K2);const P0e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),R0e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{yye as $,ac as A,pF as B,F0e as C,eye as D,M as E,Rt as F,et as G,uye as H,fye as I,dye as J,B0e as K,kO as L,lye as M,hye as N,nye as O,Le as P,W0e as Q,iye as R,Zn as S,nr as T,pye as U,aK as V,k0e as W,R9 as X,vye as Y,aye as Z,mp as _,M0e as a,Bye as a0,Pye as a1,Nye as a2,Eye as a3,Lye as a4,Fye as a5,zye as a6,bye as a7,Rye as a8,$ye as a9,J2 as aa,Mye as ab,Iye as ac,_ye as ad,Dye as ae,Sye as af,xye as ag,wye as ah,Oye as ai,Gye as aj,Tye as ak,Cye as al,Uye as am,kye as an,Kve as ao,Fve as ap,Aye as aq,Or as ar,mye as as,J as at,gye as au,hn as av,Bu as aw,j0e as b,D0e as c,oye as d,ar as e,ate as f,tye as g,sye as h,V0e as i,rye as j,cte as k,I0e as l,J0e as m,Z0e as n,K0e as o,Q0e as p,fte as q,$0e as r,W4 as s,ne as t,H0e as u,Y0e as v,Doe as w,X0e as x,q0e as y,cye as z};
